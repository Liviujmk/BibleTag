{"version":3,"sources":["webpack://sql-bindings-vscode/./node_modules/@microsoft/ads-extension-telemetry/lib/telemetryReporter.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.scandir/out/adapters/fs.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.scandir/out/constants.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.scandir/out/index.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.scandir/out/providers/async.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.scandir/out/providers/common.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.scandir/out/providers/sync.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.scandir/out/settings.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.scandir/out/utils/fs.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.scandir/out/utils/index.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.stat/out/adapters/fs.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.stat/out/index.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.stat/out/providers/async.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.stat/out/providers/sync.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.stat/out/settings.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.walk/out/index.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.walk/out/providers/async.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.walk/out/providers/stream.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.walk/out/providers/sync.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.walk/out/readers/async.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.walk/out/readers/common.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.walk/out/readers/reader.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.walk/out/readers/sync.js","webpack://sql-bindings-vscode/./node_modules/@nodelib/fs.walk/out/settings.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/Console.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/CorrelationContextManager.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/Exceptions.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/HttpDependencies.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/HttpDependencyParser.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/HttpRequestParser.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/HttpRequests.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/NativePerformance.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/Performance.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/RequestParser.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/bunyan.sub.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/console.sub.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/initialization.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mongodb.sub.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mysql.sub.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/postgres.sub.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/redis.sub.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/winston.sub.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Constants.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Constants.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/AvailabilityData.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Base.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ContextTagKeys.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Data.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPoint.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPointType.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Domain.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Envelope.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/EventData.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionData.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionDetails.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MessageData.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MetricData.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/PageViewData.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RemoteDependencyData.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RequestData.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/SeverityLevel.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/StackFrame.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/index.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TelemetryType.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/index.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Declarations/Contracts/index.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/Channel.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/Config.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/ConnectionStringParser.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/Context.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/CorrelationIdManager.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/EnvelopeFactory.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/Logging.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/NodeClient.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/QuickPulseEnvelopeFactory.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/QuickPulseSender.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/QuickPulseStateManager.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/RequestResponseHeaders.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/Sender.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/TelemetryClient.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/Traceparent.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/Tracestate.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/Library/Util.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/TelemetryProcessors/PerformanceMetricsTelemetryProcessor.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/TelemetryProcessors/SamplingTelemetryProcessor.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/TelemetryProcessors/index.js","webpack://sql-bindings-vscode/./node_modules/applicationinsights/out/applicationinsights.js","webpack://sql-bindings-vscode/./node_modules/async-hook-jl/async-hook.js","webpack://sql-bindings-vscode/./node_modules/async-hook-jl/index.js","webpack://sql-bindings-vscode/./node_modules/async-hook-jl/patches/next-tick.js","webpack://sql-bindings-vscode/./node_modules/async-hook-jl/patches/promise.js","webpack://sql-bindings-vscode/./node_modules/async-hook-jl/patches/timers.js","webpack://sql-bindings-vscode/./node_modules/async-listener/es6-wrapped-promise.js","webpack://sql-bindings-vscode/./node_modules/async-listener/glue.js","webpack://sql-bindings-vscode/./node_modules/async-listener/index.js","webpack://sql-bindings-vscode/./node_modules/braces/index.js","webpack://sql-bindings-vscode/./node_modules/braces/lib/compile.js","webpack://sql-bindings-vscode/./node_modules/braces/lib/constants.js","webpack://sql-bindings-vscode/./node_modules/braces/lib/expand.js","webpack://sql-bindings-vscode/./node_modules/braces/lib/parse.js","webpack://sql-bindings-vscode/./node_modules/braces/lib/stringify.js","webpack://sql-bindings-vscode/./node_modules/braces/lib/utils.js","webpack://sql-bindings-vscode/./node_modules/cls-hooked/context-legacy.js","webpack://sql-bindings-vscode/./node_modules/cls-hooked/context.js","webpack://sql-bindings-vscode/./node_modules/cls-hooked/index.js","webpack://sql-bindings-vscode/./node_modules/continuation-local-storage/context.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/azure-coretracing.pub.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/bunyan.pub.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/console.pub.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/index.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/mongodb-core.pub.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/mongodb.pub.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/mysql.pub.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/pg-pool.pub.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/pg.pub.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/redis.pub.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/tedious.pub.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel-publishers/dist/src/winston.pub.js","webpack://sql-bindings-vscode//__w/1/s/extensions/sql-bindings/node_modules/diagnostic-channel-publishers/dist/src|sync|/^.*\\/lib\\/Connection$/","webpack://sql-bindings-vscode//__w/1/s/extensions/sql-bindings/node_modules/diagnostic-channel-publishers/dist/src|sync|/^.*\\/lib\\/Pool$/","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel/dist/src/channel.js","webpack://sql-bindings-vscode/./node_modules/diagnostic-channel/dist/src/patchRequire.js","webpack://sql-bindings-vscode/./node_modules/emitter-listener/listener.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/index.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/managers/patterns.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/managers/tasks.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/providers/async.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/providers/filters/deep.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/providers/filters/entry.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/providers/filters/error.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/providers/matchers/matcher.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/providers/matchers/partial.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/providers/provider.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/providers/stream.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/providers/sync.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/providers/transformers/entry.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/readers/reader.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/readers/stream.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/readers/sync.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/settings.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/utils/array.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/utils/errno.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/utils/fs.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/utils/index.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/utils/path.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/utils/pattern.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/utils/stream.js","webpack://sql-bindings-vscode/./node_modules/fast-glob/out/utils/string.js","webpack://sql-bindings-vscode/./node_modules/fastq/queue.js","webpack://sql-bindings-vscode/./node_modules/fill-range/index.js","webpack://sql-bindings-vscode/./node_modules/glob-parent/index.js","webpack://sql-bindings-vscode/./node_modules/is-extglob/index.js","webpack://sql-bindings-vscode/./node_modules/is-glob/index.js","webpack://sql-bindings-vscode/./node_modules/is-number/index.js","webpack://sql-bindings-vscode/./node_modules/merge2/index.js","webpack://sql-bindings-vscode/./node_modules/micromatch/index.js","webpack://sql-bindings-vscode/./node_modules/picomatch/index.js","webpack://sql-bindings-vscode/./node_modules/picomatch/lib/constants.js","webpack://sql-bindings-vscode/./node_modules/picomatch/lib/parse.js","webpack://sql-bindings-vscode/./node_modules/picomatch/lib/picomatch.js","webpack://sql-bindings-vscode/./node_modules/picomatch/lib/scan.js","webpack://sql-bindings-vscode/./node_modules/picomatch/lib/utils.js","webpack://sql-bindings-vscode/./node_modules/queue-microtask/index.js","webpack://sql-bindings-vscode/./node_modules/reusify/reusify.js","webpack://sql-bindings-vscode/./node_modules/run-parallel/index.js","webpack://sql-bindings-vscode/./node_modules/semver/semver.js","webpack://sql-bindings-vscode/./node_modules/shimmer/index.js","webpack://sql-bindings-vscode/./node_modules/stack-chain/format.js","webpack://sql-bindings-vscode/./node_modules/stack-chain/index.js","webpack://sql-bindings-vscode/./node_modules/stack-chain/stack-chain.js","webpack://sql-bindings-vscode/./node_modules/to-regex-range/index.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/rng.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/regex.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/validate.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/stringify.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/v1.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/parse.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/v35.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/md5.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/v3.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/v4.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/v5.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/sha1.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/nil.js","webpack://sql-bindings-vscode/./node_modules/uuid/dist/esm-node/version.js","webpack://sql-bindings-vscode/./node_modules/vscode-extension-telemetry/lib/telemetryReporter.js","webpack://sql-bindings-vscode/./node_modules/vscode-jsonrpc/lib/cancellation.js","webpack://sql-bindings-vscode/./node_modules/vscode-jsonrpc/lib/events.js","webpack://sql-bindings-vscode/./node_modules/vscode-jsonrpc/lib/is.js","webpack://sql-bindings-vscode/./node_modules/vscode-jsonrpc/lib/linkedMap.js","webpack://sql-bindings-vscode/./node_modules/vscode-jsonrpc/lib/main.js","webpack://sql-bindings-vscode/./node_modules/vscode-jsonrpc/lib/messageReader.js","webpack://sql-bindings-vscode/./node_modules/vscode-jsonrpc/lib/messageWriter.js","webpack://sql-bindings-vscode/./node_modules/vscode-jsonrpc/lib/messages.js","webpack://sql-bindings-vscode/./node_modules/vscode-jsonrpc/lib/pipeSupport.js","webpack://sql-bindings-vscode/./node_modules/vscode-jsonrpc/lib/socketSupport.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/client.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/codeConverter.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/colorProvider.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/configuration.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/declaration.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/foldingRange.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/implementation.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/main.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/protocolCodeLens.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/protocolCompletionItem.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/protocolConverter.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/protocolDocumentLink.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/typeDefinition.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/utils/async.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/utils/is.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/utils/processes.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/utils/uuid.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageclient/lib/workspaceFolders.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageserver-protocol/lib/main.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageserver-protocol/lib/protocol.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageserver-protocol/lib/utils/is.js","webpack://sql-bindings-vscode/./node_modules/vscode-languageserver-types/lib/esm/main.js","webpack://sql-bindings-vscode/./node_modules/vscode-nls/lib/main.js","webpack://sql-bindings-vscode/./src/common/azureFunctionsUtils.ts","webpack://sql-bindings-vscode/./src/common/constants.ts","webpack://sql-bindings-vscode/./src/common/telemetry.ts","webpack://sql-bindings-vscode/./src/common/utils.ts","webpack://sql-bindings-vscode/./src/contracts/azureFunctions/azureFunctionsContracts.ts","webpack://sql-bindings-vscode/./src/createNewProject/addConnectionStringStep.ts","webpack://sql-bindings-vscode/./src/dialogs/addSqlBindingQuickpick.ts","webpack://sql-bindings-vscode/./src/services/azureFunctionsService.ts","webpack://sql-bindings-vscode/external \"@opentelemetry/tracing\"","webpack://sql-bindings-vscode/external \"applicationinsights-native-metrics\"","webpack://sql-bindings-vscode/external \"assert\"","webpack://sql-bindings-vscode/external \"async_hooks\"","webpack://sql-bindings-vscode/external \"azdata\"","webpack://sql-bindings-vscode/external \"child_process\"","webpack://sql-bindings-vscode/external \"console\"","webpack://sql-bindings-vscode/external \"constants\"","webpack://sql-bindings-vscode/external \"crypto\"","webpack://sql-bindings-vscode/external \"dns\"","webpack://sql-bindings-vscode/external \"events\"","webpack://sql-bindings-vscode/external \"fs\"","webpack://sql-bindings-vscode/external \"http\"","webpack://sql-bindings-vscode/external \"https\"","webpack://sql-bindings-vscode/external \"module\"","webpack://sql-bindings-vscode/external \"net\"","webpack://sql-bindings-vscode/external \"os\"","webpack://sql-bindings-vscode/external \"path\"","webpack://sql-bindings-vscode/external \"stream\"","webpack://sql-bindings-vscode/external \"timers\"","webpack://sql-bindings-vscode/external \"url\"","webpack://sql-bindings-vscode/external \"util\"","webpack://sql-bindings-vscode/external \"vscode\"","webpack://sql-bindings-vscode/external \"zlib\"","webpack://sql-bindings-vscode/webpack/bootstrap","webpack://sql-bindings-vscode/webpack/runtime/compat get default export","webpack://sql-bindings-vscode/webpack/runtime/define property getters","webpack://sql-bindings-vscode/webpack/runtime/hasOwnProperty shorthand","webpack://sql-bindings-vscode/webpack/runtime/make namespace object","webpack://sql-bindings-vscode/./src/extension.ts"],"names":["Object","defineProperty","exports","value","vscode_extension_telemetry_1","commonProperties","azdata","version","err","TelemetryEventImpl","constructor","reporter","eventName","properties","measurements","this","assign","send","sendTelemetryEvent","e","msg","Error","message","console","error","withAdditionalProperties","additionalProperties","withAdditionalMeasurements","additionalMeasurements","withConnectionInfo","connectionInfo","authenticationType","providerName","serverType","engineType","default","extensionId","extensionVersion","key","_telemetryReporter","createViewEvent","view","sendViewEvent","createActionEvent","action","target","source","durationInMs","measures","sendActionEvent","createMetricsEvent","metrics","groupName","sendMetricsEvent","createErrorEvent","name","errorCode","errorType","sendErrorEvent","createTelemetryEvent","dispose","createFileSystemAdapter","FILE_SYSTEM_ADAPTER","fs","lstat","stat","lstatSync","statSync","readdir","readdirSync","fsMethods","undefined","IS_SUPPORT_READDIR_WITH_FILE_TYPES","NODE_PROCESS_VERSION_PARTS","process","versions","node","split","MAJOR_VERSION","Number","parseInt","MINOR_VERSION","IS_MATCHED_BY_MAJOR","IS_MATCHED_BY_MAJOR_AND_MINOR","Settings","scandirSync","scandir","async","sync","settings_1","getSettings","settingsOrOptions","path","optionsOrSettingsOrCallback","callback","read","optionsOrSettings","settings","readdirWithFileTypes","fsStat","rpl","constants_1","utils","common","directory","withFileTypes","readdirError","dirents","callFailureCallback","entries","map","dirent","joinPathSegments","pathSegmentSeparator","followSymbolicLinks","callSuccessCallback","tasks","entry","done","isSymbolicLink","statError","stats","throwErrorOnBrokenSymbolicLink","createDirentFromStats","makeRplTaskEntry","rplError","rplEntries","names","fsStatSettings","result","a","b","separator","endsWith","entryPath","_options","_getValue","sep","followSymbolicLink","option","DirentFromStats","isBlockDevice","bind","isCharacterDevice","isDirectory","isFIFO","isFile","isSocket","lstatError","markSymbolicLink","walkStream","walkSync","walk","async_1","stream_1","sync_1","_root","_settings","_reader","_storage","onError","onEntry","push","onEnd","_stream","Readable","objectMode","destroy","isDestroyed","emit","events_1","fsScandir","fastq","reader_1","AsyncReader","super","_scandir","_emitter","EventEmitter","_queue","_worker","concurrency","_isFatalError","_isDestroyed","drain","setImmediate","_pushToQueue","basePath","killAndDrain","on","once","base","queueItem","_handleError","item","fsScandirSettings","_handleEntry","isFatalError","fullpath","isAppliedFilter","entryFilter","_emitEntry","deepFilter","replacePathSegmentSeparator","errorFilter","filter","filepath","join","SyncReader","arguments","Set","_handleQueue","add","values","_handleDirectory","_pushToStorage","POSITIVE_INFINITY","DiagChannel","AutoCollectConsole","client","INSTANCE","_client","prototype","enable","isEnabled","collectConsoleLog","IsInitialized","isInitialized","_isInitialized","_methodNames","module","Logging","CorrelationContextManager","getCurrentContext","enabled","context","session","get","CONTEXT_NAME","generateContextObject","operationId","parentId","operationName","correlationContextHeader","traceparent","tracestate","operation","id","customProperties","CustomPropertiesImpl","runWithContext","fn","_a","wrapEmitter","emitter","bindEmitter","wrapCallback","forceClsHooked","isNodeVersionCompatible","hasEverEnabled","cls","shouldUseClsHooked","createNamespace","registerContextPreservation","cb","disable","reset","nodeVer","canUseClsHooked","greater800","less820","greater470","header","props","addHeaderData","keyvals","keyval","parts","concat","serializeToHeader","getProperty","prop","i","length","setProperty","val","bannedCharacters","test","warn","AutoCollectExceptions","_canUseUncaughtExceptionMonitor","_this","_exceptionListenerHandle","handle","reThrow","_FALLBACK_ERROR_MESSAGE","trackException","exception","flush","isAppCrashing","listeners","exit","UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME","UNCAUGHT_EXCEPTION_HANDLER_NAME","_rejectionListenerHandle","UNHANDLED_REJECTION_HANDLER_NAME","removeListener","_RETHROW_EXIT_MESSAGE","http","https","Util","RequestResponseHeaders","HttpDependencyParser","CorrelationContextManager_1","CorrelationIdManager","Traceparent","AutoCollectHttpDependencies","_isEnabled","_initialize","originalRequest","request","originalHttpsRequest","clientRequestPatch","options","shouldCollect","disableCollectionRequestOption","alreadyAutoCollectedFlag","trackRequest","requestArgs","_i","call","apply","end","telemetry","uniqueRequestId","uniqueTraceparent","requestParser","currentContext","isValidTraceId","traceId","updateSpanId","getBackCompatRequestId","w3cEnabled","toString","requestNumber","canIncludeCorrelationHeader","getUrl","getHeader","setHeader","config","correlationId","correlationHeader","requestContextHeader","safeIncludeCorrelationHeader","requestIdHeader","parentIdHeader","rootIdHeader","traceparentHeader","traceStateHeader","response","onResponse","dependencyTelemetry","getDependencyTelemetry","contextObjects","trackDependency","info","extendStatics","__extends","setPrototypeOf","__proto__","Array","d","p","hasOwnProperty","__","create","url","Contracts","RequestParser","_super","requestOptions","method","_getUrlFromRequestOptions","startTime","Date","_setStatus","statusCode","getCorrelationContextTarget","requestContextTargetKey","baseTelemetry","dependencyId","urlObject","parse","search","hash","dependencyName","toUpperCase","pathname","remoteDependencyType","RemoteDependencyDataConstants","TYPE_HTTP","remoteDependencyTarget","hostname","TYPE_AI","correlationIdPrefix","port","data","duration","success","_isSuccess","resultCode","dependencyTypeName","originalOptions_1","keys","forEach","parsedQuery","host","protocol","agent","format","Tracestate","HttpRequestParser","requestId","_getAbsoluteUrl","socketRemoteAddress","socket","remoteAddress","parseHeaders","connection","connectionRemoteAddress","legacySocketRemoteAddress","ellapsedMilliseconds","getRequestTelemetry","requestTelemetry","sourceCorrelationId","getRequestTags","tags","newTags","locationIp","_getIp","sessionId","_getId","userId","userAuthUserId","getOperationName","operationParentId","getOperationParentId","getOperationId","getRequestId","getCorrelationContextHeader","getTraceparent","getTracestate","getLegacyRootId","legacyRootId","headers","encrypted","requestUrl","pathName","ipMatch","check","str","results","exec","ip","rawHeaders","substr","cookie","parseId","getCookie","setBackCompatFromThisTraceContext","userAgent","requestContextSourceKey","tracestateHeader","legacy_parentId","legacy_rootId","generateRequestId","getRootId","cookieValue","cookieParts","ContextTagKeys","AutoCollectPerformance","AutoCollectHttpRequests","_isAutoCorrelating","useAutoCorrelation","isAutoCorrelating","_generateCorrelationContext","wrapOnRequestHandler","onRequest","requestParser_1","correlationContext","wrapServerEventHandler","server","originalAddListener","addListener","eventType","eventHandler","originalHttpServer","createServer","originalHttpsServer","trackRequestSync","addResponseCorrelationIdHeader","endRequest","_requestParser","headersSent","tagOverrides","__assign","t","s","n","Config","Context","AutoCollectNativePerformance","_disabledMetrics","disabledMetrics","collectionInterval","_metricsAvailable","NativeMetricsEmitters","_handle","setInterval","_trackNativeMetrics","unref","clearInterval","parseEnabled","collectExtendedMetrics","disableAll","env","ENV_nativeMetricsDisableAll","individualOptOuts","ENV_nativeMetricsDisablers","optOutsArr","optOutsArr_1","shouldSendAll","_trackGarbageCollection","_trackEventLoop","_trackHeapUsage","gc","gcData","getGCData","name_1","stdDev","Math","sqrt","sumSquares","count","pow","total","trackMetric","max","min","internalSdkVersion","sdkVersion","loop","getLoopData","loopUsage","heap","_b","_c","memoryUsage","heapUsed","heapTotal","rss","os","Constants","enableLiveMetricsCounters","_lastIntervalRequestExecutionTime","_lastIntervalDependencyExecutionTime","_collectionInterval","_enableLiveMetricsCounters","_lastCpus","cpus","_lastRequests","totalRequestCount","_totalRequestCount","totalFailedRequestCount","_totalFailedRequestCount","time","_lastDependencies","totalDependencyCount","_totalDependencyCount","totalFailedDependencyCount","_totalFailedDependencyCount","_lastExceptions","totalExceptionCount","_totalExceptionCount","cpuUsage","_lastAppCpuUsage","_lastHrtime","hrtime","trackPerformance","countRequest","durationMs","_intervalRequestExecutionTime","countException","countDependency","_intervalDependencyExecutionTime","_trackCpu","_trackMemory","_trackNetwork","_trackDependencyRate","_trackExceptionRate","totalUser","totalSys","totalNice","totalIdle","totalIrq","cpu","lastCpu","times","model","speed","lastTimes","user","sys","nice","idle","irq","appCpuPercent","appCpuUsage","totalApp","system","combinedTotal","PerformanceCounter","PROCESSOR_TIME","PROCESS_TIME","freeMem","freemem","usedMem","committedMemory","totalmem","PRIVATE_BYTES","AVAILABLE_BYTES","QuickPulseCounter","COMMITTED_BYTES","lastRequests","requests","intervalRequests","intervalFailedRequests","elapsedMs","elapsedSeconds","averageRequestExecutionTime","requestsPerSec","failedRequestsPerSec","REQUEST_RATE","REQUEST_DURATION","REQUEST_FAILURE_RATE","lastDependencies","dependencies","intervalDependencies","intervalFailedDependencies","averageDependencyExecutionTime","dependenciesPerSec","failedDependenciesPerSec","DEPENDENCY_RATE","DEPENDENCY_FAILURE_RATE","DEPENDENCY_DURATION","lastExceptions","exceptions","intervalExceptions","exceptionsPerSec","EXCEPTION_RATE","_lastRequestExecutionTime","_lastDependencyExecutionTime","status","endTime","Contracts_1","diagnostic_channel_1","clients","bunyanToAILevelMap","SeverityLevel","Verbose","Information","Warning","Critical","subscriber","event","AIlevel","level","trackTrace","severity","channel","subscribe","c","unsubscribe","lastIndexOf","substring","stderr","TAG","publishers","unpatchedModules","modules","bunyan","mongodb","mongodbCore","mysql","redis","pg","pgPool","winston","mod","indexOf","commandName","dbName","startedData","databaseName","succeeded","queryObj","query","sqlString","sql","connectionConfig","_connection","socketPath","q","preparable","text","plan","conn","database","commandObj","command","address","winstonToAILevelMap","syslog","og","emerg","alert","crit","warning","notice","debug","npm","verbose","silly","unknown","meta","levelKind","DEFAULT_BREEZE_ENDPOINT","DEFAULT_LIVEMETRICS_ENDPOINT","DEFAULT_LIVEMETRICS_HOST","PerformanceToQuickPulseCounter","QuickPulseDocumentType","Event","Exception","Trace","Metric","Request","Dependency","Availability","QuickPulseType","TelemetryTypeStringToQuickPulseType","EventData","ExceptionData","MessageData","MetricData","RequestData","RemoteDependencyData","AvailabilityData","TelemetryTypeStringToQuickPulseDocumentType","Generated_1","domainSupportsProperties","domain","PageViewData","ver","applicationVersion","deviceId","deviceLocale","deviceModel","deviceOEMName","deviceOSVersion","deviceType","operationSyntheticSource","operationCorrelationVector","sessionIsFirst","userAccountId","cloudRole","cloudRoleInstance","internalAgentVersion","internalNodeName","Data","DataPointType","kind","Measurement","sampleRate","hasFullStack","parsedStack","Base","DataPoint","Domain","Envelope","ExceptionDetails","StackFrame","TelemetryType","telemetryTypeToBaseType","type","baseTypeToTelemetryType","baseType","TelemetryTypeString","m","__export","Channel","isDisabled","getBatchSize","getBatchIntervalMs","sender","_buffer","_lastSend","_isDisabled","_getBatchSize","_getBatchIntervalMs","_sender","setUseDiskRetryCaching","resendInterval","maxBytesOnDisk","setDiskRetryMode","envelope","payload","_stringify","triggerSend","_timeoutHandle","setTimeout","isNodeCrashing","bufferIsEmpty","batch","saveOnCrash","Buffer","from","clearTimeout","JSON","stringify","ConnectionStringParser","setupString","endpointBase","connectionStringEnv","ENV_connectionString","csCode","csEnv","iKeyCode","instrumentationkey","instrumentationKey","_getInstrumentationKey","endpointUrl","ingestionendpoint","maxBatchSize","maxBatchIntervalMs","disableAppInsights","samplingPercentage","correlationIdRetryIntervalMs","correlationHeaderExcludedDomains","setCorrelationId","proxyHttpUrl","ENV_http_proxy","proxyHttpsUrl","ENV_https_proxy","httpAgent","httpsAgent","profileQueryEndpoint","ENV_profileQueryEndpoint","_quickPulseHost","liveendpoint","ENV_quickPulseHost","match","_profileQueryEndpoint","set","endpoint","cancelCorrelationIdQuery","queryCorrelationId","enumerable","configurable","iKey","ENV_iKey","ENV_azurePrefix","legacy_ENV_iKey","connectionString","_FIELDS_SEPARATOR","reduce","fields","kv","kvParts","_FIELD_KEY_VALUE_SEPARATOR","toLowerCase","endpointsuffix","locationPrefix","location","packageJsonPath","_loadApplicationContext","_loadDeviceContext","_loadInternalContext","resolve","__dirname","appVersion","packageJson","readFileSync","release","DefaultRoleName","arch","platform","appIdUrlString","completedLookups","pendingLookups","fetchAppId","disableAppInsightsAutoCollection","req","makeRequest","res","appId_1","setEncoding","suffix","currentRootId","appendSuffix","generateRootId","endIndex","startIndex","w3cTraceId","delimiter","requestIdMaxLength","trimPosition","randomu32","EnvelopeFactory","createEnvelope","telemetryType","createTraceData","createDependencyData","createEventData","createExceptionData","createRequestData","createMetricData","createAvailabilityData","baseData","validateStringMap","replace","getTags","toISOString","trace","isNaN","severityLevel","remoteDependency","slice","msToTimeSpan","stack","exceptionDetails","typeName","parseStack","isArray","requestData","responseCode","metric","Aggregation","availabilityData","runLocation","frames","totalSizeInBytes","frame","_StackFrame","regex","parsedFrame","sizeInBytes","left","right","size","acceptedLeft","acceptedRight","howMany","splice","assembly","trim","matches","fileName","line","baseSize","optionalParams","enableDebug","disableWarnings","disableErrors","TelemetryClient","ServerRequestTracking","ClientRequestTracking","NodeClient","trackNodeHttpRequestSync","trackNodeHttpRequest","trackNodeHttpDependency","StreamId","QuickPulseEnvelopeFactory","createQuickPulseEnvelope","documents","machineName","instance","Documents","InstrumentationKey","Metrics","InvariantVersion","Timestamp","now","Version","MachineName","Instance","createQuickPulseMetric","Name","Value","Weight","telemetryEnvelopeToQuickPulseDocument","createQuickPulseEventDocument","createQuickPulseExceptionDocument","createQuickPulseTraceDocument","createQuickPulseDependencyDocument","createQuickPulseRequestDocument","document","createQuickPulseDocument","Message","exceptionMessage","exceptionType","ExceptionMessage","ExceptionType","Success","Duration","ResponseCode","OperationName","Target","ResultCode","CommandName","OperationId","DependencyTypeName","documentType","__type","DocumentType","Properties","aggregateProperties","meas","property","QuickPulseSender","_config","_consecutiveErrors","ping","_submitData","post","postOrPing","quickPulseHost","byteLength","shouldPOSTData","MAX_QPS_FAILURES_BEFORE_WARN","write","QuickPulseStateManager","_isCollectingData","_lastSuccessTime","_lastSendSucceeded","_metrics","_documents","_collectors","addCollector","collector","_addMetric","addDocument","_goQuickPulse","enableCollectors","_resetQuickPulseBuffer","k","_post","_ping","currentTimeout","POST_INTERVAL","PING_INTERVAL","MAX_POST_WAIT_TIME","FALLBACK_INTERVAL","MAX_PING_WAIT_TIME","_quickPulseDone","shouldPOST","zlib","child_process","Sender","onSuccess","_onSuccess","_onError","_enableDiskRetryMode","_resendInterval","WAIT_BETWEEN_RESEND","_maxBytesOnDisk","MAX_BYTES_ON_DISK","_numConsecutiveFailures","OS_PROVIDES_FILE_PROTECTION","USE_ICACLS","existsSync","ICACLS_PATH","floor","withCredentials","gzip","buffer","dataToSend","responseString","_sendFirstFileOnDisk","_storeToDisk","MAX_CONNECTION_FAILURES_BEFORE_WARN","_onErrorHelper","errorMessage","_storeToDiskSync","_runICACLS","args","aclProc","spawn","windowsHide","code","signal","_runICACLSSync","spawnSync","_getACLIdentity","ACL_IDENTITY","psProc","POWERSHELL_PATH","stdio","stdout","_getACLIdentitySync","_getACLArguments","identity","_applyACLRules","ACLED_DIRECTORIES","_applyACLRulesSync","_confirmDirExists","mkdir","_getShallowDirectorySize","files","totalSize","fileStats","_getShallowDirectorySizeSync","tmpdir","TEMPDIR_PREFIX","getTime","fileFullPath","writeFile","mode","mkdirSync","dirSize","writeFileSync","tempDir","exists","f","basename","firstFile","filePath","readFile","unlink","systemdrive","TelemetryProcessors","_telemetryProcessors","trackAvailability","track","isError","trackEvent","accepted","runTelemetryProcessors","samplingTelemetryProcessor","performanceMetricsTelemetryProcessor","quickPulseClient","addTelemetryProcessor","telemetryProcessor","clearTelemetryProcessors","telemetryProcessorsCount","processor","traceFlag","DEFAULT_TRACE_FLAG","DEFAULT_VERSION","spanId","traceparentArr","len","isValidSpanId","fieldmap","parseHeader","fieldarr","validateKeyChars","keyParts","tenant","vendor","tenantValid","Boolean","vendorValid","keydeduper","parts_1","part","pair","strict","constants","cookieName","cookies","int32ArrayToBase64","array","toChar","v","String","fromCharCode","x","random32","random","tmp","hexValues","oct","clockSequenceHi","isValidW3CId","obj","isPrimitive","input","propType","isDate","totalms","sec","toFixed","hour","days","extractError","looseError","extractObject","origProperty","toJSON","field","stringTarget","MAX_PROPERTY_LENGTH","excludedDomains","RegExp","contextHeaders","keyValues","keyValue","requestCallback","requestUrlParsed","proxyUrl","proxyUrlParsed","Host","isHttps","tlsRestrictedAgent","addCorrelationIdHeaderFromString","components","some","Agent","secureOptions","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","remoteDependencyData","getSamplingHashCode","csharpMax","charCodeAt","abs","DistributedTracingModes","QuickPulseClient","NativePerformance_1","_forceClsHooked","_disabledExtendedMetrics","_console","_exceptions","_performance","_nativePerformance","_serverRequests","_clientRequests","_performanceLiveMetrics","_isConsole","_isConsoleLog","_isExceptions","_isPerformance","_isRequests","_isDependencies","_isDiskRetry","_isCorrelating","_isSendingLiveMetrics","_isNativePerformance","_diskRetryInterval","_diskRetryMaxBytes","_isStarted","start","defaultClient","liveMetricsClient","Configuration","setup","getCorrelationContext","wrapWithCorrelationContext","setDistributedTracingMode","AI_AND_W3C","setAutoCollectConsole","setAutoCollectExceptions","setAutoCollectPerformance","extendedMetricsConfig","setAutoCollectRequests","setAutoCollectDependencies","setAutoDependencyCorrelation","useAsyncHooks","setInternalLogging","enableDebugLogging","enableWarningLogging","setSendLiveMetrics","asyncWrap","binding","TIMERWRAP","Providers","patchs","ignoreUIDs","State","counter","Hooks","initFns","preFns","postFns","destroyFns","init","uid","provider","parentUid","parentHandle","hook","pre","has","didThrow","delete","removeElement","index","AsyncHook","_state","_hooks","providers","setupHooks","hooks","remove","addHooks","removeHooks","global","_asyncHook","attach","callSite","filename","getFileName","NextTickWrap","state","oldNextTick","nextTick","TypeError","listenerCount","PromiseWrap","Promise","oldThen","then","makeWrappedHandler","isOnFulfilled","makeUnhandledResolutionHandler","makeUnhandledRejectionHandler","onFulfilled","onRejected","timers","TimeoutWrap","IntervalWrap","ImmediateWrap","timeoutMap","Map","intervalMap","ImmediateMap","activeCallback","clearedInCallback","patchTimer","setFn","clearFn","Handle","timerMap","singleCall","oldSetFn","oldClearFn","timerId","clearImmediate","ensureAslWrapper","executor","reject","promise","asyncCatcher","wrap","inAsyncTick","listenerStack","union","dest","added","destLength","addedLength","returned","j","missing","_fatalException","errorValues","inErrorTick","er","handled","listener","flags","pop","original","list","before","after","errorThrew","threw","_originalNextTick","AsyncListener","callbacks","createAsyncListener","addAsyncListener","registered","removeAsyncListener","simpleWrap","shimmer","semver","massWrap","util","v6plus","gte","v7plus","v8plus","v11plus","net","wrapSetUpListenHandle","onread","onconnection","patchOnRead","ctx","_originalOnread","_normalizeArgs","arg0","_normalizeConnectArgs","Server","Socket","getOwnPropertySymbols","onSocket","childProcess","wrapChildProcess","child","activatorFirst","onexit","ChildProcess","processors","_nextDomainTick","_tickDomainCallback","activator","asynchronizers","patchGlobalTimers","dns","resolveNaptr","crypto","lchown","lchmod","ftruncate","Deflate","proto","getPrototypeOf","_transform","toWrap","instrumentPromise","promiseListener","fallback","cbIdx","wrappedPromise","overwrite","__asl_wrapper","propagateAslWrapper","next","nextResult","returnVal","errorVal","wrapThen","last","inherits","chain","wrapPromise","compile","expand","braces","output","pattern","nodupes","noempty","fill","ast","parent","invalidBlock","isInvalidBrace","invalidNode","invalid","escapeInvalid","prefix","isOpen","isClose","prev","nodes","ranges","range","toRegex","MAX_LENGTH","CHAR_0","CHAR_9","CHAR_UPPERCASE_A","CHAR_LOWERCASE_A","CHAR_UPPERCASE_Z","CHAR_LOWERCASE_Z","CHAR_LEFT_PARENTHESES","CHAR_RIGHT_PARENTHESES","CHAR_ASTERISK","CHAR_AMPERSAND","CHAR_AT","CHAR_BACKSLASH","CHAR_BACKTICK","CHAR_CARRIAGE_RETURN","CHAR_CIRCUMFLEX_ACCENT","CHAR_COLON","CHAR_COMMA","CHAR_DOLLAR","CHAR_DOT","CHAR_DOUBLE_QUOTE","CHAR_EQUAL","CHAR_EXCLAMATION_MARK","CHAR_FORM_FEED","CHAR_FORWARD_SLASH","CHAR_HASH","CHAR_HYPHEN_MINUS","CHAR_LEFT_ANGLE_BRACKET","CHAR_LEFT_CURLY_BRACE","CHAR_LEFT_SQUARE_BRACKET","CHAR_LINE_FEED","CHAR_NO_BREAK_SPACE","CHAR_PERCENT","CHAR_PLUS","CHAR_QUESTION_MARK","CHAR_RIGHT_ANGLE_BRACKET","CHAR_RIGHT_CURLY_BRACE","CHAR_RIGHT_SQUARE_BRACKET","CHAR_SEMICOLON","CHAR_SINGLE_QUOTE","CHAR_SPACE","CHAR_TAB","CHAR_UNDERSCORE","CHAR_VERTICAL_LINE","CHAR_ZERO_WIDTH_NOBREAK_SPACE","append","queue","stash","enclose","flatten","ele","rangeLimit","dollar","exceedsLimit","step","RangeError","encloseBrace","block","opts","maxLength","SyntaxError","brackets","depth","advance","open","shift","commas","siblings","close","keepQuotes","keepEscaping","isOpenOrClose","isInteger","num","find","limit","escapeNode","escaped","acc","flat","arr","assert","asyncHook","ERROR_SYMBOL","invertedProviders","DEBUG_CLS_HOOKED","currentUid","Namespace","active","_set","_contexts","getNamespace","namespaces","destroyNamespace","namespace","ok","inspect","debug2","DEBUG","_rawDebug","getFunctionName","enter","createContext","_ns_name","run","runAndReturn","runPromise","catch","self","thisSymbol","CONTEXTS_SYMBOL","unwrapped","wrapped","unwrappedContexts","thunk","fromException","stackChain","modifier","_modifiers","deattach","async_hooks","_indent","createHook","asyncId","triggerId","resource","executionAsyncId","repeat","showHidden","colors","triggerAsyncId","triggerIdContext","asyncHooksCurrentId","indentStr","currentId","contexts","storage","AzureMonitorSymbol","AzureMonitorSpanProcessor","onStart","span","publish","shutdown","azureCoreTracing","versionSpecifier","patch","coreTracing","tracer_1","BasicTracer","spanContextPropagator","scopeManager","startSpanOriginal_1","startSpan","parentOperation","getCurrentSpan","addEvent","addSpanProcessor","setTracer","registerMonkeyPatch","originalBunyan","originalEmit","_emit","rec","noemit","ret","originalConsole","aiLoggingOutStream","Writable","aiLoggingErrStream","chunk","aiLoggingConsole","Console","_loop_1","originalMethod","consoleMethods_1","azuresdk","consolePub","tedious","mongoCore","originalMongoCore","originalConnect","connect","originalWrite","pool","cbidx","bindToContext","originalLogout","logout","mongo2","originalMongo","instrument","operationIdGenerator","eventMap","mongo3","contextMap","mongo330","coreTopology","mongodbcorePatchFunction","originalMysql","originalMysqlPath","patchObjectFunction","func","cbWrapper","originalFunc","resultContainer","startDate","patchClassMemberFunction","classObject","connectionClass","dirname","hrDuration","callbackArgs","poolClass","postgresPool1","originalPgPool","postgres6","originalPg","originalPgPath","originalClientQuery","Client","diagnosticOriginalFunc","queryResult","connectionParameters","patchCallback","trackingCallback","rowCount","ceil","postgres7","callbackProvided","_Promise","originalRedis","originalSend","RedisClient","internal_send_command","cb_1","pubsubBound","address_1","startTime_1","startDate_1","originalTedious","originalMakeRequest","Connection","getPatchedCallback","origCallback","rows","parametersByName","statement","__rest","winston3","originalWinston","AppInsightsTransport","log","splat","Symbol","levels","mapLevelToKind","Transport","patchedConfigure","lastLevel","origCreate","createLogger","origConfigure","configure","origRootConfigure","winston2","curLevels","originalLog","Logger","loggingFilter","filters","webpackEmptyContext","patchRequire_1","patchRequire_2","makePatchingRequire","trueFilter","publishing","ContextPreservingEventEmitter","subscribers","contextPreservationFunction","knownPatches","currentlyPublishing","shouldPublish","standardEvent_1","timestamp","getOwnPropertyNames","addContextPreservation","preserver","previousPreservationStack","packageName","patcher","getPatchesObject","diagnosticsSource","require","moduleModule","nativeModules","originalRequire","patchedModules","moduleId","originalModule","modulePath","_resolveFilename","moduleVersion","prereleaseTagIndex","modifiedModule","modulePatcher","satisfies","unwrap","SYMBOL","propertyIsEnumerable","writable","_listeners","_events","_wrap","visit","onAddListener","onEmit","adding","existing","unprocessed","l","_process","_findAndProcess","__wrapped","remover","taskManager","patternManager","FastGlob","assertPatternsInput","works","getWorks","all","_Provider","patterns","transform","generate","every","string","isString","isEmpty","stream","merge","generateTasks","isDynamicPattern","escapePath","escape","removeDuplicateSlashes","DOUBLE_SLASH_RE","convertPatternGroupToTask","convertPatternGroupsToTasks","groupPatternsByBaseDirectory","getNegativePatternsAsPositive","getPositivePatterns","convertPatternsToTasks","positive","negative","dynamic","patternsOutsideCurrentDirectory","getPatternsOutsideCurrentDirectory","patternsInsideCurrentDirectory","getPatternsInsideCurrentDirectory","outsideCurrentDirectoryGroup","insideCurrentDirectoryGroup","ignore","getNegativePatterns","convertToPositivePattern","collection","getBaseDirectory","convertToNegativePattern","positivePatterns","negativePatterns","staticPatterns","isStaticPattern","dynamicPatterns","staticTasks","dynamicTasks","provider_1","ProviderAsync","task","root","_getRootDirectory","_getReaderOptions","api","static","partial_1","_micromatchOptions","getFilter","matcher","_getMatcher","negativeRe","_getNegativePatternsRe","_filter","affectDepthOfReadingPatterns","isAffectDepthOfReadingPattern","convertPatternsToRe","_isSkippedByDeep","_isSkippedSymbolicLink","removeLeadingDotSegment","_isSkippedByPositivePatterns","_isSkippedByNegativePatterns","deep","Infinity","_getEntryLevel","entryPathDepth","baseNameMatch","patternsRe","matchAny","positiveRe","unique","_isDuplicateEntry","_onlyFileFilter","_onlyDirectoryFilter","_isSkippedByAbsoluteNegativePatterns","isMatched","_isMatchToPatterns","_createIndexRecord","onlyFiles","onlyDirectories","absolute","makeAbsolute","cwd","_isNonFatalError","errno","isEnoentCodeError","suppressErrors","_patterns","_fillStorage","expandPatternsWithBraceExpansion","segments","_getPatternSegments","sections","_splitSegmentsIntoSections","complete","getPatternParts","patternRe","makeRe","splitWhen","segment","hasGlobStar","matcher_1","PartialMatcher","section","deep_1","entry_1","error_1","entry_2","_getMicromatchOptions","entryTransformer","getTransformer","dot","matchBase","nobrace","braceExpansion","nocase","caseSensitiveMatch","noext","extglob","noglobstar","globstar","posix","strictSlashes","stream_2","ProviderStream","destination","ProviderSync","unixify","markDirectories","_fsStatSettings","_getFullEntryPath","_makeEntry","fsWalk","ReaderStream","_walkStream","_stat","filepaths","PassThrough","_write","_enc","_getEntry","_getStat","ReaderSync","_walkSync","_statSync","DEFAULT_FILE_SYSTEM_ADAPTER","CPU_COUNT","_getFileSystemMethods","methods","items","predicate","groupIndex","UNESCAPED_GLOB_SYMBOLS_RE","charAt","secondCharactery","expandBraceExpansion","endsWithSlashGlobStar","isPatternRelatedToParentDirectory","isPositivePattern","isNegativePattern","globParent","micromatch","COMMON_GLOB_SYMBOLS_RE","REGEX_CHARACTER_CLASS_SYMBOLS_RE","REGEX_GROUP_SYMBOLS_RE","GLOB_EXTENSION_SYMBOLS_RE","BRACE_EXPANSION_SEPARATORS_RE","includes","openingBraceIndex","closingBraceIndex","braceContent","hasBraceExpansion","startsWith","flipBackslashes","scan","unshift","merge2","propagateCloseEventToSources","streams","mergedStream","reusify","fastqueue","worker","cache","Task","queueHead","queueTail","_running","errorHandler","current","noop","paused","saturated","worked","pause","running","resume","getQueue","empty","kill","handler","holder","arg","pushCb","unshiftCb","drained","previousDrain","toRegexRange","isObject","isValidValue","isNumber","zeros","pad","toNumber","dash","padStart","toMaxLen","toRange","isNumbers","capture","rangeError","invalidRange","strictRanges","descending","startString","endString","stepString","padded","maxLen","negatives","positives","sort","toSequence","fillNumbers","fillLetters","invalidStep","isGlob","pathPosixDirname","isWin32","backslash","enclosure","globby","isExtglob","chars","strictCheck","pipeIndex","closeSquareIndex","closeCurlyIndex","closeParenIndex","backSlashIndex","relaxedCheck","isFinite","pauseStreams","_readableState","pipe","streamsQueue","merging","doEnd","doPipeError","pipeError","highWaterMark","addStream","mergeStream","endStream","pipesCount","onend","onerror","endEmitted","setMaxListeners","picomatch","isEmptyString","omit","keep","onResult","isMatch","negated","negatedExtglob","matched","failglob","nonull","nullglob","unescape","any","not","contains","matchKeys","glob","isWindows","toPosixSlashes","braceExpand","DOTS_SLASH","POSIX_CHARS","DOT_LITERAL","PLUS_LITERAL","QMARK_LITERAL","SLASH_LITERAL","ONE_CHAR","QMARK","END_ANCHOR","NO_DOT","NO_DOTS","NO_DOT_SLASH","NO_DOTS_SLASH","QMARK_NO_DOT","STAR","START_ANCHOR","WINDOWS_CHARS","POSIX_REGEX_SOURCE","alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit","REGEX_BACKSLASH","REGEX_NON_SPECIAL_CHARS","REGEX_SPECIAL_CHARS","REGEX_SPECIAL_CHARS_BACKREF","REGEX_SPECIAL_CHARS_GLOBAL","REGEX_REMOVE_BACKSLASH","REPLACEMENTS","CHAR_BACKWARD_SLASH","CHAR_GRAVE_ACCENT","SEP","extglobChars","globChars","win32","expandRange","ex","escapeRegex","syntaxError","char","bos","prepend","tokens","PLATFORM_CHARS","EXTGLOB_CHARS","nodot","qmarkNoDot","star","bash","noextglob","consumed","backtrack","parens","quotes","removePrefix","extglobs","eos","peek","remaining","consume","token","negate","increment","decrement","tok","isBrace","inner","extglobOpen","conditions","extglobClose","rest","extglobStar","expression","fastpaths","backslashes","esc","first","wrapOutput","slashes","idx","strictBrackets","nobracket","prevValue","literalBrackets","hasRegexChars","outputIndex","tokensIndex","brace","dots","comma","out","toks","supportsLookbehinds","nonegate","prior","isStart","afterStar","escapeLast","slashDot","returnState","fns","isState","compileRe","isIgnored","ignoreOpts","onMatch","returnObject","onIgnore","returnOutput","parsed","isPathSeparator","isPrefix","isGlobstar","scanToEnd","lastIndex","isBracket","braceEscaped","finished","noparen","removeBackslashes","maxDepth","prevIndex","isRegexChar","segs","windows","lastIdx","queueMicrotask","window","Constructor","head","tail","pending","isSync","each","SemVer","NODE_DEBUG","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","re","src","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","loose","includePrerelease","raw","major","minor","prerelease","build","valid","clean","compare","other","compareMain","comparePre","compareIdentifiers","inc","identifier","diff","version1","version2","eq","v1","v2","defaultResult","numeric","anum","bnum","gt","lt","neq","lte","cmp","op","Comparator","comp","ANY","operator","rcompareIdentifiers","compareLoose","rcompare","rsort","Range","parseRange","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","comparator","r","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","_","M","pr","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","maxSV","rangeObj","minSatisfying","minSV","minVersion","minver","compver","validRange","ltr","gtr","r1","r2","coerce","isFunction","funktion","logger","nodule","wrapper","__unwrap","nodules","massUnwrap","lines","ee","FormatErrorString","_stackChain","defaultFormater","extend","TraceModifier","StackFormater","SHORTCIRCUIT_CALLSITE","collectCallSites","captureStackTrace","callSites","_modify","_formater","_previous","formater","restore","_backup","_roolback","prepareStackTrace","SHORTCIRCUIT_FORMATER","originalFrames","stackTraceLimit","isExtensible","getOwnPropertyDescriptor","mutated","relaxZeros","strictZeros","cacheKey","shorthand","isPadded","hasPadding","splitToPatterns","neg","pos","onlyNegative","filterPatterns","onlyPositive","intersected","collatePatterns","rangeToPattern","stop","digits","zipped","zip","startDigit","stopDigit","nines","countNines","stops","countZeros","splitToRanges","padZeros","toQuantifier","comparison","intersection","integer","relax","clearCache","rnds8Pool","Uint8Array","poolPtr","rng","uuid","byteToHex","offset","_nodeId","_clockseq","_lastMSecs","_lastNSecs","buf","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","hashfunc","generateUUID","encodeURIComponent","bytes","stringToBytes","DNS","URL","v35","update","digest","rnds","vscode","appInsights","TelemetryReporter","firstParty","userOptIn","logFilePath","logStream","createWriteStream","encoding","autoClose","updateUserOptIn","onDidChangeTelemetryEnabled","optOutListener","workspace","onDidChangeConfiguration","getConfiguration","TELEMETRY_CONFIG_ID","newOptInValue","isTelemetryEnabled","TELEMETRY_CONFIG_ENABLED_ID","createAppInsightsClient","appInsightsClient","getCommonProperties","machineId","isNewAppInstall","uiKind","UIKind","Web","Desktop","cleanRemoteName","remoteName","shouldSendErrorTelemetry","extension","extensionKind","ExtensionKind","Workspace","_extension","extensions","getExtension","cloneAndChange","change","anonymizeFilePaths","cleanupPatterns","appRoot","extensionPath","updatedStack","cleanUpIndexes","cleanupPatterns_1","regexp","nodeModulesRegex","fileRegex","y","cleanupPatterns_2","cleanProperties","_key","sendTelemetryErrorEvent","errorProps","sendTelemetryException","flushEventsToLogger","flushEventsToAI","Is","CancellationToken","None","freeze","isCancellationRequested","onCancellationRequested","Cancelled","is","candidate","boolean","shortcutEvent","MutableToken","_isCancelled","cancel","fire","Emitter","CancellationTokenSource","_token","Disposable","_disposable","CallbackList","bucket","_callbacks","foundCallbackWithDifferentContext","invoke","_event","thisArgs","disposables","onFirstListenerAdd","_noop","onLastListenerRemove","number","stringArray","elem","Touch","First","Last","LinkedMap","_map","_head","_tail","_size","clear","touch","previous","addItemLast","addItemFirst","removeItem","callbackfn","thisArg","forEachReverse","messages_1","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","cancellation_1","linkedMap_1","CancelNotification","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionState","NullLogger","fromString","Off","Messages","Text","ConnectionError","_createMessageConnection","messageReader","messageWriter","strategy","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","starRequestHandler","starNotificationHandler","timer","tracer","requestHandlers","notificationHandlers","messageQueue","responsePromises","requestTokens","traceFormat","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","disposeEmitter","createRequestQueueKey","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","isRequestMessage","requestMessage","reply","resultOrError","jsonrpc","toJson","traceSendingResponse","replyError","params","logLSPMessage","traceReceivedRequest","requestHandler","element","cancellationSource","tokenKey","handlerResult","numberOfParams","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","traceReceivedNotification","handleNotification","isResponseMessage","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","onClose","toCancel","addMessageToQueue","lspMessage","isLSPMessage","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","sendRequest","throwIfNotListening","traceSendingRequest","MessageWriteError","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","listen","AlreadyListening","throwIfListening","ConnectionStrategy","createMessageConnection","isMessageWriter","DefaultSize","CR","LF","MessageBuffer","allocUnsafe","toAppend","bufferLen","copy","newSize","tryReadHeaders","nextStart","tryReadContent","onPartialMessage","AbstractMessageReader","partialMessageEmitter","fireError","asError","fireClose","firePartialMessage","readable","_partialMessageTimeout","timeout","nextMessageLength","messageToken","partialMessageTimer","onData","contentLength","setPartialMessageTimer","clearPartialMessageTimer","json","waitingTime","eventEmitter","ContentLength","CRLF","AbstractMessageWriter","errorCount","sending","doWriteMessage","handleError","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","MessageReadError","AbstractMessageType","_method","_numberOfParams","path_1","os_1","crypto_1","net_1","generateRandomPipeName","randomSuffix","randomBytes","createClientPipeTransport","pipeName","connectResolve","connected","_reject","onConnected","createServerPipeTransport","createConnection","createClientSocketTransport","createServerSocketTransport","vscode_1","vscode_languageserver_protocol_1","c2p","p2c","UUID","ConsoleLogger","ErrorAction","CloseAction","RevealOutputChannelOn","ClientState","DefaultErrorHandler","restarts","_error","Continue","Shutdown","closed","Restart","showErrorMessage","DoNotRestart","SupportedSymbolKinds","SymbolKind","File","Module","Package","Class","Method","Property","Field","Enum","Interface","Function","Variable","Constant","Key","Null","EnumMember","Struct","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Keyword","Snippet","Color","Reference","Folder","ensure","DynamicFeature","register","unregister","messages","DocumentNotifiactions","_type","_middleware","_createParams","_selectorFilter","_selectors","selectors","textDocument","selector","languages","registerOptions","documentSelector","_listener","notificationSent","_data","DidOpenTextDocumentFeature","_syncedDocuments","onDidOpenTextDocument","DidOpenTextDocumentNotification","clientOptions","middleware","didOpen","code2ProtocolConverter","asOpenTextDocumentParams","textDocumentFilter","fillClientCapabilities","capabilities","dynamicRegistration","initialize","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","uri","DidCloseTextDocumentFeature","onDidCloseTextDocument","DidCloseTextDocumentNotification","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","DidChangeTextDocumentNotification","TextDocumentSyncKind","syncKind","onDidChangeTextDocument","contentChanges","changeData","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","WillSaveTextDocumentWaitUntilRequest","willSaveWaitUntil","edits","vEdits","protocol2CodeConverter","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","DidSaveTextDocumentNotification","didSave","asSaveTextDocumentParams","_includeText","save","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","DidChangeWatchedFilesNotification","_capabilities","_documentSelector","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","registerRaw","fileSystemWatchers","onDidCreate","asUri","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","TextDocumentFeature","_providers","registerLanguageProvider","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","completionItemKind","valueSet","completionProvider","triggerCharacters","provideCompletionItems","position","asCompletionParams","asCompletionResult","logFailedRequest","resolveCompletionItem","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","provideCompletionItem","resolveProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asTextDocumentPositionParams","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","providerSignatureHelp","asSignatureHelp","registerSignatureHelpProvider","provideSignatureHelp","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","providerReferences","asReferenceParams","asReferences","registerReferenceProvider","provideReferences","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","asDocumentSymbolParams","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","provideWorkspaceSymbols","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","cap","codeActionLiteralSupport","codeActionKind","CodeActionKind","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","codeActionKinds","provideCodeActions","asTextDocumentIdentifier","asRange","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","moreTriggerCharacter","provideOnTypeFormattingEdits","ch","asPosition","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","DidChangeConfigurationNotification","synchronize","configurationSection","affectsConfiguration","didChangeConfiguration","extractSettingsInformation","getMiddleware","ensurePath","workspaceFolder","ExecuteCommandFeature","_commands","ExecuteCommandRequest","executeCommandProvider","commands","registerCommand","MessageTransports","reader","writer","OnReady","_resolve","_used","BaseLanguageClient","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","uriConverters","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","_stateChangeEmitter","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","oldState","getPublicState","newState","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","createOutputChannel","createDefaultErrorHandler","_trace","onReady","resolveConnection","data2String","responseError","appendLine","toLocaleTimeString","Info","show","Warn","needsStart","Stopping","needsStop","isUsed","createDiagnosticCollection","onLogMessage","MessageType","onShowMessage","showWarningMessage","showInformationMessage","ShowMessageRequest","messageFunc","actions","onTelemetry","StartFailed","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","pid","rootUri","Uri","file","computeClientCapabilities","workspaceFolders","fillInitializeParams","textDocumentSync","onDiagnostics","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","retry","title","folders","folder","scheme","cleanUp","diagnostics","notifyFileEvent","didChangeWatchedFiles","changes","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","createProtocolConnection","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","LogMessageNotification","ShowMessageNotification","TelemetryEventNotification","didOpenTextDocument","didChangeTextDocument","didCloseTextDocument","didSaveTextDocument","PublishDiagnosticsNotification","traceConfig","fileEvents","registerFeatures","features","feature","registerFeature","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","registration","registrations","unregistration","unregisterations","edit","openTextDocuments","versionMismatch","TextDocumentEdit","applied","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","_uriConverter","asVersionedTextDocumentIdentifier","asTextDocumentSaveReason","reason","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","asTriggerKind","triggerKind","CompletionTriggerKind","TriggerCharacter","TriggerForIncompleteCompletions","Invoked","asWorkerPosition","character","asDiagnosticSeverity","DiagnosticSeverity","Hint","asDiagnostic","Diagnostic","asTextEdit","newText","languageId","getText","isTextDocument","isTextDocumentChangeEvent","rangeLength","includeContent","triggerCharacter","label","protocolItem","detail","documentation","asDocumentation","filterText","InsertTextFormat","textEdit","insertText","SnippetString","insertTextFormat","fromEdit","fillPrimaryInsertText","originalItemKind","sortText","additionalTextEdits","commitCharacters","preselect","deprecated","includeDeclaration","CodeActionContext","only","CodeLens","tabSize","insertSpaces","DocumentLink","client_1","ColorProviderFeature","DocumentColorRequest","colorProvider","implCapabilities","provideColorPresentations","color","requestParams","ColorPresentationRequest","asColorPresentations","provideDocumentColors","asColorInformations","registerColorProvider","asColor","red","green","blue","colorInformation","ci","ColorInformation","colorPresentations","cp","presentation","ColorPresentation","configuration","ConfigurationRequest","scopeUri","DeclarationFeature","DeclarationRequest","declarationSupport","declarationProvider","declCapabilities","provideDeclaration","asDeclarationResult","registerDeclarationProvider","FoldingRangeFeature","FoldingRangeRequest","capability","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","asFoldingRanges","registerFoldingRangeProvider","asFoldingRangeKind","FoldingRangeKind","Comment","Imports","Region","foldingRanges","FoldingRange","startLine","endLine","ImplementationFeature","ImplementationRequest","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","colorProvider_1","configuration_1","implementation_1","typeDefinition_1","workspaceFolders_1","foldingRange_1","declaration_1","processes_1","Executable","TransportKind","NodeModule","StreamInfo","ChildProcessInfo","ProposedFeatures","detached","LanguageClient","arg1","arg2","arg3","arg4","arg5","serverOptions","forceDebug","_serverOptions","_forceDebug","checkVersion","codeVersion","_serverProcess","toCheck","_isDetached","checkProcessDied","terminate","stdin","runDebug","v8debug","execArgv","startedInDebugMode","_getServerWorkingDir","serverWorkingDir","transport","runtime","ipc","silent","sp","fork","execOptions","getEnvironment","serverProcess","registerProposedFeatures","createAll","TypeDefinitionFeature","WorkspaceFoldersFeature","_mainGetRootPath","SettingMonitor","_setting","primary","ProtocolCodeLens","ProtocolCompletionItem","CompletionItem","ls","CodeBlock","language","diagnostic","asDiagnosticRelatedInformation","information","DiagnosticRelatedInformation","asLocation","Position","MarkdownString","asCompletionInsertText","itemKind","TextEdit","asSignatureInformations","asSignatureInformation","SignatureInformation","parameters","asParameterInformations","asParameterInformation","ParameterInformation","Location","asLocationLink","targetUri","targetRange","targetSelectionRange","originSelectionRange","asLocationResult","LocationLink","asDocumentHighlight","DocumentHighlight","asDocumentHighlightKind","DocumentHighlightKind","Read","Write","asSymbolKind","asSymbolInformation","SymbolInformation","containerName","asDocumentSymbol","selectionRange","children","kindMapping","asCodeActionKind","Empty","WorkspaceEdit","CreateFile","createFile","RenameFile","renameFile","oldUri","newUri","DeleteFile","deleteFile","asColorInformation","asColorPresentation","asFoldingRange","hover","Hover","appendCodeblock","appendMarkdown","appendText","asHoverContent","contents","CompletionList","isIncomplete","SignatureHelp","activeSignature","activeParameter","signatures","asCommands","CodeAction","ProtocolDocumentLink","TypeDefinitionRequest","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","defaultDelay","completionPromise","delay","cancelTimeout","isTriggered","typedArray","thenable","isMacintosh","isLinux","execFileSync","cmd","ValueUUID","asHex","equals","V4UUID","_randomHex","_oneOf","_timeHighBits","_chars","v4","_UUIDPattern","isUUID","access","DidChangeWorkspaceFoldersNotification","asProtocol","WorkspaceFoldersRequest","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","removed","vscode_jsonrpc_1","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolders_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","DocumentFilter","Abort","Transactional","Undo","InitializeError","unknownProtocolVersion","Log","objectLiteral","one","two","three","four","defined","startCharacter","endCharacter","insert","del","VersionedTextDocumentIdentifier","ignoreIfExists","recursive","ignoreIfNotExists","TextDocumentIdentifier","TextDocumentItem","MarkupContent","MarkedString","TextEditChangeImpl","WorkspaceChange","_textEditChanges","_workspaceEdit","textEditChange","getTextEditChange","textDocumentEdit","checkDocumentChanges","fromPlainText","plainText","FormattingOptions","commandOrEdit","TextDocument","EOL","mergeSort","leftIdx","rightIdx","content","FullTextDocument","lineCount","positionAt","offsetAt","applyEdits","sortedEdits","lastModifiedOffset","startOffset","endOffset","_uri","_languageId","_version","_content","_lineOffsets","getLineOffsets","lineOffsets","isLineStart","mid","lineOffset","nextLineOffset","MessageFormat","BundleFormat","LocalizeInfo","resolvedBundles","isPseudo","isDefined","readJsonFileSync","replacement","createScopedLocalizeFunction","localize","cacheBundle","bundle","loadDefaultNlsBundle","bundlePath","metaData","module_1","createDefaultNlsBundle","loadNlsBundle","languagePackSupport","cacheRoot","languagePackId","translationsConfigFile","translationsConfig","useMemoryOnly","writeBundle","flag","utimes","metaDataPath","languagePackLocation","languagePack","module_2","translations","outDir","resultMessages","messageKey","translatedMessage","createNLSBundle","loadNlsBundleOrCreateFromI18n","findInTheBoxBundle","loadMessageBundle","ext","extname","messageFormat","both","headerFile","tryFindMetaDataHeaderFile","nlsBundle","module_3","resolvedLanguage","cacheLanguageResolution","locale","resolveLanguage","comment","VSCODE_NLS_CONFIG","vscodeOptions_1","availableLanguages","isBoolean","_languagePackSupport","_cacheRoot","_languagePackId","_translationsConfigFile","_corruptedFile","initializeSettings","bundleFormat","standalone","getLocalSettingsJson","localSettingsPath","failedToParse","azureFunctionLocalSettingsFileName","IsEncrypted","setLocalAppSetting","projectFolder","Values","settingAlreadyExists","modal","yesString","promises","getAzureFunctionProjectFiles","projFiles","hostFiles","getHostFiles","findFiles","RelativePattern","getSettingsFile","addNugetReferenceToProjectFile","selectedProjectFile","executeCommand","sqlExtensionPackageName","isFunctionProject","folderPath","hostFileName","promptConnectionStringPasswordAndUpdateConnectionString","includePassword","connectionDetails","userPassword","vscodeMssqlApi","getVscodeMssqlApi","password","showQuickPick","noString","canPickMany","ignoreFocusOut","getConnectionString","passwordPlaceholder","showInputBox","prompt","enterPasswordPrompt","validateInput","valueMustNotBeEmpty","userPasswordLater","openFile","closeButton","vscodeOpenCommand","failedToGetConnectionString","promptSelectDatabase","connectionURI","listDatabases","selectedDatabase","selectDatabase","getConnectionURI","withProgress","ProgressLocation","Notification","connectionProgressTitle","cancellable","_progress","promptSelectTable","bindingType","userObjectName","enterObjectName","enterObjectNameToUpsert","ownerUri","queryString","tablesQuery","tableListProgressTitle","azureFunctionsContracts","SimpleExecuteRequest","tableNames","displayValue","manuallyEnterObjectName","selectedObject","selectTable","promptToManuallyEnterObjectName","escapeClosingBrackets","sqlTableOrViewToQuery","sqlTableToUpsert","placeHolder","placeHolderObject","nameMustNotBeEmpty","apiProvider","azureFunctionsExtensionName","activate","azureFunctionsExtensionNotFound","install","learnMore","doNotInstall","openExternal","linkToAzureFunctionExtension","extensionInstalled","timeoutExtensionError","extensionChange","getApi","azureFunctionsExtensionNotInstalled","projectFiles","selectProject","filePromise","watcherDisposable","settingName","sqlConnectionStringSetting","settingsFile","fileUri","projectPromises","getAllProjectsInFolder","functionsProjects","curr","noAzureFunctionsProjectsInWorkspace","funcName","inputOutputItems","description","inputDescription","outputDescription","selectBindingType","projectUri","connectionStringSettingName","getErrorMessage","knownSettings","connectionStringSettings","setting","createNewLocalAppSettingWithIcon","sqlConnectionStringSettingExists","selectedSetting","selectSetting","newConnectionStringSettingName","enterConnectionStringSettingName","selectedConnectionStringMethod","listOfConnectionStringMethods","connectionProfile","userConnectionString","selectConnectionString","enterConnectionString","promptForConnection","selectConnectionError","connectionStringSetting","connectionStringSettingPlaceholder","packageInfo","getPackageInfo","ExitReason","CreateAzureFunctionStep","TelemetryActions","TelemetryViews","aiKey","TimeoutError","maxBuffer","projectExtension","escapedPath","projFilter","schema","objectName","ms","uniqueFileName","hasSpecialCharacters","fullName","publisher","AddSqlBindingRequest","GetAzureFunctionsRequest","priority","azureFunctionsUtils","addConnectionStringToConfig","shouldExecute","getAzureFunctionsResult","quickPickStep","exitReason","propertyBag","SqlBindingsQuickPick","startAddSqlBinding","activeTextEditor","isDirty","saveChangesInFile","getAzureFunctions","azureFunctions","af","azureFunctionName","selectAzureFunction","getAzureFunctionProject","selectedBinding","promptForBindingType","getBindingType","getAFProjectContainingFile","connectionStringInfo","promptAndUpdateConnectionStringSetting","updateConnectionString","promptForObjectName","getObjectName","addSqlBinding","finishAddSqlBinding","getErrorType","exitSqlBindingsQuickpick","noAzureFunctionsInFile","telemetryStep","cancelled","CreateAzureFunctionWithSqlBinding","startCreateAzureFunctionWithSqlBinding","newFunctionFileObject","isCreateNewProject","azureFunctionApi","getAzureFunctionsExtensionApi","exitCreateAzureFunctionQuickpick","selectedBindingType","projectFile","projectCreate","azureFunctionsProjectMustBeOpened","createProject","sqlBindingsDoc","helpCreateAzureFunctionProject","getSelectedFolder","browseEllipsisWithIcon","selectAzureFunctionProjFolder","projectFolders","showOpenDialog","canSelectFiles","canSelectFolders","canSelectMany","openLabel","selectButton","waitForNewFunctionFile","launchFromTable","newNode","nodeType","metadata","parentNode","generateQuotedFullName","launchFromCommandPalette","functionName","getAzureFunctionName","uniqueObjectName","santizeObjectName","uniqueFunctionName","getUniqueFileName","functionNameTitle","validateFunctionName","getTemplateId","templateId","inputTemplateID","outputTemplateID","getConnectionStringSettingName","connectionStringExecuteStep","createAddConnectionStringStep","createFunction","targetFramework","functionSettings","object","table","suppressCreateProjectPrompt","executeStep","timeoutForFunctionFile","timeoutPromise","timeoutAzureFunctionFileError","race","finishCreate","finishCreateAzureFunctionWithSqlBinding","errorNewAzureFunction","__webpack_module_cache__","__webpack_require__","cachedModule","__webpack_modules__","getter","__esModule","definition","o","toStringTag","subscriptions","launchAddSqlBindingQuickpick","createAzureFunction"],"mappings":"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","file":"extension.js","sourcesContent":["/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_extension_telemetry_1 = require(\"vscode-extension-telemetry\");\nconst commonProperties = {};\ntry {\n    const azdata = require('azdata');\n    commonProperties['common.adsversion'] = azdata === null || azdata === void 0 ? void 0 : azdata.version;\n}\ncatch (err) {\n    // no-op when we're not in a context that has azdata available\n}\nclass TelemetryEventImpl {\n    constructor(reporter, eventName, properties, measurements) {\n        this.reporter = reporter;\n        this.eventName = eventName;\n        this.properties = properties;\n        this.measurements = measurements;\n        this.properties = properties || {};\n        Object.assign(this.properties, commonProperties);\n        this.measurements = measurements || {};\n    }\n    send() {\n        try {\n            this.reporter.sendTelemetryEvent(this.eventName, this.properties, this.measurements);\n        }\n        catch (e) {\n            // We don't want exceptions sending telemetry to break extensions so just log and ignore\n            const msg = e instanceof Error ? e.message : e;\n            console.error(`Error sending ${this.eventName} event ${msg}`);\n        }\n    }\n    withAdditionalProperties(additionalProperties) {\n        Object.assign(this.properties, additionalProperties);\n        return this;\n    }\n    withAdditionalMeasurements(additionalMeasurements) {\n        Object.assign(this.measurements, additionalMeasurements);\n        return this;\n    }\n    withConnectionInfo(connectionInfo) {\n        Object.assign(this.properties, {\n            authenticationType: connectionInfo.authenticationType,\n            providerName: connectionInfo.providerName,\n            serverType: connectionInfo.serverType,\n            engineType: connectionInfo.engineType\n        });\n        return this;\n    }\n}\nclass TelemetryReporter {\n    constructor(extensionId, extensionVersion, key) {\n        this._telemetryReporter = new vscode_extension_telemetry_1.default(extensionId, extensionVersion, key);\n    }\n    /**\n     * Creates a View event that can be sent later. This is used to log that a particular page or item was seen.\n     * @param view The name of the page or item that was viewed\n     */\n    createViewEvent(view) {\n        return new TelemetryEventImpl(this._telemetryReporter, 'view', {\n            view: view\n        });\n    }\n    /**\n     * Sends a View event. This is used to log that a particular page or item was seen.\n     * @param view The name of the page or item that was viewed\n     */\n    sendViewEvent(view) {\n        this.createViewEvent(view).send();\n    }\n    /**\n     * Creates an Action event that can be sent later. This is used to log when an action was taken, such as clicking a button.\n     * @param view The name of the page or item where this action occurred\n     * @param action The name of the action taken\n     * @param target The name of the item being acted on\n     * @param source The source of the action\n     */\n    createActionEvent(view, action, target = '', source = '', durationInMs) {\n        const measures = durationInMs ? { durationInMs: durationInMs } : {};\n        return new TelemetryEventImpl(this._telemetryReporter, 'action', {\n            view: view,\n            action: action,\n            target: target,\n            source: source\n        }, measures);\n    }\n    /**\n     * Sends a Action event. This is used to log when an action was taken, such as clicking a button.\n     * @param view The name of the page or item where this action occurred\n     * @param action The name of the action taken\n     * @param target The name of the item being acted on\n     * @param source The source of the action\n     */\n    sendActionEvent(view, action, target = '', source = '', durationInMs) {\n        this.createActionEvent(view, action, target, source, durationInMs).send();\n    }\n    /**\n     * Creates a Metrics event that can be sent later. This is used to log measurements taken.\n     * @param metrics The metrics to send\n     */\n    createMetricsEvent(metrics, groupName = '') {\n        return new TelemetryEventImpl(this._telemetryReporter, 'metrics', { groupName: groupName }, metrics);\n    }\n    /**\n     * Sends a Metrics event. This is used to log measurements taken.\n     * @param measurements The metrics to send\n     */\n    sendMetricsEvent(metrics, groupName = '') {\n        this.createMetricsEvent(metrics, groupName).send();\n    }\n    /**\n     * Creates a new Error event that can be sent later. This is used to log errors that occur.\n     * @param view The name of the page or item where the error occurred\n     * @param name The friendly name of the error\n     * @param errorCode The error code returned\n     * @param errorType The specific type of error\n     * @param properties Optional additional properties\n     */\n    createErrorEvent(view, name, errorCode = '', errorType = '') {\n        return new TelemetryEventImpl(this._telemetryReporter, 'error', {\n            view: view,\n            name: name,\n            errorCode: errorCode,\n            errorType: errorType\n        });\n    }\n    /**\n     * Sends a Error event. This is used to log errors that occur.\n     * @param view The name of the page or item where the error occurred\n     * @param name The friendly name of the error\n     * @param errorCode The error code returned\n     * @param errorType The specific type of error\n     */\n    sendErrorEvent(view, name, errorCode = '', errorType = '') {\n        this.createErrorEvent(view, name, errorCode, errorType).send();\n    }\n    /**\n     * Creates a custom telemetry event with the specified name that can be sent later. Generally the other send functions should be\n     * preferred over this - only use this if you absolutely need a custom event that can't be covered by the other methods.\n     * @param eventName The name of the event. Will be prefixed with <extension-name>/\n     * @param properties The list of properties to send along with the event\n     * @param measurements The list of measurements to send along with the event\n     */\n    createTelemetryEvent(eventName, properties, measurements) {\n        return new TelemetryEventImpl(this._telemetryReporter, eventName, properties, measurements);\n    }\n    /**\n     * Sends a custom telemetry event with the specified name. Generally the other send functions should be\n     * preferred over this - only use this if you absolutely need a custom event that can't be covered by the other\n     * @param eventName The name of the event. Will be prefixed with <extension-name>/\n     * @param properties The list of properties to send along with the event\n     * @param measurements The list of measurements to send along with the event\n     */\n    sendTelemetryEvent(eventName, properties, measurements) {\n        this.createTelemetryEvent(eventName, properties, measurements).send();\n    }\n    dispose() {\n        return this._telemetryReporter.dispose();\n    }\n}\nexports.default = TelemetryReporter;\n//# sourceMappingURL=telemetryReporter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createFileSystemAdapter = exports.FILE_SYSTEM_ADAPTER = void 0;\nconst fs = require(\"fs\");\nexports.FILE_SYSTEM_ADAPTER = {\n    lstat: fs.lstat,\n    stat: fs.stat,\n    lstatSync: fs.lstatSync,\n    statSync: fs.statSync,\n    readdir: fs.readdir,\n    readdirSync: fs.readdirSync\n};\nfunction createFileSystemAdapter(fsMethods) {\n    if (fsMethods === undefined) {\n        return exports.FILE_SYSTEM_ADAPTER;\n    }\n    return Object.assign(Object.assign({}, exports.FILE_SYSTEM_ADAPTER), fsMethods);\n}\nexports.createFileSystemAdapter = createFileSystemAdapter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IS_SUPPORT_READDIR_WITH_FILE_TYPES = void 0;\nconst NODE_PROCESS_VERSION_PARTS = process.versions.node.split('.');\nif (NODE_PROCESS_VERSION_PARTS[0] === undefined || NODE_PROCESS_VERSION_PARTS[1] === undefined) {\n    throw new Error(`Unexpected behavior. The 'process.versions.node' variable has invalid value: ${process.versions.node}`);\n}\nconst MAJOR_VERSION = Number.parseInt(NODE_PROCESS_VERSION_PARTS[0], 10);\nconst MINOR_VERSION = Number.parseInt(NODE_PROCESS_VERSION_PARTS[1], 10);\nconst SUPPORTED_MAJOR_VERSION = 10;\nconst SUPPORTED_MINOR_VERSION = 10;\nconst IS_MATCHED_BY_MAJOR = MAJOR_VERSION > SUPPORTED_MAJOR_VERSION;\nconst IS_MATCHED_BY_MAJOR_AND_MINOR = MAJOR_VERSION === SUPPORTED_MAJOR_VERSION && MINOR_VERSION >= SUPPORTED_MINOR_VERSION;\n/**\n * IS `true` for Node.js 10.10 and greater.\n */\nexports.IS_SUPPORT_READDIR_WITH_FILE_TYPES = IS_MATCHED_BY_MAJOR || IS_MATCHED_BY_MAJOR_AND_MINOR;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Settings = exports.scandirSync = exports.scandir = void 0;\nconst async = require(\"./providers/async\");\nconst sync = require(\"./providers/sync\");\nconst settings_1 = require(\"./settings\");\nexports.Settings = settings_1.default;\nfunction scandir(path, optionsOrSettingsOrCallback, callback) {\n    if (typeof optionsOrSettingsOrCallback === 'function') {\n        async.read(path, getSettings(), optionsOrSettingsOrCallback);\n        return;\n    }\n    async.read(path, getSettings(optionsOrSettingsOrCallback), callback);\n}\nexports.scandir = scandir;\nfunction scandirSync(path, optionsOrSettings) {\n    const settings = getSettings(optionsOrSettings);\n    return sync.read(path, settings);\n}\nexports.scandirSync = scandirSync;\nfunction getSettings(settingsOrOptions = {}) {\n    if (settingsOrOptions instanceof settings_1.default) {\n        return settingsOrOptions;\n    }\n    return new settings_1.default(settingsOrOptions);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.readdir = exports.readdirWithFileTypes = exports.read = void 0;\nconst fsStat = require(\"@nodelib/fs.stat\");\nconst rpl = require(\"run-parallel\");\nconst constants_1 = require(\"../constants\");\nconst utils = require(\"../utils\");\nconst common = require(\"./common\");\nfunction read(directory, settings, callback) {\n    if (!settings.stats && constants_1.IS_SUPPORT_READDIR_WITH_FILE_TYPES) {\n        readdirWithFileTypes(directory, settings, callback);\n        return;\n    }\n    readdir(directory, settings, callback);\n}\nexports.read = read;\nfunction readdirWithFileTypes(directory, settings, callback) {\n    settings.fs.readdir(directory, { withFileTypes: true }, (readdirError, dirents) => {\n        if (readdirError !== null) {\n            callFailureCallback(callback, readdirError);\n            return;\n        }\n        const entries = dirents.map((dirent) => ({\n            dirent,\n            name: dirent.name,\n            path: common.joinPathSegments(directory, dirent.name, settings.pathSegmentSeparator)\n        }));\n        if (!settings.followSymbolicLinks) {\n            callSuccessCallback(callback, entries);\n            return;\n        }\n        const tasks = entries.map((entry) => makeRplTaskEntry(entry, settings));\n        rpl(tasks, (rplError, rplEntries) => {\n            if (rplError !== null) {\n                callFailureCallback(callback, rplError);\n                return;\n            }\n            callSuccessCallback(callback, rplEntries);\n        });\n    });\n}\nexports.readdirWithFileTypes = readdirWithFileTypes;\nfunction makeRplTaskEntry(entry, settings) {\n    return (done) => {\n        if (!entry.dirent.isSymbolicLink()) {\n            done(null, entry);\n            return;\n        }\n        settings.fs.stat(entry.path, (statError, stats) => {\n            if (statError !== null) {\n                if (settings.throwErrorOnBrokenSymbolicLink) {\n                    done(statError);\n                    return;\n                }\n                done(null, entry);\n                return;\n            }\n            entry.dirent = utils.fs.createDirentFromStats(entry.name, stats);\n            done(null, entry);\n        });\n    };\n}\nfunction readdir(directory, settings, callback) {\n    settings.fs.readdir(directory, (readdirError, names) => {\n        if (readdirError !== null) {\n            callFailureCallback(callback, readdirError);\n            return;\n        }\n        const tasks = names.map((name) => {\n            const path = common.joinPathSegments(directory, name, settings.pathSegmentSeparator);\n            return (done) => {\n                fsStat.stat(path, settings.fsStatSettings, (error, stats) => {\n                    if (error !== null) {\n                        done(error);\n                        return;\n                    }\n                    const entry = {\n                        name,\n                        path,\n                        dirent: utils.fs.createDirentFromStats(name, stats)\n                    };\n                    if (settings.stats) {\n                        entry.stats = stats;\n                    }\n                    done(null, entry);\n                });\n            };\n        });\n        rpl(tasks, (rplError, entries) => {\n            if (rplError !== null) {\n                callFailureCallback(callback, rplError);\n                return;\n            }\n            callSuccessCallback(callback, entries);\n        });\n    });\n}\nexports.readdir = readdir;\nfunction callFailureCallback(callback, error) {\n    callback(error);\n}\nfunction callSuccessCallback(callback, result) {\n    callback(null, result);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.joinPathSegments = void 0;\nfunction joinPathSegments(a, b, separator) {\n    /**\n     * The correct handling of cases when the first segment is a root (`/`, `C:/`) or UNC path (`//?/C:/`).\n     */\n    if (a.endsWith(separator)) {\n        return a + b;\n    }\n    return a + separator + b;\n}\nexports.joinPathSegments = joinPathSegments;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.readdir = exports.readdirWithFileTypes = exports.read = void 0;\nconst fsStat = require(\"@nodelib/fs.stat\");\nconst constants_1 = require(\"../constants\");\nconst utils = require(\"../utils\");\nconst common = require(\"./common\");\nfunction read(directory, settings) {\n    if (!settings.stats && constants_1.IS_SUPPORT_READDIR_WITH_FILE_TYPES) {\n        return readdirWithFileTypes(directory, settings);\n    }\n    return readdir(directory, settings);\n}\nexports.read = read;\nfunction readdirWithFileTypes(directory, settings) {\n    const dirents = settings.fs.readdirSync(directory, { withFileTypes: true });\n    return dirents.map((dirent) => {\n        const entry = {\n            dirent,\n            name: dirent.name,\n            path: common.joinPathSegments(directory, dirent.name, settings.pathSegmentSeparator)\n        };\n        if (entry.dirent.isSymbolicLink() && settings.followSymbolicLinks) {\n            try {\n                const stats = settings.fs.statSync(entry.path);\n                entry.dirent = utils.fs.createDirentFromStats(entry.name, stats);\n            }\n            catch (error) {\n                if (settings.throwErrorOnBrokenSymbolicLink) {\n                    throw error;\n                }\n            }\n        }\n        return entry;\n    });\n}\nexports.readdirWithFileTypes = readdirWithFileTypes;\nfunction readdir(directory, settings) {\n    const names = settings.fs.readdirSync(directory);\n    return names.map((name) => {\n        const entryPath = common.joinPathSegments(directory, name, settings.pathSegmentSeparator);\n        const stats = fsStat.statSync(entryPath, settings.fsStatSettings);\n        const entry = {\n            name,\n            path: entryPath,\n            dirent: utils.fs.createDirentFromStats(name, stats)\n        };\n        if (settings.stats) {\n            entry.stats = stats;\n        }\n        return entry;\n    });\n}\nexports.readdir = readdir;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst path = require(\"path\");\nconst fsStat = require(\"@nodelib/fs.stat\");\nconst fs = require(\"./adapters/fs\");\nclass Settings {\n    constructor(_options = {}) {\n        this._options = _options;\n        this.followSymbolicLinks = this._getValue(this._options.followSymbolicLinks, false);\n        this.fs = fs.createFileSystemAdapter(this._options.fs);\n        this.pathSegmentSeparator = this._getValue(this._options.pathSegmentSeparator, path.sep);\n        this.stats = this._getValue(this._options.stats, false);\n        this.throwErrorOnBrokenSymbolicLink = this._getValue(this._options.throwErrorOnBrokenSymbolicLink, true);\n        this.fsStatSettings = new fsStat.Settings({\n            followSymbolicLink: this.followSymbolicLinks,\n            fs: this.fs,\n            throwErrorOnBrokenSymbolicLink: this.throwErrorOnBrokenSymbolicLink\n        });\n    }\n    _getValue(option, value) {\n        return option !== null && option !== void 0 ? option : value;\n    }\n}\nexports.default = Settings;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createDirentFromStats = void 0;\nclass DirentFromStats {\n    constructor(name, stats) {\n        this.name = name;\n        this.isBlockDevice = stats.isBlockDevice.bind(stats);\n        this.isCharacterDevice = stats.isCharacterDevice.bind(stats);\n        this.isDirectory = stats.isDirectory.bind(stats);\n        this.isFIFO = stats.isFIFO.bind(stats);\n        this.isFile = stats.isFile.bind(stats);\n        this.isSocket = stats.isSocket.bind(stats);\n        this.isSymbolicLink = stats.isSymbolicLink.bind(stats);\n    }\n}\nfunction createDirentFromStats(name, stats) {\n    return new DirentFromStats(name, stats);\n}\nexports.createDirentFromStats = createDirentFromStats;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fs = void 0;\nconst fs = require(\"./fs\");\nexports.fs = fs;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createFileSystemAdapter = exports.FILE_SYSTEM_ADAPTER = void 0;\nconst fs = require(\"fs\");\nexports.FILE_SYSTEM_ADAPTER = {\n    lstat: fs.lstat,\n    stat: fs.stat,\n    lstatSync: fs.lstatSync,\n    statSync: fs.statSync\n};\nfunction createFileSystemAdapter(fsMethods) {\n    if (fsMethods === undefined) {\n        return exports.FILE_SYSTEM_ADAPTER;\n    }\n    return Object.assign(Object.assign({}, exports.FILE_SYSTEM_ADAPTER), fsMethods);\n}\nexports.createFileSystemAdapter = createFileSystemAdapter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.statSync = exports.stat = exports.Settings = void 0;\nconst async = require(\"./providers/async\");\nconst sync = require(\"./providers/sync\");\nconst settings_1 = require(\"./settings\");\nexports.Settings = settings_1.default;\nfunction stat(path, optionsOrSettingsOrCallback, callback) {\n    if (typeof optionsOrSettingsOrCallback === 'function') {\n        async.read(path, getSettings(), optionsOrSettingsOrCallback);\n        return;\n    }\n    async.read(path, getSettings(optionsOrSettingsOrCallback), callback);\n}\nexports.stat = stat;\nfunction statSync(path, optionsOrSettings) {\n    const settings = getSettings(optionsOrSettings);\n    return sync.read(path, settings);\n}\nexports.statSync = statSync;\nfunction getSettings(settingsOrOptions = {}) {\n    if (settingsOrOptions instanceof settings_1.default) {\n        return settingsOrOptions;\n    }\n    return new settings_1.default(settingsOrOptions);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.read = void 0;\nfunction read(path, settings, callback) {\n    settings.fs.lstat(path, (lstatError, lstat) => {\n        if (lstatError !== null) {\n            callFailureCallback(callback, lstatError);\n            return;\n        }\n        if (!lstat.isSymbolicLink() || !settings.followSymbolicLink) {\n            callSuccessCallback(callback, lstat);\n            return;\n        }\n        settings.fs.stat(path, (statError, stat) => {\n            if (statError !== null) {\n                if (settings.throwErrorOnBrokenSymbolicLink) {\n                    callFailureCallback(callback, statError);\n                    return;\n                }\n                callSuccessCallback(callback, lstat);\n                return;\n            }\n            if (settings.markSymbolicLink) {\n                stat.isSymbolicLink = () => true;\n            }\n            callSuccessCallback(callback, stat);\n        });\n    });\n}\nexports.read = read;\nfunction callFailureCallback(callback, error) {\n    callback(error);\n}\nfunction callSuccessCallback(callback, result) {\n    callback(null, result);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.read = void 0;\nfunction read(path, settings) {\n    const lstat = settings.fs.lstatSync(path);\n    if (!lstat.isSymbolicLink() || !settings.followSymbolicLink) {\n        return lstat;\n    }\n    try {\n        const stat = settings.fs.statSync(path);\n        if (settings.markSymbolicLink) {\n            stat.isSymbolicLink = () => true;\n        }\n        return stat;\n    }\n    catch (error) {\n        if (!settings.throwErrorOnBrokenSymbolicLink) {\n            return lstat;\n        }\n        throw error;\n    }\n}\nexports.read = read;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fs = require(\"./adapters/fs\");\nclass Settings {\n    constructor(_options = {}) {\n        this._options = _options;\n        this.followSymbolicLink = this._getValue(this._options.followSymbolicLink, true);\n        this.fs = fs.createFileSystemAdapter(this._options.fs);\n        this.markSymbolicLink = this._getValue(this._options.markSymbolicLink, false);\n        this.throwErrorOnBrokenSymbolicLink = this._getValue(this._options.throwErrorOnBrokenSymbolicLink, true);\n    }\n    _getValue(option, value) {\n        return option !== null && option !== void 0 ? option : value;\n    }\n}\nexports.default = Settings;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Settings = exports.walkStream = exports.walkSync = exports.walk = void 0;\nconst async_1 = require(\"./providers/async\");\nconst stream_1 = require(\"./providers/stream\");\nconst sync_1 = require(\"./providers/sync\");\nconst settings_1 = require(\"./settings\");\nexports.Settings = settings_1.default;\nfunction walk(directory, optionsOrSettingsOrCallback, callback) {\n    if (typeof optionsOrSettingsOrCallback === 'function') {\n        new async_1.default(directory, getSettings()).read(optionsOrSettingsOrCallback);\n        return;\n    }\n    new async_1.default(directory, getSettings(optionsOrSettingsOrCallback)).read(callback);\n}\nexports.walk = walk;\nfunction walkSync(directory, optionsOrSettings) {\n    const settings = getSettings(optionsOrSettings);\n    const provider = new sync_1.default(directory, settings);\n    return provider.read();\n}\nexports.walkSync = walkSync;\nfunction walkStream(directory, optionsOrSettings) {\n    const settings = getSettings(optionsOrSettings);\n    const provider = new stream_1.default(directory, settings);\n    return provider.read();\n}\nexports.walkStream = walkStream;\nfunction getSettings(settingsOrOptions = {}) {\n    if (settingsOrOptions instanceof settings_1.default) {\n        return settingsOrOptions;\n    }\n    return new settings_1.default(settingsOrOptions);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst async_1 = require(\"../readers/async\");\nclass AsyncProvider {\n    constructor(_root, _settings) {\n        this._root = _root;\n        this._settings = _settings;\n        this._reader = new async_1.default(this._root, this._settings);\n        this._storage = [];\n    }\n    read(callback) {\n        this._reader.onError((error) => {\n            callFailureCallback(callback, error);\n        });\n        this._reader.onEntry((entry) => {\n            this._storage.push(entry);\n        });\n        this._reader.onEnd(() => {\n            callSuccessCallback(callback, this._storage);\n        });\n        this._reader.read();\n    }\n}\nexports.default = AsyncProvider;\nfunction callFailureCallback(callback, error) {\n    callback(error);\n}\nfunction callSuccessCallback(callback, entries) {\n    callback(null, entries);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst stream_1 = require(\"stream\");\nconst async_1 = require(\"../readers/async\");\nclass StreamProvider {\n    constructor(_root, _settings) {\n        this._root = _root;\n        this._settings = _settings;\n        this._reader = new async_1.default(this._root, this._settings);\n        this._stream = new stream_1.Readable({\n            objectMode: true,\n            read: () => { },\n            destroy: () => {\n                if (!this._reader.isDestroyed) {\n                    this._reader.destroy();\n                }\n            }\n        });\n    }\n    read() {\n        this._reader.onError((error) => {\n            this._stream.emit('error', error);\n        });\n        this._reader.onEntry((entry) => {\n            this._stream.push(entry);\n        });\n        this._reader.onEnd(() => {\n            this._stream.push(null);\n        });\n        this._reader.read();\n        return this._stream;\n    }\n}\nexports.default = StreamProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sync_1 = require(\"../readers/sync\");\nclass SyncProvider {\n    constructor(_root, _settings) {\n        this._root = _root;\n        this._settings = _settings;\n        this._reader = new sync_1.default(this._root, this._settings);\n    }\n    read() {\n        return this._reader.read();\n    }\n}\nexports.default = SyncProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst events_1 = require(\"events\");\nconst fsScandir = require(\"@nodelib/fs.scandir\");\nconst fastq = require(\"fastq\");\nconst common = require(\"./common\");\nconst reader_1 = require(\"./reader\");\nclass AsyncReader extends reader_1.default {\n    constructor(_root, _settings) {\n        super(_root, _settings);\n        this._settings = _settings;\n        this._scandir = fsScandir.scandir;\n        this._emitter = new events_1.EventEmitter();\n        this._queue = fastq(this._worker.bind(this), this._settings.concurrency);\n        this._isFatalError = false;\n        this._isDestroyed = false;\n        this._queue.drain = () => {\n            if (!this._isFatalError) {\n                this._emitter.emit('end');\n            }\n        };\n    }\n    read() {\n        this._isFatalError = false;\n        this._isDestroyed = false;\n        setImmediate(() => {\n            this._pushToQueue(this._root, this._settings.basePath);\n        });\n        return this._emitter;\n    }\n    get isDestroyed() {\n        return this._isDestroyed;\n    }\n    destroy() {\n        if (this._isDestroyed) {\n            throw new Error('The reader is already destroyed');\n        }\n        this._isDestroyed = true;\n        this._queue.killAndDrain();\n    }\n    onEntry(callback) {\n        this._emitter.on('entry', callback);\n    }\n    onError(callback) {\n        this._emitter.once('error', callback);\n    }\n    onEnd(callback) {\n        this._emitter.once('end', callback);\n    }\n    _pushToQueue(directory, base) {\n        const queueItem = { directory, base };\n        this._queue.push(queueItem, (error) => {\n            if (error !== null) {\n                this._handleError(error);\n            }\n        });\n    }\n    _worker(item, done) {\n        this._scandir(item.directory, this._settings.fsScandirSettings, (error, entries) => {\n            if (error !== null) {\n                done(error, undefined);\n                return;\n            }\n            for (const entry of entries) {\n                this._handleEntry(entry, item.base);\n            }\n            done(null, undefined);\n        });\n    }\n    _handleError(error) {\n        if (this._isDestroyed || !common.isFatalError(this._settings, error)) {\n            return;\n        }\n        this._isFatalError = true;\n        this._isDestroyed = true;\n        this._emitter.emit('error', error);\n    }\n    _handleEntry(entry, base) {\n        if (this._isDestroyed || this._isFatalError) {\n            return;\n        }\n        const fullpath = entry.path;\n        if (base !== undefined) {\n            entry.path = common.joinPathSegments(base, entry.name, this._settings.pathSegmentSeparator);\n        }\n        if (common.isAppliedFilter(this._settings.entryFilter, entry)) {\n            this._emitEntry(entry);\n        }\n        if (entry.dirent.isDirectory() && common.isAppliedFilter(this._settings.deepFilter, entry)) {\n            this._pushToQueue(fullpath, base === undefined ? undefined : entry.path);\n        }\n    }\n    _emitEntry(entry) {\n        this._emitter.emit('entry', entry);\n    }\n}\nexports.default = AsyncReader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.joinPathSegments = exports.replacePathSegmentSeparator = exports.isAppliedFilter = exports.isFatalError = void 0;\nfunction isFatalError(settings, error) {\n    if (settings.errorFilter === null) {\n        return true;\n    }\n    return !settings.errorFilter(error);\n}\nexports.isFatalError = isFatalError;\nfunction isAppliedFilter(filter, value) {\n    return filter === null || filter(value);\n}\nexports.isAppliedFilter = isAppliedFilter;\nfunction replacePathSegmentSeparator(filepath, separator) {\n    return filepath.split(/[/\\\\]/).join(separator);\n}\nexports.replacePathSegmentSeparator = replacePathSegmentSeparator;\nfunction joinPathSegments(a, b, separator) {\n    if (a === '') {\n        return b;\n    }\n    /**\n     * The correct handling of cases when the first segment is a root (`/`, `C:/`) or UNC path (`//?/C:/`).\n     */\n    if (a.endsWith(separator)) {\n        return a + b;\n    }\n    return a + separator + b;\n}\nexports.joinPathSegments = joinPathSegments;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst common = require(\"./common\");\nclass Reader {\n    constructor(_root, _settings) {\n        this._root = _root;\n        this._settings = _settings;\n        this._root = common.replacePathSegmentSeparator(_root, _settings.pathSegmentSeparator);\n    }\n}\nexports.default = Reader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fsScandir = require(\"@nodelib/fs.scandir\");\nconst common = require(\"./common\");\nconst reader_1 = require(\"./reader\");\nclass SyncReader extends reader_1.default {\n    constructor() {\n        super(...arguments);\n        this._scandir = fsScandir.scandirSync;\n        this._storage = [];\n        this._queue = new Set();\n    }\n    read() {\n        this._pushToQueue(this._root, this._settings.basePath);\n        this._handleQueue();\n        return this._storage;\n    }\n    _pushToQueue(directory, base) {\n        this._queue.add({ directory, base });\n    }\n    _handleQueue() {\n        for (const item of this._queue.values()) {\n            this._handleDirectory(item.directory, item.base);\n        }\n    }\n    _handleDirectory(directory, base) {\n        try {\n            const entries = this._scandir(directory, this._settings.fsScandirSettings);\n            for (const entry of entries) {\n                this._handleEntry(entry, base);\n            }\n        }\n        catch (error) {\n            this._handleError(error);\n        }\n    }\n    _handleError(error) {\n        if (!common.isFatalError(this._settings, error)) {\n            return;\n        }\n        throw error;\n    }\n    _handleEntry(entry, base) {\n        const fullpath = entry.path;\n        if (base !== undefined) {\n            entry.path = common.joinPathSegments(base, entry.name, this._settings.pathSegmentSeparator);\n        }\n        if (common.isAppliedFilter(this._settings.entryFilter, entry)) {\n            this._pushToStorage(entry);\n        }\n        if (entry.dirent.isDirectory() && common.isAppliedFilter(this._settings.deepFilter, entry)) {\n            this._pushToQueue(fullpath, base === undefined ? undefined : entry.path);\n        }\n    }\n    _pushToStorage(entry) {\n        this._storage.push(entry);\n    }\n}\nexports.default = SyncReader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst path = require(\"path\");\nconst fsScandir = require(\"@nodelib/fs.scandir\");\nclass Settings {\n    constructor(_options = {}) {\n        this._options = _options;\n        this.basePath = this._getValue(this._options.basePath, undefined);\n        this.concurrency = this._getValue(this._options.concurrency, Number.POSITIVE_INFINITY);\n        this.deepFilter = this._getValue(this._options.deepFilter, null);\n        this.entryFilter = this._getValue(this._options.entryFilter, null);\n        this.errorFilter = this._getValue(this._options.errorFilter, null);\n        this.pathSegmentSeparator = this._getValue(this._options.pathSegmentSeparator, path.sep);\n        this.fsScandirSettings = new fsScandir.Settings({\n            followSymbolicLinks: this._options.followSymbolicLinks,\n            fs: this._options.fs,\n            pathSegmentSeparator: this._options.pathSegmentSeparator,\n            stats: this._options.stats,\n            throwErrorOnBrokenSymbolicLink: this._options.throwErrorOnBrokenSymbolicLink\n        });\n    }\n    _getValue(option, value) {\n        return option !== null && option !== void 0 ? option : value;\n    }\n}\nexports.default = Settings;\n","\"use strict\";\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar AutoCollectConsole = (function () {\n    function AutoCollectConsole(client) {\n        if (!!AutoCollectConsole.INSTANCE) {\n            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");\n        }\n        this._client = client;\n        AutoCollectConsole.INSTANCE = this;\n    }\n    AutoCollectConsole.prototype.enable = function (isEnabled, collectConsoleLog) {\n        if (DiagChannel.IsInitialized) {\n            require(\"./diagnostic-channel/console.sub\").enable(isEnabled && collectConsoleLog, this._client);\n            require(\"./diagnostic-channel/bunyan.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/winston.sub\").enable(isEnabled, this._client);\n        }\n    };\n    AutoCollectConsole.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectConsole.prototype.dispose = function () {\n        AutoCollectConsole.INSTANCE = null;\n        this.enable(false, false);\n    };\n    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];\n    return AutoCollectConsole;\n}());\nmodule.exports = AutoCollectConsole;\n//# sourceMappingURL=Console.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Logging = require(\"../Library/Logging\");\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar CorrelationContextManager = (function () {\n    function CorrelationContextManager() {\n    }\n    /**\n     *  Provides the current Context.\n     *  The context is the most recent one entered into for the current\n     *  logical chain of execution, including across asynchronous calls.\n     */\n    CorrelationContextManager.getCurrentContext = function () {\n        if (!CorrelationContextManager.enabled) {\n            return null;\n        }\n        var context = CorrelationContextManager.session.get(CorrelationContextManager.CONTEXT_NAME);\n        if (context === undefined) {\n            return null;\n        }\n        return context;\n    };\n    /**\n     *  A helper to generate objects conforming to the CorrelationContext interface\n     */\n    CorrelationContextManager.generateContextObject = function (operationId, parentId, operationName, correlationContextHeader, traceparent, tracestate) {\n        parentId = parentId || operationId;\n        if (this.enabled) {\n            return {\n                operation: {\n                    name: operationName,\n                    id: operationId,\n                    parentId: parentId,\n                    traceparent: traceparent,\n                    tracestate: tracestate\n                },\n                customProperties: new CustomPropertiesImpl(correlationContextHeader)\n            };\n        }\n        return null;\n    };\n    /**\n     *  Runs a function inside a given Context.\n     *  All logical children of the execution path that entered this Context\n     *  will receive this Context object on calls to GetCurrentContext.\n     */\n    CorrelationContextManager.runWithContext = function (context, fn) {\n        if (CorrelationContextManager.enabled) {\n            return CorrelationContextManager.session.bind(fn, (_a = {}, _a[CorrelationContextManager.CONTEXT_NAME] = context, _a))();\n        }\n        else {\n            return fn();\n        }\n        var _a;\n    };\n    /**\n     * Wrapper for cls-hooked bindEmitter method\n     */\n    CorrelationContextManager.wrapEmitter = function (emitter) {\n        if (CorrelationContextManager.enabled) {\n            CorrelationContextManager.session.bindEmitter(emitter);\n        }\n    };\n    /**\n     *  Patches a callback to restore the correct Context when getCurrentContext\n     *  is run within it. This is necessary if automatic correlation fails to work\n     *  with user-included libraries.\n     *\n     *  The supplied callback will be given the same context that was present for\n     *  the call to wrapCallback.  */\n    CorrelationContextManager.wrapCallback = function (fn) {\n        if (CorrelationContextManager.enabled) {\n            return CorrelationContextManager.session.bind(fn);\n        }\n        return fn;\n    };\n    /**\n     *  Enables the CorrelationContextManager.\n     */\n    CorrelationContextManager.enable = function (forceClsHooked) {\n        if (this.enabled) {\n            return;\n        }\n        if (!this.isNodeVersionCompatible()) {\n            this.enabled = false;\n            return;\n        }\n        if (!CorrelationContextManager.hasEverEnabled) {\n            this.forceClsHooked = forceClsHooked;\n            this.hasEverEnabled = true;\n            if (typeof this.cls === \"undefined\") {\n                if ((CorrelationContextManager.forceClsHooked === true) || (CorrelationContextManager.forceClsHooked === undefined && CorrelationContextManager.shouldUseClsHooked())) {\n                    this.cls = require('cls-hooked');\n                }\n                else {\n                    this.cls = require('continuation-local-storage');\n                }\n            }\n            CorrelationContextManager.session = this.cls.createNamespace(\"AI-CLS-Session\");\n            DiagChannel.registerContextPreservation(function (cb) {\n                return CorrelationContextManager.session.bind(cb);\n            });\n        }\n        this.enabled = true;\n    };\n    /**\n     *  Disables the CorrelationContextManager.\n     */\n    CorrelationContextManager.disable = function () {\n        this.enabled = false;\n    };\n    /**\n     * Reset the namespace\n     */\n    CorrelationContextManager.reset = function () {\n        if (CorrelationContextManager.hasEverEnabled) {\n            CorrelationContextManager.session = null;\n            CorrelationContextManager.session = this.cls.createNamespace('AI-CLS-Session');\n        }\n    };\n    /**\n     *  Reports if CorrelationContextManager is able to run in this environment\n     */\n    CorrelationContextManager.isNodeVersionCompatible = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);\n    };\n    /**\n     * We only want to use cls-hooked when it uses async_hooks api (8.2+), else\n     * use async-listener (plain -cls)\n     */\n    CorrelationContextManager.shouldUseClsHooked = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 2);\n    };\n    /**\n     * A TypeError is triggered by cls-hooked for node [8.0, 8.2)\n     * @internal Used in tests only\n     */\n    CorrelationContextManager.canUseClsHooked = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        var greater800 = (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 0);\n        var less820 = (parseInt(nodeVer[0]) < 8) || (parseInt(nodeVer[0]) <= 8 && parseInt(nodeVer[1]) < 2);\n        var greater470 = parseInt(nodeVer[0]) > 4 || (parseInt(nodeVer[0]) >= 4 && parseInt(nodeVer[1]) >= 7); // cls-hooked requires node 4.7+\n        return !(greater800 && less820) && greater470;\n    };\n    CorrelationContextManager.enabled = false;\n    CorrelationContextManager.hasEverEnabled = false;\n    CorrelationContextManager.forceClsHooked = undefined; // true: use cls-hooked, false: use cls, undefined: choose based on node version\n    CorrelationContextManager.CONTEXT_NAME = \"ApplicationInsights-Context\";\n    return CorrelationContextManager;\n}());\nexports.CorrelationContextManager = CorrelationContextManager;\nvar CustomPropertiesImpl = (function () {\n    function CustomPropertiesImpl(header) {\n        this.props = [];\n        this.addHeaderData(header);\n    }\n    CustomPropertiesImpl.prototype.addHeaderData = function (header) {\n        var keyvals = header ? header.split(\", \") : [];\n        this.props = keyvals.map(function (keyval) {\n            var parts = keyval.split(\"=\");\n            return { key: parts[0], value: parts[1] };\n        }).concat(this.props);\n    };\n    CustomPropertiesImpl.prototype.serializeToHeader = function () {\n        return this.props.map(function (keyval) {\n            return keyval.key + \"=\" + keyval.value;\n        }).join(\", \");\n    };\n    CustomPropertiesImpl.prototype.getProperty = function (prop) {\n        for (var i = 0; i < this.props.length; ++i) {\n            var keyval = this.props[i];\n            if (keyval.key === prop) {\n                return keyval.value;\n            }\n        }\n        return;\n    };\n    // TODO: Strictly according to the spec, properties which are recieved from\n    // an incoming request should be left untouched, while we may add our own new\n    // properties. The logic here will need to change to track that.\n    CustomPropertiesImpl.prototype.setProperty = function (prop, val) {\n        if (CustomPropertiesImpl.bannedCharacters.test(prop) || CustomPropertiesImpl.bannedCharacters.test(val)) {\n            Logging.warn(\"Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: \" + prop + \" and value: \" + val);\n            return;\n        }\n        for (var i = 0; i < this.props.length; ++i) {\n            var keyval = this.props[i];\n            if (keyval.key === prop) {\n                keyval.value = val;\n                return;\n            }\n        }\n        this.props.push({ key: prop, value: val });\n    };\n    CustomPropertiesImpl.bannedCharacters = /[,=]/;\n    return CustomPropertiesImpl;\n}());\n//# sourceMappingURL=CorrelationContextManager.js.map","\"use strict\";\nvar AutoCollectExceptions = (function () {\n    function AutoCollectExceptions(client) {\n        if (!!AutoCollectExceptions.INSTANCE) {\n            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectExceptions.INSTANCE = this;\n        this._client = client;\n        // Only use for 13.7.0+\n        var nodeVer = process.versions.node.split(\".\");\n        AutoCollectExceptions._canUseUncaughtExceptionMonitor = parseInt(nodeVer[0]) > 13 || (parseInt(nodeVer[0]) === 13 && parseInt(nodeVer[1]) >= 7);\n    }\n    AutoCollectExceptions.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectExceptions.prototype.enable = function (isEnabled) {\n        var _this = this;\n        if (isEnabled) {\n            this._isInitialized = true;\n            var self = this;\n            if (!this._exceptionListenerHandle) {\n                // For scenarios like Promise.reject(), an error won't be passed to the handle. Create a placeholder\n                // error for these scenarios.\n                var handle = function (reThrow, name, error) {\n                    if (error === void 0) { error = new Error(AutoCollectExceptions._FALLBACK_ERROR_MESSAGE); }\n                    _this._client.trackException({ exception: error });\n                    _this._client.flush({ isAppCrashing: true });\n                    // only rethrow when we are the only listener\n                    if (reThrow && name && process.listeners(name).length === 1) {\n                        console.error(error);\n                        process.exit(1);\n                    }\n                };\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\n                    // Node.js >= 13.7.0, use uncaughtExceptionMonitor. It handles both promises and exceptions\n                    this._exceptionListenerHandle = handle.bind(this, false); // never rethrows\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\n                }\n                else {\n                    this._exceptionListenerHandle = handle.bind(this, true, AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME);\n                    this._rejectionListenerHandle = handle.bind(this, false); // never rethrows\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\n                    process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\n                }\n            }\n        }\n        else {\n            if (this._exceptionListenerHandle) {\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\n                }\n                else {\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\n                    process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\n                }\n                this._exceptionListenerHandle = undefined;\n                this._rejectionListenerHandle = undefined;\n                delete this._exceptionListenerHandle;\n                delete this._rejectionListenerHandle;\n            }\n        }\n    };\n    AutoCollectExceptions.prototype.dispose = function () {\n        AutoCollectExceptions.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectExceptions.INSTANCE = null;\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME = \"uncaughtExceptionMonitor\";\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME = \"uncaughtException\";\n    AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME = \"unhandledRejection\";\n    AutoCollectExceptions._RETHROW_EXIT_MESSAGE = \"Application Insights Rethrow Exception Handler\";\n    AutoCollectExceptions._FALLBACK_ERROR_MESSAGE = \"A promise was rejected without providing an error. Application Insights generated this error stack for you.\";\n    AutoCollectExceptions._canUseUncaughtExceptionMonitor = false;\n    return AutoCollectExceptions;\n}());\nmodule.exports = AutoCollectExceptions;\n//# sourceMappingURL=Exceptions.js.map","\"use strict\";\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Logging = require(\"../Library/Logging\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar HttpDependencyParser = require(\"./HttpDependencyParser\");\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\nvar Traceparent = require(\"../Library/Traceparent\");\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar AutoCollectHttpDependencies = (function () {\n    function AutoCollectHttpDependencies(client) {\n        if (!!AutoCollectHttpDependencies.INSTANCE) {\n            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectHttpDependencies.INSTANCE = this;\n        this._client = client;\n    }\n    AutoCollectHttpDependencies.prototype.enable = function (isEnabled) {\n        this._isEnabled = isEnabled;\n        if (this._isEnabled && !this._isInitialized) {\n            this._initialize();\n        }\n        if (DiagChannel.IsInitialized) {\n            require(\"./diagnostic-channel/mongodb.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/mysql.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/redis.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/postgres.sub\").enable(isEnabled, this._client);\n        }\n    };\n    AutoCollectHttpDependencies.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectHttpDependencies.prototype._initialize = function () {\n        var _this = this;\n        this._isInitialized = true;\n        var originalGet = http.get;\n        var originalRequest = http.request;\n        var originalHttpsRequest = https.request;\n        var clientRequestPatch = function (request, options) {\n            var shouldCollect = !options[AutoCollectHttpDependencies.disableCollectionRequestOption] &&\n                !request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];\n            request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag] = true;\n            if (request && options && shouldCollect) {\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\n                AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\n            }\n        };\n        // On node >= v0.11.12 and < 9.0 (excluding 8.9.0) https.request just calls http.request (with additional options).\n        // On node < 0.11.12, 8.9.0, and 9.0 > https.request is handled separately\n        // Patch both and leave a flag to not double-count on versions that just call through\n        // We add the flag to both http and https to protect against strange double collection in other scenarios\n        http.request = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));\n            clientRequestPatch(request, options);\n            return request;\n        };\n        https.request = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = originalHttpsRequest.call.apply(originalHttpsRequest, [https, options].concat(requestArgs));\n            clientRequestPatch(request, options);\n            return request;\n        };\n        // Node 8 calls http.request from http.get using a local reference!\n        // We have to patch .get manually in this case and can't just assume request is enough\n        // We have to replace the entire method in this case. We can't call the original.\n        // This is because calling the original will give us no chance to set headers as it internally does .end().\n        http.get = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = (_a = http.request).call.apply(_a, [http, options].concat(requestArgs));\n            request.end();\n            return request;\n            var _a;\n        };\n        https.get = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = (_a = https.request).call.apply(_a, [https, options].concat(requestArgs));\n            request.end();\n            return request;\n            var _a;\n        };\n    };\n    /**\n     * Tracks an outgoing request. Because it may set headers this method must be called before\n     * writing content to or ending the request.\n     */\n    AutoCollectHttpDependencies.trackRequest = function (client, telemetry) {\n        if (!telemetry.options || !telemetry.request || !client) {\n            Logging.info(\"AutoCollectHttpDependencies.trackRequest was called with invalid parameters: \", !telemetry.options, !telemetry.request, !client);\n            return;\n        }\n        var requestParser = new HttpDependencyParser(telemetry.options, telemetry.request);\n        var currentContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var uniqueRequestId;\n        var uniqueTraceparent;\n        if (currentContext && currentContext.operation && currentContext.operation.traceparent && Traceparent.isValidTraceId(currentContext.operation.traceparent.traceId)) {\n            currentContext.operation.traceparent.updateSpanId();\n            uniqueRequestId = currentContext.operation.traceparent.getBackCompatRequestId();\n        }\n        else if (CorrelationIdManager.w3cEnabled) {\n            // Start an operation now so that we can include the w3c headers in the outgoing request\n            var traceparent = new Traceparent();\n            uniqueTraceparent = traceparent.toString();\n            uniqueRequestId = traceparent.getBackCompatRequestId();\n        }\n        else {\n            uniqueRequestId = currentContext && currentContext.operation && (currentContext.operation.parentId + AutoCollectHttpDependencies.requestNumber++ + '.');\n        }\n        // Add the source correlationId to the request headers, if a value was not already provided.\n        // The getHeader/setHeader methods aren't available on very old Node versions, and\n        // are not included in the v0.10 type declarations currently used. So check if the\n        // methods exist before invoking them.\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) && telemetry.request.getHeader && telemetry.request.setHeader) {\n            if (client.config && client.config.correlationId) {\n                // getHeader returns \"any\" type in newer versions of node. In basic scenarios, this will be <string | string[] | number>, but could be modified to anything else via middleware\n                var correlationHeader = telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);\n                try {\n                    Util.safeIncludeCorrelationHeader(client, telemetry.request, correlationHeader);\n                }\n                catch (err) {\n                    Logging.warn(\"Request-Context header could not be set. Correlation of requests may be lost\", err);\n                }\n                if (currentContext && currentContext.operation) {\n                    try {\n                        telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader, uniqueRequestId);\n                        // Also set legacy headers\n                        telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader, currentContext.operation.id);\n                        telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader, uniqueRequestId);\n                        // Set W3C headers, if available\n                        if (uniqueTraceparent || currentContext.operation.traceparent) {\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, uniqueTraceparent || currentContext.operation.traceparent.toString());\n                        }\n                        else if (CorrelationIdManager.w3cEnabled) {\n                            // should never get here since we set uniqueTraceparent above for the w3cEnabled scenario\n                            var traceparent = new Traceparent().toString();\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, traceparent);\n                        }\n                        if (currentContext.operation.tracestate) {\n                            var tracestate = currentContext.operation.tracestate.toString();\n                            if (tracestate) {\n                                telemetry.request.setHeader(RequestResponseHeaders.traceStateHeader, tracestate);\n                            }\n                        }\n                        var correlationContextHeader = currentContext.customProperties.serializeToHeader();\n                        if (correlationContextHeader) {\n                            telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader, correlationContextHeader);\n                        }\n                    }\n                    catch (err) {\n                        Logging.warn(\"Correlation headers could not be set. Correlation of requests may be lost.\", err);\n                    }\n                }\n            }\n        }\n        // Collect dependency telemetry about the request when it finishes.\n        if (telemetry.request.on) {\n            telemetry.request.on('response', function (response) {\n                requestParser.onResponse(response);\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\n                dependencyTelemetry.contextObjects[\"http.ClientResponse\"] = response;\n                client.trackDependency(dependencyTelemetry);\n            });\n            telemetry.request.on('error', function (e) {\n                requestParser.onError(e);\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\n                dependencyTelemetry.contextObjects[\"Error\"] = e;\n                client.trackDependency(dependencyTelemetry);\n            });\n        }\n    };\n    AutoCollectHttpDependencies.prototype.dispose = function () {\n        AutoCollectHttpDependencies.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectHttpDependencies.disableCollectionRequestOption = 'disableAppInsightsAutoCollection';\n    AutoCollectHttpDependencies.requestNumber = 1;\n    AutoCollectHttpDependencies.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\n    return AutoCollectHttpDependencies;\n}());\nmodule.exports = AutoCollectHttpDependencies;\n//# sourceMappingURL=HttpDependencies.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar url = require(\"url\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar RequestParser = require(\"./RequestParser\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\n/**\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\n */\nvar HttpDependencyParser = (function (_super) {\n    __extends(HttpDependencyParser, _super);\n    function HttpDependencyParser(requestOptions, request) {\n        var _this = _super.call(this) || this;\n        if (request && request.method && requestOptions) {\n            // The ClientRequest.method property isn't documented, but is always there.\n            _this.method = request.method;\n            _this.url = HttpDependencyParser._getUrlFromRequestOptions(requestOptions, request);\n            _this.startTime = +new Date();\n        }\n        return _this;\n    }\n    /**\n     * Called when the ClientRequest emits an error event.\n     */\n    HttpDependencyParser.prototype.onError = function (error) {\n        this._setStatus(undefined, error);\n    };\n    /**\n     * Called when the ClientRequest emits a response event.\n     */\n    HttpDependencyParser.prototype.onResponse = function (response) {\n        this._setStatus(response.statusCode, undefined);\n        this.correlationId = Util.getCorrelationContextTarget(response, RequestResponseHeaders.requestContextTargetKey);\n    };\n    /**\n     * Gets a dependency data contract object for a completed ClientRequest.\n     */\n    HttpDependencyParser.prototype.getDependencyTelemetry = function (baseTelemetry, dependencyId) {\n        var urlObject = url.parse(this.url);\n        urlObject.search = undefined;\n        urlObject.hash = undefined;\n        var dependencyName = this.method.toUpperCase() + \" \" + urlObject.pathname;\n        var remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\n        var remoteDependencyTarget = urlObject.hostname;\n        if (this.correlationId) {\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_AI;\n            if (this.correlationId !== CorrelationIdManager.correlationIdPrefix) {\n                remoteDependencyTarget = urlObject.hostname + \" | \" + this.correlationId;\n            }\n        }\n        else {\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\n        }\n        if (urlObject.port) {\n            remoteDependencyTarget += \":\" + urlObject.port;\n        }\n        var dependencyTelemetry = {\n            id: dependencyId,\n            name: dependencyName,\n            data: this.url,\n            duration: this.duration,\n            success: this._isSuccess(),\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\n            properties: this.properties || {},\n            dependencyTypeName: remoteDependencyType,\n            target: remoteDependencyTarget\n        };\n        // We should keep any parameters the user passed in\n        // Except the fields defined above in requestTelemetry, which take priority\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\n        if (baseTelemetry) {\n            // Copy missing fields\n            for (var key in baseTelemetry) {\n                if (!dependencyTelemetry[key]) {\n                    dependencyTelemetry[key] = baseTelemetry[key];\n                }\n            }\n            // Merge properties\n            if (baseTelemetry.properties) {\n                for (var key in baseTelemetry.properties) {\n                    dependencyTelemetry.properties[key] = baseTelemetry.properties[key];\n                }\n            }\n        }\n        return dependencyTelemetry;\n    };\n    /**\n     * Builds a URL from request options, using the same logic as http.request(). This is\n     * necessary because a ClientRequest object does not expose a url property.\n     */\n    HttpDependencyParser._getUrlFromRequestOptions = function (options, request) {\n        if (typeof options === 'string') {\n            options = url.parse(options);\n        }\n        else {\n            // Avoid modifying the original options object.\n            var originalOptions_1 = options;\n            options = {};\n            if (originalOptions_1) {\n                Object.keys(originalOptions_1).forEach(function (key) {\n                    options[key] = originalOptions_1[key];\n                });\n            }\n        }\n        // Oddly, url.format ignores path and only uses pathname and search,\n        // so create them from the path, if path was specified\n        if (options.path) {\n            var parsedQuery = url.parse(options.path);\n            options.pathname = parsedQuery.pathname;\n            options.search = parsedQuery.search;\n        }\n        // Simiarly, url.format ignores hostname and port if host is specified,\n        // even if host doesn't have the port, but http.request does not work\n        // this way. It will use the port if one is not specified in host,\n        // effectively treating host as hostname, but will use the port specified\n        // in host if it exists.\n        if (options.host && options.port) {\n            // Force a protocol so it will parse the host as the host, not path.\n            // It is discarded and not used, so it doesn't matter if it doesn't match\n            var parsedHost = url.parse(\"http://\" + options.host);\n            if (!parsedHost.port && options.port) {\n                options.hostname = options.host;\n                delete options.host;\n            }\n        }\n        // Mix in default values used by http.request and others\n        options.protocol = options.protocol || (request.agent && request.agent.protocol) || undefined;\n        options.hostname = options.hostname || 'localhost';\n        return url.format(options);\n    };\n    return HttpDependencyParser;\n}(RequestParser));\nmodule.exports = HttpDependencyParser;\n//# sourceMappingURL=HttpDependencyParser.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar url = require(\"url\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar RequestParser = require(\"./RequestParser\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\nvar Tracestate = require(\"../Library/Tracestate\");\nvar Traceparent = require(\"../Library/Traceparent\");\n/**\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\n */\nvar HttpRequestParser = (function (_super) {\n    __extends(HttpRequestParser, _super);\n    function HttpRequestParser(request, requestId) {\n        var _this = _super.call(this) || this;\n        if (request) {\n            _this.method = request.method;\n            _this.url = _this._getAbsoluteUrl(request);\n            _this.startTime = +new Date();\n            _this.socketRemoteAddress = request.socket && request.socket.remoteAddress;\n            _this.parseHeaders(request, requestId);\n            if (request.connection) {\n                _this.connectionRemoteAddress = request.connection.remoteAddress;\n                _this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;\n            }\n        }\n        return _this;\n    }\n    HttpRequestParser.prototype.onError = function (error, ellapsedMilliseconds) {\n        this._setStatus(undefined, error);\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\n        if (ellapsedMilliseconds) {\n            this.duration = ellapsedMilliseconds;\n        }\n    };\n    HttpRequestParser.prototype.onResponse = function (response, ellapsedMilliseconds) {\n        this._setStatus(response.statusCode, undefined);\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\n        if (ellapsedMilliseconds) {\n            this.duration = ellapsedMilliseconds;\n        }\n    };\n    HttpRequestParser.prototype.getRequestTelemetry = function (baseTelemetry) {\n        var requestTelemetry = {\n            id: this.requestId,\n            name: this.method + \" \" + url.parse(this.url).pathname,\n            url: this.url,\n            /*\n            See https://github.com/Microsoft/ApplicationInsights-dotnet-server/blob/25d695e6a906fbe977f67be3966d25dbf1c50a79/Src/Web/Web.Shared.Net/RequestTrackingTelemetryModule.cs#L250\n            for reference\n            */\n            source: this.sourceCorrelationId,\n            duration: this.duration,\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\n            success: this._isSuccess(),\n            properties: this.properties\n        };\n        // We should keep any parameters the user passed in\n        // Except the fields defined above in requestTelemetry, which take priority\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\n        if (baseTelemetry) {\n            // Copy missing fields\n            for (var key in baseTelemetry) {\n                if (!requestTelemetry[key]) {\n                    requestTelemetry[key] = baseTelemetry[key];\n                }\n            }\n            // Merge properties\n            if (baseTelemetry.properties) {\n                for (var key in baseTelemetry.properties) {\n                    requestTelemetry.properties[key] = baseTelemetry.properties[key];\n                }\n            }\n        }\n        return requestTelemetry;\n    };\n    HttpRequestParser.prototype.getRequestTags = function (tags) {\n        // create a copy of the context for requests since client info will be used here\n        var newTags = {};\n        for (var key in tags) {\n            newTags[key] = tags[key];\n        }\n        // don't override tags if they are already set\n        newTags[HttpRequestParser.keys.locationIp] = tags[HttpRequestParser.keys.locationIp] || this._getIp();\n        newTags[HttpRequestParser.keys.sessionId] = tags[HttpRequestParser.keys.sessionId] || this._getId(\"ai_session\");\n        newTags[HttpRequestParser.keys.userId] = tags[HttpRequestParser.keys.userId] || this._getId(\"ai_user\");\n        newTags[HttpRequestParser.keys.userAuthUserId] = tags[HttpRequestParser.keys.userAuthUserId] || this._getId(\"ai_authUser\");\n        newTags[HttpRequestParser.keys.operationName] = this.getOperationName(tags);\n        newTags[HttpRequestParser.keys.operationParentId] = this.getOperationParentId(tags);\n        newTags[HttpRequestParser.keys.operationId] = this.getOperationId(tags);\n        return newTags;\n    };\n    HttpRequestParser.prototype.getOperationId = function (tags) {\n        return tags[HttpRequestParser.keys.operationId] || this.operationId;\n    };\n    HttpRequestParser.prototype.getOperationParentId = function (tags) {\n        return tags[HttpRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);\n    };\n    HttpRequestParser.prototype.getOperationName = function (tags) {\n        return tags[HttpRequestParser.keys.operationName] || this.method + \" \" + url.parse(this.url).pathname;\n    };\n    HttpRequestParser.prototype.getRequestId = function () {\n        return this.requestId;\n    };\n    HttpRequestParser.prototype.getCorrelationContextHeader = function () {\n        return this.correlationContextHeader;\n    };\n    HttpRequestParser.prototype.getTraceparent = function () {\n        return this.traceparent;\n    };\n    HttpRequestParser.prototype.getTracestate = function () {\n        return this.tracestate;\n    };\n    HttpRequestParser.prototype.getLegacyRootId = function () {\n        return this.legacyRootId;\n    };\n    HttpRequestParser.prototype._getAbsoluteUrl = function (request) {\n        if (!request.headers) {\n            return request.url;\n        }\n        var encrypted = request.connection ? request.connection.encrypted : null;\n        var requestUrl = url.parse(request.url);\n        var pathName = requestUrl.pathname;\n        var search = requestUrl.search;\n        var absoluteUrl = url.format({\n            protocol: encrypted ? \"https\" : \"http\",\n            host: request.headers.host,\n            pathname: pathName,\n            search: search\n        });\n        return absoluteUrl;\n    };\n    HttpRequestParser.prototype._getIp = function () {\n        // regex to match ipv4 without port\n        // Note: including the port would cause the payload to be rejected by the data collector\n        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\n        var check = function (str) {\n            var results = ipMatch.exec(str);\n            if (results) {\n                return results[0];\n            }\n        };\n        var ip = check(this.rawHeaders[\"x-forwarded-for\"])\n            || check(this.rawHeaders[\"x-client-ip\"])\n            || check(this.rawHeaders[\"x-real-ip\"])\n            || check(this.connectionRemoteAddress)\n            || check(this.socketRemoteAddress)\n            || check(this.legacySocketRemoteAddress);\n        // node v12 returns this if the address is \"localhost\"\n        if (!ip\n            && this.connectionRemoteAddress\n            && this.connectionRemoteAddress.substr\n            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {\n            ip = \"127.0.0.1\";\n        }\n        return ip;\n    };\n    HttpRequestParser.prototype._getId = function (name) {\n        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&\n            typeof this.rawHeaders[\"cookie\"] === 'string' && this.rawHeaders[\"cookie\"]) || \"\";\n        var value = HttpRequestParser.parseId(Util.getCookie(name, cookie));\n        return value;\n    };\n    /**\n     * Sets this operation's operationId, parentId, requestId (and legacyRootId, if necessary) based on this operation's traceparent\n     */\n    HttpRequestParser.prototype.setBackCompatFromThisTraceContext = function () {\n        // Set operationId\n        this.operationId = this.traceparent.traceId;\n        if (this.traceparent.legacyRootId) {\n            this.legacyRootId = this.traceparent.legacyRootId;\n        }\n        // Set parentId with existing spanId\n        this.parentId = this.traceparent.parentId;\n        // Update the spanId and set the current requestId\n        this.traceparent.updateSpanId();\n        this.requestId = this.traceparent.getBackCompatRequestId();\n    };\n    HttpRequestParser.prototype.parseHeaders = function (request, requestId) {\n        this.rawHeaders = request.headers || request.rawHeaders;\n        this.userAgent = request.headers && request.headers[\"user-agent\"];\n        this.sourceCorrelationId = Util.getCorrelationContextTarget(request, RequestResponseHeaders.requestContextSourceKey);\n        if (request.headers) {\n            var tracestateHeader = request.headers[RequestResponseHeaders.traceStateHeader]; // w3c header\n            var traceparentHeader = request.headers[RequestResponseHeaders.traceparentHeader]; // w3c header\n            var requestIdHeader = request.headers[RequestResponseHeaders.requestIdHeader]; // default AI header\n            var legacy_parentId = request.headers[RequestResponseHeaders.parentIdHeader]; // legacy AI header\n            var legacy_rootId = request.headers[RequestResponseHeaders.rootIdHeader]; // legacy AI header\n            this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\n            if (CorrelationIdManager.w3cEnabled && (traceparentHeader || tracestateHeader)) {\n                // Parse W3C Trace Context headers\n                this.traceparent = new Traceparent(traceparentHeader); // new traceparent is always created from this\n                this.tracestate = traceparentHeader && tracestateHeader && new Tracestate(tracestateHeader); // discard tracestate if no traceparent is present\n                this.setBackCompatFromThisTraceContext();\n            }\n            else if (requestIdHeader) {\n                // Parse AI headers\n                if (CorrelationIdManager.w3cEnabled) {\n                    this.traceparent = new Traceparent(null, requestIdHeader);\n                    this.setBackCompatFromThisTraceContext();\n                }\n                else {\n                    this.parentId = requestIdHeader;\n                    this.requestId = CorrelationIdManager.generateRequestId(this.parentId);\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\n                }\n            }\n            else {\n                // Legacy fallback\n                if (CorrelationIdManager.w3cEnabled) {\n                    this.traceparent = new Traceparent();\n                    this.traceparent.parentId = legacy_parentId;\n                    this.traceparent.legacyRootId = legacy_rootId || legacy_parentId;\n                    this.setBackCompatFromThisTraceContext();\n                }\n                else {\n                    this.parentId = legacy_parentId;\n                    this.requestId = CorrelationIdManager.generateRequestId(legacy_rootId || this.parentId);\n                    this.correlationContextHeader = null;\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\n                }\n            }\n            if (requestId) {\n                // For the scenarios that don't guarantee an AI-created context,\n                // override the requestId with the provided one.\n                this.requestId = requestId;\n                this.operationId = CorrelationIdManager.getRootId(this.requestId);\n            }\n        }\n    };\n    HttpRequestParser.parseId = function (cookieValue) {\n        var cookieParts = cookieValue.split(\"|\");\n        if (cookieParts.length > 0) {\n            return cookieParts[0];\n        }\n        return \"\"; // old behavior was to return \"\" for incorrect parsing\n    };\n    HttpRequestParser.keys = new Contracts.ContextTagKeys();\n    return HttpRequestParser;\n}(RequestParser));\nmodule.exports = HttpRequestParser;\n//# sourceMappingURL=HttpRequestParser.js.map","\"use strict\";\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Logging = require(\"../Library/Logging\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar HttpRequestParser = require(\"./HttpRequestParser\");\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\nvar AutoCollectPerformance = require(\"./Performance\");\nvar AutoCollectHttpRequests = (function () {\n    function AutoCollectHttpRequests(client) {\n        if (!!AutoCollectHttpRequests.INSTANCE) {\n            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectHttpRequests.INSTANCE = this;\n        this._client = client;\n    }\n    AutoCollectHttpRequests.prototype.enable = function (isEnabled) {\n        this._isEnabled = isEnabled;\n        // Autocorrelation requires automatic monitoring of incoming server requests\n        // Disabling autocollection but enabling autocorrelation will still enable\n        // request monitoring but will not produce request events\n        if ((this._isAutoCorrelating || this._isEnabled || AutoCollectPerformance.isEnabled()) && !this._isInitialized) {\n            this.useAutoCorrelation(this._isAutoCorrelating);\n            this._initialize();\n        }\n    };\n    AutoCollectHttpRequests.prototype.useAutoCorrelation = function (isEnabled, forceClsHooked) {\n        if (isEnabled && !this._isAutoCorrelating) {\n            CorrelationContextManager_1.CorrelationContextManager.enable(forceClsHooked);\n        }\n        else if (!isEnabled && this._isAutoCorrelating) {\n            CorrelationContextManager_1.CorrelationContextManager.disable();\n        }\n        this._isAutoCorrelating = isEnabled;\n    };\n    AutoCollectHttpRequests.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectHttpRequests.prototype.isAutoCorrelating = function () {\n        return this._isAutoCorrelating;\n    };\n    AutoCollectHttpRequests.prototype._generateCorrelationContext = function (requestParser) {\n        if (!this._isAutoCorrelating) {\n            return;\n        }\n        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags), requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getCorrelationContextHeader(), requestParser.getTraceparent(), requestParser.getTracestate());\n    };\n    AutoCollectHttpRequests.prototype._initialize = function () {\n        var _this = this;\n        this._isInitialized = true;\n        var wrapOnRequestHandler = function (onRequest) {\n            if (!onRequest) {\n                return undefined;\n            }\n            if (typeof onRequest !== 'function') {\n                throw new Error('onRequest handler must be a function');\n            }\n            return function (request, response) {\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(response);\n                var shouldCollect = request && !request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];\n                if (request && shouldCollect) {\n                    // Set up correlation context\n                    var requestParser_1 = new HttpRequestParser(request);\n                    var correlationContext = _this._generateCorrelationContext(requestParser_1);\n                    // Note: Check for if correlation is enabled happens within this method.\n                    // If not enabled, function will directly call the callback.\n                    CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\n                        if (_this._isEnabled) {\n                            // Mark as auto collected\n                            request[AutoCollectHttpRequests.alreadyAutoCollectedFlag] = true;\n                            // Auto collect request\n                            AutoCollectHttpRequests.trackRequest(_this._client, { request: request, response: response }, requestParser_1);\n                        }\n                        if (typeof onRequest === \"function\") {\n                            onRequest(request, response);\n                        }\n                    });\n                }\n                else {\n                    if (typeof onRequest === \"function\") {\n                        onRequest(request, response);\n                    }\n                }\n            };\n        };\n        // The `http.createServer` function will instantiate a new http.Server object.\n        // Inside the Server's constructor, it is using addListener to register the\n        // onRequest handler. So there are two ways to inject the wrapped onRequest handler:\n        // 1) Overwrite Server.prototype.addListener (and .on()) globally and not patching\n        //    the http.createServer call. Or\n        // 2) Overwrite the http.createServer method and add a patched addListener to the\n        //    fresh server instance. This seems more stable for possible future changes as\n        //    it also covers the case where the Server might not use addListener to manage\n        //    the callback internally.\n        //    And also as long as the constructor uses addListener to add the handle, it is\n        //    ok to patch the addListener after construction only. Because if we would patch\n        //    the prototype one and the createServer method, we would wrap the handler twice\n        //    in case of the constructor call.\n        var wrapServerEventHandler = function (server) {\n            var originalAddListener = server.addListener.bind(server);\n            server.addListener = function (eventType, eventHandler) {\n                switch (eventType) {\n                    case 'request':\n                    case 'checkContinue':\n                        return originalAddListener(eventType, wrapOnRequestHandler(eventHandler));\n                    default:\n                        return originalAddListener(eventType, eventHandler);\n                }\n            };\n            // on is an alias to addListener only\n            server.on = server.addListener;\n        };\n        var originalHttpServer = http.createServer;\n        http.createServer = function (onRequest) {\n            // todo: get a pointer to the server so the IP address can be read from server.address\n            var server = originalHttpServer(wrapOnRequestHandler(onRequest));\n            wrapServerEventHandler(server);\n            return server;\n        };\n        var originalHttpsServer = https.createServer;\n        https.createServer = function (options, onRequest) {\n            var server = originalHttpsServer(options, wrapOnRequestHandler(onRequest));\n            wrapServerEventHandler(server);\n            return server;\n        };\n    };\n    /**\n     * Tracks a request synchronously (doesn't wait for response 'finish' event)\n     */\n    AutoCollectHttpRequests.trackRequestSync = function (client, telemetry) {\n        if (!telemetry.request || !telemetry.response || !client) {\n            Logging.info(\"AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\n            return;\n        }\n        AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\n        // store data about the request\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var requestParser = new HttpRequestParser(telemetry.request, (correlationContext && correlationContext.operation.parentId));\n        // Overwrite correlation context with request parser results\n        if (correlationContext) {\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\n            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\n        }\n        AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, telemetry.duration, telemetry.error);\n    };\n    /**\n     * Tracks a request by listening to the response 'finish' event\n     */\n    AutoCollectHttpRequests.trackRequest = function (client, telemetry, _requestParser) {\n        if (!telemetry.request || !telemetry.response || !client) {\n            Logging.info(\"AutoCollectHttpRequests.trackRequest was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\n            return;\n        }\n        // store data about the request\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var requestParser = _requestParser || new HttpRequestParser(telemetry.request, correlationContext && correlationContext.operation.parentId);\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {\n            AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\n        }\n        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)\n        if (correlationContext && !_requestParser) {\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\n            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\n        }\n        // response listeners\n        if (telemetry.response.once) {\n            telemetry.response.once(\"finish\", function () {\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, null);\n            });\n        }\n        // track a failed request if an error is emitted\n        if (telemetry.request.on) {\n            telemetry.request.on(\"error\", function (error) {\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, error);\n            });\n        }\n    };\n    /**\n     * Add the target correlationId to the response headers, if not already provided.\n     */\n    AutoCollectHttpRequests.addResponseCorrelationIdHeader = function (client, response) {\n        if (client.config && client.config.correlationId &&\n            response.getHeader && response.setHeader && !response.headersSent) {\n            var correlationHeader = response.getHeader(RequestResponseHeaders.requestContextHeader);\n            Util.safeIncludeCorrelationHeader(client, response, correlationHeader);\n        }\n    };\n    AutoCollectHttpRequests.endRequest = function (client, requestParser, telemetry, ellapsedMilliseconds, error) {\n        if (error) {\n            requestParser.onError(error, ellapsedMilliseconds);\n        }\n        else {\n            requestParser.onResponse(telemetry.response, ellapsedMilliseconds);\n        }\n        var requestTelemetry = requestParser.getRequestTelemetry(telemetry);\n        requestTelemetry.tagOverrides = requestParser.getRequestTags(client.context.tags);\n        if (telemetry.tagOverrides) {\n            for (var key in telemetry.tagOverrides) {\n                requestTelemetry.tagOverrides[key] = telemetry.tagOverrides[key];\n            }\n        }\n        var legacyRootId = requestParser.getLegacyRootId();\n        if (legacyRootId) {\n            requestTelemetry.properties[\"ai_legacyRootId\"] = legacyRootId;\n        }\n        requestTelemetry.contextObjects = requestTelemetry.contextObjects || {};\n        requestTelemetry.contextObjects[\"http.ServerRequest\"] = telemetry.request;\n        requestTelemetry.contextObjects[\"http.ServerResponse\"] = telemetry.response;\n        client.trackRequest(requestTelemetry);\n    };\n    AutoCollectHttpRequests.prototype.dispose = function () {\n        AutoCollectHttpRequests.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n        CorrelationContextManager_1.CorrelationContextManager.disable();\n        this._isAutoCorrelating = false;\n    };\n    AutoCollectHttpRequests.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\n    return AutoCollectHttpRequests;\n}());\nmodule.exports = AutoCollectHttpRequests;\n//# sourceMappingURL=HttpRequests.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Config = require(\"../Library/Config\");\nvar Context = require(\"../Library/Context\");\nvar Logging = require(\"../Library/Logging\");\nvar AutoCollectNativePerformance = (function () {\n    function AutoCollectNativePerformance(client) {\n        this._disabledMetrics = {};\n        // Note: Only 1 instance of this can exist. So when we reconstruct this object,\n        // just disable old native instance and reset JS member variables\n        if (AutoCollectNativePerformance.INSTANCE) {\n            AutoCollectNativePerformance.INSTANCE.dispose();\n        }\n        AutoCollectNativePerformance.INSTANCE = this;\n        this._client = client;\n    }\n    /**\n     *  Reports if NativePerformance is able to run in this environment\n     */\n    AutoCollectNativePerformance.isNodeVersionCompatible = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return parseInt(nodeVer[0]) >= 6;\n    };\n    /**\n     * Start instance of native metrics agent.\n     *\n     * @param {boolean} isEnabled\n     * @param {number} [collectionInterval=60000]\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype.enable = function (isEnabled, disabledMetrics, collectionInterval) {\n        var _this = this;\n        if (disabledMetrics === void 0) { disabledMetrics = {}; }\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\n        if (!AutoCollectNativePerformance.isNodeVersionCompatible()) {\n            return;\n        }\n        if (AutoCollectNativePerformance._metricsAvailable == undefined && isEnabled && !this._isInitialized) {\n            // Try to require in the native-metrics library. If it's found initialize it, else do nothing and never try again.\n            try {\n                var NativeMetricsEmitters = require(\"applicationinsights-native-metrics\");\n                AutoCollectNativePerformance._emitter = new NativeMetricsEmitters();\n                AutoCollectNativePerformance._metricsAvailable = true;\n                Logging.info(\"Native metrics module successfully loaded!\");\n            }\n            catch (err) {\n                // Package not available. Never try again\n                AutoCollectNativePerformance._metricsAvailable = false;\n                return;\n            }\n        }\n        this._isEnabled = isEnabled;\n        this._disabledMetrics = disabledMetrics;\n        if (this._isEnabled && !this._isInitialized) {\n            this._isInitialized = true;\n        }\n        // Enable the emitter if we were able to construct one\n        if (this._isEnabled && AutoCollectNativePerformance._emitter) {\n            // enable self\n            AutoCollectNativePerformance._emitter.enable(true, collectionInterval);\n            this._handle = setInterval(function () { return _this._trackNativeMetrics(); }, collectionInterval);\n            this._handle.unref();\n        }\n        else if (AutoCollectNativePerformance._emitter) {\n            // disable self\n            AutoCollectNativePerformance._emitter.enable(false);\n            if (this._handle) {\n                clearInterval(this._handle);\n                this._handle = undefined;\n            }\n        }\n    };\n    /**\n     * Cleanup this instance of AutoCollectNativePerformance\n     *\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype.dispose = function () {\n        this.enable(false);\n    };\n    /**\n     * Parse environment variable and overwrite isEnabled based on respective fields being set\n     *\n     * @private\n     * @static\n     * @param {(boolean | IDisabledExtendedMetrics)} collectExtendedMetrics\n     * @returns {(boolean | IDisabledExtendedMetrics)}\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.parseEnabled = function (collectExtendedMetrics) {\n        var disableAll = process.env[Config.ENV_nativeMetricsDisableAll];\n        var individualOptOuts = process.env[Config.ENV_nativeMetricsDisablers];\n        // case 1: disable all env var set, RETURN with isEnabled=false\n        if (disableAll) {\n            return { isEnabled: false, disabledMetrics: {} };\n        }\n        // case 2: individual env vars set, RETURN with isEnabled=true, disabledMetrics={...}\n        if (individualOptOuts) {\n            var optOutsArr = individualOptOuts.split(\",\");\n            var disabledMetrics = {};\n            if (optOutsArr.length > 0) {\n                for (var _i = 0, optOutsArr_1 = optOutsArr; _i < optOutsArr_1.length; _i++) {\n                    var opt = optOutsArr_1[_i];\n                    disabledMetrics[opt] = true;\n                }\n            }\n            // case 2a: collectExtendedMetrics is an object, overwrite existing ones if they exist\n            if (typeof collectExtendedMetrics === \"object\") {\n                return { isEnabled: true, disabledMetrics: __assign({}, collectExtendedMetrics, disabledMetrics) };\n            }\n            // case 2b: collectExtendedMetrics is a boolean, set disabledMetrics as is\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: disabledMetrics };\n        }\n        // case 4: no env vars set, input arg is a boolean, RETURN with isEnabled=collectExtendedMetrics, disabledMetrics={}\n        if (typeof collectExtendedMetrics === \"boolean\") {\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: {} };\n        }\n        else {\n            // case 5: no env vars set, input arg is object, RETURN with isEnabled=true, disabledMetrics=collectExtendedMetrics\n            return { isEnabled: true, disabledMetrics: collectExtendedMetrics };\n        }\n    };\n    /**\n     * Trigger an iteration of native metrics collection\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackNativeMetrics = function () {\n        var shouldSendAll = true;\n        if (typeof this._isEnabled !== \"object\") {\n            shouldSendAll = this._isEnabled;\n        }\n        if (shouldSendAll) {\n            this._trackGarbageCollection();\n            this._trackEventLoop();\n            this._trackHeapUsage();\n        }\n    };\n    /**\n     * Tracks garbage collection stats for this interval. One custom metric is sent per type of garbage\n     * collection that occurred during this collection interval.\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackGarbageCollection = function () {\n        if (this._disabledMetrics.gc) {\n            return;\n        }\n        var gcData = AutoCollectNativePerformance._emitter.getGCData();\n        for (var gc in gcData) {\n            var metrics = gcData[gc].metrics;\n            var name_1 = gc + \" Garbage Collection Duration\";\n            var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\n            this._client.trackMetric({\n                name: name_1,\n                value: metrics.total,\n                count: metrics.count,\n                max: metrics.max,\n                min: metrics.min,\n                stdDev: stdDev,\n                tagOverrides: (_a = {},\n                    _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                    _a)\n            });\n        }\n        var _a;\n    };\n    /**\n     * Tracks event loop ticks per interval as a custom metric. Also included in the metric is min/max/avg\n     * time spent in event loop for this interval.\n     *\n     * @private\n     * @returns {void}\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackEventLoop = function () {\n        if (this._disabledMetrics.loop) {\n            return;\n        }\n        var loopData = AutoCollectNativePerformance._emitter.getLoopData();\n        var metrics = loopData.loopUsage;\n        if (metrics.count == 0) {\n            return;\n        }\n        var name = \"Event Loop CPU Time\";\n        var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\n        this._client.trackMetric({\n            name: name,\n            value: metrics.total,\n            count: metrics.count,\n            min: metrics.min,\n            max: metrics.max,\n            stdDev: stdDev,\n            tagOverrides: (_a = {},\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _a)\n        });\n        var _a;\n    };\n    /**\n     * Track heap memory usage metrics as a custom metric.\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackHeapUsage = function () {\n        if (this._disabledMetrics.heap) {\n            return;\n        }\n        var memoryUsage = process.memoryUsage();\n        var heapUsed = memoryUsage.heapUsed, heapTotal = memoryUsage.heapTotal, rss = memoryUsage.rss;\n        this._client.trackMetric({\n            name: \"Memory Usage (Heap)\",\n            value: heapUsed,\n            count: 1,\n            tagOverrides: (_a = {},\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _a)\n        });\n        this._client.trackMetric({\n            name: \"Memory Total (Heap)\",\n            value: heapTotal,\n            count: 1,\n            tagOverrides: (_b = {},\n                _b[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _b)\n        });\n        this._client.trackMetric({\n            name: \"Memory Usage (Non-Heap)\",\n            value: rss - heapTotal,\n            count: 1,\n            tagOverrides: (_c = {},\n                _c[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _c)\n        });\n        var _a, _b, _c;\n    };\n    return AutoCollectNativePerformance;\n}());\nexports.AutoCollectNativePerformance = AutoCollectNativePerformance;\n//# sourceMappingURL=NativePerformance.js.map","\"use strict\";\nvar os = require(\"os\");\nvar Constants = require(\"../Declarations/Constants\");\nvar AutoCollectPerformance = (function () {\n    /**\n     * @param enableLiveMetricsCounters - enable sending additional live metrics information (dependency metrics, exception metrics, committed memory)\n     */\n    function AutoCollectPerformance(client, collectionInterval, enableLiveMetricsCounters) {\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\n        if (enableLiveMetricsCounters === void 0) { enableLiveMetricsCounters = false; }\n        this._lastIntervalRequestExecutionTime = 0; // the sum of durations which took place during from app start until last interval\n        this._lastIntervalDependencyExecutionTime = 0;\n        if (!AutoCollectPerformance.INSTANCE) {\n            AutoCollectPerformance.INSTANCE = this;\n        }\n        this._isInitialized = false;\n        this._client = client;\n        this._collectionInterval = collectionInterval;\n        this._enableLiveMetricsCounters = enableLiveMetricsCounters;\n    }\n    AutoCollectPerformance.prototype.enable = function (isEnabled, collectionInterval) {\n        var _this = this;\n        this._isEnabled = isEnabled;\n        if (this._isEnabled && !this._isInitialized) {\n            this._isInitialized = true;\n        }\n        if (isEnabled) {\n            if (!this._handle) {\n                this._lastCpus = os.cpus();\n                this._lastRequests = {\n                    totalRequestCount: AutoCollectPerformance._totalRequestCount,\n                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\n                    time: +new Date\n                };\n                this._lastDependencies = {\n                    totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\n                    totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\n                    time: +new Date\n                };\n                this._lastExceptions = {\n                    totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\n                    time: +new Date\n                };\n                if (typeof process.cpuUsage === 'function') {\n                    this._lastAppCpuUsage = process.cpuUsage();\n                }\n                this._lastHrtime = process.hrtime();\n                this._collectionInterval = collectionInterval || this._collectionInterval;\n                this._handle = setInterval(function () { return _this.trackPerformance(); }, this._collectionInterval);\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\n            }\n        }\n        else {\n            if (this._handle) {\n                clearInterval(this._handle);\n                this._handle = undefined;\n            }\n        }\n    };\n    AutoCollectPerformance.countRequest = function (duration, success) {\n        var durationMs;\n        if (!AutoCollectPerformance.isEnabled()) {\n            return;\n        }\n        if (typeof duration === 'string') {\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\n            durationMs = +new Date('1970-01-01T' + duration + 'Z'); // convert to num ms, returns NaN if wrong\n        }\n        else if (typeof duration === 'number') {\n            durationMs = duration;\n        }\n        else {\n            return;\n        }\n        AutoCollectPerformance._intervalRequestExecutionTime += durationMs;\n        if (success === false) {\n            AutoCollectPerformance._totalFailedRequestCount++;\n        }\n        AutoCollectPerformance._totalRequestCount++;\n    };\n    AutoCollectPerformance.countException = function () {\n        AutoCollectPerformance._totalExceptionCount++;\n    };\n    AutoCollectPerformance.countDependency = function (duration, success) {\n        var durationMs;\n        if (!AutoCollectPerformance.isEnabled()) {\n            return;\n        }\n        if (typeof duration === 'string') {\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\n            durationMs = +new Date('1970-01-01T' + duration + 'Z'); // convert to num ms, returns NaN if wrong\n        }\n        else if (typeof duration === 'number') {\n            durationMs = duration;\n        }\n        else {\n            return;\n        }\n        AutoCollectPerformance._intervalDependencyExecutionTime += durationMs;\n        if (success === false) {\n            AutoCollectPerformance._totalFailedDependencyCount++;\n        }\n        AutoCollectPerformance._totalDependencyCount++;\n    };\n    AutoCollectPerformance.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectPerformance.isEnabled = function () {\n        return AutoCollectPerformance.INSTANCE && AutoCollectPerformance.INSTANCE._isEnabled;\n    };\n    AutoCollectPerformance.prototype.trackPerformance = function () {\n        this._trackCpu();\n        this._trackMemory();\n        this._trackNetwork();\n        this._trackDependencyRate();\n        this._trackExceptionRate();\n    };\n    AutoCollectPerformance.prototype._trackCpu = function () {\n        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary\n        // to find the delta since the last measurement\n        var cpus = os.cpus();\n        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {\n            var totalUser = 0;\n            var totalSys = 0;\n            var totalNice = 0;\n            var totalIdle = 0;\n            var totalIrq = 0;\n            for (var i = 0; !!cpus && i < cpus.length; i++) {\n                var cpu = cpus[i];\n                var lastCpu = this._lastCpus[i];\n                var name = \"% cpu(\" + i + \") \";\n                var model = cpu.model;\n                var speed = cpu.speed;\n                var times = cpu.times;\n                var lastTimes = lastCpu.times;\n                // user cpu time (or) % CPU time spent in user space\n                var user = (times.user - lastTimes.user) || 0;\n                totalUser += user;\n                // system cpu time (or) % CPU time spent in kernel space\n                var sys = (times.sys - lastTimes.sys) || 0;\n                totalSys += sys;\n                // user nice cpu time (or) % CPU time spent on low priority processes\n                var nice = (times.nice - lastTimes.nice) || 0;\n                totalNice += nice;\n                // idle cpu time (or) % CPU time spent idle\n                var idle = (times.idle - lastTimes.idle) || 0;\n                totalIdle += idle;\n                // irq (or) % CPU time spent servicing/handling hardware interrupts\n                var irq = (times.irq - lastTimes.irq) || 0;\n                totalIrq += irq;\n            }\n            // Calculate % of total cpu time (user + system) this App Process used (Only supported by node v6.1.0+)\n            var appCpuPercent = undefined;\n            if (typeof process.cpuUsage === 'function') {\n                var appCpuUsage = process.cpuUsage();\n                var hrtime = process.hrtime();\n                var totalApp = ((appCpuUsage.user - this._lastAppCpuUsage.user) + (appCpuUsage.system - this._lastAppCpuUsage.system)) || 0;\n                if (typeof this._lastHrtime !== 'undefined' && this._lastHrtime.length === 2) {\n                    var elapsedTime = ((hrtime[0] - this._lastHrtime[0]) * 1e6 + (hrtime[1] - this._lastHrtime[1]) / 1e3) || 0; // convert to microseconds\n                    appCpuPercent = 100 * totalApp / (elapsedTime * cpus.length);\n                }\n                // Set previous\n                this._lastAppCpuUsage = appCpuUsage;\n                this._lastHrtime = hrtime;\n            }\n            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESSOR_TIME, value: ((combinedTotal - totalIdle) / combinedTotal) * 100 });\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESS_TIME, value: appCpuPercent || ((totalUser / combinedTotal) * 100) });\n        }\n        this._lastCpus = cpus;\n    };\n    AutoCollectPerformance.prototype._trackMemory = function () {\n        var freeMem = os.freemem();\n        var usedMem = process.memoryUsage().rss;\n        var committedMemory = os.totalmem() - freeMem;\n        this._client.trackMetric({ name: Constants.PerformanceCounter.PRIVATE_BYTES, value: usedMem });\n        this._client.trackMetric({ name: Constants.PerformanceCounter.AVAILABLE_BYTES, value: freeMem });\n        // Only supported by quickpulse service\n        if (this._enableLiveMetricsCounters) {\n            this._client.trackMetric({ name: Constants.QuickPulseCounter.COMMITTED_BYTES, value: committedMemory });\n        }\n    };\n    AutoCollectPerformance.prototype._trackNetwork = function () {\n        // track total request counters\n        var lastRequests = this._lastRequests;\n        var requests = {\n            totalRequestCount: AutoCollectPerformance._totalRequestCount,\n            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\n            time: +new Date\n        };\n        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;\n        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;\n        var elapsedMs = requests.time - lastRequests.time;\n        var elapsedSeconds = elapsedMs / 1000;\n        var averageRequestExecutionTime = ((AutoCollectPerformance._intervalRequestExecutionTime - this._lastIntervalRequestExecutionTime) / intervalRequests) || 0; // default to 0 in case no requests in this interval\n        this._lastIntervalRequestExecutionTime = AutoCollectPerformance._intervalRequestExecutionTime; // reset\n        if (elapsedMs > 0) {\n            var requestsPerSec = intervalRequests / elapsedSeconds;\n            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;\n            this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_RATE, value: requestsPerSec });\n            // Only send duration to live metrics if it has been updated!\n            if (!this._enableLiveMetricsCounters || intervalRequests > 0) {\n                this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_DURATION, value: averageRequestExecutionTime });\n            }\n            // Only supported by quickpulse service\n            if (this._enableLiveMetricsCounters) {\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.REQUEST_FAILURE_RATE, value: failedRequestsPerSec });\n            }\n        }\n        this._lastRequests = requests;\n    };\n    // Static counter is accumulated externally. Report the rate to client here\n    // Note: This is currently only used with QuickPulse client\n    AutoCollectPerformance.prototype._trackDependencyRate = function () {\n        if (this._enableLiveMetricsCounters) {\n            var lastDependencies = this._lastDependencies;\n            var dependencies = {\n                totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\n                totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\n                time: +new Date\n            };\n            var intervalDependencies = (dependencies.totalDependencyCount - lastDependencies.totalDependencyCount) || 0;\n            var intervalFailedDependencies = (dependencies.totalFailedDependencyCount - lastDependencies.totalFailedDependencyCount) || 0;\n            var elapsedMs = dependencies.time - lastDependencies.time;\n            var elapsedSeconds = elapsedMs / 1000;\n            var averageDependencyExecutionTime = ((AutoCollectPerformance._intervalDependencyExecutionTime - this._lastIntervalDependencyExecutionTime) / intervalDependencies) || 0;\n            this._lastIntervalDependencyExecutionTime = AutoCollectPerformance._intervalDependencyExecutionTime; // reset\n            if (elapsedMs > 0) {\n                var dependenciesPerSec = intervalDependencies / elapsedSeconds;\n                var failedDependenciesPerSec = intervalFailedDependencies / elapsedSeconds;\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_RATE, value: dependenciesPerSec });\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_FAILURE_RATE, value: failedDependenciesPerSec });\n                // redundant check for livemetrics, but kept for consistency w/ requests\n                // Only send duration to live metrics if it has been updated!\n                if (!this._enableLiveMetricsCounters || intervalDependencies > 0) {\n                    this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_DURATION, value: averageDependencyExecutionTime });\n                }\n            }\n            this._lastDependencies = dependencies;\n        }\n    };\n    // Static counter is accumulated externally. Report the rate to client here\n    // Note: This is currently only used with QuickPulse client\n    AutoCollectPerformance.prototype._trackExceptionRate = function () {\n        if (this._enableLiveMetricsCounters) {\n            var lastExceptions = this._lastExceptions;\n            var exceptions = {\n                totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\n                time: +new Date\n            };\n            var intervalExceptions = (exceptions.totalExceptionCount - lastExceptions.totalExceptionCount) || 0;\n            var elapsedMs = exceptions.time - lastExceptions.time;\n            var elapsedSeconds = elapsedMs / 1000;\n            if (elapsedMs > 0) {\n                var exceptionsPerSec = intervalExceptions / elapsedSeconds;\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.EXCEPTION_RATE, value: exceptionsPerSec });\n            }\n            this._lastExceptions = exceptions;\n        }\n    };\n    AutoCollectPerformance.prototype.dispose = function () {\n        AutoCollectPerformance.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectPerformance._totalRequestCount = 0;\n    AutoCollectPerformance._totalFailedRequestCount = 0;\n    AutoCollectPerformance._lastRequestExecutionTime = 0;\n    AutoCollectPerformance._totalDependencyCount = 0;\n    AutoCollectPerformance._totalFailedDependencyCount = 0;\n    AutoCollectPerformance._lastDependencyExecutionTime = 0;\n    AutoCollectPerformance._totalExceptionCount = 0;\n    AutoCollectPerformance._intervalDependencyExecutionTime = 0;\n    AutoCollectPerformance._intervalRequestExecutionTime = 0;\n    return AutoCollectPerformance;\n}());\nmodule.exports = AutoCollectPerformance;\n//# sourceMappingURL=Performance.js.map","\"use strict\";\n/**\n * Base class for helpers that read data from HTTP requst/response objects and convert them\n * into the telemetry contract objects.\n */\nvar RequestParser = (function () {\n    function RequestParser() {\n    }\n    /**\n     * Gets a url parsed out from request options\n     */\n    RequestParser.prototype.getUrl = function () {\n        return this.url;\n    };\n    RequestParser.prototype.RequestParser = function () {\n        this.startTime = +new Date();\n    };\n    RequestParser.prototype._setStatus = function (status, error) {\n        var endTime = +new Date();\n        this.duration = endTime - this.startTime;\n        this.statusCode = status;\n        var properties = this.properties || {};\n        if (error) {\n            if (typeof error === \"string\") {\n                properties[\"error\"] = error;\n            }\n            else if (error instanceof Error) {\n                properties[\"error\"] = error.message;\n            }\n            else if (typeof error === \"object\") {\n                for (var key in error) {\n                    properties[key] = error[key] && error[key].toString && error[key].toString();\n                }\n            }\n        }\n        this.properties = properties;\n    };\n    RequestParser.prototype._isSuccess = function () {\n        return (0 < this.statusCode) && (this.statusCode < 400);\n    };\n    return RequestParser;\n}());\nmodule.exports = RequestParser;\n//# sourceMappingURL=RequestParser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\n// Mapping from bunyan levels defined at https://github.com/trentm/node-bunyan/blob/master/lib/bunyan.js#L256\nvar bunyanToAILevelMap = {\n    10: Contracts_1.SeverityLevel.Verbose,\n    20: Contracts_1.SeverityLevel.Verbose,\n    30: Contracts_1.SeverityLevel.Information,\n    40: Contracts_1.SeverityLevel.Warning,\n    50: Contracts_1.SeverityLevel.Error,\n    60: Contracts_1.SeverityLevel.Critical,\n};\nvar subscriber = function (event) {\n    var message = event.data.result;\n    clients.forEach(function (client) {\n        var AIlevel = bunyanToAILevelMap[event.data.level];\n        if (message instanceof Error) {\n            client.trackException({ exception: (message) });\n        }\n        else {\n            client.trackTrace({ message: message, severity: AIlevel });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"bunyan\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=bunyan.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nvar subscriber = function (event) {\n    var message = event.data.message;\n    clients.forEach(function (client) {\n        if (message instanceof Error) {\n            client.trackException({ exception: message });\n        }\n        else {\n            // Message can have a trailing newline\n            if (message.lastIndexOf(\"\\n\") == message.length - 1) {\n                message = message.substring(0, message.length - 1);\n            }\n            client.trackTrace({ message: message, severity: (event.data.stderr ? Contracts_1.SeverityLevel.Warning : Contracts_1.SeverityLevel.Information) });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"console\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=console.sub.js.map","\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Logging = require(\"../../Library/Logging\");\nexports.IsInitialized = !process.env[\"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\"];\nvar TAG = \"DiagnosticChannel\";\nif (exports.IsInitialized) {\n    var publishers = require(\"diagnostic-channel-publishers\");\n    var individualOptOuts = process.env[\"APPLICATION_INSIGHTS_NO_PATCH_MODULES\"] || \"\";\n    var unpatchedModules = individualOptOuts.split(\",\");\n    var modules = {\n        bunyan: publishers.bunyan,\n        console: publishers.console,\n        mongodb: publishers.mongodb,\n        mongodbCore: publishers.mongodbCore,\n        mysql: publishers.mysql,\n        redis: publishers.redis,\n        pg: publishers.pg,\n        pgPool: publishers.pgPool,\n        winston: publishers.winston\n    };\n    for (var mod in modules) {\n        if (unpatchedModules.indexOf(mod) === -1) {\n            modules[mod].enable();\n            Logging.info(TAG, \"Subscribed to \" + mod + \" events\");\n        }\n    }\n    if (unpatchedModules.length > 0) {\n        Logging.info(TAG, \"Some modules will not be patched\", unpatchedModules);\n    }\n}\nelse {\n    Logging.info(TAG, \"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set\");\n}\nfunction registerContextPreservation(cb) {\n    if (!exports.IsInitialized) {\n        return;\n    }\n    require(\"diagnostic-channel\").channel.addContextPreservation(cb);\n}\nexports.registerContextPreservation = registerContextPreservation;\n//# sourceMappingURL=initialization.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    if (event.data.event.commandName === \"ismaster\") {\n        // suppress noisy ismaster commands\n    }\n    clients.forEach(function (client) {\n        var dbName = (event.data.startedData && event.data.startedData.databaseName) || \"Unknown database\";\n        client.trackDependency({\n            target: dbName,\n            data: event.data.event.commandName,\n            name: event.data.event.commandName,\n            duration: event.data.event.duration,\n            success: event.data.succeeded,\n            /* TODO: transmit result code from mongo */\n            resultCode: event.data.succeeded ? \"0\" : \"1\",\n            dependencyTypeName: 'mongodb'\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"mongodb\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"mongodb\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        var queryObj = event.data.query || {};\n        var sqlString = queryObj.sql || \"Unknown query\";\n        var success = !event.data.err;\n        var connection = queryObj._connection || {};\n        var connectionConfig = connection.config || {};\n        var dbName = connectionConfig.socketPath ? connectionConfig.socketPath : (connectionConfig.host || \"localhost\") + \":\" + connectionConfig.port;\n        client.trackDependency({\n            target: dbName,\n            data: sqlString,\n            name: sqlString,\n            duration: event.data.duration,\n            success: success,\n            /* TODO: transmit result code from mysql */\n            resultCode: success ? \"0\" : \"1\",\n            dependencyTypeName: \"mysql\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"mysql\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"mysql\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=mysql.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        var q = event.data.query;\n        var sql = (q.preparable && q.preparable.text) || q.plan || q.text || \"unknown query\";\n        var success = !event.data.error;\n        var conn = event.data.database.host + \":\" + event.data.database.port;\n        client.trackDependency({\n            target: conn,\n            data: sql,\n            name: sql,\n            duration: event.data.duration,\n            success: success,\n            resultCode: success ? \"0\" : \"1\",\n            dependencyTypeName: \"postgres\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"postgres\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"postgres\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=postgres.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        if (event.data.commandObj.command === \"info\") {\n            // We don't want to report 'info', it's irrelevant\n            return;\n        }\n        client.trackDependency({\n            target: event.data.address,\n            name: event.data.commandObj.command,\n            data: event.data.commandObj.command,\n            duration: event.data.duration,\n            success: !event.data.err,\n            /* TODO: transmit result code from redis */\n            resultCode: event.data.err ? \"1\" : \"0\",\n            dependencyTypeName: \"redis\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"redis\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"redis\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=redis.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nvar winstonToAILevelMap = {\n    syslog: function (og) {\n        var map = {\n            emerg: Contracts_1.SeverityLevel.Critical,\n            alert: Contracts_1.SeverityLevel.Critical,\n            crit: Contracts_1.SeverityLevel.Critical,\n            error: Contracts_1.SeverityLevel.Error,\n            warning: Contracts_1.SeverityLevel.Warning,\n            notice: Contracts_1.SeverityLevel.Information,\n            info: Contracts_1.SeverityLevel.Information,\n            debug: Contracts_1.SeverityLevel.Verbose\n        };\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\n    },\n    npm: function (og) {\n        var map = {\n            error: Contracts_1.SeverityLevel.Error,\n            warn: Contracts_1.SeverityLevel.Warning,\n            info: Contracts_1.SeverityLevel.Information,\n            verbose: Contracts_1.SeverityLevel.Verbose,\n            debug: Contracts_1.SeverityLevel.Verbose,\n            silly: Contracts_1.SeverityLevel.Verbose\n        };\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\n    },\n    unknown: function (og) {\n        return Contracts_1.SeverityLevel.Information;\n    }\n};\nvar subscriber = function (event) {\n    var message = event.data.message;\n    clients.forEach(function (client) {\n        if (message instanceof Error) {\n            client.trackException({\n                exception: message,\n                properties: event.data.meta\n            });\n        }\n        else {\n            var AIlevel = winstonToAILevelMap[event.data.levelKind](event.data.level);\n            client.trackTrace({\n                message: message,\n                severity: AIlevel,\n                properties: event.data.meta\n            });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"winston\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=winston.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\nexports.DEFAULT_LIVEMETRICS_ENDPOINT = \"https://rt.services.visualstudio.com\";\nexports.DEFAULT_LIVEMETRICS_HOST = \"rt.services.visualstudio.com\";\nvar QuickPulseCounter;\n(function (QuickPulseCounter) {\n    // Memory\n    QuickPulseCounter[\"COMMITTED_BYTES\"] = \"\\\\Memory\\\\Committed Bytes\";\n    // CPU\n    QuickPulseCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\n    // Request\n    QuickPulseCounter[\"REQUEST_RATE\"] = \"\\\\ApplicationInsights\\\\Requests/Sec\";\n    QuickPulseCounter[\"REQUEST_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Requests Failed/Sec\";\n    QuickPulseCounter[\"REQUEST_DURATION\"] = \"\\\\ApplicationInsights\\\\Request Duration\";\n    // Dependency\n    QuickPulseCounter[\"DEPENDENCY_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls/Sec\";\n    QuickPulseCounter[\"DEPENDENCY_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls Failed/Sec\";\n    QuickPulseCounter[\"DEPENDENCY_DURATION\"] = \"\\\\ApplicationInsights\\\\Dependency Call Duration\";\n    // Exception\n    QuickPulseCounter[\"EXCEPTION_RATE\"] = \"\\\\ApplicationInsights\\\\Exceptions/Sec\";\n})(QuickPulseCounter = exports.QuickPulseCounter || (exports.QuickPulseCounter = {}));\nvar PerformanceCounter;\n(function (PerformanceCounter) {\n    // Memory\n    PerformanceCounter[\"PRIVATE_BYTES\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\Private Bytes\";\n    PerformanceCounter[\"AVAILABLE_BYTES\"] = \"\\\\Memory\\\\Available Bytes\";\n    // CPU\n    PerformanceCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\n    PerformanceCounter[\"PROCESS_TIME\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\% Processor Time\";\n    // Requests\n    PerformanceCounter[\"REQUEST_RATE\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Requests/Sec\";\n    PerformanceCounter[\"REQUEST_DURATION\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Request Execution Time\";\n})(PerformanceCounter = exports.PerformanceCounter || (exports.PerformanceCounter = {}));\n;\n/**\n * Map a PerformanceCounter/QuickPulseCounter to a QuickPulseCounter. If no mapping exists, mapping is *undefined*\n */\nexports.PerformanceToQuickPulseCounter = (_a = {},\n    _a[PerformanceCounter.PROCESSOR_TIME] = QuickPulseCounter.PROCESSOR_TIME,\n    _a[PerformanceCounter.REQUEST_RATE] = QuickPulseCounter.REQUEST_RATE,\n    _a[PerformanceCounter.REQUEST_DURATION] = QuickPulseCounter.REQUEST_DURATION,\n    // Remap quick pulse only counters\n    _a[QuickPulseCounter.COMMITTED_BYTES] = QuickPulseCounter.COMMITTED_BYTES,\n    _a[QuickPulseCounter.REQUEST_FAILURE_RATE] = QuickPulseCounter.REQUEST_FAILURE_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_RATE] = QuickPulseCounter.DEPENDENCY_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_FAILURE_RATE] = QuickPulseCounter.DEPENDENCY_FAILURE_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_DURATION] = QuickPulseCounter.DEPENDENCY_DURATION,\n    _a[QuickPulseCounter.EXCEPTION_RATE] = QuickPulseCounter.EXCEPTION_RATE,\n    _a);\nexports.QuickPulseDocumentType = {\n    Event: \"Event\",\n    Exception: \"Exception\",\n    Trace: \"Trace\",\n    Metric: \"Metric\",\n    Request: \"Request\",\n    Dependency: \"RemoteDependency\",\n    Availability: \"Availability\"\n};\nexports.QuickPulseType = {\n    Event: \"EventTelemetryDocument\",\n    Exception: \"ExceptionTelemetryDocument\",\n    Trace: \"TraceTelemetryDocument\",\n    Metric: \"MetricTelemetryDocument\",\n    Request: \"RequestTelemetryDocument\",\n    Dependency: \"DependencyTelemetryDocument\",\n    Availability: \"AvailabilityTelemetryDocument\"\n};\nexports.TelemetryTypeStringToQuickPulseType = {\n    EventData: exports.QuickPulseType.Event,\n    ExceptionData: exports.QuickPulseType.Exception,\n    MessageData: exports.QuickPulseType.Trace,\n    MetricData: exports.QuickPulseType.Metric,\n    RequestData: exports.QuickPulseType.Request,\n    RemoteDependencyData: exports.QuickPulseType.Dependency,\n    AvailabilityData: exports.QuickPulseType.Availability\n};\nexports.TelemetryTypeStringToQuickPulseDocumentType = {\n    EventData: exports.QuickPulseDocumentType.Event,\n    ExceptionData: exports.QuickPulseDocumentType.Exception,\n    MessageData: exports.QuickPulseDocumentType.Trace,\n    MetricData: exports.QuickPulseDocumentType.Metric,\n    RequestData: exports.QuickPulseDocumentType.Request,\n    RemoteDependencyData: exports.QuickPulseDocumentType.Dependency,\n    AvailabilityData: exports.QuickPulseDocumentType.Availability\n};\nvar _a;\n//# sourceMappingURL=Constants.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Generated_1 = require(\"./Generated\");\nvar RemoteDependencyDataConstants = (function () {\n    function RemoteDependencyDataConstants() {\n    }\n    RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";\n    RemoteDependencyDataConstants.TYPE_AI = \"Http (tracked component)\";\n    return RemoteDependencyDataConstants;\n}());\nexports.RemoteDependencyDataConstants = RemoteDependencyDataConstants;\nfunction domainSupportsProperties(domain) {\n    return \"properties\" in domain ||\n        domain instanceof Generated_1.EventData ||\n        domain instanceof Generated_1.ExceptionData ||\n        domain instanceof Generated_1.MessageData ||\n        domain instanceof Generated_1.MetricData ||\n        domain instanceof Generated_1.PageViewData ||\n        domain instanceof Generated_1.RemoteDependencyData ||\n        domain instanceof Generated_1.RequestData;\n}\nexports.domainSupportsProperties = domainSupportsProperties;\n//# sourceMappingURL=Constants.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of AvailabilityData represent the result of executing an availability test.\n */\nvar AvailabilityData = (function (_super) {\n    __extends(AvailabilityData, _super);\n    function AvailabilityData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return AvailabilityData;\n}(Domain));\nmodule.exports = AvailabilityData;\n//# sourceMappingURL=AvailabilityData.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Data struct to contain only C section with custom fields.\n */\nvar Base = (function () {\n    function Base() {\n    }\n    return Base;\n}());\nmodule.exports = Base;\n//# sourceMappingURL=Base.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\nvar ContextTagKeys = (function () {\n    function ContextTagKeys() {\n        this.applicationVersion = \"ai.application.ver\";\n        this.deviceId = \"ai.device.id\";\n        this.deviceLocale = \"ai.device.locale\";\n        this.deviceModel = \"ai.device.model\";\n        this.deviceOEMName = \"ai.device.oemName\";\n        this.deviceOSVersion = \"ai.device.osVersion\";\n        this.deviceType = \"ai.device.type\";\n        this.locationIp = \"ai.location.ip\";\n        this.operationId = \"ai.operation.id\";\n        this.operationName = \"ai.operation.name\";\n        this.operationParentId = \"ai.operation.parentId\";\n        this.operationSyntheticSource = \"ai.operation.syntheticSource\";\n        this.operationCorrelationVector = \"ai.operation.correlationVector\";\n        this.sessionId = \"ai.session.id\";\n        this.sessionIsFirst = \"ai.session.isFirst\";\n        this.userAccountId = \"ai.user.accountId\";\n        this.userId = \"ai.user.id\";\n        this.userAuthUserId = \"ai.user.authUserId\";\n        this.cloudRole = \"ai.cloud.role\";\n        this.cloudRoleInstance = \"ai.cloud.roleInstance\";\n        this.internalSdkVersion = \"ai.internal.sdkVersion\";\n        this.internalAgentVersion = \"ai.internal.agentVersion\";\n        this.internalNodeName = \"ai.internal.nodeName\";\n    }\n    return ContextTagKeys;\n}());\nmodule.exports = ContextTagKeys;\n//# sourceMappingURL=ContextTagKeys.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Base = require(\"./Base\");\n\"use strict\";\n/**\n * Data struct to contain both B and C sections.\n */\nvar Data = (function (_super) {\n    __extends(Data, _super);\n    function Data() {\n        return _super.call(this) || this;\n    }\n    return Data;\n}(Base));\nmodule.exports = Data;\n//# sourceMappingURL=Data.js.map","\"use strict\";\n// THIS FILE WAS AUTOGENERATED\nvar DataPointType = require(\"./DataPointType\");\n\"use strict\";\n/**\n * Metric data single measurement.\n */\nvar DataPoint = (function () {\n    function DataPoint() {\n        this.kind = DataPointType.Measurement;\n    }\n    return DataPoint;\n}());\nmodule.exports = DataPoint;\n//# sourceMappingURL=DataPoint.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Type of the metric data measurement.\n */\nvar DataPointType;\n(function (DataPointType) {\n    DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";\n    DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";\n})(DataPointType || (DataPointType = {}));\nmodule.exports = DataPointType;\n//# sourceMappingURL=DataPointType.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * The abstract common base of all domains.\n */\nvar Domain = (function () {\n    function Domain() {\n    }\n    return Domain;\n}());\nmodule.exports = Domain;\n//# sourceMappingURL=Domain.js.map","\"use strict\";\n/**\n * System variables for a telemetry item.\n */\nvar Envelope = (function () {\n    function Envelope() {\n        this.ver = 1;\n        this.sampleRate = 100.0;\n        this.tags = {};\n    }\n    return Envelope;\n}());\nmodule.exports = Envelope;\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of Event represent structured event records that can be grouped and searched by their properties. Event data item also creates a metric of event count by name.\n */\nvar EventData = (function (_super) {\n    __extends(EventData, _super);\n    function EventData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return EventData;\n}(Domain));\nmodule.exports = EventData;\n//# sourceMappingURL=EventData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Exception represents a handled or unhandled exception that occurred during execution of the monitored application.\n */\nvar ExceptionData = (function (_super) {\n    __extends(ExceptionData, _super);\n    function ExceptionData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.exceptions = [];\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return ExceptionData;\n}(Domain));\nmodule.exports = ExceptionData;\n//# sourceMappingURL=ExceptionData.js.map","\"use strict\";\n/**\n * Exception details of the exception in a chain.\n */\nvar ExceptionDetails = (function () {\n    function ExceptionDetails() {\n        this.hasFullStack = true;\n        this.parsedStack = [];\n    }\n    return ExceptionDetails;\n}());\nmodule.exports = ExceptionDetails;\n//# sourceMappingURL=ExceptionDetails.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of Message represent printf-like trace statements that are text-searched. Log4Net, NLog and other text-based log file entries are translated into intances of this type. The message does not have measurements.\n */\nvar MessageData = (function (_super) {\n    __extends(MessageData, _super);\n    function MessageData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        return _this;\n    }\n    return MessageData;\n}(Domain));\nmodule.exports = MessageData;\n//# sourceMappingURL=MessageData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of the Metric item is a list of measurements (single data points) and/or aggregations.\n */\nvar MetricData = (function (_super) {\n    __extends(MetricData, _super);\n    function MetricData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.metrics = [];\n        _this.properties = {};\n        return _this;\n    }\n    return MetricData;\n}(Domain));\nmodule.exports = MetricData;\n//# sourceMappingURL=MetricData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar EventData = require(\"./EventData\");\n\"use strict\";\n/**\n * An instance of PageView represents a generic action on a page like a button click. It is also the base type for PageView.\n */\nvar PageViewData = (function (_super) {\n    __extends(PageViewData, _super);\n    function PageViewData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return PageViewData;\n}(EventData));\nmodule.exports = PageViewData;\n//# sourceMappingURL=PageViewData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Remote Dependency represents an interaction of the monitored component with a remote component/service like SQL or an HTTP endpoint.\n */\nvar RemoteDependencyData = (function (_super) {\n    __extends(RemoteDependencyData, _super);\n    function RemoteDependencyData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.success = true;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return RemoteDependencyData;\n}(Domain));\nmodule.exports = RemoteDependencyData;\n//# sourceMappingURL=RemoteDependencyData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Request represents completion of an external request to the application to do work and contains a summary of that request execution and the results.\n */\nvar RequestData = (function (_super) {\n    __extends(RequestData, _super);\n    function RequestData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return RequestData;\n}(Domain));\nmodule.exports = RequestData;\n//# sourceMappingURL=RequestData.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Defines the level of severity for the event.\n */\nvar SeverityLevel;\n(function (SeverityLevel) {\n    SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";\n    SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";\n    SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";\n    SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";\n    SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";\n})(SeverityLevel || (SeverityLevel = {}));\nmodule.exports = SeverityLevel;\n//# sourceMappingURL=SeverityLevel.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Stack frame information.\n */\nvar StackFrame = (function () {\n    function StackFrame() {\n    }\n    return StackFrame;\n}());\nmodule.exports = StackFrame;\n//# sourceMappingURL=StackFrame.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AvailabilityData = require(\"./AvailabilityData\");\nexports.Base = require(\"./Base\");\nexports.ContextTagKeys = require(\"./ContextTagKeys\");\nexports.Data = require(\"./Data\");\nexports.DataPoint = require(\"./DataPoint\");\nexports.DataPointType = require(\"./DataPointType\");\nexports.Domain = require(\"./Domain\");\nexports.Envelope = require(\"./Envelope\");\nexports.EventData = require(\"./EventData\");\nexports.ExceptionData = require(\"./ExceptionData\");\nexports.ExceptionDetails = require(\"./ExceptionDetails\");\nexports.MessageData = require(\"./MessageData\");\nexports.MetricData = require(\"./MetricData\");\nexports.PageViewData = require(\"./PageViewData\");\nexports.RemoteDependencyData = require(\"./RemoteDependencyData\");\nexports.RequestData = require(\"./RequestData\");\nexports.SeverityLevel = require(\"./SeverityLevel\");\nexports.StackFrame = require(\"./StackFrame\");\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Converts the user-friendly enumeration TelemetryType to the underlying schema baseType value\n * @param type Type to convert to BaseData string\n */\nfunction telemetryTypeToBaseType(type) {\n    switch (type) {\n        case TelemetryType.Event:\n            return \"EventData\";\n        case TelemetryType.Exception:\n            return \"ExceptionData\";\n        case TelemetryType.Trace:\n            return \"MessageData\";\n        case TelemetryType.Metric:\n            return \"MetricData\";\n        case TelemetryType.Request:\n            return \"RequestData\";\n        case TelemetryType.Dependency:\n            return \"RemoteDependencyData\";\n        case TelemetryType.Availability:\n            return \"AvailabilityData\";\n    }\n    return undefined;\n}\nexports.telemetryTypeToBaseType = telemetryTypeToBaseType;\n/**\n * Converts the schema baseType value to the user-friendly enumeration TelemetryType\n * @param baseType BaseData string to convert to TelemetryType\n */\nfunction baseTypeToTelemetryType(baseType) {\n    switch (baseType) {\n        case \"EventData\":\n            return TelemetryType.Event;\n        case \"ExceptionData\":\n            return TelemetryType.Exception;\n        case \"MessageData\":\n            return TelemetryType.Trace;\n        case \"MetricData\":\n            return TelemetryType.Metric;\n        case \"RequestData\":\n            return TelemetryType.Request;\n        case \"RemoteDependencyData\":\n            return TelemetryType.Dependency;\n        case \"AvailabilityData\":\n            return TelemetryType.Availability;\n    }\n    return undefined;\n}\nexports.baseTypeToTelemetryType = baseTypeToTelemetryType;\nexports.TelemetryTypeString = {\n    Event: \"EventData\",\n    Exception: \"ExceptionData\",\n    Trace: \"MessageData\",\n    Metric: \"MetricData\",\n    Request: \"RequestData\",\n    Dependency: \"RemoteDependencyData\",\n    Availability: \"AvailabilityData\"\n};\n/**\n * Telemetry types supported by this SDK\n */\nvar TelemetryType;\n(function (TelemetryType) {\n    TelemetryType[TelemetryType[\"Event\"] = 0] = \"Event\";\n    TelemetryType[TelemetryType[\"Exception\"] = 1] = \"Exception\";\n    TelemetryType[TelemetryType[\"Trace\"] = 2] = \"Trace\";\n    TelemetryType[TelemetryType[\"Metric\"] = 3] = \"Metric\";\n    TelemetryType[TelemetryType[\"Request\"] = 4] = \"Request\";\n    TelemetryType[TelemetryType[\"Dependency\"] = 5] = \"Dependency\";\n    TelemetryType[TelemetryType[\"Availability\"] = 6] = \"Availability\";\n})(TelemetryType = exports.TelemetryType || (exports.TelemetryType = {}));\n//# sourceMappingURL=TelemetryType.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./TelemetryType\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./Constants\"));\n__export(require(\"./Generated\"));\n__export(require(\"./TelemetryTypes\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar Logging = require(\"./Logging\");\nvar Channel = (function () {\n    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {\n        this._buffer = [];\n        this._lastSend = 0;\n        this._isDisabled = isDisabled;\n        this._getBatchSize = getBatchSize;\n        this._getBatchIntervalMs = getBatchIntervalMs;\n        this._sender = sender;\n    }\n    /**\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\n     * @param value if true events that occured while client is offline will be cached on disk\n     * @param resendInterval The wait interval for resending cached events.\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\n     * @returns {Configuration} this class\n     */\n    Channel.prototype.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\n        this._sender.setDiskRetryMode(value, resendInterval, maxBytesOnDisk);\n    };\n    /**\n     * Add a telemetry item to the send buffer\n     */\n    Channel.prototype.send = function (envelope) {\n        var _this = this;\n        // if master off switch is set, don't send any data\n        if (this._isDisabled()) {\n            // Do not send/save data\n            return;\n        }\n        // validate input\n        if (!envelope) {\n            Logging.warn(\"Cannot send null/undefined telemetry\");\n            return;\n        }\n        // check if the incoming payload is too large, truncate if necessary\n        var payload = this._stringify(envelope);\n        if (typeof payload !== \"string\") {\n            return;\n        }\n        // enqueue the payload\n        this._buffer.push(payload);\n        // flush if we would exceed the max-size limit by adding this item\n        if (this._buffer.length >= this._getBatchSize()) {\n            this.triggerSend(false);\n            return;\n        }\n        // ensure an invocation timeout is set if anything is in the buffer\n        if (!this._timeoutHandle && this._buffer.length > 0) {\n            this._timeoutHandle = setTimeout(function () {\n                _this._timeoutHandle = null;\n                _this.triggerSend(false);\n            }, this._getBatchIntervalMs());\n        }\n    };\n    /**\n     * Immediately send buffered data\n     */\n    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {\n        var bufferIsEmpty = this._buffer.length < 1;\n        if (!bufferIsEmpty) {\n            // compose an array of payloads\n            var batch = this._buffer.join(\"\\n\");\n            // invoke send\n            if (isNodeCrashing) {\n                this._sender.saveOnCrash(batch);\n                if (typeof callback === \"function\") {\n                    callback(\"data saved on crash\");\n                }\n            }\n            else {\n                this._sender.send(Buffer.from ? Buffer.from(batch) : new Buffer(batch), callback);\n            }\n        }\n        // update lastSend time to enable throttling\n        this._lastSend = +new Date;\n        // clear buffer\n        this._buffer.length = 0;\n        clearTimeout(this._timeoutHandle);\n        this._timeoutHandle = null;\n        if (bufferIsEmpty && typeof callback === \"function\") {\n            callback(\"no data to send\");\n        }\n    };\n    Channel.prototype._stringify = function (envelope) {\n        try {\n            return JSON.stringify(envelope);\n        }\n        catch (error) {\n            Logging.warn(\"Failed to serialize payload\", error, envelope);\n        }\n    };\n    return Channel;\n}());\nmodule.exports = Channel;\n//# sourceMappingURL=Channel.js.map","\"use strict\";\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\nvar ConnectionStringParser = require(\"./ConnectionStringParser\");\nvar Constants = require(\"../Declarations/Constants\");\nvar url = require(\"url\");\nvar Config = (function () {\n    function Config(setupString) {\n        var _this = this;\n        this.endpointBase = Constants.DEFAULT_BREEZE_ENDPOINT;\n        var connectionStringEnv = process.env[Config.ENV_connectionString];\n        var csCode = ConnectionStringParser.parse(setupString);\n        var csEnv = ConnectionStringParser.parse(connectionStringEnv);\n        var iKeyCode = !csCode.instrumentationkey && Object.keys(csCode).length > 0\n            ? null // CS was valid but instrumentation key was not provided, null and grab from env var\n            : setupString; // CS was invalid, so it must be an ikey\n        this.instrumentationKey = csCode.instrumentationkey || iKeyCode /* === instrumentationKey */ || csEnv.instrumentationkey || Config._getInstrumentationKey();\n        this.endpointUrl = (csCode.ingestionendpoint || csEnv.ingestionendpoint || this.endpointBase) + \"/v2/track\";\n        this.maxBatchSize = 250;\n        this.maxBatchIntervalMs = 15000;\n        this.disableAppInsights = false;\n        this.samplingPercentage = 100;\n        this.correlationIdRetryIntervalMs = 30 * 1000;\n        this.correlationHeaderExcludedDomains = [\n            \"*.core.windows.net\",\n            \"*.core.chinacloudapi.cn\",\n            \"*.core.cloudapi.de\",\n            \"*.core.usgovcloudapi.net\",\n            \"*.core.microsoft.scloud\",\n            \"*.core.eaglex.ic.gov\"\n        ];\n        this.setCorrelationId = function (correlationId) { return _this.correlationId = correlationId; };\n        this.proxyHttpUrl = process.env[Config.ENV_http_proxy] || undefined;\n        this.proxyHttpsUrl = process.env[Config.ENV_https_proxy] || undefined;\n        this.httpAgent = undefined;\n        this.httpsAgent = undefined;\n        this.profileQueryEndpoint = csCode.ingestionendpoint || csEnv.ingestionendpoint || process.env[Config.ENV_profileQueryEndpoint] || this.endpointBase;\n        this._quickPulseHost = csCode.liveendpoint || csEnv.liveendpoint || process.env[Config.ENV_quickPulseHost] || Constants.DEFAULT_LIVEMETRICS_HOST;\n        // Parse quickPulseHost if it startswith http(s)://\n        if (this._quickPulseHost.match(/^https?:\\/\\//)) {\n            this._quickPulseHost = url.parse(this._quickPulseHost).host;\n        }\n    }\n    Object.defineProperty(Config.prototype, \"profileQueryEndpoint\", {\n        get: function () {\n            return this._profileQueryEndpoint;\n        },\n        set: function (endpoint) {\n            CorrelationIdManager.cancelCorrelationIdQuery(this, this.setCorrelationId);\n            this._profileQueryEndpoint = endpoint;\n            this.correlationId = CorrelationIdManager.correlationIdPrefix; // Reset the correlationId while we wait for the new query\n            CorrelationIdManager.queryCorrelationId(this, this.setCorrelationId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Config.prototype, \"quickPulseHost\", {\n        get: function () {\n            return this._quickPulseHost;\n        },\n        set: function (host) {\n            this._quickPulseHost = host;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Config._getInstrumentationKey = function () {\n        // check for both the documented env variable and the azure-prefixed variable\n        var iKey = process.env[Config.ENV_iKey]\n            || process.env[Config.ENV_azurePrefix + Config.ENV_iKey]\n            || process.env[Config.legacy_ENV_iKey]\n            || process.env[Config.ENV_azurePrefix + Config.legacy_ENV_iKey];\n        if (!iKey || iKey == \"\") {\n            throw new Error(\"Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server\");\n        }\n        return iKey;\n    };\n    // Azure adds this prefix to all environment variables\n    Config.ENV_azurePrefix = \"APPSETTING_\";\n    // This key is provided in the readme\n    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";\n    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\n    Config.ENV_profileQueryEndpoint = \"APPINSIGHTS_PROFILE_QUERY_ENDPOINT\";\n    Config.ENV_quickPulseHost = \"APPINSIGHTS_QUICKPULSE_HOST\";\n    // Azure Connection String\n    Config.ENV_connectionString = \"APPLICATIONINSIGHTS_CONNECTION_STRING\";\n    // Native Metrics Opt Outs\n    Config.ENV_nativeMetricsDisablers = \"APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC\";\n    Config.ENV_nativeMetricsDisableAll = \"APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS\";\n    Config.ENV_http_proxy = \"http_proxy\";\n    Config.ENV_https_proxy = \"https_proxy\";\n    return Config;\n}());\nmodule.exports = Config;\n//# sourceMappingURL=Config.js.map","\"use strict\";\nvar Constants = require(\"../Declarations/Constants\");\nvar ConnectionStringParser = (function () {\n    function ConnectionStringParser() {\n    }\n    ConnectionStringParser.parse = function (connectionString) {\n        if (!connectionString) {\n            return {};\n        }\n        var kvPairs = connectionString.split(ConnectionStringParser._FIELDS_SEPARATOR);\n        var result = kvPairs.reduce(function (fields, kv) {\n            var kvParts = kv.split(ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR);\n            if (kvParts.length === 2) {\n                var key = kvParts[0].toLowerCase();\n                var value = kvParts[1];\n                fields[key] = value;\n            }\n            return fields;\n        }, {});\n        if (Object.keys(result).length > 0) {\n            // this is a valid connection string, so parse the results\n            if (result.endpointsuffix) {\n                // use endpoint suffix where overrides are not provided\n                var locationPrefix = result.location ? result.location + \".\" : \"\";\n                result.ingestionendpoint = result.ingestionendpoint || (\"https://\" + locationPrefix + \"dc.\" + result.endpointsuffix);\n                result.liveendpoint = result.liveendpoint || (\"https://\" + locationPrefix + \"live.\" + result.endpointsuffix);\n            }\n            // apply the default endpoints\n            result.ingestionendpoint = result.ingestionendpoint || Constants.DEFAULT_BREEZE_ENDPOINT;\n            result.liveendpoint = result.liveendpoint || Constants.DEFAULT_LIVEMETRICS_ENDPOINT;\n        }\n        return result;\n    };\n    ConnectionStringParser._FIELDS_SEPARATOR = \";\";\n    ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR = \"=\";\n    return ConnectionStringParser;\n}());\nmodule.exports = ConnectionStringParser;\n//# sourceMappingURL=ConnectionStringParser.js.map","\"use strict\";\nvar os = require(\"os\");\nvar fs = require(\"fs\");\nvar path = require(\"path\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Logging = require(\"./Logging\");\nvar Context = (function () {\n    function Context(packageJsonPath) {\n        this.keys = new Contracts.ContextTagKeys();\n        this.tags = {};\n        this._loadApplicationContext();\n        this._loadDeviceContext();\n        this._loadInternalContext();\n    }\n    Context.prototype._loadApplicationContext = function (packageJsonPath) {\n        // note: this should return the host package.json\n        packageJsonPath = packageJsonPath || path.resolve(__dirname, \"../../../../package.json\");\n        if (!Context.appVersion[packageJsonPath]) {\n            Context.appVersion[packageJsonPath] = \"unknown\";\n            try {\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\n                if (packageJson && typeof packageJson.version === \"string\") {\n                    Context.appVersion[packageJsonPath] = packageJson.version;\n                }\n            }\n            catch (exception) {\n                Logging.info(\"unable to read app version: \", exception);\n            }\n        }\n        this.tags[this.keys.applicationVersion] = Context.appVersion[packageJsonPath];\n    };\n    Context.prototype._loadDeviceContext = function () {\n        this.tags[this.keys.deviceId] = \"\";\n        this.tags[this.keys.cloudRoleInstance] = os && os.hostname();\n        this.tags[this.keys.deviceOSVersion] = os && (os.type() + \" \" + os.release());\n        this.tags[this.keys.cloudRole] = Context.DefaultRoleName;\n        // not yet supported tags\n        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();\n        this.tags[\"ai.device.osPlatform\"] = os && os.platform();\n    };\n    Context.prototype._loadInternalContext = function () {\n        // note: this should return the sdk package.json\n        var packageJsonPath = path.resolve(__dirname, \"../../package.json\");\n        if (!Context.sdkVersion) {\n            Context.sdkVersion = \"unknown\";\n            try {\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\n                if (packageJson && typeof packageJson.version === \"string\") {\n                    Context.sdkVersion = packageJson.version;\n                }\n            }\n            catch (exception) {\n                Logging.info(\"unable to read app version: \", exception);\n            }\n        }\n        this.tags[this.keys.internalSdkVersion] = \"node:\" + Context.sdkVersion;\n    };\n    Context.DefaultRoleName = \"Web\";\n    Context.appVersion = {};\n    Context.sdkVersion = null;\n    return Context;\n}());\nmodule.exports = Context;\n//# sourceMappingURL=Context.js.map","\"use strict\";\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar CorrelationIdManager = (function () {\n    function CorrelationIdManager() {\n    }\n    CorrelationIdManager.queryCorrelationId = function (config, callback) {\n        // GET request to `${this.endpointBase}/api/profiles/${this.instrumentationKey}/appId`\n        // If it 404s, the iKey is bad and we should give up\n        // If it fails otherwise, try again later\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\n        if (CorrelationIdManager.completedLookups.hasOwnProperty(appIdUrlString)) {\n            callback(CorrelationIdManager.completedLookups[appIdUrlString]);\n            return;\n        }\n        else if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\n            CorrelationIdManager.pendingLookups[appIdUrlString].push(callback);\n            return;\n        }\n        CorrelationIdManager.pendingLookups[appIdUrlString] = [callback];\n        var fetchAppId = function () {\n            if (!CorrelationIdManager.pendingLookups[appIdUrlString]) {\n                // This query has been cancelled.\n                return;\n            }\n            var requestOptions = {\n                method: 'GET',\n                // Ensure this request is not captured by auto-collection.\n                // Note: we don't refer to the property in HttpDependencyParser because that would cause a cyclical dependency\n                disableAppInsightsAutoCollection: true\n            };\n            Logging.info(CorrelationIdManager.TAG, requestOptions);\n            var req = Util.makeRequest(config, appIdUrlString, requestOptions, function (res) {\n                if (res.statusCode === 200) {\n                    // Success; extract the appId from the body\n                    var appId_1 = \"\";\n                    res.setEncoding(\"utf-8\");\n                    res.on('data', function (data) {\n                        appId_1 += data;\n                    });\n                    res.on('end', function () {\n                        Logging.info(CorrelationIdManager.TAG, appId_1);\n                        var result = CorrelationIdManager.correlationIdPrefix + appId_1;\n                        CorrelationIdManager.completedLookups[appIdUrlString] = result;\n                        if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\n                            CorrelationIdManager.pendingLookups[appIdUrlString].forEach(function (cb) { return cb(result); });\n                        }\n                        delete CorrelationIdManager.pendingLookups[appIdUrlString];\n                    });\n                }\n                else if (res.statusCode >= 400 && res.statusCode < 500) {\n                    // Not found, probably a bad key. Do not try again.\n                    CorrelationIdManager.completedLookups[appIdUrlString] = undefined;\n                    delete CorrelationIdManager.pendingLookups[appIdUrlString];\n                }\n                else {\n                    // Retry after timeout.\n                    setTimeout(fetchAppId, config.correlationIdRetryIntervalMs);\n                }\n            });\n            if (req) {\n                req.on('error', function (error) {\n                    // Unable to contact endpoint.\n                    // Do nothing for now.\n                    Logging.warn(CorrelationIdManager.TAG, error);\n                });\n                req.end();\n            }\n        };\n        setTimeout(fetchAppId, 0);\n    };\n    CorrelationIdManager.cancelCorrelationIdQuery = function (config, callback) {\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\n        var pendingLookups = CorrelationIdManager.pendingLookups[appIdUrlString];\n        if (pendingLookups) {\n            CorrelationIdManager.pendingLookups[appIdUrlString] = pendingLookups.filter(function (cb) { return cb != callback; });\n            if (CorrelationIdManager.pendingLookups[appIdUrlString].length == 0) {\n                delete CorrelationIdManager.pendingLookups[appIdUrlString];\n            }\n        }\n    };\n    /**\n     * Generate a request Id according to https://github.com/lmolkova/correlation/blob/master/hierarchical_request_id.md\n     * @param parentId\n     */\n    CorrelationIdManager.generateRequestId = function (parentId) {\n        if (parentId) {\n            parentId = parentId[0] == '|' ? parentId : '|' + parentId;\n            if (parentId[parentId.length - 1] !== '.') {\n                parentId += '.';\n            }\n            var suffix = (CorrelationIdManager.currentRootId++).toString(16);\n            return CorrelationIdManager.appendSuffix(parentId, suffix, '_');\n        }\n        else {\n            return CorrelationIdManager.generateRootId();\n        }\n    };\n    /**\n     * Given a hierarchical identifier of the form |X.*\n     * return the root identifier X\n     * @param id\n     */\n    CorrelationIdManager.getRootId = function (id) {\n        var endIndex = id.indexOf('.');\n        if (endIndex < 0) {\n            endIndex = id.length;\n        }\n        var startIndex = id[0] === '|' ? 1 : 0;\n        return id.substring(startIndex, endIndex);\n    };\n    CorrelationIdManager.generateRootId = function () {\n        return '|' + Util.w3cTraceId() + '.';\n    };\n    CorrelationIdManager.appendSuffix = function (parentId, suffix, delimiter) {\n        if (parentId.length + suffix.length < CorrelationIdManager.requestIdMaxLength) {\n            return parentId + suffix + delimiter;\n        }\n        // Combined identifier would be too long, so we must truncate it.\n        // We need 9 characters of space: 8 for the overflow ID, 1 for the\n        // overflow delimiter '#'\n        var trimPosition = CorrelationIdManager.requestIdMaxLength - 9;\n        if (parentId.length > trimPosition) {\n            for (; trimPosition > 1; --trimPosition) {\n                var c = parentId[trimPosition - 1];\n                if (c === '.' || c === '_') {\n                    break;\n                }\n            }\n        }\n        if (trimPosition <= 1) {\n            // parentId is not a valid ID\n            return CorrelationIdManager.generateRootId();\n        }\n        suffix = Util.randomu32().toString(16);\n        while (suffix.length < 8) {\n            suffix = '0' + suffix;\n        }\n        return parentId.substring(0, trimPosition) + suffix + '#';\n    };\n    CorrelationIdManager.TAG = \"CorrelationIdManager\";\n    CorrelationIdManager.correlationIdPrefix = \"cid-v1:\";\n    CorrelationIdManager.w3cEnabled = false;\n    // To avoid extraneous HTTP requests, we maintain a queue of callbacks waiting on a particular appId lookup,\n    // as well as a cache of completed lookups so future requests can be resolved immediately.\n    CorrelationIdManager.pendingLookups = {};\n    CorrelationIdManager.completedLookups = {};\n    CorrelationIdManager.requestIdMaxLength = 1024;\n    CorrelationIdManager.currentRootId = Util.randomu32();\n    return CorrelationIdManager;\n}());\nmodule.exports = CorrelationIdManager;\n//# sourceMappingURL=CorrelationIdManager.js.map","\"use strict\";\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"./Util\");\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\n/**\n * Manages the logic of creating envelopes from Telemetry objects\n */\nvar EnvelopeFactory = (function () {\n    function EnvelopeFactory() {\n    }\n    /**\n     * Creates envelope ready to be sent by Channel\n     * @param telemetry Telemetry data\n     * @param telemetryType Type of telemetry\n     * @param commonProperties Bag of custom common properties to be added to the envelope\n     * @param context Client context\n     * @param config Client configuration\n     */\n    EnvelopeFactory.createEnvelope = function (telemetry, telemetryType, commonProperties, context, config) {\n        var data = null;\n        switch (telemetryType) {\n            case Contracts.TelemetryType.Trace:\n                data = EnvelopeFactory.createTraceData(telemetry);\n                break;\n            case Contracts.TelemetryType.Dependency:\n                data = EnvelopeFactory.createDependencyData(telemetry);\n                break;\n            case Contracts.TelemetryType.Event:\n                data = EnvelopeFactory.createEventData(telemetry);\n                break;\n            case Contracts.TelemetryType.Exception:\n                data = EnvelopeFactory.createExceptionData(telemetry);\n                break;\n            case Contracts.TelemetryType.Request:\n                data = EnvelopeFactory.createRequestData(telemetry);\n                break;\n            case Contracts.TelemetryType.Metric:\n                data = EnvelopeFactory.createMetricData(telemetry);\n                break;\n            case Contracts.TelemetryType.Availability:\n                data = EnvelopeFactory.createAvailabilityData(telemetry);\n                break;\n        }\n        if (commonProperties && Contracts.domainSupportsProperties(data.baseData)) {\n            if (data && data.baseData) {\n                // if no properties are specified just add the common ones\n                if (!data.baseData.properties) {\n                    data.baseData.properties = commonProperties;\n                }\n                else {\n                    // otherwise, check each of the common ones\n                    for (var name in commonProperties) {\n                        // only override if the property `name` has not been set on this item\n                        if (!data.baseData.properties[name]) {\n                            data.baseData.properties[name] = commonProperties[name];\n                        }\n                    }\n                }\n            }\n            // sanitize properties\n            data.baseData.properties = Util.validateStringMap(data.baseData.properties);\n        }\n        var iKey = config ? config.instrumentationKey || \"\" : \"\";\n        var envelope = new Contracts.Envelope();\n        envelope.data = data;\n        envelope.iKey = iKey;\n        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"\n        envelope.name =\n            \"Microsoft.ApplicationInsights.\" +\n                iKey.replace(/-/g, \"\") +\n                \".\" +\n                data.baseType.substr(0, data.baseType.length - 4);\n        envelope.tags = this.getTags(context, telemetry.tagOverrides);\n        envelope.time = (new Date()).toISOString();\n        envelope.ver = 1;\n        envelope.sampleRate = config ? config.samplingPercentage : 100;\n        // Exclude metrics from sampling by default\n        if (telemetryType === Contracts.TelemetryType.Metric) {\n            envelope.sampleRate = 100;\n        }\n        return envelope;\n    };\n    EnvelopeFactory.createTraceData = function (telemetry) {\n        var trace = new Contracts.MessageData();\n        trace.message = telemetry.message;\n        trace.properties = telemetry.properties;\n        if (!isNaN(telemetry.severity)) {\n            trace.severityLevel = telemetry.severity;\n        }\n        else {\n            trace.severityLevel = Contracts.SeverityLevel.Information;\n        }\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace);\n        data.baseData = trace;\n        return data;\n    };\n    EnvelopeFactory.createDependencyData = function (telemetry) {\n        var remoteDependency = new Contracts.RemoteDependencyData();\n        if (typeof telemetry.name === \"string\") {\n            remoteDependency.name = telemetry.name.length > 1024 ? telemetry.name.slice(0, 1021) + '...' : telemetry.name;\n        }\n        remoteDependency.data = telemetry.data;\n        remoteDependency.target = telemetry.target;\n        remoteDependency.duration = Util.msToTimeSpan(telemetry.duration);\n        remoteDependency.success = telemetry.success;\n        remoteDependency.type = telemetry.dependencyTypeName;\n        remoteDependency.properties = telemetry.properties;\n        remoteDependency.resultCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\n        if (telemetry.id) {\n            remoteDependency.id = telemetry.id;\n        }\n        else {\n            remoteDependency.id = Util.w3cTraceId();\n        }\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency);\n        data.baseData = remoteDependency;\n        return data;\n    };\n    EnvelopeFactory.createEventData = function (telemetry) {\n        var event = new Contracts.EventData();\n        event.name = telemetry.name;\n        event.properties = telemetry.properties;\n        event.measurements = telemetry.measurements;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event);\n        data.baseData = event;\n        return data;\n    };\n    EnvelopeFactory.createExceptionData = function (telemetry) {\n        var exception = new Contracts.ExceptionData();\n        exception.properties = telemetry.properties;\n        if (!isNaN(telemetry.severity)) {\n            exception.severityLevel = telemetry.severity;\n        }\n        else {\n            exception.severityLevel = Contracts.SeverityLevel.Error;\n        }\n        exception.measurements = telemetry.measurements;\n        exception.exceptions = [];\n        var stack = telemetry.exception[\"stack\"];\n        var exceptionDetails = new Contracts.ExceptionDetails();\n        exceptionDetails.message = telemetry.exception.message;\n        exceptionDetails.typeName = telemetry.exception.name;\n        exceptionDetails.parsedStack = this.parseStack(stack);\n        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;\n        exception.exceptions.push(exceptionDetails);\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception);\n        data.baseData = exception;\n        return data;\n    };\n    EnvelopeFactory.createRequestData = function (telemetry) {\n        var requestData = new Contracts.RequestData();\n        if (telemetry.id) {\n            requestData.id = telemetry.id;\n        }\n        else {\n            requestData.id = Util.w3cTraceId();\n        }\n        requestData.name = telemetry.name;\n        requestData.url = telemetry.url;\n        requestData.source = telemetry.source;\n        requestData.duration = Util.msToTimeSpan(telemetry.duration);\n        requestData.responseCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\n        requestData.success = telemetry.success;\n        requestData.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request);\n        data.baseData = requestData;\n        return data;\n    };\n    EnvelopeFactory.createMetricData = function (telemetry) {\n        var metrics = new Contracts.MetricData(); // todo: enable client-batching of these\n        metrics.metrics = [];\n        var metric = new Contracts.DataPoint();\n        metric.count = !isNaN(telemetry.count) ? telemetry.count : 1;\n        metric.kind = Contracts.DataPointType.Aggregation;\n        metric.max = !isNaN(telemetry.max) ? telemetry.max : telemetry.value;\n        metric.min = !isNaN(telemetry.min) ? telemetry.min : telemetry.value;\n        metric.name = telemetry.name;\n        metric.stdDev = !isNaN(telemetry.stdDev) ? telemetry.stdDev : 0;\n        metric.value = telemetry.value;\n        metrics.metrics.push(metric);\n        metrics.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric);\n        data.baseData = metrics;\n        return data;\n    };\n    EnvelopeFactory.createAvailabilityData = function (telemetry) {\n        var availabilityData = new Contracts.AvailabilityData();\n        if (telemetry.id) {\n            availabilityData.id = telemetry.id;\n        }\n        else {\n            availabilityData.id = Util.w3cTraceId();\n        }\n        availabilityData.name = telemetry.name;\n        availabilityData.duration = Util.msToTimeSpan(telemetry.duration);\n        availabilityData.success = telemetry.success;\n        availabilityData.runLocation = telemetry.runLocation;\n        availabilityData.message = telemetry.message;\n        availabilityData.measurements = telemetry.measurements;\n        availabilityData.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Availability);\n        data.baseData = availabilityData;\n        return data;\n    };\n    EnvelopeFactory.getTags = function (context, tagOverrides) {\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        // Make a copy of context tags so we don't alter the actual object\n        // Also perform tag overriding\n        var newTags = {};\n        if (context && context.tags) {\n            for (var key in context.tags) {\n                newTags[key] = context.tags[key];\n            }\n        }\n        if (tagOverrides) {\n            for (var key in tagOverrides) {\n                newTags[key] = tagOverrides[key];\n            }\n        }\n        // Fill in internally-populated values if not already set\n        if (correlationContext) {\n            newTags[context.keys.operationId] = newTags[context.keys.operationId] || correlationContext.operation.id;\n            newTags[context.keys.operationName] = newTags[context.keys.operationName] || correlationContext.operation.name;\n            newTags[context.keys.operationParentId] = newTags[context.keys.operationParentId] || correlationContext.operation.parentId;\n        }\n        return newTags;\n    };\n    EnvelopeFactory.parseStack = function (stack) {\n        var parsedStack = undefined;\n        if (typeof stack === \"string\") {\n            var frames = stack.split(\"\\n\");\n            parsedStack = [];\n            var level = 0;\n            var totalSizeInBytes = 0;\n            for (var i = 0; i <= frames.length; i++) {\n                var frame = frames[i];\n                if (_StackFrame.regex.test(frame)) {\n                    var parsedFrame = new _StackFrame(frames[i], level++);\n                    totalSizeInBytes += parsedFrame.sizeInBytes;\n                    parsedStack.push(parsedFrame);\n                }\n            }\n            // DP Constraint - exception parsed stack must be < 32KB\n            // remove frames from the middle to meet the threshold\n            var exceptionParsedStackThreshold = 32 * 1024;\n            if (totalSizeInBytes > exceptionParsedStackThreshold) {\n                var left = 0;\n                var right = parsedStack.length - 1;\n                var size = 0;\n                var acceptedLeft = left;\n                var acceptedRight = right;\n                while (left < right) {\n                    // check size\n                    var lSize = parsedStack[left].sizeInBytes;\n                    var rSize = parsedStack[right].sizeInBytes;\n                    size += lSize + rSize;\n                    if (size > exceptionParsedStackThreshold) {\n                        // remove extra frames from the middle\n                        var howMany = acceptedRight - acceptedLeft + 1;\n                        parsedStack.splice(acceptedLeft, howMany);\n                        break;\n                    }\n                    // update pointers\n                    acceptedLeft = left;\n                    acceptedRight = right;\n                    left++;\n                    right--;\n                }\n            }\n        }\n        return parsedStack;\n    };\n    return EnvelopeFactory;\n}());\nvar _StackFrame = (function () {\n    function _StackFrame(frame, level) {\n        this.sizeInBytes = 0;\n        this.level = level;\n        this.method = \"<no_method>\";\n        this.assembly = Util.trim(frame);\n        var matches = frame.match(_StackFrame.regex);\n        if (matches && matches.length >= 5) {\n            this.method = Util.trim(matches[2]) || this.method;\n            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";\n            this.line = parseInt(matches[5]) || 0;\n        }\n        this.sizeInBytes += this.method.length;\n        this.sizeInBytes += this.fileName.length;\n        this.sizeInBytes += this.assembly.length;\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\n        this.sizeInBytes += _StackFrame.baseSize;\n        this.sizeInBytes += this.level.toString().length;\n        this.sizeInBytes += this.line.toString().length;\n    }\n    // regex to match stack frames from ie/chrome/ff\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\n    _StackFrame.regex = /^([\\s]+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\@\\n]+):([0-9]+):([0-9]+)(\\)?)$/;\n    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\n    return _StackFrame;\n}());\nmodule.exports = EnvelopeFactory;\n//# sourceMappingURL=EnvelopeFactory.js.map","\"use strict\";\nvar Logging = (function () {\n    function Logging() {\n    }\n    Logging.info = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (Logging.enableDebug) {\n            console.info(Logging.TAG + message, optionalParams);\n        }\n    };\n    Logging.warn = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (!Logging.disableWarnings) {\n            console.warn(Logging.TAG + message, optionalParams);\n        }\n    };\n    Logging.enableDebug = false;\n    Logging.disableWarnings = false;\n    Logging.disableErrors = false;\n    Logging.TAG = \"ApplicationInsights:\";\n    return Logging;\n}());\nmodule.exports = Logging;\n//# sourceMappingURL=Logging.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar TelemetryClient = require(\"./TelemetryClient\");\nvar ServerRequestTracking = require(\"../AutoCollection/HttpRequests\");\nvar ClientRequestTracking = require(\"../AutoCollection/HttpDependencies\");\nvar Logging = require(\"./Logging\");\n/**\n * Application Insights Telemetry Client for Node.JS. Provides the Application Insights TelemetryClient API\n * in addition to Node-specific helper functions.\n * Construct a new TelemetryClient to have an instance with a different configuration than the default client.\n * In most cases, `appInsights.defaultClient` should be used instead.\n */\nvar NodeClient = (function (_super) {\n    __extends(NodeClient, _super);\n    function NodeClient() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Log RequestTelemetry from HTTP request and response. This method will log immediately without waitng for request completion\n     * and it requires duration parameter to be specified on NodeHttpRequestTelemetry object.\n     * Use trackNodeHttpRequest function to log the telemetry after request completion\n     * @param telemetry Object encapsulating incoming request, response and duration information\n     */\n    NodeClient.prototype.trackNodeHttpRequestSync = function (telemetry) {\n        if (telemetry && telemetry.request && telemetry.response && telemetry.duration) {\n            ServerRequestTracking.trackRequestSync(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.\");\n        }\n    };\n    /**\n     * Log RequestTelemetry from HTTP request and response. This method will `follow` the request to completion.\n     * Use trackNodeHttpRequestSync function to log telemetry immediately without waiting for request completion\n     * @param telemetry Object encapsulating incoming request and response information\n     */\n    NodeClient.prototype.trackNodeHttpRequest = function (telemetry) {\n        if (telemetry.duration || telemetry.error) {\n            Logging.warn(\"trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.\");\n        }\n        if (telemetry && telemetry.request && telemetry.response) {\n            ServerRequestTracking.trackRequest(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.\");\n        }\n    };\n    /**\n     * Log DependencyTelemetry from outgoing HTTP request. This method will instrument the outgoing request and append\n     * the specified headers and will log the telemetry when outgoing request is complete\n     * @param telemetry Object encapsulating outgoing request information\n     */\n    NodeClient.prototype.trackNodeHttpDependency = function (telemetry) {\n        if (telemetry && telemetry.request) {\n            ClientRequestTracking.trackRequest(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.\");\n        }\n    };\n    return NodeClient;\n}(TelemetryClient));\nmodule.exports = NodeClient;\n//# sourceMappingURL=NodeClient.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar os = require(\"os\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Constants = require(\"../Declarations/Constants\");\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar StreamId = Util.w3cTraceId(); // Create a guid\nvar QuickPulseEnvelopeFactory = (function () {\n    function QuickPulseEnvelopeFactory() {\n    }\n    QuickPulseEnvelopeFactory.createQuickPulseEnvelope = function (metrics, documents, config, context) {\n        var machineName = (os && typeof os.hostname === \"function\"\n            && os.hostname()) || \"Unknown\"; // Note: os.hostname() was added in node v0.3.3\n        var instance = (context.tags\n            && context.keys\n            && context.keys.cloudRoleInstance\n            && context.tags[context.keys.cloudRoleInstance]) || machineName;\n        var envelope = {\n            Documents: documents.length > 0 ? documents : null,\n            InstrumentationKey: config.instrumentationKey || \"\",\n            Metrics: metrics.length > 0 ? metrics : null,\n            InvariantVersion: 1,\n            Timestamp: \"/Date(\" + Date.now() + \")/\",\n            Version: context.tags[context.keys.internalSdkVersion],\n            StreamId: StreamId,\n            MachineName: machineName,\n            Instance: instance\n        };\n        return envelope;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseMetric = function (telemetry) {\n        var data;\n        data = {\n            Name: telemetry.name,\n            Value: telemetry.value,\n            Weight: telemetry.count || 1\n        };\n        return data;\n    };\n    QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument = function (envelope) {\n        switch (envelope.data.baseType) {\n            case Contracts.TelemetryTypeString.Event:\n                return QuickPulseEnvelopeFactory.createQuickPulseEventDocument(envelope);\n            case Contracts.TelemetryTypeString.Exception:\n                return QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument(envelope);\n            case Contracts.TelemetryTypeString.Trace:\n                return QuickPulseEnvelopeFactory.createQuickPulseTraceDocument(envelope);\n            case Contracts.TelemetryTypeString.Dependency:\n                return QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument(envelope);\n            case Contracts.TelemetryTypeString.Request:\n                return QuickPulseEnvelopeFactory.createQuickPulseRequestDocument(envelope);\n        }\n        return null;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseEventDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var name = envelope.data.baseData.name;\n        var eventDocument = __assign({}, document, { Name: name });\n        return eventDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseTraceDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var severityLevel = envelope.data.baseData.severityLevel || 0;\n        var traceDocument = __assign({}, document, { Message: envelope.data.baseData.message, SeverityLevel: Contracts.SeverityLevel[severityLevel] });\n        return traceDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var exceptionDetails = envelope.data.baseData.exceptions;\n        var exception = '';\n        var exceptionMessage = '';\n        var exceptionType = '';\n        // Try to fill exception information from first error only\n        if (exceptionDetails && exceptionDetails.length > 0) {\n            // Try to grab the stack from parsedStack or stack\n            if (exceptionDetails[0].parsedStack && exceptionDetails[0].parsedStack.length > 0) {\n                exceptionDetails[0].parsedStack.forEach(function (err) {\n                    exception += err.assembly + \"\\n\";\n                });\n            }\n            else if (exceptionDetails[0].stack && exceptionDetails[0].stack.length > 0) {\n                exception = exceptionDetails[0].stack;\n            }\n            exceptionMessage = exceptionDetails[0].message;\n            exceptionType = exceptionDetails[0].typeName;\n        }\n        var exceptionDocument = __assign({}, document, { Exception: exception, ExceptionMessage: exceptionMessage, ExceptionType: exceptionType });\n        return exceptionDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseRequestDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var baseData = envelope.data.baseData;\n        var requestDocument = __assign({}, document, { Name: baseData.name, Success: baseData.success, Duration: baseData.duration, ResponseCode: baseData.responseCode, OperationName: baseData.name // TODO: is this correct?\n         });\n        return requestDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var baseData = envelope.data.baseData;\n        var dependencyDocument = __assign({}, document, { Name: baseData.name, Target: baseData.target, Success: baseData.success, Duration: baseData.duration, ResultCode: baseData.resultCode, CommandName: baseData.data, OperationName: document.OperationId, DependencyTypeName: baseData.type });\n        return dependencyDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseDocument = function (envelope) {\n        var documentType;\n        var __type;\n        var operationId, properties;\n        if (envelope.data.baseType) {\n            __type = Constants.TelemetryTypeStringToQuickPulseType[envelope.data.baseType];\n            documentType = Constants.TelemetryTypeStringToQuickPulseDocumentType[envelope.data.baseType];\n        }\n        else {\n            // Remark: This should never be hit because createQuickPulseDocument is only called within\n            // valid baseType values\n            Logging.warn(\"Document type invalid; not sending live metric document\", envelope.data.baseType);\n        }\n        operationId = envelope.tags[QuickPulseEnvelopeFactory.keys.operationId];\n        properties = QuickPulseEnvelopeFactory.aggregateProperties(envelope);\n        var document = {\n            DocumentType: documentType,\n            __type: __type,\n            OperationId: operationId,\n            Version: \"1.0\",\n            Properties: properties\n        };\n        return document;\n    };\n    QuickPulseEnvelopeFactory.aggregateProperties = function (envelope) {\n        var properties = [];\n        // Collect measurements\n        var meas = (envelope.data.baseData).measurements || {};\n        for (var key in meas) {\n            if (meas.hasOwnProperty(key)) {\n                var value = meas[key];\n                var property = { key: key, value: value };\n                properties.push(property);\n            }\n        }\n        // Collect properties\n        var props = (envelope.data.baseData).properties || {};\n        for (var key in props) {\n            if (props.hasOwnProperty(key)) {\n                var value = props[key];\n                var property = { key: key, value: value };\n                properties.push(property);\n            }\n        }\n        return properties;\n    };\n    QuickPulseEnvelopeFactory.keys = new Contracts.ContextTagKeys();\n    return QuickPulseEnvelopeFactory;\n}());\nmodule.exports = QuickPulseEnvelopeFactory;\n//# sourceMappingURL=QuickPulseEnvelopeFactory.js.map","\"use strict\";\nvar https = require(\"https\");\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\nvar Logging = require(\"./Logging\");\nvar QuickPulseConfig = {\n    method: \"POST\",\n    time: \"x-ms-qps-transmission-time\",\n    subscribed: \"x-ms-qps-subscribed\"\n};\nvar QuickPulseSender = (function () {\n    function QuickPulseSender(config) {\n        this._config = config;\n        this._consecutiveErrors = 0;\n    }\n    QuickPulseSender.prototype.ping = function (envelope, done) {\n        this._submitData(envelope, done, \"ping\");\n    };\n    QuickPulseSender.prototype.post = function (envelope, done) {\n        // Important: When POSTing data, envelope must be an array\n        this._submitData([envelope], done, \"post\");\n    };\n    QuickPulseSender.prototype._submitData = function (envelope, done, postOrPing) {\n        var _this = this;\n        var payload = JSON.stringify(envelope);\n        var options = (_a = {},\n            _a[AutoCollectHttpDependencies.disableCollectionRequestOption] = true,\n            _a.host = this._config.quickPulseHost,\n            _a.method = QuickPulseConfig.method,\n            _a.path = \"/QuickPulseService.svc/\" + postOrPing + \"?ikey=\" + this._config.instrumentationKey,\n            _a.headers = (_b = {\n                    'Expect': '100-continue'\n                },\n                _b[QuickPulseConfig.time] = 10000 * Date.now(),\n                _b['Content-Type'] = 'application\\/json',\n                _b['Content-Length'] = Buffer.byteLength(payload),\n                _b),\n            _a);\n        var req = https.request(options, function (res) {\n            var shouldPOSTData = res.headers[QuickPulseConfig.subscribed] === \"true\";\n            _this._consecutiveErrors = 0;\n            done(shouldPOSTData, res);\n        });\n        req.on(\"error\", function (error) {\n            // Unable to contact qps endpoint.\n            // Do nothing for now.\n            _this._consecutiveErrors++;\n            // LOG every error, but WARN instead when X number of consecutive errors occur\n            var notice = \"Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:\";\n            if (_this._consecutiveErrors % QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN === 0) {\n                notice = \"Live Metrics endpoint could not be reached \" + _this._consecutiveErrors + \" consecutive times. Most recent error:\";\n                Logging.warn(QuickPulseSender.TAG, notice, error);\n            }\n            else {\n                // Potentially transient error, do not change the ping/post state yet.\n                Logging.info(QuickPulseSender.TAG, notice, error);\n            }\n            done();\n        });\n        req.write(payload);\n        req.end();\n        var _a, _b;\n    };\n    QuickPulseSender.TAG = \"QuickPulseSender\";\n    QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN = 25;\n    return QuickPulseSender;\n}());\nmodule.exports = QuickPulseSender;\n//# sourceMappingURL=QuickPulseSender.js.map","\"use strict\";\nvar Logging = require(\"./Logging\");\nvar Config = require(\"./Config\");\nvar QuickPulseEnvelopeFactory = require(\"./QuickPulseEnvelopeFactory\");\nvar QuickPulseSender = require(\"./QuickPulseSender\");\nvar Constants = require(\"../Declarations/Constants\");\nvar Context = require(\"./Context\");\n/** State Container for sending to the QuickPulse Service */\nvar QuickPulseStateManager = (function () {\n    function QuickPulseStateManager(iKey, context) {\n        this._isCollectingData = false;\n        this._lastSuccessTime = Date.now();\n        this._lastSendSucceeded = true;\n        this._metrics = {};\n        this._documents = [];\n        this._collectors = [];\n        this.config = new Config(iKey);\n        this.context = context || new Context();\n        this._sender = new QuickPulseSender(this.config);\n        this._isEnabled = false;\n    }\n    /**\n     *\n     * @param collector\n     */\n    QuickPulseStateManager.prototype.addCollector = function (collector) {\n        this._collectors.push(collector);\n    };\n    /**\n     * Override of TelemetryClient.trackMetric\n     */\n    QuickPulseStateManager.prototype.trackMetric = function (telemetry) {\n        this._addMetric(telemetry);\n    };\n    /**\n     * Add a document to the current buffer\n     * @param envelope\n     */\n    QuickPulseStateManager.prototype.addDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument(envelope);\n        if (document) {\n            this._documents.push(document);\n        }\n    };\n    /**\n     * Enable or disable communication with QuickPulseService\n     * @param isEnabled\n     */\n    QuickPulseStateManager.prototype.enable = function (isEnabled) {\n        if (isEnabled && !this._isEnabled) {\n            this._isEnabled = true;\n            this._goQuickPulse();\n        }\n        else if (!isEnabled && this._isEnabled) {\n            this._isEnabled = false;\n            clearTimeout(this._handle);\n            this._handle = undefined;\n        }\n    };\n    /**\n     * Enable or disable all collectors in this instance\n     * @param enable\n     */\n    QuickPulseStateManager.prototype.enableCollectors = function (enable) {\n        this._collectors.forEach(function (collector) {\n            collector.enable(enable);\n        });\n    };\n    /**\n     * Add the metric to this buffer. If same metric already exists in this buffer, add weight to it\n     * @param telemetry\n     */\n    QuickPulseStateManager.prototype._addMetric = function (telemetry) {\n        var value = telemetry.value;\n        var count = telemetry.count || 1;\n        var name = Constants.PerformanceToQuickPulseCounter[telemetry.name];\n        if (name) {\n            if (this._metrics[name]) {\n                this._metrics[name].Value = (this._metrics[name].Value * this._metrics[name].Weight + value * count) / (this._metrics[name].Weight + count);\n                this._metrics[name].Weight += count;\n            }\n            else {\n                this._metrics[name] = QuickPulseEnvelopeFactory.createQuickPulseMetric(telemetry);\n                this._metrics[name].Name = name;\n                this._metrics[name].Weight = 1;\n            }\n        }\n    };\n    QuickPulseStateManager.prototype._resetQuickPulseBuffer = function () {\n        delete this._metrics;\n        this._metrics = {};\n        this._documents.length = 0;\n    };\n    QuickPulseStateManager.prototype._goQuickPulse = function () {\n        var _this = this;\n        // Create envelope from Documents and Metrics\n        var metrics = Object.keys(this._metrics).map(function (k) { return _this._metrics[k]; });\n        var envelope = QuickPulseEnvelopeFactory.createQuickPulseEnvelope(metrics, this._documents.slice(), this.config, this.context);\n        // Clear this document, metric buffer\n        this._resetQuickPulseBuffer();\n        // Send it to QuickPulseService, if collecting\n        if (this._isCollectingData) {\n            this._post(envelope);\n        }\n        else {\n            this._ping(envelope);\n        }\n        var currentTimeout = this._isCollectingData ? QuickPulseStateManager.POST_INTERVAL : QuickPulseStateManager.PING_INTERVAL;\n        if (this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_POST_WAIT_TIME && !this._lastSendSucceeded) {\n            // Haven't posted successfully in 20 seconds, so wait 60 seconds and ping\n            this._isCollectingData = false;\n            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\n        }\n        else if (!this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_PING_WAIT_TIME && !this._lastSendSucceeded) {\n            // Haven't pinged successfully in 60 seconds, so wait another 60 seconds\n            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\n        }\n        this._lastSendSucceeded = null;\n        this._handle = setTimeout(this._goQuickPulse.bind(this), currentTimeout);\n        this._handle.unref(); // Don't block apps from terminating\n    };\n    QuickPulseStateManager.prototype._ping = function (envelope) {\n        this._sender.ping(envelope, this._quickPulseDone.bind(this));\n    };\n    QuickPulseStateManager.prototype._post = function (envelope) {\n        this._sender.post(envelope, this._quickPulseDone.bind(this));\n    };\n    /**\n     * Change the current QPS send state. (shouldPOST == undefined) --> error, but do not change the state yet.\n     */\n    QuickPulseStateManager.prototype._quickPulseDone = function (shouldPOST, res) {\n        if (shouldPOST != undefined) {\n            if (this._isCollectingData !== shouldPOST) {\n                Logging.info(\"Live Metrics sending data\", shouldPOST);\n                this.enableCollectors(shouldPOST);\n            }\n            this._isCollectingData = shouldPOST;\n            if (res && res.statusCode < 300 && res.statusCode >= 200) {\n                this._lastSuccessTime = Date.now();\n                this._lastSendSucceeded = true;\n            }\n            else {\n                this._lastSendSucceeded = false;\n            }\n        }\n        else {\n            // Received an error, keep the state as is\n            this._lastSendSucceeded = false;\n        }\n    };\n    QuickPulseStateManager.MAX_POST_WAIT_TIME = 20000;\n    QuickPulseStateManager.MAX_PING_WAIT_TIME = 60000;\n    QuickPulseStateManager.FALLBACK_INTERVAL = 60000;\n    QuickPulseStateManager.PING_INTERVAL = 5000;\n    QuickPulseStateManager.POST_INTERVAL = 1000;\n    return QuickPulseStateManager;\n}());\nmodule.exports = QuickPulseStateManager;\n//# sourceMappingURL=QuickPulseStateManager.js.map","\"use strict\";\nmodule.exports = {\n    /**\n     * Request-Context header\n     */\n    requestContextHeader: \"request-context\",\n    /**\n     * Source instrumentation header that is added by an application while making http\n     * requests and retrieved by the other application when processing incoming requests.\n     */\n    requestContextSourceKey: \"appId\",\n    /**\n     * Target instrumentation header that is added to the response and retrieved by the\n     * calling application when processing incoming responses.\n     */\n    requestContextTargetKey: \"appId\",\n    /**\n     * Request-Id header\n     */\n    requestIdHeader: \"request-id\",\n    /**\n     * Legacy Header containing the id of the immidiate caller\n     */\n    parentIdHeader: \"x-ms-request-id\",\n    /**\n     * Legacy Header containing the correlation id that kept the same for every telemetry item\n     * accross transactions\n     */\n    rootIdHeader: \"x-ms-request-root-id\",\n    /**\n     * Correlation-Context header\n     *\n     * Not currently actively used, but the contents should be passed from incoming to outgoing requests\n     */\n    correlationContextHeader: \"correlation-context\",\n    /**\n     * W3C distributed tracing protocol header\n     */\n    traceparentHeader: \"traceparent\",\n    /**\n     * W3C distributed tracing protocol state header\n     */\n    traceStateHeader: \"tracestate\"\n};\n//# sourceMappingURL=RequestResponseHeaders.js.map","\"use strict\";\nvar fs = require(\"fs\");\nvar os = require(\"os\");\nvar path = require(\"path\");\nvar zlib = require(\"zlib\");\nvar child_process = require(\"child_process\");\nvar Logging = require(\"./Logging\");\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\nvar Util = require(\"./Util\");\nvar Sender = (function () {\n    function Sender(config, onSuccess, onError) {\n        this._config = config;\n        this._onSuccess = onSuccess;\n        this._onError = onError;\n        this._enableDiskRetryMode = false;\n        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;\n        this._maxBytesOnDisk = Sender.MAX_BYTES_ON_DISK;\n        this._numConsecutiveFailures = 0;\n        if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\n            // Node's chmod levels do not appropriately restrict file access on Windows\n            // Use the built-in command line tool ICACLS on Windows to properly restrict\n            // access to the temporary directory used for disk retry mode.\n            if (Sender.USE_ICACLS) {\n                // This should be async - but it's currently safer to have this synchronous\n                // This guarantees we can immediately fail setDiskRetryMode if we need to\n                try {\n                    Sender.OS_PROVIDES_FILE_PROTECTION = fs.existsSync(Sender.ICACLS_PATH);\n                }\n                catch (e) { }\n                if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\n                    Logging.warn(Sender.TAG, \"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.\");\n                }\n            }\n            else {\n                // chmod works everywhere else\n                Sender.OS_PROVIDES_FILE_PROTECTION = true;\n            }\n        }\n    }\n    /**\n    * Enable or disable offline mode\n    */\n    Sender.prototype.setDiskRetryMode = function (value, resendInterval, maxBytesOnDisk) {\n        this._enableDiskRetryMode = Sender.OS_PROVIDES_FILE_PROTECTION && value;\n        if (typeof resendInterval === 'number' && resendInterval >= 0) {\n            this._resendInterval = Math.floor(resendInterval);\n        }\n        if (typeof maxBytesOnDisk === 'number' && maxBytesOnDisk >= 0) {\n            this._maxBytesOnDisk = Math.floor(maxBytesOnDisk);\n        }\n        if (value && !Sender.OS_PROVIDES_FILE_PROTECTION) {\n            this._enableDiskRetryMode = false;\n            Logging.warn(Sender.TAG, \"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.\");\n        }\n    };\n    Sender.prototype.send = function (payload, callback) {\n        var _this = this;\n        var endpointUrl = this._config.endpointUrl;\n        // todo: investigate specifying an agent here: https://nodejs.org/api/http.html#http_class_http_agent\n        var options = {\n            method: \"POST\",\n            withCredentials: false,\n            headers: {\n                \"Content-Type\": \"application/x-json-stream\"\n            }\n        };\n        zlib.gzip(payload, function (err, buffer) {\n            var dataToSend = buffer;\n            if (err) {\n                Logging.warn(err);\n                dataToSend = payload; // something went wrong so send without gzip\n                options.headers[\"Content-Length\"] = payload.length.toString();\n            }\n            else {\n                options.headers[\"Content-Encoding\"] = \"gzip\";\n                options.headers[\"Content-Length\"] = buffer.length;\n            }\n            Logging.info(Sender.TAG, options);\n            // Ensure this request is not captured by auto-collection.\n            options[AutoCollectHttpDependencies.disableCollectionRequestOption] = true;\n            var requestCallback = function (res) {\n                res.setEncoding(\"utf-8\");\n                //returns empty if the data is accepted\n                var responseString = \"\";\n                res.on(\"data\", function (data) {\n                    responseString += data;\n                });\n                res.on(\"end\", function () {\n                    _this._numConsecutiveFailures = 0;\n                    Logging.info(Sender.TAG, responseString);\n                    if (typeof _this._onSuccess === \"function\") {\n                        _this._onSuccess(responseString);\n                    }\n                    if (typeof callback === \"function\") {\n                        callback(responseString);\n                    }\n                    if (_this._enableDiskRetryMode) {\n                        // try to send any cached events if the user is back online\n                        if (res.statusCode === 200) {\n                            setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval).unref();\n                            // store to disk in case of burst throttling\n                        }\n                        else if (res.statusCode === 408 ||\n                            res.statusCode === 429 ||\n                            res.statusCode === 439 ||\n                            res.statusCode === 500 ||\n                            res.statusCode === 503) {\n                            // TODO: Do not support partial success (206) until _sendFirstFileOnDisk checks payload age\n                            _this._storeToDisk(payload);\n                        }\n                    }\n                });\n            };\n            var req = Util.makeRequest(_this._config, endpointUrl, options, requestCallback);\n            req.on(\"error\", function (error) {\n                // todo: handle error codes better (group to recoverable/non-recoverable and persist)\n                _this._numConsecutiveFailures++;\n                // Only use warn level if retries are disabled or we've had some number of consecutive failures sending data\n                // This is because warn level is printed in the console by default, and we don't want to be noisy for transient and self-recovering errors\n                // Continue informing on each failure if verbose logging is being used\n                if (!_this._enableDiskRetryMode || _this._numConsecutiveFailures > 0 && _this._numConsecutiveFailures % Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN === 0) {\n                    var notice = \"Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:\";\n                    if (_this._enableDiskRetryMode) {\n                        notice = \"Ingestion endpoint could not be reached \" + _this._numConsecutiveFailures + \" consecutive times. There may be resulting telemetry loss. Most recent error:\";\n                    }\n                    Logging.warn(Sender.TAG, notice, error);\n                }\n                else {\n                    var notice = \"Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:\";\n                    Logging.info(Sender.TAG, notice, error);\n                }\n                _this._onErrorHelper(error);\n                if (typeof callback === \"function\") {\n                    var errorMessage = \"error sending telemetry\";\n                    if (error && (typeof error.toString === \"function\")) {\n                        errorMessage = error.toString();\n                    }\n                    callback(errorMessage);\n                }\n                if (_this._enableDiskRetryMode) {\n                    _this._storeToDisk(payload);\n                }\n            });\n            req.write(dataToSend);\n            req.end();\n        });\n    };\n    Sender.prototype.saveOnCrash = function (payload) {\n        if (this._enableDiskRetryMode) {\n            this._storeToDiskSync(payload);\n        }\n    };\n    Sender.prototype._runICACLS = function (args, callback) {\n        var aclProc = child_process.spawn(Sender.ICACLS_PATH, args, { windowsHide: true });\n        aclProc.on(\"error\", function (e) { return callback(e); });\n        aclProc.on(\"close\", function (code, signal) {\n            return callback(code === 0 ? null : new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + code + \")\"));\n        });\n    };\n    Sender.prototype._runICACLSSync = function (args) {\n        // Some very old versions of Node (< 0.11) don't have this\n        if (child_process.spawnSync) {\n            var aclProc = child_process.spawnSync(Sender.ICACLS_PATH, args, { windowsHide: true });\n            if (aclProc.error) {\n                throw aclProc.error;\n            }\n            else if (aclProc.status !== 0) {\n                throw new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + aclProc.status + \")\");\n            }\n        }\n        else {\n            throw new Error(\"Could not synchronously call ICACLS under current version of Node.js\");\n        }\n    };\n    Sender.prototype._getACLIdentity = function (callback) {\n        if (Sender.ACL_IDENTITY) {\n            return callback(null, Sender.ACL_IDENTITY);\n        }\n        var psProc = child_process.spawn(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\n            windowsHide: true,\n            stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\n        });\n        var data = \"\";\n        psProc.stdout.on(\"data\", function (d) { return data += d; });\n        psProc.on(\"error\", function (e) { return callback(e, null); });\n        psProc.on(\"close\", function (code, signal) {\n            Sender.ACL_IDENTITY = data && data.trim();\n            return callback(code === 0 ? null : new Error(\"Getting ACL identity did not succeed (PS returned code \" + code + \")\"), Sender.ACL_IDENTITY);\n        });\n    };\n    Sender.prototype._getACLIdentitySync = function () {\n        if (Sender.ACL_IDENTITY) {\n            return Sender.ACL_IDENTITY;\n        }\n        // Some very old versions of Node (< 0.11) don't have this\n        if (child_process.spawnSync) {\n            var psProc = child_process.spawnSync(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\n                windowsHide: true,\n                stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\n            });\n            if (psProc.error) {\n                throw psProc.error;\n            }\n            else if (psProc.status !== 0) {\n                throw new Error(\"Getting ACL identity did not succeed (PS returned code \" + psProc.status + \")\");\n            }\n            Sender.ACL_IDENTITY = psProc.stdout && psProc.stdout.toString().trim();\n            return Sender.ACL_IDENTITY;\n        }\n        else {\n            throw new Error(\"Could not synchronously get ACL identity under current version of Node.js\");\n        }\n    };\n    Sender.prototype._getACLArguments = function (directory, identity) {\n        return [directory,\n            \"/grant\", \"*S-1-5-32-544:(OI)(CI)F\",\n            \"/grant\", identity + \":(OI)(CI)F\",\n            \"/inheritance:r\"]; // Remove all inherited permissions\n    };\n    Sender.prototype._applyACLRules = function (directory, callback) {\n        var _this = this;\n        if (!Sender.USE_ICACLS) {\n            return callback(null);\n        }\n        // For performance, only run ACL rules if we haven't already during this session\n        if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\n            // Avoid multiple calls race condition by setting ACLED_DIRECTORIES to false for this directory immediately\n            // If batches are being failed faster than the processes spawned below return, some data won't be stored to disk\n            // This is better than the alternative of potentially infinitely spawned processes\n            Sender.ACLED_DIRECTORIES[directory] = false;\n            // Restrict this directory to only current user and administrator access\n            this._getACLIdentity(function (err, identity) {\n                if (err) {\n                    Sender.ACLED_DIRECTORIES[directory] = false; // false is used to cache failed (vs undefined which is \"not yet tried\")\n                    return callback(err);\n                }\n                else {\n                    _this._runICACLS(_this._getACLArguments(directory, identity), function (err) {\n                        Sender.ACLED_DIRECTORIES[directory] = !err;\n                        return callback(err);\n                    });\n                }\n            });\n        }\n        else {\n            return callback(Sender.ACLED_DIRECTORIES[directory] ? null :\n                new Error(\"Setting ACL restrictions did not succeed (cached result)\"));\n        }\n    };\n    Sender.prototype._applyACLRulesSync = function (directory) {\n        if (Sender.USE_ICACLS) {\n            // For performance, only run ACL rules if we haven't already during this session\n            if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\n                this._runICACLSSync(this._getACLArguments(directory, this._getACLIdentitySync()));\n                Sender.ACLED_DIRECTORIES[directory] = true; // If we get here, it succeeded. _runIACLSSync will throw on failures\n                return;\n            }\n            else if (!Sender.ACLED_DIRECTORIES[directory]) {\n                throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\n            }\n        }\n    };\n    Sender.prototype._confirmDirExists = function (directory, callback) {\n        var _this = this;\n        fs.lstat(directory, function (err, stats) {\n            if (err && err.code === 'ENOENT') {\n                fs.mkdir(directory, function (err) {\n                    if (err && err.code !== 'EEXIST') {\n                        callback(err);\n                    }\n                    else {\n                        _this._applyACLRules(directory, callback);\n                    }\n                });\n            }\n            else if (!err && stats.isDirectory()) {\n                _this._applyACLRules(directory, callback);\n            }\n            else {\n                callback(err || new Error(\"Path existed but was not a directory\"));\n            }\n        });\n    };\n    /**\n     * Computes the size (in bytes) of all files in a directory at the root level. Asynchronously.\n     */\n    Sender.prototype._getShallowDirectorySize = function (directory, callback) {\n        // Get the directory listing\n        fs.readdir(directory, function (err, files) {\n            if (err) {\n                return callback(err, -1);\n            }\n            var error = null;\n            var totalSize = 0;\n            var count = 0;\n            if (files.length === 0) {\n                callback(null, 0);\n                return;\n            }\n            // Query all file sizes\n            for (var i = 0; i < files.length; i++) {\n                fs.stat(path.join(directory, files[i]), function (err, fileStats) {\n                    count++;\n                    if (err) {\n                        error = err;\n                    }\n                    else {\n                        if (fileStats.isFile()) {\n                            totalSize += fileStats.size;\n                        }\n                    }\n                    if (count === files.length) {\n                        // Did we get an error?\n                        if (error) {\n                            callback(error, -1);\n                        }\n                        else {\n                            callback(error, totalSize);\n                        }\n                    }\n                });\n            }\n        });\n    };\n    /**\n     * Computes the size (in bytes) of all files in a directory at the root level. Synchronously.\n     */\n    Sender.prototype._getShallowDirectorySizeSync = function (directory) {\n        var files = fs.readdirSync(directory);\n        var totalSize = 0;\n        for (var i = 0; i < files.length; i++) {\n            totalSize += fs.statSync(path.join(directory, files[i])).size;\n        }\n        return totalSize;\n    };\n    /**\n     * Stores the payload as a json file on disk in the temp directory\n     */\n    Sender.prototype._storeToDisk = function (payload) {\n        var _this = this;\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        // This will create the dir if it does not exist\n        // Default permissions on *nix are directory listing from other users but no file creations\n        Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\n        this._confirmDirExists(directory, function (error) {\n            if (error) {\n                Logging.warn(Sender.TAG, \"Error while checking/creating directory: \" + (error && error.message));\n                _this._onErrorHelper(error);\n                return;\n            }\n            _this._getShallowDirectorySize(directory, function (err, size) {\n                if (err || size < 0) {\n                    Logging.warn(Sender.TAG, \"Error while checking directory size: \" + (err && err.message));\n                    _this._onErrorHelper(err);\n                    return;\n                }\n                else if (size > _this._maxBytesOnDisk) {\n                    Logging.warn(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + size);\n                    return;\n                }\n                //create file - file name for now is the timestamp, a better approach would be a UUID but that\n                //would require an external dependency\n                var fileName = new Date().getTime() + \".ai.json\";\n                var fileFullPath = path.join(directory, fileName);\n                // Mode 600 is w/r for creator and no read access for others (only applies on *nix)\n                // For Windows, ACL rules are applied to the entire directory (see logic in _confirmDirExists and _applyACLRules)\n                Logging.info(Sender.TAG, \"saving data to disk at: \" + fileFullPath);\n                fs.writeFile(fileFullPath, payload, { mode: 384 }, function (error) { return _this._onErrorHelper(error); });\n            });\n        });\n    };\n    /**\n     * Stores the payload as a json file on disk using sync file operations\n     * this is used when storing data before crashes\n     */\n    Sender.prototype._storeToDiskSync = function (payload) {\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        try {\n            Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\n            if (!fs.existsSync(directory)) {\n                fs.mkdirSync(directory);\n            }\n            // Make sure permissions are valid\n            this._applyACLRulesSync(directory);\n            var dirSize = this._getShallowDirectorySizeSync(directory);\n            if (dirSize > this._maxBytesOnDisk) {\n                Logging.info(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + dirSize);\n                return;\n            }\n            //create file - file name for now is the timestamp, a better approach would be a UUID but that\n            //would require an external dependency\n            var fileName = new Date().getTime() + \".ai.json\";\n            var fileFullPath = path.join(directory, fileName);\n            // Mode 600 is w/r for creator and no access for anyone else (only applies on *nix)\n            Logging.info(Sender.TAG, \"saving data before crash to disk at: \" + fileFullPath);\n            fs.writeFileSync(fileFullPath, payload, { mode: 384 });\n        }\n        catch (error) {\n            Logging.warn(Sender.TAG, \"Error while saving data to disk: \" + (error && error.message));\n            this._onErrorHelper(error);\n        }\n    };\n    /**\n     * Check for temp telemetry files\n     * reads the first file if exist, deletes it and tries to send its load\n     */\n    Sender.prototype._sendFirstFileOnDisk = function () {\n        var _this = this;\n        var tempDir = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        fs.exists(tempDir, function (exists) {\n            if (exists) {\n                fs.readdir(tempDir, function (error, files) {\n                    if (!error) {\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\n                        if (files.length > 0) {\n                            var firstFile = files[0];\n                            var filePath = path.join(tempDir, firstFile);\n                            fs.readFile(filePath, function (error, payload) {\n                                if (!error) {\n                                    // delete the file first to prevent double sending\n                                    fs.unlink(filePath, function (error) {\n                                        if (!error) {\n                                            _this.send(payload);\n                                        }\n                                        else {\n                                            _this._onErrorHelper(error);\n                                        }\n                                    });\n                                }\n                                else {\n                                    _this._onErrorHelper(error);\n                                }\n                            });\n                        }\n                    }\n                    else {\n                        _this._onErrorHelper(error);\n                    }\n                });\n            }\n        });\n    };\n    Sender.prototype._onErrorHelper = function (error) {\n        if (typeof this._onError === \"function\") {\n            this._onError(error);\n        }\n    };\n    Sender.TAG = \"Sender\";\n    Sender.ICACLS_PATH = process.env.systemdrive + \"/windows/system32/icacls.exe\";\n    Sender.POWERSHELL_PATH = process.env.systemdrive + \"/windows/system32/windowspowershell/v1.0/powershell.exe\";\n    Sender.ACLED_DIRECTORIES = {};\n    Sender.ACL_IDENTITY = null;\n    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throtelling from the service side\n    Sender.WAIT_BETWEEN_RESEND = 60 * 1000;\n    Sender.MAX_BYTES_ON_DISK = 50 * 1000 * 1000;\n    Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN = 5;\n    Sender.TEMPDIR_PREFIX = \"appInsights-node\";\n    Sender.OS_PROVIDES_FILE_PROTECTION = false;\n    Sender.USE_ICACLS = os.type() === \"Windows_NT\";\n    return Sender;\n}());\nmodule.exports = Sender;\n//# sourceMappingURL=Sender.js.map","\"use strict\";\nvar url = require(\"url\");\nvar Config = require(\"./Config\");\nvar Context = require(\"./Context\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Channel = require(\"./Channel\");\nvar TelemetryProcessors = require(\"../TelemetryProcessors\");\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\nvar Sender = require(\"./Sender\");\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar EnvelopeFactory = require(\"./EnvelopeFactory\");\n/**\n * Application Insights telemetry client provides interface to track telemetry items, register telemetry initializers and\n * and manually trigger immediate sending (flushing)\n */\nvar TelemetryClient = (function () {\n    /**\n     * Constructs a new client of the client\n     * @param setupString the Connection String or Instrumentation Key to use (read from environment variable if not specified)\n     */\n    function TelemetryClient(setupString) {\n        this._telemetryProcessors = [];\n        var config = new Config(setupString);\n        this.config = config;\n        this.context = new Context();\n        this.commonProperties = {};\n        var sender = new Sender(this.config);\n        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);\n    }\n    /**\n     * Log information about availability of an application\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackAvailability = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Availability);\n    };\n    /**\n     * Log a trace message\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackTrace = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Trace);\n    };\n    /**\n     * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.\n     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the\n     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackMetric = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Metric);\n    };\n    /**\n     * Log an exception\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackException = function (telemetry) {\n        if (telemetry && telemetry.exception && !Util.isError(telemetry.exception)) {\n            telemetry.exception = new Error(telemetry.exception.toString());\n        }\n        this.track(telemetry, Contracts.TelemetryType.Exception);\n    };\n    /**\n     * Log a user action or other occurrence.\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackEvent = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Event);\n    };\n    /**\n     * Log a request. Note that the default client will attempt to collect HTTP requests automatically so only use this for requests\n     * that aren't automatically captured or if you've disabled automatic request collection.\n     *\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackRequest = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Request);\n    };\n    /**\n     * Log a dependency. Note that the default client will attempt to collect dependencies automatically so only use this for dependencies\n     * that aren't automatically captured or if you've disabled automatic dependency collection.\n     *\n     * @param telemetry      Object encapsulating tracking option\n     * */\n    TelemetryClient.prototype.trackDependency = function (telemetry) {\n        if (telemetry && !telemetry.target && telemetry.data) {\n            // url.parse().host returns null for non-urls,\n            // making this essentially a no-op in those cases\n            // If this logic is moved, update jsdoc in DependencyTelemetry.target\n            telemetry.target = url.parse(telemetry.data).host;\n        }\n        this.track(telemetry, Contracts.TelemetryType.Dependency);\n    };\n    /**\n     * Immediately send all queued telemetry.\n     * @param options Flush options, including indicator whether app is crashing and callback\n     */\n    TelemetryClient.prototype.flush = function (options) {\n        this.channel.triggerSend(options ? !!options.isAppCrashing : false, options ? options.callback : undefined);\n    };\n    /**\n     * Generic track method for all telemetry types\n     * @param data the telemetry to send\n     * @param telemetryType specify the type of telemetry you are tracking from the list of Contracts.DataTypes\n     */\n    TelemetryClient.prototype.track = function (telemetry, telemetryType) {\n        if (telemetry && Contracts.telemetryTypeToBaseType(telemetryType)) {\n            var envelope = EnvelopeFactory.createEnvelope(telemetry, telemetryType, this.commonProperties, this.context, this.config);\n            // Set time on the envelope if it was set on the telemetry item\n            if (telemetry.time) {\n                envelope.time = telemetry.time.toISOString();\n            }\n            var accepted = this.runTelemetryProcessors(envelope, telemetry.contextObjects);\n            // Ideally we would have a central place for \"internal\" telemetry processors and users can configure which ones are in use.\n            // This will do for now. Otherwise clearTelemetryProcessors() would be problematic.\n            accepted = accepted && TelemetryProcessors.samplingTelemetryProcessor(envelope, { correlationContext: CorrelationContextManager_1.CorrelationContextManager.getCurrentContext() });\n            TelemetryProcessors.performanceMetricsTelemetryProcessor(envelope, this.quickPulseClient);\n            if (accepted) {\n                this.channel.send(envelope);\n            }\n        }\n        else {\n            Logging.warn(\"track() requires telemetry object and telemetryType to be specified.\");\n        }\n    };\n    /**\n     * Adds telemetry processor to the collection. Telemetry processors will be called one by one\n     * before telemetry item is pushed for sending and in the order they were added.\n     *\n     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean\n     */\n    TelemetryClient.prototype.addTelemetryProcessor = function (telemetryProcessor) {\n        this._telemetryProcessors.push(telemetryProcessor);\n    };\n    /*\n     * Removes all telemetry processors\n     */\n    TelemetryClient.prototype.clearTelemetryProcessors = function () {\n        this._telemetryProcessors = [];\n    };\n    TelemetryClient.prototype.runTelemetryProcessors = function (envelope, contextObjects) {\n        var accepted = true;\n        var telemetryProcessorsCount = this._telemetryProcessors.length;\n        if (telemetryProcessorsCount === 0) {\n            return accepted;\n        }\n        contextObjects = contextObjects || {};\n        contextObjects['correlationContext'] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        for (var i = 0; i < telemetryProcessorsCount; ++i) {\n            try {\n                var processor = this._telemetryProcessors[i];\n                if (processor) {\n                    if (processor.apply(null, [envelope, contextObjects]) === false) {\n                        accepted = false;\n                        break;\n                    }\n                }\n            }\n            catch (error) {\n                accepted = true;\n                Logging.warn(\"One of telemetry processors failed, telemetry item will be sent.\", error, envelope);\n            }\n        }\n        return accepted;\n    };\n    return TelemetryClient;\n}());\nmodule.exports = TelemetryClient;\n//# sourceMappingURL=TelemetryClient.js.map","\"use strict\";\nvar Util = require(\"./Util\");\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\n/**\n * Helper class to manage parsing and validation of traceparent header. Also handles hierarchical\n * back-compatibility headers generated from traceparent. W3C traceparent spec is documented at\n * https://www.w3.org/TR/trace-context/#traceparent-field\n */\nvar Traceparent = (function () {\n    function Traceparent(traceparent, parentId) {\n        this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\n        this.version = Traceparent.DEFAULT_VERSION;\n        if (traceparent && typeof traceparent === \"string\") {\n            // If incoming request contains traceparent: parse it, set operation, parent and telemetry id accordingly. traceparent should be injected into outgoing requests. request-id should be injected in back-compat format |traceId.spanId. so that older SDKs could understand it.\n            if (traceparent.split(\",\").length > 1) {\n                this.traceId = Util.w3cTraceId();\n                this.spanId = Util.w3cTraceId().substr(0, 16);\n            }\n            else {\n                var traceparentArr = traceparent.trim().split(\"-\");\n                var len = traceparentArr.length;\n                if (len >= 4) {\n                    this.version = traceparentArr[0];\n                    this.traceId = traceparentArr[1];\n                    this.spanId = traceparentArr[2];\n                    this.traceFlag = traceparentArr[3];\n                }\n                else {\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                // Version validation\n                if (!this.version.match(/^[0-9a-f]{2}$/g)) {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                    this.traceId = Util.w3cTraceId();\n                }\n                if (this.version === \"00\" && len !== 4) {\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                if (this.version === \"ff\") {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                if (!this.version.match(/^0[0-9a-f]$/g)) {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                }\n                // TraceFlag validation\n                if (!this.traceFlag.match(/^[0-9a-f]{2}$/g)) {\n                    this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Validate TraceId, regenerate new traceid if invalid\n                if (!Traceparent.isValidTraceId(this.traceId)) {\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Validate Span Id, discard entire traceparent if invalid\n                if (!Traceparent.isValidSpanId(this.spanId)) {\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Save backCompat parentId\n                this.parentId = this.getBackCompatRequestId();\n            }\n        }\n        else if (parentId) {\n            // If incoming request contains only request-id, new traceid and spanid should be started, request-id value should be used as a parent. Root part of request-id should be stored in custom dimension on the request telemetry if root part is different from traceid. On the outgoing request side, request-id should be emitted in the |traceId.spanId. format.\n            this.parentId = parentId.slice(); // copy\n            var operationId = CorrelationIdManager.getRootId(parentId);\n            if (!Traceparent.isValidTraceId(operationId)) {\n                this.legacyRootId = operationId;\n                operationId = Util.w3cTraceId();\n            }\n            if (parentId.indexOf(\"|\") !== -1) {\n                parentId = parentId.substring(1 + parentId.substring(0, parentId.length - 1).lastIndexOf(\".\"), parentId.length - 1);\n            }\n            this.traceId = operationId;\n            this.spanId = parentId;\n        }\n        else {\n            // Fallback default constructor\n            // if request does not contain any correlation headers, see case p2\n            this.traceId = Util.w3cTraceId();\n            this.spanId = Util.w3cTraceId().substr(0, 16);\n        }\n    }\n    Traceparent.isValidTraceId = function (id) {\n        return id.match(/^[0-9a-f]{32}$/) && id !== \"00000000000000000000000000000000\";\n    };\n    Traceparent.isValidSpanId = function (id) {\n        return id.match(/^[0-9a-f]{16}$/) && id !== \"0000000000000000\";\n    };\n    Traceparent.prototype.getBackCompatRequestId = function () {\n        return \"|\" + this.traceId + \".\" + this.spanId + \".\";\n    };\n    Traceparent.prototype.toString = function () {\n        return this.version + \"-\" + this.traceId + \"-\" + this.spanId + \"-\" + this.traceFlag;\n    };\n    Traceparent.prototype.updateSpanId = function () {\n        this.spanId = Util.w3cTraceId().substr(0, 16);\n    };\n    Traceparent.DEFAULT_TRACE_FLAG = \"01\";\n    Traceparent.DEFAULT_VERSION = \"00\";\n    return Traceparent;\n}());\nmodule.exports = Traceparent;\n//# sourceMappingURL=Traceparent.js.map","\"use strict\";\n/**\n * Helper class to manage parsing and strict-validation of tracestate header. W3C tracestate spec\n * is documented at https://www.w3.org/TR/trace-context/#header-value\n * @class Tracestate\n */\nvar Tracestate = (function () {\n    // if true, performs strict tracestate header checking, else just passes it along\n    function Tracestate(id) {\n        this.fieldmap = [];\n        if (!id) {\n            return;\n        }\n        this.fieldmap = this.parseHeader(id);\n    }\n    Tracestate.prototype.toString = function () {\n        var fieldarr = this.fieldmap;\n        if (!fieldarr || fieldarr.length == 0) {\n            return null;\n        }\n        return fieldarr.join(\", \");\n    };\n    Tracestate.validateKeyChars = function (key) {\n        var keyParts = key.split(\"@\");\n        if (keyParts.length == 2) {\n            // Parse for tenant@vendor format\n            var tenant = keyParts[0].trim();\n            var vendor = keyParts[1].trim();\n            var tenantValid = Boolean(tenant.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,241}$/));\n            var vendorValid = Boolean(vendor.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,14}$/));\n            return tenantValid && vendorValid;\n        }\n        else if (keyParts.length == 1) {\n            // Parse for standard key format\n            return Boolean(key.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,256}$/));\n        }\n        return false;\n    };\n    Tracestate.prototype.parseHeader = function (id) {\n        var res = [];\n        var keydeduper = {};\n        var parts = id.split(\",\");\n        if (parts.length > 32)\n            return null;\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n            var rawPart = parts_1[_i];\n            var part = rawPart.trim(); // trim out whitespace\n            if (part.length === 0) {\n                continue; // Discard empty pairs, but keep the rest of this tracestate\n            }\n            var pair = part.split(\"=\");\n            // pair should contain exactly one \"=\"\n            if (pair.length !== 2) {\n                return null; // invalid pair: discard entire tracestate\n            }\n            // Validate length and charset of this key\n            if (!Tracestate.validateKeyChars(pair[0])) {\n                return null;\n            }\n            // Assert uniqueness of this key\n            if (keydeduper[pair[0]]) {\n                return null; // duplicate key: discard entire tracestate\n            }\n            else {\n                keydeduper[pair[0]] = true;\n            }\n            // All checks passed -- add this part\n            res.push(part);\n        }\n        return res;\n    };\n    Tracestate.strict = true;\n    return Tracestate;\n}());\nmodule.exports = Tracestate;\n//# sourceMappingURL=Tracestate.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar url = require(\"url\");\nvar constants = require(\"constants\");\nvar Logging = require(\"./Logging\");\nvar RequestResponseHeaders = require(\"./RequestResponseHeaders\");\nvar Util = (function () {\n    function Util() {\n    }\n    /**\n     * helper method to access userId and sessionId cookie\n     */\n    Util.getCookie = function (name, cookie) {\n        var value = \"\";\n        if (name && name.length && typeof cookie === \"string\") {\n            var cookieName = name + \"=\";\n            var cookies = cookie.split(\";\");\n            for (var i = 0; i < cookies.length; i++) {\n                var cookie = cookies[i];\n                cookie = Util.trim(cookie);\n                if (cookie && cookie.indexOf(cookieName) === 0) {\n                    value = cookie.substring(cookieName.length, cookies[i].length);\n                    break;\n                }\n            }\n        }\n        return value;\n    };\n    /**\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\n     */\n    Util.trim = function (str) {\n        if (typeof str === \"string\") {\n            return str.replace(/^\\s+|\\s+$/g, \"\");\n        }\n        else {\n            return \"\";\n        }\n    };\n    /**\n     * Convert an array of int32 to Base64 (no '==' at the end).\n     * MSB first.\n     */\n    Util.int32ArrayToBase64 = function (array) {\n        var toChar = function (v, i) {\n            return String.fromCharCode((v >> i) & 0xFF);\n        };\n        var int32AsString = function (v) {\n            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);\n        };\n        var x = array.map(int32AsString).join(\"\");\n        var b = Buffer.from ? Buffer.from(x, \"binary\") : new Buffer(x, \"binary\");\n        var s = b.toString(\"base64\");\n        return s.substr(0, s.indexOf(\"=\"));\n    };\n    /**\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\n     */\n    Util.random32 = function () {\n        return (0x100000000 * Math.random()) | 0;\n    };\n    /**\n     * generate a random 32bit number (0x00000000..0xFFFFFFFF).\n     */\n    Util.randomu32 = function () {\n        return Util.random32() + 0x80000000;\n    };\n    /**\n     * generate W3C-compatible trace id\n     * https://github.com/w3c/distributed-tracing/blob/master/trace_context/HTTP_HEADER_FORMAT.md#trace-id\n     */\n    Util.w3cTraceId = function () {\n        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\n        var oct = \"\", tmp;\n        for (var a = 0; a < 4; a++) {\n            tmp = Util.random32();\n            oct +=\n                hexValues[tmp & 0xF] +\n                    hexValues[tmp >> 4 & 0xF] +\n                    hexValues[tmp >> 8 & 0xF] +\n                    hexValues[tmp >> 12 & 0xF] +\n                    hexValues[tmp >> 16 & 0xF] +\n                    hexValues[tmp >> 20 & 0xF] +\n                    hexValues[tmp >> 24 & 0xF] +\n                    hexValues[tmp >> 28 & 0xF];\n        }\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\n        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\n    };\n    Util.isValidW3CId = function (id) {\n        return id.length === 32 && id !== \"00000000000000000000000000000000\";\n    };\n    /**\n     * Check if an object is of type Array\n     */\n    Util.isArray = function (obj) {\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\n    };\n    /**\n     * Check if an object is of type Error\n     */\n    Util.isError = function (obj) {\n        return obj instanceof Error;\n    };\n    Util.isPrimitive = function (input) {\n        var propType = typeof input;\n        return propType === \"string\" || propType === \"number\" || propType === \"boolean\";\n    };\n    /**\n     * Check if an object is of type Date\n     */\n    Util.isDate = function (obj) {\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\n    };\n    /**\n     * Convert ms to c# time span format\n     */\n    Util.msToTimeSpan = function (totalms) {\n        if (isNaN(totalms) || totalms < 0) {\n            totalms = 0;\n        }\n        var sec = ((totalms / 1000) % 60).toFixed(7).replace(/0{0,4}$/, \"\");\n        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\n        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\n        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\n        sec = sec.indexOf(\".\") < 2 ? \"0\" + sec : sec;\n        min = min.length < 2 ? \"0\" + min : min;\n        hour = hour.length < 2 ? \"0\" + hour : hour;\n        var daysText = days > 0 ? days + \".\" : \"\";\n        return daysText + hour + \":\" + min + \":\" + sec;\n    };\n    /**\n     * Using JSON.stringify, by default Errors do not serialize to something useful:\n     * Simplify a generic Node Error into a simpler map for customDimensions\n     * Custom errors can still implement toJSON to override this functionality\n     */\n    Util.extractError = function (err) {\n        // Error is often subclassed so may have code OR id properties:\n        // https://nodejs.org/api/errors.html#errors_error_code\n        var looseError = err;\n        return {\n            message: err.message,\n            code: looseError.code || looseError.id || \"\",\n        };\n    };\n    /**\n     * Manually call toJSON if available to pre-convert the value.\n     * If a primitive is returned, then the consumer of this function can skip JSON.stringify.\n     * This avoids double escaping of quotes for Date objects, for example.\n     */\n    Util.extractObject = function (origProperty) {\n        if (origProperty instanceof Error) {\n            return Util.extractError(origProperty);\n        }\n        if (typeof origProperty.toJSON === \"function\") {\n            return origProperty.toJSON();\n        }\n        return origProperty;\n    };\n    /**\n     * Validate that an object is of type { [key: string]: string }\n     */\n    Util.validateStringMap = function (obj) {\n        if (typeof obj !== \"object\") {\n            Logging.info(\"Invalid properties dropped from payload\");\n            return;\n        }\n        var map = {};\n        for (var field in obj) {\n            var property = '';\n            var origProperty = obj[field];\n            var propType = typeof origProperty;\n            if (Util.isPrimitive(origProperty)) {\n                property = origProperty.toString();\n            }\n            else if (origProperty === null || propType === \"undefined\") {\n                property = \"\";\n            }\n            else if (propType === \"function\") {\n                Logging.info(\"key: \" + field + \" was function; will not serialize\");\n                continue;\n            }\n            else {\n                var stringTarget = Util.isArray(origProperty) ? origProperty : Util.extractObject(origProperty);\n                try {\n                    if (Util.isPrimitive(stringTarget)) {\n                        property = stringTarget;\n                    }\n                    else {\n                        property = JSON.stringify(stringTarget);\n                    }\n                }\n                catch (e) {\n                    property = origProperty.constructor.name.toString() + \" (Error: \" + e.message + \")\";\n                    Logging.info(\"key: \" + field + \", could not be serialized\");\n                }\n            }\n            map[field] = property.substring(0, Util.MAX_PROPERTY_LENGTH);\n        }\n        return map;\n    };\n    /**\n     * Checks if a request url is not on a excluded domain list\n     * and if it is safe to add correlation headers\n     */\n    Util.canIncludeCorrelationHeader = function (client, requestUrl) {\n        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;\n        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {\n            return true;\n        }\n        for (var i = 0; i < excludedDomains.length; i++) {\n            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\n            if (regex.test(url.parse(requestUrl).hostname)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Util.getCorrelationContextTarget = function (response, key) {\n        var contextHeaders = response.headers && response.headers[RequestResponseHeaders.requestContextHeader];\n        if (contextHeaders) {\n            var keyValues = contextHeaders.split(\",\");\n            for (var i = 0; i < keyValues.length; ++i) {\n                var keyValue = keyValues[i].split(\"=\");\n                if (keyValue.length == 2 && keyValue[0] == key) {\n                    return keyValue[1];\n                }\n            }\n        }\n    };\n    /**\n     * Generate request\n     *\n     * Proxify the request creation to handle proxy http\n     *\n     * @param {string} requestUrl url endpoint\n     * @param {Object} requestOptions Request option\n     * @param {Function} requestCallback callback on request\n     * @returns {http.ClientRequest} request object\n     */\n    Util.makeRequest = function (config, requestUrl, requestOptions, requestCallback) {\n        if (requestUrl && requestUrl.indexOf('//') === 0) {\n            requestUrl = 'https:' + requestUrl;\n        }\n        var requestUrlParsed = url.parse(requestUrl);\n        var options = __assign({}, requestOptions, { host: requestUrlParsed.hostname, port: requestUrlParsed.port, path: requestUrlParsed.pathname });\n        var proxyUrl = undefined;\n        if (requestUrlParsed.protocol === 'https:') {\n            proxyUrl = config.proxyHttpsUrl || undefined;\n        }\n        if (requestUrlParsed.protocol === 'http:') {\n            proxyUrl = config.proxyHttpUrl || undefined;\n        }\n        if (proxyUrl) {\n            if (proxyUrl.indexOf('//') === 0) {\n                proxyUrl = 'http:' + proxyUrl;\n            }\n            var proxyUrlParsed = url.parse(proxyUrl);\n            // https is not supported at the moment\n            if (proxyUrlParsed.protocol === 'https:') {\n                Logging.info(\"Proxies that use HTTPS are not supported\");\n                proxyUrl = undefined;\n            }\n            else {\n                options = __assign({}, options, { host: proxyUrlParsed.hostname, port: proxyUrlParsed.port || \"80\", path: requestUrl, headers: __assign({}, options.headers, { Host: requestUrlParsed.hostname }) });\n            }\n        }\n        var isHttps = requestUrlParsed.protocol === 'https:' && !proxyUrl;\n        if (isHttps && config.httpsAgent !== undefined) {\n            options.agent = config.httpsAgent;\n        }\n        else if (!isHttps && config.httpAgent !== undefined) {\n            options.agent = config.httpAgent;\n        }\n        else if (isHttps) {\n            // HTTPS without a passed in agent. Use one that enforces our TLS rules\n            options.agent = Util.tlsRestrictedAgent;\n        }\n        if (isHttps) {\n            return https.request(options, requestCallback);\n        }\n        else {\n            return http.request(options, requestCallback);\n        }\n    };\n    ;\n    /**\n     * Parse standard <string | string[] | number> request-context header\n     */\n    Util.safeIncludeCorrelationHeader = function (client, request, correlationHeader) {\n        var header; // attempt to cast correlationHeader to string\n        if (typeof correlationHeader === \"string\") {\n            header = correlationHeader;\n        }\n        else if (correlationHeader instanceof Array) {\n            header = correlationHeader.join(\",\");\n        }\n        else if (correlationHeader && typeof correlationHeader.toString === \"function\") {\n            // best effort attempt: requires well-defined toString\n            try {\n                header = correlationHeader.toString();\n            }\n            catch (err) {\n                Logging.warn(\"Outgoing request-context header could not be read. Correlation of requests may be lost.\", err, correlationHeader);\n            }\n        }\n        if (header) {\n            Util.addCorrelationIdHeaderFromString(client, request, header);\n        }\n        else {\n            request.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n        }\n    };\n    Util.addCorrelationIdHeaderFromString = function (client, response, correlationHeader) {\n        var components = correlationHeader.split(\",\");\n        var key = RequestResponseHeaders.requestContextSourceKey + \"=\";\n        var found = components.some(function (value) { return value.substring(0, key.length) === key; });\n        if (!found) {\n            response.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n        }\n    };\n    Util.MAX_PROPERTY_LENGTH = 8192;\n    Util.tlsRestrictedAgent = new https.Agent({\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\n    });\n    return Util;\n}());\nmodule.exports = Util;\n//# sourceMappingURL=Util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AutoCollectPerformance = require(\"../AutoCollection/Performance\");\nvar TelemetryType = require(\"../Declarations/Contracts\");\nfunction performanceMetricsTelemetryProcessor(envelope, client) {\n    // If live metrics is enabled, forward all telemetry there\n    if (client) {\n        client.addDocument(envelope);\n    }\n    // Increment rate counters (for standard metrics and live metrics)\n    switch (envelope.data.baseType) {\n        case TelemetryType.TelemetryTypeString.Exception:\n            AutoCollectPerformance.countException();\n            break;\n        case TelemetryType.TelemetryTypeString.Request:\n            var requestData = envelope.data.baseData;\n            AutoCollectPerformance.countRequest(requestData.duration, requestData.success);\n            break;\n        case TelemetryType.TelemetryTypeString.Dependency:\n            var remoteDependencyData = envelope.data.baseData;\n            AutoCollectPerformance.countDependency(remoteDependencyData.duration, remoteDependencyData.success);\n            break;\n    }\n    return true;\n}\nexports.performanceMetricsTelemetryProcessor = performanceMetricsTelemetryProcessor;\n//# sourceMappingURL=PerformanceMetricsTelemetryProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts = require(\"../Declarations/Contracts\");\n/**\n *  A telemetry processor that handles sampling.\n */\nfunction samplingTelemetryProcessor(envelope, contextObjects) {\n    var samplingPercentage = envelope.sampleRate; // Set for us in Client.getEnvelope\n    var isSampledIn = false;\n    if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\n        return true;\n    }\n    else if (envelope.data && Contracts.TelemetryType.Metric === Contracts.baseTypeToTelemetryType(envelope.data.baseType)) {\n        // Exclude MetricData telemetry from sampling\n        return true;\n    }\n    else if (contextObjects.correlationContext && contextObjects.correlationContext.operation) {\n        // If we're using dependency correlation, sampling should retain all telemetry from a given request\n        isSampledIn = getSamplingHashCode(contextObjects.correlationContext.operation.id) < samplingPercentage;\n    }\n    else {\n        // If we're not using dependency correlation, sampling should use a random distribution on each item\n        isSampledIn = (Math.random() * 100) < samplingPercentage;\n    }\n    return isSampledIn;\n}\nexports.samplingTelemetryProcessor = samplingTelemetryProcessor;\n/** Ported from AI .NET SDK */\nfunction getSamplingHashCode(input) {\n    var csharpMin = -2147483648;\n    var csharpMax = 2147483647;\n    var hash = 5381;\n    if (!input) {\n        return 0;\n    }\n    while (input.length < 8) {\n        input = input + input;\n    }\n    for (var i = 0; i < input.length; i++) {\n        // JS doesn't respond to integer overflow by wrapping around. Simulate it with bitwise operators ( | 0)\n        hash = ((((hash << 5) + hash) | 0) + input.charCodeAt(i) | 0);\n    }\n    hash = hash <= csharpMin ? csharpMax : Math.abs(hash);\n    return (hash / csharpMax) * 100;\n}\nexports.getSamplingHashCode = getSamplingHashCode;\n//# sourceMappingURL=SamplingTelemetryProcessor.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./SamplingTelemetryProcessor\"));\n__export(require(\"./PerformanceMetricsTelemetryProcessor\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\nvar AutoCollectConsole = require(\"./AutoCollection/Console\");\nvar AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\nvar AutoCollectPerformance = require(\"./AutoCollection/Performance\");\nvar AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\nvar AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\nvar CorrelationIdManager = require(\"./Library/CorrelationIdManager\");\nvar Logging = require(\"./Library/Logging\");\nvar QuickPulseClient = require(\"./Library/QuickPulseStateManager\");\nvar NativePerformance_1 = require(\"./AutoCollection/NativePerformance\");\n// We export these imports so that SDK users may use these classes directly.\n// They're exposed using \"export import\" so that types are passed along as expected\nexports.TelemetryClient = require(\"./Library/NodeClient\");\nexports.Contracts = require(\"./Declarations/Contracts\");\nvar DistributedTracingModes;\n(function (DistributedTracingModes) {\n    /**\n     * (Default) Send Application Insights correlation headers\n     */\n    DistributedTracingModes[DistributedTracingModes[\"AI\"] = 0] = \"AI\";\n    /**\n     * Send both W3C Trace Context headers and back-compatibility Application Insights headers\n     */\n    DistributedTracingModes[DistributedTracingModes[\"AI_AND_W3C\"] = 1] = \"AI_AND_W3C\";\n})(DistributedTracingModes = exports.DistributedTracingModes || (exports.DistributedTracingModes = {}));\n// Default autocollection configuration\nvar _isConsole = true;\nvar _isConsoleLog = false;\nvar _isExceptions = true;\nvar _isPerformance = true;\nvar _isRequests = true;\nvar _isDependencies = true;\nvar _isDiskRetry = true;\nvar _isCorrelating = true;\nvar _forceClsHooked;\nvar _isSendingLiveMetrics = false; // Off by default\nvar _isNativePerformance = true;\nvar _disabledExtendedMetrics;\nvar _diskRetryInterval = undefined;\nvar _diskRetryMaxBytes = undefined;\nvar _console;\nvar _exceptions;\nvar _performance;\nvar _nativePerformance;\nvar _serverRequests;\nvar _clientRequests;\nvar _isStarted = false;\nvar _performanceLiveMetrics;\n/**\n * Initializes the default client. Should be called after setting\n * configuration options.\n *\n * @param setupString the Connection String or Instrumentation Key to use. Optional, if\n * this is not specified, the value will be read from the environment\n * variable APPLICATIONINSIGHTS_CONNECTION_STRING or APPINSIGHTS_INSTRUMENTATIONKEY.\n * @returns {Configuration} the configuration class to initialize\n * and start the SDK.\n */\nfunction setup(setupString) {\n    if (!exports.defaultClient) {\n        exports.defaultClient = new exports.TelemetryClient(setupString);\n        _console = new AutoCollectConsole(exports.defaultClient);\n        _exceptions = new AutoCollectExceptions(exports.defaultClient);\n        _performance = new AutoCollectPerformance(exports.defaultClient);\n        _serverRequests = new AutoCollectHttpRequests(exports.defaultClient);\n        _clientRequests = new AutoCollectHttpDependencies(exports.defaultClient);\n        if (!_nativePerformance) {\n            _nativePerformance = new NativePerformance_1.AutoCollectNativePerformance(exports.defaultClient);\n        }\n    }\n    else {\n        Logging.info(\"The default client is already setup\");\n    }\n    if (exports.defaultClient && exports.defaultClient.channel) {\n        exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\n    }\n    return Configuration;\n}\nexports.setup = setup;\n/**\n * Starts automatic collection of telemetry. Prior to calling start no\n * telemetry will be *automatically* collected, though manual collection\n * is enabled.\n * @returns {ApplicationInsights} this class\n */\nfunction start() {\n    if (!!exports.defaultClient) {\n        _isStarted = true;\n        _console.enable(_isConsole, _isConsoleLog);\n        _exceptions.enable(_isExceptions);\n        _performance.enable(_isPerformance);\n        _nativePerformance.enable(_isNativePerformance, _disabledExtendedMetrics);\n        _serverRequests.useAutoCorrelation(_isCorrelating, _forceClsHooked);\n        _serverRequests.enable(_isRequests);\n        _clientRequests.enable(_isDependencies);\n        if (exports.liveMetricsClient && _isSendingLiveMetrics) {\n            exports.liveMetricsClient.enable(_isSendingLiveMetrics);\n        }\n    }\n    else {\n        Logging.warn(\"Start cannot be called before setup\");\n    }\n    return Configuration;\n}\nexports.start = start;\n/**\n * Returns an object that is shared across all code handling a given request.\n * This can be used similarly to thread-local storage in other languages.\n * Properties set on this object will be available to telemetry processors.\n *\n * Do not store sensitive information here.\n * Custom properties set on this object can be exposed in a future SDK\n * release via outgoing HTTP headers.\n * This is to allow for correlating data cross-component.\n *\n * This method will return null if automatic dependency correlation is disabled.\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\n */\nfunction getCorrelationContext() {\n    if (_isCorrelating) {\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\n    }\n    return null;\n}\nexports.getCorrelationContext = getCorrelationContext;\n/**\n * Returns a function that will get the same correlation context within its\n * function body as the code executing this function.\n * Use this method if automatic dependency correlation is not propagating\n * correctly to an asynchronous callback.\n */\nfunction wrapWithCorrelationContext(fn) {\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);\n}\nexports.wrapWithCorrelationContext = wrapWithCorrelationContext;\n/**\n * The active configuration for global SDK behaviors, such as autocollection.\n */\nvar Configuration = (function () {\n    function Configuration() {\n    }\n    /**\n     * Sets the distributed tracing modes. If W3C mode is enabled, W3C trace context\n     * headers (traceparent/tracestate) will be parsed in all incoming requests, and included in outgoing\n     * requests. In W3C mode, existing back-compatibility AI headers will also be parsed and included.\n     * Enabling W3C mode will not break existing correlation with other Application Insights instrumented\n     * services. Default=AI\n    */\n    Configuration.setDistributedTracingMode = function (value) {\n        CorrelationIdManager.w3cEnabled = value === DistributedTracingModes.AI_AND_W3C;\n        return Configuration;\n    };\n    /**\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\n     * @param value if true logger activity will be sent to Application Insights\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectConsole = function (value, collectConsoleLog) {\n        if (collectConsoleLog === void 0) { collectConsoleLog = false; }\n        _isConsole = value;\n        _isConsoleLog = collectConsoleLog;\n        if (_isStarted) {\n            _console.enable(value, collectConsoleLog);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of exception tracking (enabled by default)\n     * @param value if true uncaught exceptions will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectExceptions = function (value) {\n        _isExceptions = value;\n        if (_isStarted) {\n            _exceptions.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of performance tracking (enabled by default)\n     * @param value if true performance counters will be collected every second and sent to Application Insights\n     * @param collectExtendedMetrics if true, extended metrics counters will be collected every minute and sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectPerformance = function (value, collectExtendedMetrics) {\n        if (collectExtendedMetrics === void 0) { collectExtendedMetrics = true; }\n        _isPerformance = value;\n        var extendedMetricsConfig = NativePerformance_1.AutoCollectNativePerformance.parseEnabled(collectExtendedMetrics);\n        _isNativePerformance = extendedMetricsConfig.isEnabled;\n        _disabledExtendedMetrics = extendedMetricsConfig.disabledMetrics;\n        if (_isStarted) {\n            _performance.enable(value);\n            _nativePerformance.enable(extendedMetricsConfig.isEnabled, extendedMetricsConfig.disabledMetrics);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of request tracking (enabled by default)\n     * @param value if true requests will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectRequests = function (value) {\n        _isRequests = value;\n        if (_isStarted) {\n            _serverRequests.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of dependency tracking (enabled by default)\n     * @param value if true dependencies will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectDependencies = function (value) {\n        _isDependencies = value;\n        if (_isStarted) {\n            _clientRequests.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of automatic dependency correlation (enabled by default)\n     * @param value if true dependencies will be correlated with requests\n     * @param useAsyncHooks if true, forces use of experimental async_hooks module to provide correlation. If false, instead uses only patching-based techniques. If left blank, the best option is chosen for you based on your version of Node.js.\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoDependencyCorrelation = function (value, useAsyncHooks) {\n        _isCorrelating = value;\n        _forceClsHooked = useAsyncHooks;\n        if (_isStarted) {\n            _serverRequests.useAutoCorrelation(value, useAsyncHooks);\n        }\n        return Configuration;\n    };\n    /**\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\n     * @param value if true events that occured while client is offline will be cached on disk\n     * @param resendInterval The wait interval for resending cached events.\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\n     * @returns {Configuration} this class\n     */\n    Configuration.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\n        _isDiskRetry = value;\n        _diskRetryInterval = resendInterval;\n        _diskRetryMaxBytes = maxBytesOnDisk;\n        if (exports.defaultClient && exports.defaultClient.channel) {\n            exports.defaultClient.channel.setUseDiskRetryCaching(value, resendInterval, maxBytesOnDisk);\n        }\n        return Configuration;\n    };\n    /**\n     * Enables debug and warning logging for AppInsights itself.\n     * @param enableDebugLogging if true, enables debug logging\n     * @param enableWarningLogging if true, enables warning logging\n     * @returns {Configuration} this class\n     */\n    Configuration.setInternalLogging = function (enableDebugLogging, enableWarningLogging) {\n        if (enableDebugLogging === void 0) { enableDebugLogging = false; }\n        if (enableWarningLogging === void 0) { enableWarningLogging = true; }\n        Logging.enableDebug = enableDebugLogging;\n        Logging.disableWarnings = !enableWarningLogging;\n        return Configuration;\n    };\n    /**\n     * Enables communication with Application Insights Live Metrics.\n     * @param enable if true, enables communication with the live metrics service\n     */\n    Configuration.setSendLiveMetrics = function (enable) {\n        if (enable === void 0) { enable = false; }\n        if (!exports.defaultClient) {\n            // Need a defaultClient so that we can add the QPS telemetry processor to it\n            Logging.warn(\"Live metrics client cannot be setup without the default client\");\n            return Configuration;\n        }\n        if (!exports.liveMetricsClient && enable) {\n            // No qps client exists. Create one and prepare it to be enabled at .start()\n            exports.liveMetricsClient = new QuickPulseClient(exports.defaultClient.config.instrumentationKey);\n            _performanceLiveMetrics = new AutoCollectPerformance(exports.liveMetricsClient, 1000, true);\n            exports.liveMetricsClient.addCollector(_performanceLiveMetrics);\n            exports.defaultClient.quickPulseClient = exports.liveMetricsClient; // Need this so we can forward all manual tracks to live metrics via PerformanceMetricsTelemetryProcessor\n        }\n        else if (exports.liveMetricsClient) {\n            // qps client already exists; enable/disable it\n            exports.liveMetricsClient.enable(enable);\n        }\n        _isSendingLiveMetrics = enable;\n        return Configuration;\n    };\n    // Convenience shortcut to ApplicationInsights.start\n    Configuration.start = start;\n    return Configuration;\n}());\nexports.Configuration = Configuration;\n/**\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\n*/\nfunction dispose() {\n    exports.defaultClient = null;\n    _isStarted = false;\n    if (_console) {\n        _console.dispose();\n    }\n    if (_exceptions) {\n        _exceptions.dispose();\n    }\n    if (_performance) {\n        _performance.dispose();\n    }\n    if (_nativePerformance) {\n        _nativePerformance.dispose();\n    }\n    if (_serverRequests) {\n        _serverRequests.dispose();\n    }\n    if (_clientRequests) {\n        _clientRequests.dispose();\n    }\n    if (exports.liveMetricsClient) {\n        exports.liveMetricsClient.enable(false);\n        _isSendingLiveMetrics = false;\n        exports.liveMetricsClient = undefined;\n    }\n}\nexports.dispose = dispose;\n//# sourceMappingURL=applicationinsights.js.map","'use strict';\n\nconst asyncWrap = process.binding('async_wrap');\nconst TIMERWRAP = asyncWrap.Providers.TIMERWRAP;\n\nconst patchs = {\n  'nextTick': require('./patches/next-tick.js'),\n  'promise': require('./patches/promise.js'),\n  'timers': require('./patches/timers.js')\n};\n\nconst ignoreUIDs = new Set();\n\nfunction State() {\n  this.enabled = false;\n  this.counter = 0;\n}\n\nfunction Hooks() {\n  const initFns = this.initFns = [];\n  const preFns = this.preFns = [];\n  const postFns = this.postFns = [];\n  const destroyFns = this.destroyFns = [];\n\n  this.init = function (uid, provider, parentUid, parentHandle) {\n    // Ignore TIMERWRAP, since setTimeout etc. is monkey patched\n    if (provider === TIMERWRAP) {\n      ignoreUIDs.add(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of initFns) {\n      hook(uid, this, provider, parentUid, parentHandle);\n    }\n  };\n\n  this.pre = function (uid) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of preFns) {\n      hook(uid, this);\n    }\n  };\n\n  this.post = function (uid, didThrow) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of postFns) {\n      hook(uid, this, didThrow);\n    }\n  };\n\n  this.destroy = function (uid) {\n    // Cleanup the ignore list if this uid should be ignored\n    if (ignoreUIDs.has(uid)) {\n      ignoreUIDs.delete(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of destroyFns) {\n      hook(uid);\n    }\n  };\n}\n\nHooks.prototype.add = function (hooks) {\n  if (hooks.init) this.initFns.push(hooks.init);\n  if (hooks.pre) this.preFns.push(hooks.pre);\n  if (hooks.post) this.postFns.push(hooks.post);\n  if (hooks.destroy) this.destroyFns.push(hooks.destroy);\n};\n\nfunction removeElement(array, item) {\n  const index = array.indexOf(item);\n  if (index === -1) return;\n  array.splice(index, 1);\n}\n\nHooks.prototype.remove = function (hooks) {\n  if (hooks.init) removeElement(this.initFns, hooks.init);\n  if (hooks.pre) removeElement(this.preFns, hooks.pre);\n  if (hooks.post) removeElement(this.postFns, hooks.post);\n  if (hooks.destroy) removeElement(this.destroyFns, hooks.destroy);\n};\n\nfunction AsyncHook() {\n  this._state = new State();\n  this._hooks = new Hooks();\n\n  // expose version for conflict detection\n  this.version = require('./package.json').version;\n\n  // expose the Providers map\n  this.providers = asyncWrap.Providers;\n\n  // apply patches\n  for (const key of Object.keys(patchs)) {\n    patchs[key].call(this);\n  }\n\n  // setup async wrap\n  if (process.env.hasOwnProperty('NODE_ASYNC_HOOK_WARNING')) {\n    console.warn('warning: you are using async-hook-jl which is unstable.');\n  }\n  asyncWrap.setupHooks({\n    init: this._hooks.init,\n    pre: this._hooks.pre,\n    post: this._hooks.post,\n    destroy: this._hooks.destroy\n  });\n}\nmodule.exports = AsyncHook;\n\nAsyncHook.prototype.addHooks = function (hooks) {\n  this._hooks.add(hooks);\n};\n\nAsyncHook.prototype.removeHooks = function (hooks) {\n  this._hooks.remove(hooks);\n};\n\nAsyncHook.prototype.enable = function () {\n  this._state.enabled = true;\n  asyncWrap.enable();\n};\n\nAsyncHook.prototype.disable = function () {\n  this._state.enabled = false;\n  asyncWrap.disable();\n};","'use strict';\n\nconst AsyncHook = require('./async-hook.js');\n\n// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._asyncHook) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._asyncHook.version === require('./package.json').version) {\n    module.exports = global._asyncHook;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of async-hook-jl found');\n  }\n} else {\n  const stackChain = require('stack-chain');\n\n  // Remove callSites from this module. AsyncWrap doesn't have any callSites\n  // and the hooks are expected to be completely transparent.\n  stackChain.filter.attach(function (error, frames) {\n    return frames.filter(function (callSite) {\n      const filename = callSite.getFileName();\n      // filename is not always a string, for example in case of eval it is\n      // undefined. So check if the filename is defined.\n      return !(filename && filename.slice(0, __dirname.length) === __dirname);\n    });\n  });\n\n  module.exports = global._asyncHook = new AsyncHook();\n}","'use strict';\n\nfunction NextTickWrap() {}\n\nmodule.exports = function patch() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const oldNextTick = process.nextTick;\n  process.nextTick = function () {\n    if (!state.enabled) return oldNextTick.apply(process, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback is not a function');\n    }\n\n    const handle = new NextTickWrap();\n    const uid = --state.counter;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if(didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            hooks.post.call(handle, uid, true);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      hooks.destroy.call(null, uid);\n    };\n\n    return oldNextTick.apply(process, args);\n  };\n}\n","'use strict';\n\nfunction PromiseWrap() {}\n\nmodule.exports = function patchPromise() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const Promise = global.Promise;\n\n  /* As per ECMAScript 2015, .catch must be implemented by calling .then, as\n   * such we need needn't patch .catch as well. see:\n   * http://www.ecma-international.org/ecma-262/6.0/#sec-promise.prototype.catch\n   */\n  const oldThen = Promise.prototype.then;\n  Promise.prototype.then = wrappedThen;\n\n  function makeWrappedHandler(fn, handle, uid, isOnFulfilled) {\n    if ('function' !== typeof fn) {\n      return isOnFulfilled\n        ? makeUnhandledResolutionHandler(uid)\n        : makeUnhandledRejectionHandler(uid);\n    }\n\n    return function wrappedHandler() {\n      hooks.pre.call(handle, uid);\n      try {\n        return fn.apply(this, arguments);\n      } finally {\n        hooks.post.call(handle, uid, false);\n        hooks.destroy.call(null, uid);\n      }\n    };\n  }\n\n  function makeUnhandledResolutionHandler(uid) {\n    return function unhandledResolutionHandler(val) {\n      hooks.destroy.call(null, uid);\n      return val;\n    };\n  }\n\n  function makeUnhandledRejectionHandler(uid) {\n    return function unhandledRejectedHandler(val) {\n      hooks.destroy.call(null, uid);\n      throw val;\n    };\n  }\n\n  function wrappedThen(onFulfilled, onRejected) {\n    if (!state.enabled) return oldThen.call(this, onFulfilled, onRejected);\n\n    const handle = new PromiseWrap();\n    const uid = --state.counter;\n\n    hooks.init.call(handle, uid, 0, null, null);\n\n    return oldThen.call(\n      this,\n      makeWrappedHandler(onFulfilled, handle, uid, true),\n      makeWrappedHandler(onRejected, handle, uid, false)\n    );\n  }\n};\n","'use strict';\n\nconst timers = require('timers');\n\nfunction TimeoutWrap() {}\nfunction IntervalWrap() {}\nfunction ImmediateWrap() {}\n\nconst timeoutMap = new Map();\nconst intervalMap = new Map();\nconst ImmediateMap = new Map();\n\nlet activeCallback = null;\nlet clearedInCallback = false;\n\nmodule.exports = function patch() {\n  patchTimer(this._hooks, this._state, 'setTimeout', 'clearTimeout', TimeoutWrap, timeoutMap, true);\n  patchTimer(this._hooks, this._state, 'setInterval', 'clearInterval', IntervalWrap, intervalMap, false);\n  patchTimer(this._hooks, this._state, 'setImmediate', 'clearImmediate', ImmediateWrap, ImmediateMap, true);\n\n  global.setTimeout = timers.setTimeout;\n  global.setInterval = timers.setInterval;\n  global.setImmediate = timers.setImmediate;\n\n  global.clearTimeout = timers.clearTimeout;\n  global.clearInterval = timers.clearInterval;\n  global.clearImmediate = timers.clearImmediate;\n};\n\nfunction patchTimer(hooks, state, setFn, clearFn, Handle, timerMap, singleCall) {\n  const oldSetFn = timers[setFn];\n  const oldClearFn = timers[clearFn];\n\n  // overwrite set[Timeout]\n  timers[setFn] = function () {\n    if (!state.enabled) return oldSetFn.apply(timers, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('\"callback\" argument must be a function');\n    }\n\n    const handle = new Handle();\n    const uid = --state.counter;\n    let timerId = undefined;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      activeCallback = timerId;\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if (didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            // call the post hook\n            hooks.post.call(handle, uid, true);\n            // setInterval won't continue\n            timerMap.delete(timerId);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      activeCallback = null;\n\n      // call the destroy hook if the callback will only be called once\n      if (singleCall || clearedInCallback) {\n        clearedInCallback = false;\n        timerMap.delete(timerId);\n        hooks.destroy.call(null, uid);\n      }\n    };\n\n    timerId = oldSetFn.apply(timers, args);\n    // Bind the timerId and uid for later use, in case the clear* function is\n    // called.\n    timerMap.set(timerId, uid);\n\n    return timerId;\n  };\n\n  // overwrite clear[Timeout]\n  timers[clearFn] = function (timerId) {\n    // If clear* was called within the timer callback, then delay the destroy\n    // event to after the post event has been called.\n    if (activeCallback === timerId && timerId !== null) {\n      clearedInCallback = true;\n    }\n    // clear should call the destroy hook. Note if timerId doesn't exists\n    // it is because asyncWrap wasn't enabled at the time.\n    else if (timerMap.has(timerId)) {\n      const uid = timerMap.get(timerId);\n      timerMap.delete(timerId);\n      hooks.destroy.call(null, uid);\n    }\n\n    oldClearFn.apply(timers, arguments);\n  };\n}\n","'use strict';\n\nmodule.exports = (Promise, ensureAslWrapper) => {\n  // Updates to this class should also be applied to the the ES3 version\n  // in index.js.\n  return class WrappedPromise extends Promise {\n    constructor(executor) {\n      var context, args;\n      super(wrappedExecutor);\n      var promise = this;\n\n      try {\n        executor.apply(context, args);\n      } catch (err) {\n        args[1](err);\n      }\n\n      return promise;\n      function wrappedExecutor(resolve, reject) {\n        context = this;\n        args = [wrappedResolve, wrappedReject];\n\n        // These wrappers create a function that can be passed a function and an argument to\n        // call as a continuation from the resolve or reject.\n        function wrappedResolve(val) {\n          ensureAslWrapper(promise, false);\n          return resolve(val);\n        }\n\n        function wrappedReject(val) {\n          ensureAslWrapper(promise, false);\n          return reject(val);\n        }\n      }\n    }\n  }\n};\n","var wrap = require('shimmer').wrap;\n\n/*\n *\n * CONSTANTS\n *\n */\nvar HAS_CREATE_AL = 1 << 0;\nvar HAS_BEFORE_AL = 1 << 1;\nvar HAS_AFTER_AL = 1 << 2;\nvar HAS_ERROR_AL = 1 << 3;\n\n/**\n * There is one list of currently active listeners that is mutated in place by\n * addAsyncListener and removeAsyncListener. This complicates error-handling,\n * for reasons that are discussed below.\n */\nvar listeners = [];\n\n/**\n * There can be multiple listeners with the same properties, so disambiguate\n * them by assigning them an ID at creation time.\n */\nvar uid = 0;\n\n/**\n * Ensure that errors coming from within listeners are handed off to domains,\n * process._fatalException, or uncaughtException without being treated like\n * user errors.\n */\nvar inAsyncTick = false;\n\n/**\n * Because asynchronous contexts can be nested, and errors can come from anywhere\n * in the stack, a little extra work is required to keep track of where in the\n * nesting we are. Because JS arrays are frequently mutated in place\n */\nvar listenerStack = [];\n\n/**\n * The error handler on a listener can capture errors thrown during synchronous\n * execution immediately after the listener is added. To capture both\n * synchronous and asynchronous errors, the error handler just uses the\n * \"global\" list of active listeners, and the rest of the code ensures that the\n * listener list is correct by using a stack of listener lists during\n * asynchronous execution.\n */\nvar asyncCatcher;\n\n/**\n * The guts of the system -- called each time an asynchronous event happens\n * while one or more listeners are active.\n */\nvar asyncWrap;\n\n/**\n * Simple helper function that's probably faster than using Array\n * filter methods and can be inlined.\n */\nfunction union(dest, added) {\n  var destLength = dest.length;\n  var addedLength = added.length;\n  var returned = [];\n\n  if (destLength === 0 && addedLength === 0) return returned;\n\n  for (var j  = 0; j < destLength; j++) returned[j] = dest[j];\n\n  if (addedLength === 0) return returned;\n\n  for (var i = 0; i < addedLength; i++) {\n    var missing = true;\n    for (j = 0; j < destLength; j++) {\n      if (dest[j].uid === added[i].uid) {\n        missing = false;\n        break;\n      }\n    }\n    if (missing) returned.push(added[i]);\n  }\n\n  return returned;\n}\n\n/*\n * For performance, split error-handlers and asyncCatcher up into two separate\n * code paths.\n */\n\n// 0.9+\nif (process._fatalException) {\n  /**\n   * Error handlers on listeners can throw, the catcher needs to be able to\n   * discriminate between exceptions thrown by user code, and exceptions coming\n   * from within the catcher itself. Use a global to keep track of which state\n   * the catcher is currently in.\n   */\n  var inErrorTick = false;\n\n  /**\n   * Throwing always happens synchronously. If the current array of values for\n   * the current list of asyncListeners is put in a module-scoped variable right\n   * before a call that can throw, it will always be correct when the error\n   * handlers are run.\n   */\n  var errorValues;\n\n  asyncCatcher = function asyncCatcher(er) {\n    var length = listeners.length;\n    if (inErrorTick || length === 0) return false;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    inErrorTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n\n      var value = errorValues && errorValues[listener.uid];\n      handled = listener.error(value, er) || handled;\n    }\n    inErrorTick = false;\n\n    /* Test whether there are any listener arrays on the stack. In the case of\n     * synchronous throws when the listener is active, there may have been\n     * none pushed yet.\n     */\n    if (listenerStack.length > 0) listeners = listenerStack.pop();\n    errorValues = undefined;\n\n    return handled && !inAsyncTick;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      // put the current values where the catcher can see them\n      errorValues = values;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned = original.apply(this, arguments);\n\n      /*\n       * after handlers (not run if original throws)\n       */\n      inAsyncTick = true;\n      for (i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_AFTER_AL) > 0) {\n          list[i].after(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // back to the previous listener list on the stack\n      listeners = listenerStack.pop();\n      errorValues = undefined;\n\n      return returned;\n    };\n  };\n\n  wrap(process, '_fatalException', function (_fatalException) {\n    return function _asyncFatalException(er) {\n      return asyncCatcher(er) || _fatalException(er);\n    };\n  });\n}\n// 0.8 and below\nelse {\n  /**\n   * If an error handler in asyncWrap throws, the process must die. Under 0.8\n   * and earlier the only way to put a bullet through the head of the process\n   * is to rethrow from inside the exception handler, so rethrow and set\n   * errorThrew to tell the uncaughtHandler what to do.\n   */\n  var errorThrew = false;\n\n  /**\n   * Under Node 0.8, this handler *only* handles synchronously thrown errors.\n   * This simplifies it, which almost but not quite makes up for the hit taken\n   * by putting everything in a try-catch.\n   */\n  asyncCatcher = function uncaughtCatcher(er) {\n    // going down hard\n    if (errorThrew) throw er;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    var length = listeners.length;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n      handled = listener.error(null, er) || handled;\n    }\n\n    /* Rethrow if one of the before / after handlers fire, which will bring the\n     * process down immediately.\n     */\n    if (!handled && inAsyncTick) throw er;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      /*jshint maxdepth:4*/\n\n      // after() handlers don't run if threw\n      var threw = false;\n\n      // ...unless the error is handled\n      var handled = false;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned;\n      try {\n        returned = original.apply(this, arguments);\n      }\n      catch (er) {\n        threw = true;\n        for (var i = 0; i < length; ++i) {\n          if ((listeners[i].flags & HAS_ERROR_AL) == 0) continue;\n          try {\n            handled = listeners[i].error(values[list[i].uid], er) || handled;\n          }\n          catch (x) {\n            errorThrew = true;\n            throw x;\n          }\n        }\n\n        if (!handled) {\n          // having an uncaughtException handler here alters crash semantics\n          process.removeListener('uncaughtException', asyncCatcher);\n          process._originalNextTick(function () {\n            process.addListener('uncaughtException', asyncCatcher);\n          });\n\n          throw er;\n        }\n      }\n      finally {\n        /*\n         * after handlers (not run if original throws)\n         */\n        if (!threw || handled) {\n          inAsyncTick = true;\n          for (i = 0; i < length; ++i) {\n            if ((list[i].flags & HAS_AFTER_AL) > 0) {\n              list[i].after(this, values[list[i].uid]);\n            }\n          }\n          inAsyncTick = false;\n        }\n\n        // back to the previous listener list on the stack\n        listeners = listenerStack.pop();\n      }\n\n\n      return returned;\n    };\n  };\n\n  // will be the first to fire if async-listener is the first module loaded\n  process.addListener('uncaughtException', asyncCatcher);\n}\n\n// for performance in the case where there are no handlers, just the listener\nfunction simpleWrap(original, list, length) {\n  inAsyncTick = true;\n  for (var i = 0; i < length; ++i) {\n    var listener = list[i];\n    if (listener.create) listener.create(listener.data);\n  }\n  inAsyncTick = false;\n\n  // still need to make sure nested async calls are made in the context\n  // of the listeners active at their creation\n  return function () {\n    listenerStack.push(listeners);\n    listeners = union(list, listeners);\n\n    var returned = original.apply(this, arguments);\n\n    listeners = listenerStack.pop();\n\n    return returned;\n  };\n}\n\n/**\n * Called each time an asynchronous function that's been monkeypatched in\n * index.js is called. If there are no listeners, return the function\n * unwrapped.  If there are any asyncListeners and any of them have callbacks,\n * pass them off to asyncWrap for later use, otherwise just call the listener.\n */\nfunction wrapCallback(original) {\n  var length = listeners.length;\n\n  // no context to capture, so avoid closure creation\n  if (length === 0) return original;\n\n  // capture the active listeners as of when the wrapped function was called\n  var list = listeners.slice();\n\n  for (var i = 0; i < length; ++i) {\n    if (list[i].flags > 0) return asyncWrap(original, list, length);\n  }\n\n  return simpleWrap(original, list, length);\n}\n\nfunction AsyncListener(callbacks, data) {\n  if (typeof callbacks.create === 'function') {\n    this.create = callbacks.create;\n    this.flags |= HAS_CREATE_AL;\n  }\n\n  if (typeof callbacks.before === 'function') {\n    this.before = callbacks.before;\n    this.flags |= HAS_BEFORE_AL;\n  }\n\n  if (typeof callbacks.after === 'function') {\n    this.after = callbacks.after;\n    this.flags |= HAS_AFTER_AL;\n  }\n\n  if (typeof callbacks.error === 'function') {\n    this.error = callbacks.error;\n    this.flags |= HAS_ERROR_AL;\n  }\n\n  this.uid = ++uid;\n  this.data = data === undefined ? null : data;\n}\nAsyncListener.prototype.create = undefined;\nAsyncListener.prototype.before = undefined;\nAsyncListener.prototype.after  = undefined;\nAsyncListener.prototype.error  = undefined;\nAsyncListener.prototype.data   = undefined;\nAsyncListener.prototype.uid    = 0;\nAsyncListener.prototype.flags  = 0;\n\nfunction createAsyncListener(callbacks, data) {\n  if (typeof callbacks !== 'object' || !callbacks) {\n    throw new TypeError('callbacks argument must be an object');\n  }\n\n  if (callbacks instanceof AsyncListener) {\n    return callbacks;\n  }\n  else {\n    return new AsyncListener(callbacks, data);\n  }\n}\n\nfunction addAsyncListener(callbacks, data) {\n  var listener;\n  if (!(callbacks instanceof AsyncListener)) {\n    listener = createAsyncListener(callbacks, data);\n  }\n  else {\n    listener = callbacks;\n  }\n\n  // Make sure the listener isn't already in the list.\n  var registered = false;\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      registered = true;\n      break;\n    }\n  }\n\n  if (!registered) listeners.push(listener);\n\n  return listener;\n}\n\nfunction removeAsyncListener(listener) {\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      listeners.splice(i, 1);\n      break;\n    }\n  }\n}\n\nprocess.createAsyncListener = createAsyncListener;\nprocess.addAsyncListener    = addAsyncListener;\nprocess.removeAsyncListener = removeAsyncListener;\n\nmodule.exports = wrapCallback;\n","'use strict';\n\nif (process.addAsyncListener) throw new Error(\"Don't require polyfill unless needed\");\n\nvar shimmer      = require('shimmer')\n  , semver       = require('semver')\n  , wrap         = shimmer.wrap\n  , massWrap     = shimmer.massWrap\n  , wrapCallback = require('./glue.js')\n  , util         = require('util')\n  ;\n\nvar v6plus = semver.gte(process.version, '6.0.0');\nvar v7plus = semver.gte(process.version, '7.0.0');\nvar v8plus = semver.gte(process.version, '8.0.0');\nvar v11plus = semver.gte(process.version, '11.0.0');\n\nvar net = require('net');\n\n// From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\nif (v7plus && !net._normalizeArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2017/03/09\n  net._normalizeArgs = function (args) {\n    if (args.length === 0) {\n      return [{}, null];\n    }\n\n    var arg0 = args[0];\n    var options = {};\n    if (typeof arg0 === 'object' && arg0 !== null) {\n      // (options[...][, cb])\n      options = arg0;\n    } else if (isPipeName(arg0)) {\n      // (path[...][, cb])\n      options.path = arg0;\n    } else {\n      // ([port][, host][...][, cb])\n      options.port = arg0;\n      if (args.length > 1 && typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    if (typeof cb !== 'function')\n      return [options, null];\n    else\n      return [options, cb];\n  }\n} else if (!v7plus && !net._normalizeConnectArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2013/10/30\n  net._normalizeConnectArgs = function (args) {\n    var options = {};\n\n    function toNumber(x) { return (x = Number(x)) >= 0 ? x : false; }\n\n    if (typeof args[0] === 'object' && args[0] !== null) {\n      // connect(options, [cb])\n      options = args[0];\n    }\n    else if (typeof args[0] === 'string' && toNumber(args[0]) === false) {\n      // connect(path, [cb]);\n      options.path = args[0];\n    }\n    else {\n      // connect(port, [host], [cb])\n      options.port = args[0];\n      if (typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    return typeof cb === 'function' ? [options, cb] : [options];\n  };\n}\n\n// In https://github.com/nodejs/node/pull/11796 `_listen2` was renamed\n// `_setUpListenHandle`. It's still aliased as `_listen2`, and currently the\n// Node internals still call the alias - but who knows for how long. So better\n// make sure we use the new name instead if available.\nif ('_setUpListenHandle' in net.Server.prototype) {\n  wrap(net.Server.prototype, '_setUpListenHandle', wrapSetUpListenHandle);\n} else {\n  wrap(net.Server.prototype, '_listen2', wrapSetUpListenHandle);\n}\n\nfunction wrapSetUpListenHandle(original) {\n  return function () {\n    this.on('connection', function (socket) {\n      if (socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n      }\n    });\n\n    try {\n      return original.apply(this, arguments);\n    }\n    finally {\n      // the handle will only not be set in cases where there has been an error\n      if (this._handle && this._handle.onconnection) {\n        this._handle.onconnection = wrapCallback(this._handle.onconnection);\n      }\n    }\n  };\n}\n\nfunction patchOnRead(ctx) {\n  if (ctx && ctx._handle) {\n    var handle = ctx._handle;\n    if (!handle._originalOnread) {\n      handle._originalOnread = handle.onread;\n    }\n    handle.onread = wrapCallback(handle._originalOnread);\n  }\n}\n\nwrap(net.Socket.prototype, 'connect', function (original) {\n  return function () {\n    var args;\n    // Node core uses an internal Symbol here to guard against the edge-case\n    // where the user accidentally passes in an array. As we don't have access\n    // to this Symbol we resort to this hack where we just detect if there is a\n    // symbol or not. Checking for the number of Symbols is by no means a fool\n    // proof solution, but it catches the most basic cases.\n    if (v8plus &&\n        Array.isArray(arguments[0]) &&\n        Object.getOwnPropertySymbols(arguments[0]).length > 0) {\n      // already normalized\n      args = arguments[0];\n    } else {\n      // From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\n      args = v7plus\n        ? net._normalizeArgs(arguments)\n        : net._normalizeConnectArgs(arguments);\n    }\n    if (args[1]) args[1] = wrapCallback(args[1]);\n    var result = original.apply(this, args);\n    patchOnRead(this);\n    return result;\n  };\n});\n\nvar http = require('http');\n\n// NOTE: A rewrite occurred in 0.11 that changed the addRequest signature\n// from (req, host, port, localAddress) to (req, options)\n// Here, I use the longer signature to maintain 0.10 support, even though\n// the rest of the arguments aren't actually used\nwrap(http.Agent.prototype, 'addRequest', function (original) {\n  return function (req) {\n    var onSocket = req.onSocket;\n    req.onSocket = wrapCallback(function (socket) {\n      patchOnRead(socket);\n      return onSocket.apply(this, arguments);\n    });\n    return original.apply(this, arguments);\n  };\n});\n\nvar childProcess = require('child_process');\n\nfunction wrapChildProcess(child) {\n  if (Array.isArray(child.stdio)) {\n    child.stdio.forEach(function (socket) {\n      if (socket && socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n        wrap(socket._handle, 'close', activatorFirst);\n      }\n    });\n  }\n\n  if (child._handle) {\n    child._handle.onexit = wrapCallback(child._handle.onexit);\n  }\n}\n\n// iojs v2.0.0+\nif (childProcess.ChildProcess) {\n  wrap(childProcess.ChildProcess.prototype, 'spawn', function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(this);\n      return result;\n    };\n  });\n} else {\n  massWrap(childProcess, [\n    'execFile', // exec is implemented in terms of execFile\n    'fork',\n    'spawn'\n  ], function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(result);\n      return result;\n    };\n  });\n}\n\n// need unwrapped nextTick for use within < 0.9 async error handling\nif (!process._fatalException) {\n  process._originalNextTick = process.nextTick;\n}\n\nvar processors = [];\nif (process._nextDomainTick) processors.push('_nextDomainTick');\nif (process._tickDomainCallback) processors.push('_tickDomainCallback');\n\nmassWrap(\n  process,\n  processors,\n  activator\n);\nwrap(process, 'nextTick', activatorFirst);\n\nvar asynchronizers = [\n  'setTimeout',\n  'setInterval'\n];\nif (global.setImmediate) asynchronizers.push('setImmediate');\n\nvar timers = require('timers');\nvar patchGlobalTimers = global.setTimeout === timers.setTimeout;\n\nmassWrap(\n  timers,\n  asynchronizers,\n  activatorFirst\n);\n\nif (patchGlobalTimers) {\n  massWrap(\n    global,\n    asynchronizers,\n    activatorFirst\n  );\n}\n\nvar dns = require('dns');\nmassWrap(\n  dns,\n  [\n    'lookup',\n    'resolve',\n    'resolve4',\n    'resolve6',\n    'resolveCname',\n    'resolveMx',\n    'resolveNs',\n    'resolveTxt',\n    'resolveSrv',\n    'reverse'\n  ],\n  activator\n);\n\nif (dns.resolveNaptr) wrap(dns, 'resolveNaptr', activator);\n\nvar fs = require('fs');\nmassWrap(\n  fs,\n  [\n    'watch',\n    'rename',\n    'truncate',\n    'chown',\n    'fchown',\n    'chmod',\n    'fchmod',\n    'stat',\n    'lstat',\n    'fstat',\n    'link',\n    'symlink',\n    'readlink',\n    'realpath',\n    'unlink',\n    'rmdir',\n    'mkdir',\n    'readdir',\n    'close',\n    'open',\n    'utimes',\n    'futimes',\n    'fsync',\n    'write',\n    'read',\n    'readFile',\n    'writeFile',\n    'appendFile',\n    'watchFile',\n    'unwatchFile',\n    \"exists\",\n  ],\n  activator\n);\n\n// only wrap lchown and lchmod on systems that have them.\nif (fs.lchown) wrap(fs, 'lchown', activator);\nif (fs.lchmod) wrap(fs, 'lchmod', activator);\n\n// only wrap ftruncate in versions of node that have it\nif (fs.ftruncate) wrap(fs, 'ftruncate', activator);\n\n// Wrap zlib streams\nvar zlib;\ntry { zlib = require('zlib'); } catch (err) { }\nif (zlib && zlib.Deflate && zlib.Deflate.prototype) {\n  var proto = Object.getPrototypeOf(zlib.Deflate.prototype);\n  if (proto._transform) {\n    // streams2\n    wrap(proto, \"_transform\", activator);\n  }\n  else if (proto.write && proto.flush && proto.end) {\n    // plain ol' streams\n    massWrap(\n      proto,\n      [\n        'write',\n        'flush',\n        'end'\n      ],\n      activator\n    );\n  }\n}\n\n// Wrap Crypto\nvar crypto;\ntry { crypto = require('crypto'); } catch (err) { }\nif (crypto) {\n\n  var toWrap = [\n      'pbkdf2',\n      'randomBytes',\n  ];\n  if (!v11plus) {\n    toWrap.push('pseudoRandomBytes');\n  }\n\n  massWrap(crypto, toWrap, activator);\n}\n\n// It is unlikely that any userspace promise implementations have a native\n// implementation of both Promise and Promise.toString.\nvar instrumentPromise = !!global.Promise &&\n    Promise.toString() === 'function Promise() { [native code] }' &&\n    Promise.toString.toString() === 'function toString() { [native code] }';\n\n// Check that global Promise is native\nif (instrumentPromise) {\n  // shoult not use any methods that have already been wrapped\n  var promiseListener = process.addAsyncListener({\n    create: function create() {\n      instrumentPromise = false;\n    }\n  });\n\n  // should not resolve synchronously\n  global.Promise.resolve(true).then(function notSync() {\n    instrumentPromise = false;\n  });\n\n  process.removeAsyncListener(promiseListener);\n}\n\n/*\n * Native promises use the microtask queue to make all callbacks run\n * asynchronously to avoid Zalgo issues. Since the microtask queue is not\n * exposed externally, promises need to be modified in a fairly invasive and\n * complex way.\n *\n * The async boundary in promises that must be patched is between the\n * fulfillment of the promise and the execution of any callback that is waiting\n * for that fulfillment to happen. This means that we need to trigger a create\n * when resolve or reject is called and trigger before, after and error handlers\n * around the callback execution. There may be multiple callbacks for each\n * fulfilled promise, so handlers will behave similar to setInterval where\n * there may be multiple before after and error calls for each create call.\n *\n * async-listener monkeypatching has one basic entry point: `wrapCallback`.\n * `wrapCallback` should be called when create should be triggered and be\n * passed a function to wrap, which will execute the body of the async work.\n * The resolve and reject calls can be modified fairly easily to call\n * `wrapCallback`, but at the time of resolve and reject all the work to be done\n * on fulfillment may not be defined, since a call to then, chain or fetch can\n * be made even after the promise has been fulfilled. To get around this, we\n * create a placeholder function which will call a function passed into it,\n * since the call to the main work is being made from within the wrapped\n * function, async-listener will work correctly.\n *\n * There is another complication with monkeypatching Promises. Calls to then,\n * chain and catch each create new Promises that are fulfilled internally in\n * different ways depending on the return value of the callback. When the\n * callback return a Promise, the new Promise is resolved asynchronously after\n * the returned Promise has been also been resolved. When something other than\n * a promise is resolved the resolve call for the new Promise is put in the\n * microtask queue and asynchronously resolved.\n *\n * Then must be wrapped so that its returned promise has a wrapper that can be\n * used to invoke further continuations. This wrapper cannot be created until\n * after the callback has run, since the callback may return either a promise\n * or another value. Fortunately we already have a wrapper function around the\n * callback we can use (the wrapper created by resolve or reject).\n *\n * By adding an additional argument to this wrapper, we can pass in the\n * returned promise so it can have its own wrapper appended. the wrapper\n * function can the call the callback, and take action based on the return\n * value. If a promise is returned, the new Promise can proxy the returned\n * Promise's wrapper (this wrapper may not exist yet, but will by the time the\n * wrapper needs to be invoked). Otherwise, a new wrapper can be create the\n * same way as in resolve and reject. Since this wrapper is created\n * synchronously within another wrapper, it will properly appear as a\n * continuation from within the callback.\n */\n\nif (instrumentPromise) {\n  wrapPromise();\n}\n\nfunction wrapPromise() {\n  var Promise = global.Promise;\n\n  // Updates to this class should also be applied to the the ES6 version\n  // in es6-wrapped-promise.js.\n  function wrappedPromise(executor) {\n    if (!(this instanceof wrappedPromise)) {\n      return Promise(executor);\n    }\n\n    if (typeof executor !== 'function') {\n      return new Promise(executor);\n    }\n\n    var context, args;\n    var promise = new Promise(wrappedExecutor);\n    promise.__proto__ = wrappedPromise.prototype;\n\n    try {\n      executor.apply(context, args);\n    } catch (err) {\n      args[1](err);\n    }\n\n    return promise;\n\n    function wrappedExecutor(resolve, reject) {\n      context = this;\n      args = [wrappedResolve, wrappedReject];\n\n      // These wrappers create a function that can be passed a function and an argument to\n      // call as a continuation from the resolve or reject.\n      function wrappedResolve(val) {\n        ensureAslWrapper(promise, false);\n        return resolve(val);\n      }\n\n      function wrappedReject(val) {\n        ensureAslWrapper(promise, false);\n        return reject(val);\n      }\n    }\n  }\n\n  util.inherits(wrappedPromise, Promise);\n\n  wrap(Promise.prototype, 'then', wrapThen);\n  // Node.js <v7 only, alias for .then\n  if (Promise.prototype.chain) {\n    wrap(Promise.prototype, 'chain', wrapThen);\n  }\n\n  if (v6plus) {\n    global.Promise = require('./es6-wrapped-promise.js')(Promise, ensureAslWrapper);\n  } else {\n    var PromiseFunctions = [\n      'all',\n      'race',\n      'reject',\n      'resolve',\n      'accept',  // Node.js <v7 only\n      'defer'    // Node.js <v7 only\n    ];\n\n    PromiseFunctions.forEach(function(key) {\n      // don't break `in` by creating a key for undefined entries\n      if (typeof Promise[key] === 'function') {\n        wrappedPromise[key] = Promise[key];\n      }\n    });\n    global.Promise = wrappedPromise\n  }\n\n  function ensureAslWrapper(promise, overwrite) {\n    if (!promise.__asl_wrapper || overwrite) {\n      promise.__asl_wrapper = wrapCallback(propagateAslWrapper);\n    }\n  }\n\n  function propagateAslWrapper(ctx, fn, result, next) {\n    var nextResult;\n    try {\n      nextResult = fn.call(ctx, result);\n      return {returnVal: nextResult, error: false}\n    } catch (err) {\n      return {errorVal: err, error: true}\n    } finally {\n      // Wrap any resulting futures as continuations.\n      if (nextResult instanceof Promise) {\n        next.__asl_wrapper = function proxyWrapper() {\n          var aslWrapper = nextResult.__asl_wrapper || propagateAslWrapper;\n          return aslWrapper.apply(this, arguments);\n        }\n      } else {\n        ensureAslWrapper(next, true);\n      }\n    }\n  }\n\n  function wrapThen(original) {\n    return function wrappedThen() {\n      var promise = this;\n      var next = original.apply(promise, Array.prototype.map.call(arguments, bind));\n\n      next.__asl_wrapper = function proxyWrapper(ctx, fn, val, last) {\n        if (promise.__asl_wrapper) {\n          promise.__asl_wrapper(ctx, function () {}, null, next);\n          return next.__asl_wrapper(ctx, fn, val, last);\n        }\n        return propagateAslWrapper(ctx, fn, val, last);\n      }\n\n      return next;\n\n      // wrap callbacks (success, error) so that the callbacks will be called as a\n      // continuations of the resolve or reject call using the __asl_wrapper created above.\n      function bind(fn) {\n        if (typeof fn !== 'function') return fn;\n        return wrapCallback(function (val) {\n          var result = (promise.__asl_wrapper || propagateAslWrapper)(this, fn, val, next);\n          if (result.error) {\n            throw result.errorVal\n          } else {\n            return result.returnVal\n          }\n        });\n      }\n    }\n  }\n}\n\n// Shim activator for functions that have callback last\nfunction activator(fn) {\n  var fallback = function () {\n    var args;\n    var cbIdx = arguments.length - 1;\n    if (typeof arguments[cbIdx] === \"function\") {\n      args = Array(arguments.length)\n      for (var i = 0; i < arguments.length - 1; i++) {\n        args[i] = arguments[i];\n      }\n      args[cbIdx] = wrapCallback(arguments[cbIdx]);\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (a, cb) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, cb);\n      };\n    case 3:\n      return function (a, b, cb) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, cb);\n      };\n    case 4:\n      return function (a, b, c, cb) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, cb);\n      };\n    case 5:\n      return function (a, b, c, d, cb) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, cb);\n      };\n    case 6:\n      return function (a, b, c, d, e, cb) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, e, cb);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// Shim activator for functions that have callback first\nfunction activatorFirst(fn) {\n  var fallback = function () {\n    var args;\n    if (typeof arguments[0] === \"function\") {\n      args = Array(arguments.length)\n      args[0] = wrapCallback(arguments[0]);\n      for (var i = 1; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (cb, a) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a);\n      };\n    case 3:\n      return function (cb, a, b) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b);\n      };\n    case 4:\n      return function (cb, a, b, c) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c);\n      };\n    case 5:\n      return function (cb, a, b, c, d) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d);\n      };\n    case 6:\n      return function (cb, a, b, c, d, e) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d, e);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// taken from node master on 2017/03/09\nfunction toNumber(x) {\n  return (x = Number(x)) >= 0 ? x : false;\n}\n\n// taken from node master on 2017/03/09\nfunction isPipeName(s) {\n  return typeof s === 'string' && toNumber(s) === false;\n}\n","'use strict';\n\nconst stringify = require('./lib/stringify');\nconst compile = require('./lib/compile');\nconst expand = require('./lib/expand');\nconst parse = require('./lib/parse');\n\n/**\n * Expand the given pattern or create a regex-compatible string.\n *\n * ```js\n * const braces = require('braces');\n * console.log(braces('{a,b,c}', { compile: true })); //=> ['(a|b|c)']\n * console.log(braces('{a,b,c}')); //=> ['a', 'b', 'c']\n * ```\n * @param {String} `str`\n * @param {Object} `options`\n * @return {String}\n * @api public\n */\n\nconst braces = (input, options = {}) => {\n  let output = [];\n\n  if (Array.isArray(input)) {\n    for (let pattern of input) {\n      let result = braces.create(pattern, options);\n      if (Array.isArray(result)) {\n        output.push(...result);\n      } else {\n        output.push(result);\n      }\n    }\n  } else {\n    output = [].concat(braces.create(input, options));\n  }\n\n  if (options && options.expand === true && options.nodupes === true) {\n    output = [...new Set(output)];\n  }\n  return output;\n};\n\n/**\n * Parse the given `str` with the given `options`.\n *\n * ```js\n * // braces.parse(pattern, [, options]);\n * const ast = braces.parse('a/{b,c}/d');\n * console.log(ast);\n * ```\n * @param {String} pattern Brace pattern to parse\n * @param {Object} options\n * @return {Object} Returns an AST\n * @api public\n */\n\nbraces.parse = (input, options = {}) => parse(input, options);\n\n/**\n * Creates a braces string from an AST, or an AST node.\n *\n * ```js\n * const braces = require('braces');\n * let ast = braces.parse('foo/{a,b}/bar');\n * console.log(stringify(ast.nodes[2])); //=> '{a,b}'\n * ```\n * @param {String} `input` Brace pattern or AST.\n * @param {Object} `options`\n * @return {Array} Returns an array of expanded values.\n * @api public\n */\n\nbraces.stringify = (input, options = {}) => {\n  if (typeof input === 'string') {\n    return stringify(braces.parse(input, options), options);\n  }\n  return stringify(input, options);\n};\n\n/**\n * Compiles a brace pattern into a regex-compatible, optimized string.\n * This method is called by the main [braces](#braces) function by default.\n *\n * ```js\n * const braces = require('braces');\n * console.log(braces.compile('a/{b,c}/d'));\n * //=> ['a/(b|c)/d']\n * ```\n * @param {String} `input` Brace pattern or AST.\n * @param {Object} `options`\n * @return {Array} Returns an array of expanded values.\n * @api public\n */\n\nbraces.compile = (input, options = {}) => {\n  if (typeof input === 'string') {\n    input = braces.parse(input, options);\n  }\n  return compile(input, options);\n};\n\n/**\n * Expands a brace pattern into an array. This method is called by the\n * main [braces](#braces) function when `options.expand` is true. Before\n * using this method it's recommended that you read the [performance notes](#performance))\n * and advantages of using [.compile](#compile) instead.\n *\n * ```js\n * const braces = require('braces');\n * console.log(braces.expand('a/{b,c}/d'));\n * //=> ['a/b/d', 'a/c/d'];\n * ```\n * @param {String} `pattern` Brace pattern\n * @param {Object} `options`\n * @return {Array} Returns an array of expanded values.\n * @api public\n */\n\nbraces.expand = (input, options = {}) => {\n  if (typeof input === 'string') {\n    input = braces.parse(input, options);\n  }\n\n  let result = expand(input, options);\n\n  // filter out empty strings if specified\n  if (options.noempty === true) {\n    result = result.filter(Boolean);\n  }\n\n  // filter out duplicates if specified\n  if (options.nodupes === true) {\n    result = [...new Set(result)];\n  }\n\n  return result;\n};\n\n/**\n * Processes a brace pattern and returns either an expanded array\n * (if `options.expand` is true), a highly optimized regex-compatible string.\n * This method is called by the main [braces](#braces) function.\n *\n * ```js\n * const braces = require('braces');\n * console.log(braces.create('user-{200..300}/project-{a,b,c}-{1..10}'))\n * //=> 'user-(20[0-9]|2[1-9][0-9]|300)/project-(a|b|c)-([1-9]|10)'\n * ```\n * @param {String} `pattern` Brace pattern\n * @param {Object} `options`\n * @return {Array} Returns an array of expanded values.\n * @api public\n */\n\nbraces.create = (input, options = {}) => {\n  if (input === '' || input.length < 3) {\n    return [input];\n  }\n\n return options.expand !== true\n    ? braces.compile(input, options)\n    : braces.expand(input, options);\n};\n\n/**\n * Expose \"braces\"\n */\n\nmodule.exports = braces;\n","'use strict';\n\nconst fill = require('fill-range');\nconst utils = require('./utils');\n\nconst compile = (ast, options = {}) => {\n  let walk = (node, parent = {}) => {\n    let invalidBlock = utils.isInvalidBrace(parent);\n    let invalidNode = node.invalid === true && options.escapeInvalid === true;\n    let invalid = invalidBlock === true || invalidNode === true;\n    let prefix = options.escapeInvalid === true ? '\\\\' : '';\n    let output = '';\n\n    if (node.isOpen === true) {\n      return prefix + node.value;\n    }\n    if (node.isClose === true) {\n      return prefix + node.value;\n    }\n\n    if (node.type === 'open') {\n      return invalid ? (prefix + node.value) : '(';\n    }\n\n    if (node.type === 'close') {\n      return invalid ? (prefix + node.value) : ')';\n    }\n\n    if (node.type === 'comma') {\n      return node.prev.type === 'comma' ? '' : (invalid ? node.value : '|');\n    }\n\n    if (node.value) {\n      return node.value;\n    }\n\n    if (node.nodes && node.ranges > 0) {\n      let args = utils.reduce(node.nodes);\n      let range = fill(...args, { ...options, wrap: false, toRegex: true });\n\n      if (range.length !== 0) {\n        return args.length > 1 && range.length > 1 ? `(${range})` : range;\n      }\n    }\n\n    if (node.nodes) {\n      for (let child of node.nodes) {\n        output += walk(child, node);\n      }\n    }\n    return output;\n  };\n\n  return walk(ast);\n};\n\nmodule.exports = compile;\n","'use strict';\n\nmodule.exports = {\n  MAX_LENGTH: 1024 * 64,\n\n  // Digits\n  CHAR_0: '0', /* 0 */\n  CHAR_9: '9', /* 9 */\n\n  // Alphabet chars.\n  CHAR_UPPERCASE_A: 'A', /* A */\n  CHAR_LOWERCASE_A: 'a', /* a */\n  CHAR_UPPERCASE_Z: 'Z', /* Z */\n  CHAR_LOWERCASE_Z: 'z', /* z */\n\n  CHAR_LEFT_PARENTHESES: '(', /* ( */\n  CHAR_RIGHT_PARENTHESES: ')', /* ) */\n\n  CHAR_ASTERISK: '*', /* * */\n\n  // Non-alphabetic chars.\n  CHAR_AMPERSAND: '&', /* & */\n  CHAR_AT: '@', /* @ */\n  CHAR_BACKSLASH: '\\\\', /* \\ */\n  CHAR_BACKTICK: '`', /* ` */\n  CHAR_CARRIAGE_RETURN: '\\r', /* \\r */\n  CHAR_CIRCUMFLEX_ACCENT: '^', /* ^ */\n  CHAR_COLON: ':', /* : */\n  CHAR_COMMA: ',', /* , */\n  CHAR_DOLLAR: '$', /* . */\n  CHAR_DOT: '.', /* . */\n  CHAR_DOUBLE_QUOTE: '\"', /* \" */\n  CHAR_EQUAL: '=', /* = */\n  CHAR_EXCLAMATION_MARK: '!', /* ! */\n  CHAR_FORM_FEED: '\\f', /* \\f */\n  CHAR_FORWARD_SLASH: '/', /* / */\n  CHAR_HASH: '#', /* # */\n  CHAR_HYPHEN_MINUS: '-', /* - */\n  CHAR_LEFT_ANGLE_BRACKET: '<', /* < */\n  CHAR_LEFT_CURLY_BRACE: '{', /* { */\n  CHAR_LEFT_SQUARE_BRACKET: '[', /* [ */\n  CHAR_LINE_FEED: '\\n', /* \\n */\n  CHAR_NO_BREAK_SPACE: '\\u00A0', /* \\u00A0 */\n  CHAR_PERCENT: '%', /* % */\n  CHAR_PLUS: '+', /* + */\n  CHAR_QUESTION_MARK: '?', /* ? */\n  CHAR_RIGHT_ANGLE_BRACKET: '>', /* > */\n  CHAR_RIGHT_CURLY_BRACE: '}', /* } */\n  CHAR_RIGHT_SQUARE_BRACKET: ']', /* ] */\n  CHAR_SEMICOLON: ';', /* ; */\n  CHAR_SINGLE_QUOTE: '\\'', /* ' */\n  CHAR_SPACE: ' ', /*   */\n  CHAR_TAB: '\\t', /* \\t */\n  CHAR_UNDERSCORE: '_', /* _ */\n  CHAR_VERTICAL_LINE: '|', /* | */\n  CHAR_ZERO_WIDTH_NOBREAK_SPACE: '\\uFEFF' /* \\uFEFF */\n};\n","'use strict';\n\nconst fill = require('fill-range');\nconst stringify = require('./stringify');\nconst utils = require('./utils');\n\nconst append = (queue = '', stash = '', enclose = false) => {\n  let result = [];\n\n  queue = [].concat(queue);\n  stash = [].concat(stash);\n\n  if (!stash.length) return queue;\n  if (!queue.length) {\n    return enclose ? utils.flatten(stash).map(ele => `{${ele}}`) : stash;\n  }\n\n  for (let item of queue) {\n    if (Array.isArray(item)) {\n      for (let value of item) {\n        result.push(append(value, stash, enclose));\n      }\n    } else {\n      for (let ele of stash) {\n        if (enclose === true && typeof ele === 'string') ele = `{${ele}}`;\n        result.push(Array.isArray(ele) ? append(item, ele, enclose) : (item + ele));\n      }\n    }\n  }\n  return utils.flatten(result);\n};\n\nconst expand = (ast, options = {}) => {\n  let rangeLimit = options.rangeLimit === void 0 ? 1000 : options.rangeLimit;\n\n  let walk = (node, parent = {}) => {\n    node.queue = [];\n\n    let p = parent;\n    let q = parent.queue;\n\n    while (p.type !== 'brace' && p.type !== 'root' && p.parent) {\n      p = p.parent;\n      q = p.queue;\n    }\n\n    if (node.invalid || node.dollar) {\n      q.push(append(q.pop(), stringify(node, options)));\n      return;\n    }\n\n    if (node.type === 'brace' && node.invalid !== true && node.nodes.length === 2) {\n      q.push(append(q.pop(), ['{}']));\n      return;\n    }\n\n    if (node.nodes && node.ranges > 0) {\n      let args = utils.reduce(node.nodes);\n\n      if (utils.exceedsLimit(...args, options.step, rangeLimit)) {\n        throw new RangeError('expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.');\n      }\n\n      let range = fill(...args, options);\n      if (range.length === 0) {\n        range = stringify(node, options);\n      }\n\n      q.push(append(q.pop(), range));\n      node.nodes = [];\n      return;\n    }\n\n    let enclose = utils.encloseBrace(node);\n    let queue = node.queue;\n    let block = node;\n\n    while (block.type !== 'brace' && block.type !== 'root' && block.parent) {\n      block = block.parent;\n      queue = block.queue;\n    }\n\n    for (let i = 0; i < node.nodes.length; i++) {\n      let child = node.nodes[i];\n\n      if (child.type === 'comma' && node.type === 'brace') {\n        if (i === 1) queue.push('');\n        queue.push('');\n        continue;\n      }\n\n      if (child.type === 'close') {\n        q.push(append(q.pop(), queue, enclose));\n        continue;\n      }\n\n      if (child.value && child.type !== 'open') {\n        queue.push(append(queue.pop(), child.value));\n        continue;\n      }\n\n      if (child.nodes) {\n        walk(child, node);\n      }\n    }\n\n    return queue;\n  };\n\n  return utils.flatten(walk(ast));\n};\n\nmodule.exports = expand;\n","'use strict';\n\nconst stringify = require('./stringify');\n\n/**\n * Constants\n */\n\nconst {\n  MAX_LENGTH,\n  CHAR_BACKSLASH, /* \\ */\n  CHAR_BACKTICK, /* ` */\n  CHAR_COMMA, /* , */\n  CHAR_DOT, /* . */\n  CHAR_LEFT_PARENTHESES, /* ( */\n  CHAR_RIGHT_PARENTHESES, /* ) */\n  CHAR_LEFT_CURLY_BRACE, /* { */\n  CHAR_RIGHT_CURLY_BRACE, /* } */\n  CHAR_LEFT_SQUARE_BRACKET, /* [ */\n  CHAR_RIGHT_SQUARE_BRACKET, /* ] */\n  CHAR_DOUBLE_QUOTE, /* \" */\n  CHAR_SINGLE_QUOTE, /* ' */\n  CHAR_NO_BREAK_SPACE,\n  CHAR_ZERO_WIDTH_NOBREAK_SPACE\n} = require('./constants');\n\n/**\n * parse\n */\n\nconst parse = (input, options = {}) => {\n  if (typeof input !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  let opts = options || {};\n  let max = typeof opts.maxLength === 'number' ? Math.min(MAX_LENGTH, opts.maxLength) : MAX_LENGTH;\n  if (input.length > max) {\n    throw new SyntaxError(`Input length (${input.length}), exceeds max characters (${max})`);\n  }\n\n  let ast = { type: 'root', input, nodes: [] };\n  let stack = [ast];\n  let block = ast;\n  let prev = ast;\n  let brackets = 0;\n  let length = input.length;\n  let index = 0;\n  let depth = 0;\n  let value;\n  let memo = {};\n\n  /**\n   * Helpers\n   */\n\n  const advance = () => input[index++];\n  const push = node => {\n    if (node.type === 'text' && prev.type === 'dot') {\n      prev.type = 'text';\n    }\n\n    if (prev && prev.type === 'text' && node.type === 'text') {\n      prev.value += node.value;\n      return;\n    }\n\n    block.nodes.push(node);\n    node.parent = block;\n    node.prev = prev;\n    prev = node;\n    return node;\n  };\n\n  push({ type: 'bos' });\n\n  while (index < length) {\n    block = stack[stack.length - 1];\n    value = advance();\n\n    /**\n     * Invalid chars\n     */\n\n    if (value === CHAR_ZERO_WIDTH_NOBREAK_SPACE || value === CHAR_NO_BREAK_SPACE) {\n      continue;\n    }\n\n    /**\n     * Escaped chars\n     */\n\n    if (value === CHAR_BACKSLASH) {\n      push({ type: 'text', value: (options.keepEscaping ? value : '') + advance() });\n      continue;\n    }\n\n    /**\n     * Right square bracket (literal): ']'\n     */\n\n    if (value === CHAR_RIGHT_SQUARE_BRACKET) {\n      push({ type: 'text', value: '\\\\' + value });\n      continue;\n    }\n\n    /**\n     * Left square bracket: '['\n     */\n\n    if (value === CHAR_LEFT_SQUARE_BRACKET) {\n      brackets++;\n\n      let closed = true;\n      let next;\n\n      while (index < length && (next = advance())) {\n        value += next;\n\n        if (next === CHAR_LEFT_SQUARE_BRACKET) {\n          brackets++;\n          continue;\n        }\n\n        if (next === CHAR_BACKSLASH) {\n          value += advance();\n          continue;\n        }\n\n        if (next === CHAR_RIGHT_SQUARE_BRACKET) {\n          brackets--;\n\n          if (brackets === 0) {\n            break;\n          }\n        }\n      }\n\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Parentheses\n     */\n\n    if (value === CHAR_LEFT_PARENTHESES) {\n      block = push({ type: 'paren', nodes: [] });\n      stack.push(block);\n      push({ type: 'text', value });\n      continue;\n    }\n\n    if (value === CHAR_RIGHT_PARENTHESES) {\n      if (block.type !== 'paren') {\n        push({ type: 'text', value });\n        continue;\n      }\n      block = stack.pop();\n      push({ type: 'text', value });\n      block = stack[stack.length - 1];\n      continue;\n    }\n\n    /**\n     * Quotes: '|\"|`\n     */\n\n    if (value === CHAR_DOUBLE_QUOTE || value === CHAR_SINGLE_QUOTE || value === CHAR_BACKTICK) {\n      let open = value;\n      let next;\n\n      if (options.keepQuotes !== true) {\n        value = '';\n      }\n\n      while (index < length && (next = advance())) {\n        if (next === CHAR_BACKSLASH) {\n          value += next + advance();\n          continue;\n        }\n\n        if (next === open) {\n          if (options.keepQuotes === true) value += next;\n          break;\n        }\n\n        value += next;\n      }\n\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Left curly brace: '{'\n     */\n\n    if (value === CHAR_LEFT_CURLY_BRACE) {\n      depth++;\n\n      let dollar = prev.value && prev.value.slice(-1) === '$' || block.dollar === true;\n      let brace = {\n        type: 'brace',\n        open: true,\n        close: false,\n        dollar,\n        depth,\n        commas: 0,\n        ranges: 0,\n        nodes: []\n      };\n\n      block = push(brace);\n      stack.push(block);\n      push({ type: 'open', value });\n      continue;\n    }\n\n    /**\n     * Right curly brace: '}'\n     */\n\n    if (value === CHAR_RIGHT_CURLY_BRACE) {\n      if (block.type !== 'brace') {\n        push({ type: 'text', value });\n        continue;\n      }\n\n      let type = 'close';\n      block = stack.pop();\n      block.close = true;\n\n      push({ type, value });\n      depth--;\n\n      block = stack[stack.length - 1];\n      continue;\n    }\n\n    /**\n     * Comma: ','\n     */\n\n    if (value === CHAR_COMMA && depth > 0) {\n      if (block.ranges > 0) {\n        block.ranges = 0;\n        let open = block.nodes.shift();\n        block.nodes = [open, { type: 'text', value: stringify(block) }];\n      }\n\n      push({ type: 'comma', value });\n      block.commas++;\n      continue;\n    }\n\n    /**\n     * Dot: '.'\n     */\n\n    if (value === CHAR_DOT && depth > 0 && block.commas === 0) {\n      let siblings = block.nodes;\n\n      if (depth === 0 || siblings.length === 0) {\n        push({ type: 'text', value });\n        continue;\n      }\n\n      if (prev.type === 'dot') {\n        block.range = [];\n        prev.value += value;\n        prev.type = 'range';\n\n        if (block.nodes.length !== 3 && block.nodes.length !== 5) {\n          block.invalid = true;\n          block.ranges = 0;\n          prev.type = 'text';\n          continue;\n        }\n\n        block.ranges++;\n        block.args = [];\n        continue;\n      }\n\n      if (prev.type === 'range') {\n        siblings.pop();\n\n        let before = siblings[siblings.length - 1];\n        before.value += prev.value + value;\n        prev = before;\n        block.ranges--;\n        continue;\n      }\n\n      push({ type: 'dot', value });\n      continue;\n    }\n\n    /**\n     * Text\n     */\n\n    push({ type: 'text', value });\n  }\n\n  // Mark imbalanced braces and brackets as invalid\n  do {\n    block = stack.pop();\n\n    if (block.type !== 'root') {\n      block.nodes.forEach(node => {\n        if (!node.nodes) {\n          if (node.type === 'open') node.isOpen = true;\n          if (node.type === 'close') node.isClose = true;\n          if (!node.nodes) node.type = 'text';\n          node.invalid = true;\n        }\n      });\n\n      // get the location of the block on parent.nodes (block's siblings)\n      let parent = stack[stack.length - 1];\n      let index = parent.nodes.indexOf(block);\n      // replace the (invalid) block with it's nodes\n      parent.nodes.splice(index, 1, ...block.nodes);\n    }\n  } while (stack.length > 0);\n\n  push({ type: 'eos' });\n  return ast;\n};\n\nmodule.exports = parse;\n","'use strict';\n\nconst utils = require('./utils');\n\nmodule.exports = (ast, options = {}) => {\n  let stringify = (node, parent = {}) => {\n    let invalidBlock = options.escapeInvalid && utils.isInvalidBrace(parent);\n    let invalidNode = node.invalid === true && options.escapeInvalid === true;\n    let output = '';\n\n    if (node.value) {\n      if ((invalidBlock || invalidNode) && utils.isOpenOrClose(node)) {\n        return '\\\\' + node.value;\n      }\n      return node.value;\n    }\n\n    if (node.value) {\n      return node.value;\n    }\n\n    if (node.nodes) {\n      for (let child of node.nodes) {\n        output += stringify(child);\n      }\n    }\n    return output;\n  };\n\n  return stringify(ast);\n};\n\n","'use strict';\n\nexports.isInteger = num => {\n  if (typeof num === 'number') {\n    return Number.isInteger(num);\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isInteger(Number(num));\n  }\n  return false;\n};\n\n/**\n * Find a node of the given type\n */\n\nexports.find = (node, type) => node.nodes.find(node => node.type === type);\n\n/**\n * Find a node of the given type\n */\n\nexports.exceedsLimit = (min, max, step = 1, limit) => {\n  if (limit === false) return false;\n  if (!exports.isInteger(min) || !exports.isInteger(max)) return false;\n  return ((Number(max) - Number(min)) / Number(step)) >= limit;\n};\n\n/**\n * Escape the given node with '\\\\' before node.value\n */\n\nexports.escapeNode = (block, n = 0, type) => {\n  let node = block.nodes[n];\n  if (!node) return;\n\n  if ((type && node.type === type) || node.type === 'open' || node.type === 'close') {\n    if (node.escaped !== true) {\n      node.value = '\\\\' + node.value;\n      node.escaped = true;\n    }\n  }\n};\n\n/**\n * Returns true if the given brace node should be enclosed in literal braces\n */\n\nexports.encloseBrace = node => {\n  if (node.type !== 'brace') return false;\n  if ((node.commas >> 0 + node.ranges >> 0) === 0) {\n    node.invalid = true;\n    return true;\n  }\n  return false;\n};\n\n/**\n * Returns true if a brace node is invalid.\n */\n\nexports.isInvalidBrace = block => {\n  if (block.type !== 'brace') return false;\n  if (block.invalid === true || block.dollar) return true;\n  if ((block.commas >> 0 + block.ranges >> 0) === 0) {\n    block.invalid = true;\n    return true;\n  }\n  if (block.open !== true || block.close !== true) {\n    block.invalid = true;\n    return true;\n  }\n  return false;\n};\n\n/**\n * Returns true if a node is an open or close node\n */\n\nexports.isOpenOrClose = node => {\n  if (node.type === 'open' || node.type === 'close') {\n    return true;\n  }\n  return node.open === true || node.close === true;\n};\n\n/**\n * Reduce an array of text nodes.\n */\n\nexports.reduce = nodes => nodes.reduce((acc, node) => {\n  if (node.type === 'text') acc.push(node.value);\n  if (node.type === 'range') node.type = 'text';\n  return acc;\n}, []);\n\n/**\n * Flatten an array\n */\n\nexports.flatten = (...args) => {\n  const result = [];\n  const flat = arr => {\n    for (let i = 0; i < arr.length; i++) {\n      let ele = arr[i];\n      Array.isArray(ele) ? flat(ele, result) : ele !== void 0 && result.push(ele);\n    }\n    return result;\n  };\n  flat(args);\n  return result;\n};\n","'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst asyncHook = require('async-hook-jl');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\n//const trace = [];\n\nconst invertedProviders = [];\nfor (let key in asyncHook.providers) {\n  invertedProviders[asyncHook.providers[key]] = key;\n}\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  //trace: trace,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    SETTING KEY:' + key + '=' + value + ' in ns:' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('    GETTING KEY:' + key + '=undefined' + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n        util.inspect(this.active, true));\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    GETTING KEY:' + key + '=' + this.active[key] + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATING Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' active:' +\n      util.inspect(this.active, true, 2, true));\n  }\n\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATED Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' context:' +\n      util.inspect(context, true, 2, true));\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' BEFORE RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' AFTER RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(' BEFORE runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n      util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  ENTER ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  EXIT ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' +\n      util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CREATING NAMESPACE ' + name);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  asyncHook.addHooks({\n    init(uid, handle, provider, parentUid, parentHandle) {\n      //parentUid = parentUid || currentUid;  // Suggested usage but appears to work better for tracing modules.\n      currentUid = uid;\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      if (parentUid) {\n        namespace._contexts.set(uid, namespace._contexts.get(parentUid));\n        if (DEBUG_CLS_HOOKED) {\n          debug2('PARENTID: ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + provider);\n        }\n      } else {\n        namespace._contexts.set(currentUid, namespace.active);\n      }\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('INIT ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + invertedProviders[provider]\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n    },\n    pre(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.enter(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    post(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.exit(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    destroy(uid) {\n      currentUid = uid;\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('DESTROY ' + name + ' uid:' + uid + ' context:' + util.inspect(namespace._contexts.get(currentUid))\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n      namespace._contexts.delete(uid);\n    }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\nif (asyncHook._state && !asyncHook._state.enabled) {\n  asyncHook.enable();\n}\n\nfunction debug2(msg) {\n  if (process.env.DEBUG) {\n    process._rawDebug(msg);\n  }\n}\n\n\n/*function debug(from, ns) {\n process._rawDebug('DEBUG: ' + util.inspect({\n from: from,\n currentUid: currentUid,\n context: ns ? ns._contexts.get(currentUid) : 'no ns'\n }, true, 2, true));\n }*/\n\n\nfunction getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}\n\n\n// Add back to callstack\nif (DEBUG_CLS_HOOKED) {\n  var stackChain = require('stack-chain');\n  for (var modifier in stackChain.filter._modifiers) {\n    stackChain.filter.deattach(modifier);\n  }\n}\n","/* eslint-disable max-len */\n'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst async_hooks = require('async_hooks');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n  this._indent = 0;\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  this.active[key] = value;\n\n  if (DEBUG_CLS_HOOKED) {\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-SET KEY:' + key + '=' + value + ' in ns:' + this.name + ' currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n  }\n\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      const asyncHooksCurrentId = async_hooks.currentId();\n      const triggerId = async_hooks.triggerAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      //debug2(indentStr + 'CONTEXT-GETTING KEY NO ACTIVE NS:' + key + '=undefined' + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n      debug2(`${indentStr}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${key}=undefined currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length}`);\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-GETTING KEY:' + key + '=' + this.active[key] + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n    debug2(`${indentStr}CONTEXT-GETTING KEY: (${this.name}) ${key}=${this.active[key]} currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} active:${util.inspect(this.active)}`);\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  // Prototype inherit existing context if created a new child context within existing context.\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-CREATED Context: (${this.name}) currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} context:${util.inspect(context, {showHidden:true, depth:2, colors:true})}`);\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} context:${util.inspect(context)}`);\n    }\n    fn(context);\n    return context;\n  } catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  } finally {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN END: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  let value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CONTEXT-runPromise BEFORE: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER then: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER catch: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    } else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    } catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    } finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-ENTER: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-EXIT: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' + util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(`NS-CREATING NAMESPACE (${name})`);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  const hook = async_hooks.createHook({\n    init(asyncId, type, triggerId, resource) {\n      currentUid = async_hooks.executionAsyncId();\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      // let initContext = namespace.active;\n      // if(!initContext && triggerId) {\n      //   let parentContext = namespace._contexts.get(triggerId);\n      //   if (parentContext) {\n      //     namespace.active = parentContext;\n      //     namespace._contexts.set(currentUid, parentContext);\n      //     if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) WITH PARENT CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      //   } else if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) MISSING CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      // }else {\n      //   namespace._contexts.set(currentUid, namespace.active);\n      //   if (DEBUG_CLS_HOOKED) {\n      //     const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //     debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //   }\n      // }\n      if(namespace.active) {\n        namespace._contexts.set(asyncId, namespace.active);\n\n        if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n        }\n      }else if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        const triggerId = async_hooks.triggerAsyncId();\n        const triggerIdContext = namespace._contexts.get(triggerId);\n        if (triggerIdContext) {\n          namespace._contexts.set(asyncId, triggerIdContext);\n          if (DEBUG_CLS_HOOKED) {\n            const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n            debug2(`${indentStr}INIT USING CONTEXT FROM TRIGGERID [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n          }\n        } else if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT MISSING CONTEXT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n        }\n      }\n\n\n      if(DEBUG_CLS_HOOKED && type === 'PROMISE'){\n        debug2(util.inspect(resource, {showHidden: true}));\n        const parentId = resource.parentId;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}INIT RESOURCE-PROMISE [${type}] (${name}) parentId:${parentId} asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n      }\n\n    },\n    before(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context;\n\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}BEFORE (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n          namespace._indent += 2;\n        }\n\n        namespace.enter(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}BEFORE MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} namespace._contexts:${util.inspect(namespace._contexts, {showHidden:true, depth:2, colors:true})}`);\n        namespace._indent += 2;\n      }\n    },\n    after(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context; // = namespace._contexts.get(currentUid);\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          namespace._indent -= 2;\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}AFTER (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n        }\n\n        namespace.exit(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        namespace._indent -= 2;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}AFTER MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n      }\n    },\n    destroy(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}DESTROY (${name}) currentUid:${currentUid} asyncId:${asyncId} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(namespace._contexts.get(currentUid))}`);\n      }\n\n      namespace._contexts.delete(asyncId);\n    }\n  });\n\n  hook.enable();\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\n//const fs = require('fs');\nfunction debug2(...args) {\n  if (DEBUG_CLS_HOOKED) {\n    //fs.writeSync(1, `${util.format(...args)}\\n`);\n    process._rawDebug(`${util.format(...args)}`);\n  }\n}\n\n/*function getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}*/\n\n\n","'use strict';\n\nconst semver = require('semver');\n\n/**\n * In order to increase node version support, this loads the version of context\n * that is appropriate for the version of on nodejs that is running.\n * Node < v8 - uses AsyncWrap and async-hooks-jl\n * Node >= v8 - uses native async-hooks\n */\nif(process && semver.gte(process.versions.node, '8.0.0')){\n  module.exports = require('./context');\n}else{\n  module.exports = require('./context-legacy');\n}\n","'use strict';\n\nvar assert      = require('assert');\nvar wrapEmitter = require('emitter-listener');\n\n/*\n *\n * CONSTANTS\n *\n */\nvar CONTEXTS_SYMBOL = 'cls@contexts';\nvar ERROR_SYMBOL = 'error@context';\n\n// load polyfill if native support is unavailable\nif (!process.addAsyncListener) require('async-listener');\n\nfunction Namespace(name) {\n  this.name   = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set   = [];\n  this.id     = null;\n}\n\nNamespace.prototype.set = function (key, value) {\n  if (!this.active) {\n    throw new Error(\"No context available. ns.run() or ns.bind() must be called first.\");\n  }\n\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function (key) {\n  if (!this.active) return undefined;\n\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function () {\n  return Object.create(this.active);\n};\n\nNamespace.prototype.run = function (fn) {\n  var context = this.createContext();\n  this.enter(context);\n  try {\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function (fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\nNamespace.prototype.bind = function (fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  var self = this;\n  return function () {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function (context) {\n  assert.ok(context, \"context must be provided for entering\");\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function (context) {\n  assert.ok(context, \"context must be provided for exiting\");\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, \"can't remove top context\");\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  var index = this._set.lastIndexOf(context);\n\n  assert.ok(index >= 0, \"context not currently entered; can't exit\");\n  assert.ok(index,      \"can't remove top context\");\n\n  this._set.splice(index, 1);\n};\n\nNamespace.prototype.bindEmitter = function (emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, \"can only bind real EEs\");\n\n  var namespace  = this;\n  var thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) return;\n    if (!listener[CONTEXTS_SYMBOL]) listener[CONTEXTS_SYMBOL] = Object.create(null);\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace : namespace,\n      context   : namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) return unwrapped;\n\n    var wrapped  = unwrapped;\n    var contexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(contexts).forEach(function (name) {\n      var thunk = contexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function (exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction get(name) {\n  return process.namespaces[name];\n}\n\nfunction create(name) {\n  assert.ok(name, \"namespace must be given a name!\");\n\n  var namespace = new Namespace(name);\n  namespace.id = process.addAsyncListener({\n    create : function () { return namespace.active; },\n    before : function (context, storage) { if (storage) namespace.enter(storage); },\n    after  : function (context, storage) { if (storage) namespace.exit(storage); },\n    error  : function (storage) { if (storage) namespace.exit(storage); }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroy(name) {\n  var namespace = get(name);\n\n  assert.ok(namespace,    \"can't delete nonexistent namespace!\");\n  assert.ok(namespace.id, \"don't assign to process.namespaces directly!\");\n\n  process.removeAsyncListener(namespace.id);\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroy(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\nif (!process.namespaces) reset(); // call immediately to set up\n\nmodule.exports = {\n  getNamespace     : get,\n  createNamespace  : create,\n  destroyNamespace : destroy,\n  reset            : reset\n};\n","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nexports.AzureMonitorSymbol = \"Azure_Monitor_Tracer\";\n/**\n * By default, @azure/core-tracing default tracer is a NoopTracer.\n * This patching changes the default tracer to a patched BasicTracer\n * which emits ended spans as diag-channel events.\n *\n * The @opentelemetry/tracing package must be installed to use these patches\n * https://www.npmjs.com/package/@opentelemetry/tracing\n * @param coreTracing\n */\nvar azureCoreTracingPatchFunction = function (coreTracing) {\n    try {\n        var BasicTracer = require(\"@opentelemetry/tracing\").BasicTracer;\n        var tracerConfig = diagnostic_channel_1.channel.spanContextPropagator\n            ? { scopeManager: diagnostic_channel_1.channel.spanContextPropagator }\n            : undefined;\n        var tracer_1 = new BasicTracer(tracerConfig);\n        // Patch startSpan instead of using spanProcessor.onStart because parentSpan must be\n        // set while the span is constructed\n        var startSpanOriginal_1 = tracer_1.startSpan;\n        tracer_1.startSpan = function (name, options) {\n            // if no parent span was provided, apply the current context\n            if (!options || !options.parent) {\n                var parentOperation = tracer_1.getCurrentSpan();\n                if (parentOperation && parentOperation.operation && parentOperation.operation.traceparent) {\n                    options = __assign({}, options, { parent: {\n                            traceId: parentOperation.operation.traceparent.traceId,\n                            spanId: parentOperation.operation.traceparent.spanId,\n                        } });\n                }\n            }\n            var span = startSpanOriginal_1.call(this, name, options);\n            span.addEvent(\"Application Insights Integration enabled\");\n            return span;\n        };\n        tracer_1.addSpanProcessor(new AzureMonitorSpanProcessor());\n        tracer_1[exports.AzureMonitorSymbol] = true;\n        coreTracing.setTracer(tracer_1); // recordSpanData is not present on BasicTracer - cast to any\n    }\n    catch (e) { /* squash errors */ }\n    return coreTracing;\n};\nvar AzureMonitorSpanProcessor = /** @class */ (function () {\n    function AzureMonitorSpanProcessor() {\n    }\n    AzureMonitorSpanProcessor.prototype.onStart = function (span) {\n        // noop since startSpan is already patched\n    };\n    AzureMonitorSpanProcessor.prototype.onEnd = function (span) {\n        diagnostic_channel_1.channel.publish(\"azure-coretracing\", span);\n    };\n    AzureMonitorSpanProcessor.prototype.shutdown = function () {\n        // noop\n    };\n    return AzureMonitorSpanProcessor;\n}());\nexports.azureCoreTracing = {\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\n    patch: azureCoreTracingPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"@azure/core-tracing\", exports.azureCoreTracing);\n}\nexports.enable = enable;\n//# sourceMappingURL=azure-coretracing.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar bunyanPatchFunction = function (originalBunyan) {\n    var originalEmit = originalBunyan.prototype._emit;\n    originalBunyan.prototype._emit = function (rec, noemit) {\n        var ret = originalEmit.apply(this, arguments);\n        if (!noemit) {\n            var str = ret;\n            if (!str) {\n                str = originalEmit.call(this, rec, true);\n            }\n            diagnostic_channel_1.channel.publish(\"bunyan\", { level: rec.level, result: str });\n        }\n        return ret;\n    };\n    return originalBunyan;\n};\nexports.bunyan = {\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\n    patch: bunyanPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"bunyan\", exports.bunyan);\n}\nexports.enable = enable;\n//# sourceMappingURL=bunyan.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar stream_1 = require(\"stream\");\nvar consolePatchFunction = function (originalConsole) {\n    var aiLoggingOutStream = new stream_1.Writable();\n    var aiLoggingErrStream = new stream_1.Writable();\n    // Default console is roughly equivalent to `new Console(process.stdout, process.stderr)`\n    // We create a version which publishes to the channel and also to stdout/stderr\n    aiLoggingOutStream.write = function (chunk) {\n        if (!chunk) {\n            return true;\n        }\n        var message = chunk.toString();\n        diagnostic_channel_1.channel.publish(\"console\", { message: message });\n        return true;\n    };\n    aiLoggingErrStream.write = function (chunk) {\n        if (!chunk) {\n            return true;\n        }\n        var message = chunk.toString();\n        diagnostic_channel_1.channel.publish(\"console\", { message: message, stderr: true });\n        return true;\n    };\n    var aiLoggingConsole = new originalConsole.Console(aiLoggingOutStream, aiLoggingErrStream);\n    var consoleMethods = [\"log\", \"info\", \"warn\", \"error\", \"dir\", \"time\", \"timeEnd\", \"trace\", \"assert\"];\n    var _loop_1 = function (method) {\n        var originalMethod = originalConsole[method];\n        if (originalMethod) {\n            originalConsole[method] = function () {\n                if (aiLoggingConsole[method]) {\n                    try {\n                        aiLoggingConsole[method].apply(aiLoggingConsole, arguments);\n                    }\n                    catch (e) {\n                        // Ignore errors; allow the original method to throw if necessary\n                    }\n                }\n                return originalMethod.apply(originalConsole, arguments);\n            };\n        }\n    };\n    for (var _i = 0, consoleMethods_1 = consoleMethods; _i < consoleMethods_1.length; _i++) {\n        var method = consoleMethods_1[_i];\n        _loop_1(method);\n    }\n    return originalConsole;\n};\nexports.console = {\n    versionSpecifier: \">= 4.0.0\",\n    patch: consolePatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"console\", exports.console);\n    // Force patching of console\n    /* tslint:disable-next-line:no-var-requires */\n    require(\"console\");\n}\nexports.enable = enable;\n//# sourceMappingURL=console.pub.js.map","\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar azuresdk = require(\"./azure-coretracing.pub\");\nexports.azuresdk = azuresdk;\nvar bunyan = require(\"./bunyan.pub\");\nexports.bunyan = bunyan;\nvar consolePub = require(\"./console.pub\");\nexports.console = consolePub;\nvar mongodbCore = require(\"./mongodb-core.pub\");\nexports.mongodbCore = mongodbCore;\nvar mongodb = require(\"./mongodb.pub\");\nexports.mongodb = mongodb;\nvar mysql = require(\"./mysql.pub\");\nexports.mysql = mysql;\nvar pgPool = require(\"./pg-pool.pub\");\nexports.pgPool = pgPool;\nvar pg = require(\"./pg.pub\");\nexports.pg = pg;\nvar redis = require(\"./redis.pub\");\nexports.redis = redis;\nvar tedious = require(\"./tedious.pub\");\nexports.tedious = tedious;\nvar winston = require(\"./winston.pub\");\nexports.winston = winston;\nfunction enable() {\n    bunyan.enable();\n    consolePub.enable();\n    mongodbCore.enable();\n    mongodb.enable();\n    mysql.enable();\n    pg.enable();\n    pgPool.enable();\n    redis.enable();\n    winston.enable();\n    azuresdk.enable();\n    tedious.enable();\n}\nexports.enable = enable;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar mongodbcorePatchFunction = function (originalMongoCore) {\n    var originalConnect = originalMongoCore.Server.prototype.connect;\n    originalMongoCore.Server.prototype.connect = function contextPreservingConnect() {\n        var ret = originalConnect.apply(this, arguments);\n        // Messages sent to mongo progress through a pool\n        // This can result in context getting mixed between different responses\n        // so we wrap the callbacks to restore appropriate state\n        var originalWrite = this.s.pool.write;\n        this.s.pool.write = function contextPreservingWrite() {\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\n            if (typeof arguments[cbidx] === \"function\") {\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\n            }\n            return originalWrite.apply(this, arguments);\n        };\n        // Logout is a special case, it doesn't call the write function but instead\n        // directly calls into connection.write\n        var originalLogout = this.s.pool.logout;\n        this.s.pool.logout = function contextPreservingLogout() {\n            if (typeof arguments[1] === \"function\") {\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\n            }\n            return originalLogout.apply(this, arguments);\n        };\n        return ret;\n    };\n    return originalMongoCore;\n};\nexports.mongoCore = {\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\n    patch: mongodbcorePatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb-core\", exports.mongoCore);\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb-core.pub.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar mongodbPatchFunction = function (originalMongo) {\n    var listener = originalMongo.instrument({\n        operationIdGenerator: {\n            next: function () {\n                return diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n            },\n        },\n    });\n    var eventMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        eventMap[event.requestId] = __assign({}, event, { time: new Date() });\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event.operationId === \"function\") {\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n        }\n        else {\n            // fallback -- correlation will not work here\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true });\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event.operationId === \"function\") {\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n        }\n        else {\n            // fallback -- correlation will not work here\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false });\n        }\n    });\n    return originalMongo;\n};\nvar mongodb3PatchFunction = function (originalMongo) {\n    var listener = originalMongo.instrument();\n    var eventMap = {};\n    var contextMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n        eventMap[event.requestId] = __assign({}, event, { time: new Date() });\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    return originalMongo;\n};\n// In mongodb 3.3.0, mongodb-core was merged into mongodb, so the same patching\n// can be used here. this.s.pool was changed to this.s.coreTopology.s.pool\nvar mongodbcorePatchFunction = function (originalMongo) {\n    var originalConnect = originalMongo.Server.prototype.connect;\n    originalMongo.Server.prototype.connect = function contextPreservingConnect() {\n        var ret = originalConnect.apply(this, arguments);\n        // Messages sent to mongo progress through a pool\n        // This can result in context getting mixed between different responses\n        // so we wrap the callbacks to restore appropriate state\n        var originalWrite = this.s.coreTopology.s.pool.write;\n        this.s.coreTopology.s.pool.write = function contextPreservingWrite() {\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\n            if (typeof arguments[cbidx] === \"function\") {\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\n            }\n            return originalWrite.apply(this, arguments);\n        };\n        // Logout is a special case, it doesn't call the write function but instead\n        // directly calls into connection.write\n        var originalLogout = this.s.coreTopology.s.pool.logout;\n        this.s.coreTopology.s.pool.logout = function contextPreservingLogout() {\n            if (typeof arguments[1] === \"function\") {\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\n            }\n            return originalLogout.apply(this, arguments);\n        };\n        return ret;\n    };\n    return originalMongo;\n};\nvar mongodb330PatchFunction = function (originalMongo) {\n    mongodbcorePatchFunction(originalMongo); // apply mongodb-core patches\n    var listener = originalMongo.instrument();\n    var eventMap = {};\n    var contextMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n        eventMap[event.requestId] = event;\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    return originalMongo;\n};\nexports.mongo2 = {\n    versionSpecifier: \">= 2.0.0 <= 3.0.5\",\n    patch: mongodbPatchFunction,\n};\nexports.mongo3 = {\n    versionSpecifier: \"> 3.0.5 < 3.3.0\",\n    patch: mongodb3PatchFunction,\n};\nexports.mongo330 = {\n    versionSpecifier: \">= 3.3.0 < 4.0.0\",\n    patch: mongodb330PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo2);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo3);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo330);\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar path = require(\"path\");\nvar mysqlPatchFunction = function (originalMysql, originalMysqlPath) {\n    // The `name` passed in here is for debugging purposes,\n    // to help distinguish which object is being patched.\n    var patchObjectFunction = function (obj, name) {\n        return function (func, cbWrapper) {\n            var originalFunc = obj[func];\n            if (originalFunc) {\n                obj[func] = function mysqlContextPreserver() {\n                    // Find the callback, if there is one\n                    var cbidx = arguments.length - 1;\n                    for (var i = arguments.length - 1; i >= 0; --i) {\n                        if (typeof arguments[i] === \"function\") {\n                            cbidx = i;\n                            break;\n                        }\n                        else if (typeof arguments[i] !== \"undefined\") {\n                            break;\n                        }\n                    }\n                    var cb = arguments[cbidx];\n                    var resultContainer = { result: null, startTime: null, startDate: null };\n                    if (typeof cb === \"function\") {\n                        // Preserve context on the callback.\n                        // If this is one of the functions that we want to track,\n                        // then wrap the callback with the tracking wrapper\n                        if (cbWrapper) {\n                            resultContainer.startTime = process.hrtime();\n                            resultContainer.startDate = new Date();\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer, cb));\n                        }\n                        else {\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cb);\n                        }\n                    }\n                    var result = originalFunc.apply(this, arguments);\n                    resultContainer.result = result;\n                    return result;\n                };\n            }\n        };\n    };\n    var patchClassMemberFunction = function (classObject, name) {\n        return patchObjectFunction(classObject.prototype, name + \".prototype\");\n    };\n    var connectionCallbackFunctions = [\n        \"connect\", \"changeUser\",\n        \"ping\", \"statistics\", \"end\",\n    ];\n    var connectionClass = require(path.dirname(originalMysqlPath) + \"/lib/Connection\");\n    connectionCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(connectionClass, \"Connection\")(value); });\n    // Connection.createQuery is a static method\n    patchObjectFunction(connectionClass, \"Connection\")(\"createQuery\", function (resultContainer, cb) {\n        return function (err) {\n            var hrDuration = process.hrtime(resultContainer.startTime);\n            /* tslint:disable-next-line:no-bitwise */\n            var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\n            diagnostic_channel_1.channel.publish(\"mysql\", { query: resultContainer.result, callbackArgs: arguments, err: err, duration: duration, time: resultContainer.startDate });\n            cb.apply(this, arguments);\n        };\n    });\n    var poolCallbackFunctions = [\n        \"_enqueueCallback\",\n    ];\n    var poolClass = require(path.dirname(originalMysqlPath) + \"/lib/Pool\");\n    poolCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(poolClass, \"Pool\")(value); });\n    return originalMysql;\n};\nexports.mysql = {\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\n    patch: mysqlPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mysql\", exports.mysql);\n}\nexports.enable = enable;\n//# sourceMappingURL=mysql.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nfunction postgresPool1PatchFunction(originalPgPool) {\n    var originalConnect = originalPgPool.prototype.connect;\n    originalPgPool.prototype.connect = function connect(callback) {\n        if (callback) {\n            arguments[0] = diagnostic_channel_1.channel.bindToContext(callback);\n        }\n        return originalConnect.apply(this, arguments);\n    };\n    return originalPgPool;\n}\nexports.postgresPool1 = {\n    versionSpecifier: \">= 1.0.0 < 3.0.0\",\n    patch: postgresPool1PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg-pool\", exports.postgresPool1);\n}\nexports.enable = enable;\n//# sourceMappingURL=pg-pool.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar events_1 = require(\"events\");\nfunction postgres6PatchFunction(originalPg, originalPgPath) {\n    var originalClientQuery = originalPg.Client.prototype.query;\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\n    // wherever the callback is passed, find it, save it, and remove it from the call\n    // to the the original .query() function\n    originalPg.Client.prototype.query = function query(config, values, callback) {\n        var data = {\n            query: {},\n            database: {\n                host: this.connectionParameters.host,\n                port: this.connectionParameters.port,\n            },\n            result: null,\n            error: null,\n            duration: 0,\n            time: new Date(),\n        };\n        var start = process.hrtime();\n        var queryResult;\n        function patchCallback(cb) {\n            if (cb && cb[diagnosticOriginalFunc]) {\n                cb = cb[diagnosticOriginalFunc];\n            }\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\n                var end = process.hrtime(start);\n                data.result = res && { rowCount: res.rowCount, command: res.command };\n                data.error = err;\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\n                // emulate weird internal behavior in pg@6\n                // on success, the callback is called *before* query events are emitted\n                // on failure, the callback is called *instead of* the query emitting events\n                // with no events, that means no promises (since the promise is resolved/rejected in an event handler)\n                // since we are always inserting ourselves as a callback, we have to restore the original\n                // behavior if the user didn't provide one themselves\n                if (err) {\n                    if (cb) {\n                        return cb.apply(this, arguments);\n                    }\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\n                        queryResult.emit(\"error\", err);\n                    }\n                }\n                else if (cb) {\n                    cb.apply(this, arguments);\n                }\n            });\n            try {\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\n                return trackingCallback;\n            }\n            catch (e) {\n                // this should never happen, but bailout in case it does\n                return cb;\n            }\n        }\n        // this function takes too many variations of arguments.\n        // this patches any provided callback or creates a new callback if one wasn't provided.\n        // since the callback is always called (if provided) in addition to always having a Promisified\n        // EventEmitter returned (well, sometimes -- see above), its safe to insert a callback if none was given\n        try {\n            if (typeof config === \"string\") {\n                if (values instanceof Array) {\n                    data.query.preparable = {\n                        text: config,\n                        args: values,\n                    };\n                    callback = patchCallback(callback);\n                }\n                else {\n                    data.query.text = config;\n                    // pg v6 will, for some reason, accept both\n                    // client.query(\"...\", undefined, () => {...})\n                    // **and**\n                    // client.query(\"...\", () => {...});\n                    // Internally, precedence is given to the callback argument\n                    if (callback) {\n                        callback = patchCallback(callback);\n                    }\n                    else {\n                        values = patchCallback(values);\n                    }\n                }\n            }\n            else {\n                if (typeof config.name === \"string\") {\n                    data.query.plan = config.name;\n                }\n                else if (config.values instanceof Array) {\n                    data.query.preparable = {\n                        text: config.text,\n                        args: config.values,\n                    };\n                }\n                else {\n                    data.query.text = config.text;\n                }\n                if (callback) {\n                    callback = patchCallback(callback);\n                }\n                else if (values) {\n                    values = patchCallback(values);\n                }\n                else {\n                    config.callback = patchCallback(config.callback);\n                }\n            }\n        }\n        catch (e) {\n            // if our logic here throws, bail out and just let pg do its thing\n            return originalClientQuery.apply(this, arguments);\n        }\n        arguments[0] = config;\n        arguments[1] = values;\n        arguments[2] = callback;\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\n        queryResult = originalClientQuery.apply(this, arguments);\n        return queryResult;\n    };\n    return originalPg;\n}\nfunction postgres7PatchFunction(originalPg, originalPgPath) {\n    var originalClientQuery = originalPg.Client.prototype.query;\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\n    // wherever the callback is passed, find it, save it, and remove it from the call\n    // to the the original .query() function\n    originalPg.Client.prototype.query = function query(config, values, callback) {\n        var _this = this;\n        var callbackProvided = !!callback; // Starting in pg@7.x+, Promise is returned only if !callbackProvided\n        var data = {\n            query: {},\n            database: {\n                host: this.connectionParameters.host,\n                port: this.connectionParameters.port,\n            },\n            result: null,\n            error: null,\n            duration: 0,\n            time: new Date(),\n        };\n        var start = process.hrtime();\n        var queryResult;\n        function patchCallback(cb) {\n            if (cb && cb[diagnosticOriginalFunc]) {\n                cb = cb[diagnosticOriginalFunc];\n            }\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\n                var end = process.hrtime(start);\n                data.result = res && { rowCount: res.rowCount, command: res.command };\n                data.error = err;\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\n                if (err) {\n                    if (cb) {\n                        return cb.apply(this, arguments);\n                    }\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\n                        queryResult.emit(\"error\", err);\n                    }\n                }\n                else if (cb) {\n                    cb.apply(this, arguments);\n                }\n            });\n            try {\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\n                return trackingCallback;\n            }\n            catch (e) {\n                // this should never happen, but bailout in case it does\n                return cb;\n            }\n        }\n        // Only try to wrap the callback if it is a function. We want to keep the same\n        // behavior of returning a promise only if no callback is provided. Wrapping\n        // a nonfunction makes it a function and pg will interpret it as a callback\n        try {\n            if (typeof config === \"string\") {\n                if (values instanceof Array) {\n                    data.query.preparable = {\n                        text: config,\n                        args: values,\n                    };\n                    callbackProvided = typeof callback === \"function\";\n                    callback = callbackProvided ? patchCallback(callback) : callback;\n                }\n                else {\n                    data.query.text = config;\n                    if (callback) {\n                        callbackProvided = typeof callback === \"function\";\n                        callback = callbackProvided ? patchCallback(callback) : callback;\n                    }\n                    else {\n                        callbackProvided = typeof values === \"function\";\n                        values = callbackProvided ? patchCallback(values) : values;\n                    }\n                }\n            }\n            else {\n                if (typeof config.name === \"string\") {\n                    data.query.plan = config.name;\n                }\n                else if (config.values instanceof Array) {\n                    data.query.preparable = {\n                        text: config.text,\n                        args: config.values,\n                    };\n                }\n                else {\n                    data.query.text = config.text;\n                }\n                if (callback) {\n                    callbackProvided = typeof callback === \"function\";\n                    callback = patchCallback(callback);\n                }\n                else if (values) {\n                    callbackProvided = typeof values === \"function\";\n                    values = callbackProvided ? patchCallback(values) : values;\n                }\n                else {\n                    callbackProvided = typeof config.callback === \"function\";\n                    config.callback = callbackProvided ? patchCallback(config.callback) : config.callback;\n                }\n            }\n        }\n        catch (e) {\n            // if our logic here throws, bail out and just let pg do its thing\n            return originalClientQuery.apply(this, arguments);\n        }\n        arguments[0] = config;\n        arguments[1] = values;\n        arguments[2] = callback;\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\n        queryResult = originalClientQuery.apply(this, arguments);\n        if (!callbackProvided) {\n            // no callback, so create a pass along promise\n            return queryResult\n                // pass resolved promise after publishing the event\n                .then(function (result) {\n                patchCallback()(undefined, result);\n                return new _this._Promise(function (resolve, reject) {\n                    resolve(result);\n                });\n            })\n                // pass along rejected promise after publishing the error\n                .catch(function (error) {\n                patchCallback()(error, undefined);\n                return new _this._Promise(function (resolve, reject) {\n                    reject(error);\n                });\n            });\n        }\n        return queryResult;\n    };\n    return originalPg;\n}\nexports.postgres6 = {\n    versionSpecifier: \"6.*\",\n    patch: postgres6PatchFunction,\n};\nexports.postgres7 = {\n    versionSpecifier: \">=7.* <=8.*\",\n    patch: postgres7PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres6);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres7);\n}\nexports.enable = enable;\n//# sourceMappingURL=pg.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar redisPatchFunction = function (originalRedis) {\n    var originalSend = originalRedis.RedisClient.prototype.internal_send_command;\n    // Note: This is mixing together both context tracking and dependency tracking\n    originalRedis.RedisClient.prototype.internal_send_command = function (commandObj) {\n        if (commandObj) {\n            var cb_1 = commandObj.callback;\n            if (!cb_1 || !cb_1.pubsubBound) {\n                var address_1 = this.address;\n                var startTime_1 = process.hrtime();\n                var startDate_1 = new Date();\n                // Note: augmenting the callback on internal_send_command is correct for context\n                // tracking, but may be too low-level for dependency tracking. There are some 'errors'\n                // which higher levels expect in some cases\n                // However, the only other option is to intercept every individual command.\n                commandObj.callback = diagnostic_channel_1.channel.bindToContext(function (err, result) {\n                    var hrDuration = process.hrtime(startTime_1);\n                    /* tslint:disable-next-line:no-bitwise */\n                    var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\n                    diagnostic_channel_1.channel.publish(\"redis\", { duration: duration, address: address_1, commandObj: commandObj, err: err, result: result, time: startDate_1 });\n                    if (typeof cb_1 === \"function\") {\n                        cb_1.apply(this, arguments);\n                    }\n                });\n                commandObj.callback.pubsubBound = true;\n            }\n        }\n        return originalSend.call(this, commandObj);\n    };\n    return originalRedis;\n};\nexports.redis = {\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\n    patch: redisPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"redis\", exports.redis);\n}\nexports.enable = enable;\n//# sourceMappingURL=redis.pub.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar tediousPatchFunction = function (originalTedious) {\n    var originalMakeRequest = originalTedious.Connection.prototype.makeRequest;\n    originalTedious.Connection.prototype.makeRequest = function makeRequest() {\n        function getPatchedCallback(origCallback) {\n            var start = process.hrtime();\n            var data = {\n                query: {},\n                database: {\n                    host: null,\n                    port: null,\n                },\n                result: null,\n                error: null,\n                duration: 0,\n            };\n            return diagnostic_channel_1.channel.bindToContext(function (err, rowCount, rows) {\n                var end = process.hrtime(start);\n                data = __assign({}, data, { database: {\n                        host: this.connection.config.server,\n                        port: this.connection.config.options.port,\n                    }, result: !err && { rowCount: rowCount, rows: rows }, query: {\n                        text: this.parametersByName.statement.value,\n                    }, error: err, duration: Math.ceil((end[0] * 1e3) + (end[1] / 1e6)) });\n                diagnostic_channel_1.channel.publish(\"tedious\", data);\n                origCallback.call(this, err, rowCount, rows);\n            });\n        }\n        var request = arguments[0];\n        arguments[0].callback = getPatchedCallback(request.callback);\n        originalMakeRequest.apply(this, arguments);\n    };\n    return originalTedious;\n};\nexports.tedious = {\n    versionSpecifier: \">= 6.0.0 < 9.0.0\",\n    patch: tediousPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"tedious\", exports.tedious);\n}\nexports.enable = enable;\n//# sourceMappingURL=tedious.pub.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\n// register a \"filter\" with each logger that publishes the data about to be logged\nvar winston2PatchFunction = function (originalWinston) {\n    var originalLog = originalWinston.Logger.prototype.log;\n    var curLevels;\n    var loggingFilter = function (level, message, meta) {\n        var levelKind;\n        if (curLevels === originalWinston.config.npm.levels) {\n            levelKind = \"npm\";\n        }\n        else if (curLevels === originalWinston.config.syslog.levels) {\n            levelKind = \"syslog\";\n        }\n        else {\n            levelKind = \"unknown\";\n        }\n        diagnostic_channel_1.channel.publish(\"winston\", { level: level, message: message, meta: meta, levelKind: levelKind });\n        return message;\n    };\n    // whenever someone logs, ensure our filter comes last\n    originalWinston.Logger.prototype.log = function log() {\n        curLevels = this.levels;\n        if (!this.filters || this.filters.length === 0) {\n            this.filters = [loggingFilter];\n        }\n        else if (this.filters[this.filters.length - 1] !== loggingFilter) {\n            this.filters = this.filters.filter(function (f) { return f !== loggingFilter; });\n            this.filters.push(loggingFilter);\n        }\n        return originalLog.apply(this, arguments);\n    };\n    return originalWinston;\n};\nvar winston3PatchFunction = function (originalWinston) {\n    var mapLevelToKind = function (winston, level) {\n        var levelKind;\n        if (winston.config.npm.levels[level] != null) {\n            levelKind = \"npm\";\n        }\n        else if (winston.config.syslog.levels[level] != null) {\n            levelKind = \"syslog\";\n        }\n        else {\n            levelKind = \"unknown\";\n        }\n        return levelKind;\n    };\n    var AppInsightsTransport = /** @class */ (function (_super) {\n        __extends(AppInsightsTransport, _super);\n        function AppInsightsTransport(winston, opts) {\n            var _this = _super.call(this, opts) || this;\n            _this.winston = winston;\n            return _this;\n        }\n        AppInsightsTransport.prototype.log = function (info, callback) {\n            // tslint:disable-next-line:prefer-const - try to obtain level from Symbol(level) afterwards\n            var message = info.message, level = info.level, meta = info.meta, splat = __rest(info, [\"message\", \"level\", \"meta\"]);\n            level = typeof Symbol[\"for\"] === \"function\" ? info[Symbol[\"for\"](\"level\")] : level; // Symbol(level) is uncolorized, so prefer getting it from here\n            message = info instanceof Error ? info : message; // Winston places Errors at info, strings at info.message\n            var levelKind = mapLevelToKind(this.winston, level);\n            meta = meta || {}; // Winston _somtimes_ puts metadata inside meta, so start from here\n            for (var key in splat) {\n                if (splat.hasOwnProperty(key)) {\n                    meta[key] = splat[key];\n                }\n            }\n            diagnostic_channel_1.channel.publish(\"winston\", { message: message, level: level, levelKind: levelKind, meta: meta });\n            callback();\n        };\n        return AppInsightsTransport;\n    }(originalWinston.Transport));\n    // Patch this function\n    function patchedConfigure() {\n        // Grab highest sev logging level in case of custom logging levels\n        var levels = arguments[0].levels || originalWinston.config.npm.levels;\n        var lastLevel;\n        for (var level in levels) {\n            if (levels.hasOwnProperty(level)) {\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\n            }\n        }\n        this.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\n    }\n    var origCreate = originalWinston.createLogger;\n    originalWinston.createLogger = function patchedCreate() {\n        // Grab highest sev logging level in case of custom logging levels\n        var levels = arguments[0].levels || originalWinston.config.npm.levels;\n        var lastLevel;\n        for (var level in levels) {\n            if (levels.hasOwnProperty(level)) {\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\n            }\n        }\n        // Add custom app insights transport to the end\n        // Remark: Configure is not available until after createLogger()\n        // and the Logger prototype is not exported in winston 3.x, so\n        // patch both createLogger and configure. Could also call configure\n        // again after createLogger, but that would cause configure to be called\n        // twice per create.\n        var result = origCreate.apply(this, arguments);\n        result.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\n        var origConfigure = result.configure;\n        result.configure = function () {\n            origConfigure.apply(this, arguments);\n            patchedConfigure.apply(this, arguments);\n        };\n        return result;\n    };\n    var origRootConfigure = originalWinston.createLogger;\n    originalWinston.configure = function () {\n        origRootConfigure.apply(this, arguments);\n        patchedConfigure.apply(this, arguments);\n    };\n    originalWinston.add(new AppInsightsTransport(originalWinston));\n    return originalWinston;\n};\nexports.winston3 = {\n    versionSpecifier: \"3.x\",\n    patch: winston3PatchFunction,\n};\nexports.winston2 = {\n    versionSpecifier: \"2.x\",\n    patch: winston2PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston2);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston3);\n}\nexports.enable = enable;\n//# sourceMappingURL=winston.pub.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 4694;\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 420;\nmodule.exports = webpackEmptyContext;","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar patchRequire_1 = require(\"./patchRequire\");\r\nvar patchRequire_2 = require(\"./patchRequire\");\r\nexports.makePatchingRequire = patchRequire_2.makePatchingRequire;\r\nvar trueFilter = function (publishing) { return true; };\r\nvar ContextPreservingEventEmitter = (function () {\r\n    function ContextPreservingEventEmitter() {\r\n        this.version = require(\"./../../package.json\").version; // Allow for future versions to replace things?\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        this.knownPatches = {};\r\n        this.currentlyPublishing = false;\r\n    }\r\n    ContextPreservingEventEmitter.prototype.shouldPublish = function (name) {\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            return listeners.some(function (_a) {\r\n                var filter = _a.filter;\r\n                return !filter || filter(false);\r\n            });\r\n        }\r\n        return false;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.publish = function (name, event) {\r\n        if (this.currentlyPublishing) {\r\n            return; // Avoid reentrancy\r\n        }\r\n        var listeners = this.subscribers[name];\r\n        // Note: Listeners called synchronously to preserve context\r\n        if (listeners) {\r\n            var standardEvent_1 = {\r\n                timestamp: Date.now(),\r\n                data: event,\r\n            };\r\n            this.currentlyPublishing = true;\r\n            listeners.forEach(function (_a) {\r\n                var listener = _a.listener, filter = _a.filter;\r\n                try {\r\n                    if (filter && filter(true)) {\r\n                        listener(standardEvent_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // Subscriber threw an error\r\n                }\r\n            });\r\n            this.currentlyPublishing = false;\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.subscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push({ listener: listener, filter: filter });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.unsubscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            for (var index = 0; index < listeners.length; ++index) {\r\n                if (listeners[index].listener === listener && listeners[index].filter === filter) {\r\n                    listeners.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    // Used for tests\r\n    ContextPreservingEventEmitter.prototype.reset = function () {\r\n        var _this = this;\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        // Modify the knownPatches object rather than replace, since a reference will be used in the require patcher\r\n        Object.getOwnPropertyNames(this.knownPatches).forEach(function (prop) { return delete _this.knownPatches[prop]; });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.bindToContext = function (cb) {\r\n        return this.contextPreservationFunction(cb);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addContextPreservation = function (preserver) {\r\n        var previousPreservationStack = this.contextPreservationFunction;\r\n        this.contextPreservationFunction = (function (cb) { return preserver(previousPreservationStack(cb)); });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.registerMonkeyPatch = function (packageName, patcher) {\r\n        if (!this.knownPatches[packageName]) {\r\n            this.knownPatches[packageName] = [];\r\n        }\r\n        this.knownPatches[packageName].push(patcher);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.getPatchesObject = function () {\r\n        return this.knownPatches;\r\n    };\r\n    return ContextPreservingEventEmitter;\r\n}());\r\nif (!global.diagnosticsSource) {\r\n    global.diagnosticsSource = new ContextPreservingEventEmitter();\r\n    // TODO: should this only patch require after at least one monkey patch is registered?\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    var moduleModule = require(\"module\");\r\n    // Note: We pass in the object now before any patches are registered, but the object is passed by reference\r\n    // so any updates made to the object will be visible in the patcher.\r\n    moduleModule.prototype.require = patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject());\r\n}\r\nexports.channel = global.diagnosticsSource;\r\n//# sourceMappingURL=channel.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar semver = require(\"semver\");\r\n/* tslint:disable-next-line:no-var-requires */\r\nvar moduleModule = require(\"module\");\r\nvar nativeModules = Object.keys(process.binding(\"natives\"));\r\nvar originalRequire = moduleModule.prototype.require;\r\nfunction makePatchingRequire(knownPatches) {\r\n    var patchedModules = {};\r\n    return function patchedRequire(moduleId) {\r\n        var originalModule = originalRequire.apply(this, arguments);\r\n        if (knownPatches[moduleId]) {\r\n            // Fetch the specific path of the module\r\n            var modulePath = moduleModule._resolveFilename(moduleId, this);\r\n            if (patchedModules.hasOwnProperty(modulePath)) {\r\n                // This module has already been patched, no need to reapply\r\n                return patchedModules[modulePath];\r\n            }\r\n            var moduleVersion = void 0;\r\n            if (nativeModules.indexOf(moduleId) < 0) {\r\n                try {\r\n                    moduleVersion = originalRequire.call(this, path.join(moduleId, \"package.json\")).version;\r\n                }\r\n                catch (e) {\r\n                    // This should only happen if moduleId is actually a path rather than a module\r\n                    // This is not a supported scenario\r\n                    return originalModule;\r\n                }\r\n            }\r\n            else {\r\n                // This module is implemented natively so we cannot find a package.json\r\n                // Instead, take the version of node itself\r\n                moduleVersion = process.version.substring(1);\r\n            }\r\n            var prereleaseTagIndex = moduleVersion.indexOf(\"-\");\r\n            if (prereleaseTagIndex >= 0) {\r\n                // We ignore prerelease tags to avoid impossible to fix gaps in support\r\n                // e.g. supporting console in >= 4.0.0 would otherwise not include\r\n                // 8.0.0-pre\r\n                moduleVersion = moduleVersion.substring(0, prereleaseTagIndex);\r\n            }\r\n            var modifiedModule = originalModule;\r\n            for (var _i = 0, _a = knownPatches[moduleId]; _i < _a.length; _i++) {\r\n                var modulePatcher = _a[_i];\r\n                if (semver.satisfies(moduleVersion, modulePatcher.versionSpecifier)) {\r\n                    modifiedModule = modulePatcher.patch(modifiedModule, modulePath);\r\n                }\r\n            }\r\n            return patchedModules[modulePath] = modifiedModule;\r\n        }\r\n        return originalModule;\r\n    };\r\n}\r\nexports.makePatchingRequire = makePatchingRequire;\r\n//# sourceMappingURL=patchRequire.js.map","'use strict';\n\nvar shimmer = require('shimmer');\nvar wrap    = shimmer.wrap;\nvar unwrap  = shimmer.unwrap;\n\n// Default to complaining loudly when things don't go according to plan.\n// dunderscores are boring\nvar SYMBOL = 'wrap@before';\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty(obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name);\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  });\n}\n\nfunction _process(self, listeners) {\n  var l = listeners.length;\n  for (var p = 0; p < l; p++) {\n    var listener = listeners[p];\n    // set up the listener so that onEmit can do whatever it needs\n    var before = self[SYMBOL];\n    if (typeof before === 'function') {\n      before(listener);\n    }\n    else if (Array.isArray(before)) {\n      var length = before.length;\n      for (var i = 0; i < length; i++) before[i](listener);\n    }\n  }\n}\n\nfunction _listeners(self, event) {\n  var listeners;\n  listeners = self._events && self._events[event];\n  if (!Array.isArray(listeners)) {\n    if (listeners) {\n      listeners = [listeners];\n    }\n    else {\n      listeners = [];\n    }\n  }\n\n  return listeners;\n}\n\nfunction _findAndProcess(self, event, before) {\n  var after = _listeners(self, event);\n  var unprocessed = after.filter(function(fn) { return before.indexOf(fn) === -1; });\n  if (unprocessed.length > 0) _process(self, unprocessed);\n}\n\nfunction _wrap(unwrapped, visit) {\n  if (!unwrapped) return;\n\n  var wrapped = unwrapped;\n  if (typeof unwrapped === 'function') {\n    wrapped = visit(unwrapped);\n  }\n  else if (Array.isArray(unwrapped)) {\n    wrapped = [];\n    for (var i = 0; i < unwrapped.length; i++) {\n      wrapped[i] = visit(unwrapped[i]);\n    }\n  }\n  return wrapped;\n}\n\nmodule.exports = function wrapEmitter(emitter, onAddListener, onEmit) {\n  if (!emitter || !emitter.on || !emitter.addListener ||\n      !emitter.removeListener || !emitter.emit) {\n    throw new Error(\"can only wrap real EEs\");\n  }\n\n  if (!onAddListener) throw new Error(\"must have function to run on listener addition\");\n  if (!onEmit) throw new Error(\"must have function to wrap listeners when emitting\");\n\n  /* Attach a context to a listener, and make sure that this hook stays\n   * attached to the emitter forevermore.\n   */\n  function adding(on) {\n    return function added(event, listener) {\n      var existing = _listeners(this, event).slice();\n\n      try {\n        var returned = on.call(this, event, listener);\n        _findAndProcess(this, event, existing);\n        return returned;\n      }\n      finally {\n        // old-style streaming overwrites .on and .addListener, so rewrap\n        if (!this.on.__wrapped) wrap(this, 'on', adding);\n        if (!this.addListener.__wrapped) wrap(this, 'addListener', adding);\n      }\n    };\n  }\n\n  function emitting(emit) {\n    return function emitted(event) {\n      if (!this._events || !this._events[event]) return emit.apply(this, arguments);\n\n      var unwrapped = this._events[event];\n\n      /* Ensure that if removeListener gets called, it's working with the\n       * unwrapped listeners.\n       */\n      function remover(removeListener) {\n        return function removed() {\n          this._events[event] = unwrapped;\n          try {\n            return removeListener.apply(this, arguments);\n          }\n          finally {\n            unwrapped = this._events[event];\n            this._events[event] = _wrap(unwrapped, onEmit);\n          }\n        };\n      }\n      wrap(this, 'removeListener', remover);\n\n      try {\n        /* At emit time, ensure that whatever else is going on, removeListener will\n         * still work while at the same time running whatever hooks are necessary to\n         * make sure the listener is run in the correct context.\n         */\n        this._events[event] = _wrap(unwrapped, onEmit);\n        return emit.apply(this, arguments);\n      }\n      finally {\n        /* Ensure that regardless of what happens when preparing and running the\n         * listeners, the status quo ante is restored before continuing.\n         */\n        unwrap(this, 'removeListener');\n        this._events[event] = unwrapped;\n      }\n    };\n  }\n\n  // support multiple onAddListeners\n  if (!emitter[SYMBOL]) {\n    defineProperty(emitter, SYMBOL, onAddListener);\n  }\n  else if (typeof emitter[SYMBOL] === 'function') {\n    defineProperty(emitter, SYMBOL, [emitter[SYMBOL], onAddListener]);\n  }\n  else if (Array.isArray(emitter[SYMBOL])) {\n    emitter[SYMBOL].push(onAddListener);\n  }\n\n  // only wrap the core functions once\n  if (!emitter.__wrapped) {\n    wrap(emitter, 'addListener', adding);\n    wrap(emitter, 'on',          adding);\n    wrap(emitter, 'emit',        emitting);\n\n    defineProperty(emitter, '__unwrap', function () {\n      unwrap(emitter, 'addListener');\n      unwrap(emitter, 'on');\n      unwrap(emitter, 'emit');\n      delete emitter[SYMBOL];\n      delete emitter.__wrapped;\n    });\n    defineProperty(emitter, '__wrapped', true);\n  }\n};\n","\"use strict\";\nconst taskManager = require(\"./managers/tasks\");\nconst patternManager = require(\"./managers/patterns\");\nconst async_1 = require(\"./providers/async\");\nconst stream_1 = require(\"./providers/stream\");\nconst sync_1 = require(\"./providers/sync\");\nconst settings_1 = require(\"./settings\");\nconst utils = require(\"./utils\");\nasync function FastGlob(source, options) {\n    assertPatternsInput(source);\n    const works = getWorks(source, async_1.default, options);\n    const result = await Promise.all(works);\n    return utils.array.flatten(result);\n}\n// https://github.com/typescript-eslint/typescript-eslint/issues/60\n// eslint-disable-next-line no-redeclare\n(function (FastGlob) {\n    function sync(source, options) {\n        assertPatternsInput(source);\n        const works = getWorks(source, sync_1.default, options);\n        return utils.array.flatten(works);\n    }\n    FastGlob.sync = sync;\n    function stream(source, options) {\n        assertPatternsInput(source);\n        const works = getWorks(source, stream_1.default, options);\n        /**\n         * The stream returned by the provider cannot work with an asynchronous iterator.\n         * To support asynchronous iterators, regardless of the number of tasks, we always multiplex streams.\n         * This affects performance (+25%). I don't see best solution right now.\n         */\n        return utils.stream.merge(works);\n    }\n    FastGlob.stream = stream;\n    function generateTasks(source, options) {\n        assertPatternsInput(source);\n        const patterns = patternManager.transform([].concat(source));\n        const settings = new settings_1.default(options);\n        return taskManager.generate(patterns, settings);\n    }\n    FastGlob.generateTasks = generateTasks;\n    function isDynamicPattern(source, options) {\n        assertPatternsInput(source);\n        const settings = new settings_1.default(options);\n        return utils.pattern.isDynamicPattern(source, settings);\n    }\n    FastGlob.isDynamicPattern = isDynamicPattern;\n    function escapePath(source) {\n        assertPatternsInput(source);\n        return utils.path.escape(source);\n    }\n    FastGlob.escapePath = escapePath;\n})(FastGlob || (FastGlob = {}));\nfunction getWorks(source, _Provider, options) {\n    const patterns = patternManager.transform([].concat(source));\n    const settings = new settings_1.default(options);\n    const tasks = taskManager.generate(patterns, settings);\n    const provider = new _Provider(settings);\n    return tasks.map(provider.read, provider);\n}\nfunction assertPatternsInput(input) {\n    const source = [].concat(input);\n    const isValidSource = source.every((item) => utils.string.isString(item) && !utils.string.isEmpty(item));\n    if (!isValidSource) {\n        throw new TypeError('Patterns must be a string (non empty) or an array of strings');\n    }\n}\nmodule.exports = FastGlob;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeDuplicateSlashes = exports.transform = void 0;\n/**\n * Matches a sequence of two or more consecutive slashes, excluding the first two slashes at the beginning of the string.\n * The latter is due to the presence of the device path at the beginning of the UNC path.\n * @todo rewrite to negative lookbehind with the next major release.\n */\nconst DOUBLE_SLASH_RE = /(?!^)\\/{2,}/g;\nfunction transform(patterns) {\n    return patterns.map((pattern) => removeDuplicateSlashes(pattern));\n}\nexports.transform = transform;\n/**\n * This package only works with forward slashes as a path separator.\n * Because of this, we cannot use the standard `path.normalize` method, because on Windows platform it will use of backslashes.\n */\nfunction removeDuplicateSlashes(pattern) {\n    return pattern.replace(DOUBLE_SLASH_RE, '/');\n}\nexports.removeDuplicateSlashes = removeDuplicateSlashes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.convertPatternGroupToTask = exports.convertPatternGroupsToTasks = exports.groupPatternsByBaseDirectory = exports.getNegativePatternsAsPositive = exports.getPositivePatterns = exports.convertPatternsToTasks = exports.generate = void 0;\nconst utils = require(\"../utils\");\nfunction generate(patterns, settings) {\n    const positivePatterns = getPositivePatterns(patterns);\n    const negativePatterns = getNegativePatternsAsPositive(patterns, settings.ignore);\n    const staticPatterns = positivePatterns.filter((pattern) => utils.pattern.isStaticPattern(pattern, settings));\n    const dynamicPatterns = positivePatterns.filter((pattern) => utils.pattern.isDynamicPattern(pattern, settings));\n    const staticTasks = convertPatternsToTasks(staticPatterns, negativePatterns, /* dynamic */ false);\n    const dynamicTasks = convertPatternsToTasks(dynamicPatterns, negativePatterns, /* dynamic */ true);\n    return staticTasks.concat(dynamicTasks);\n}\nexports.generate = generate;\n/**\n * Returns tasks grouped by basic pattern directories.\n *\n * Patterns that can be found inside (`./`) and outside (`../`) the current directory are handled separately.\n * This is necessary because directory traversal starts at the base directory and goes deeper.\n */\nfunction convertPatternsToTasks(positive, negative, dynamic) {\n    const tasks = [];\n    const patternsOutsideCurrentDirectory = utils.pattern.getPatternsOutsideCurrentDirectory(positive);\n    const patternsInsideCurrentDirectory = utils.pattern.getPatternsInsideCurrentDirectory(positive);\n    const outsideCurrentDirectoryGroup = groupPatternsByBaseDirectory(patternsOutsideCurrentDirectory);\n    const insideCurrentDirectoryGroup = groupPatternsByBaseDirectory(patternsInsideCurrentDirectory);\n    tasks.push(...convertPatternGroupsToTasks(outsideCurrentDirectoryGroup, negative, dynamic));\n    /*\n     * For the sake of reducing future accesses to the file system, we merge all tasks within the current directory\n     * into a global task, if at least one pattern refers to the root (`.`). In this case, the global task covers the rest.\n     */\n    if ('.' in insideCurrentDirectoryGroup) {\n        tasks.push(convertPatternGroupToTask('.', patternsInsideCurrentDirectory, negative, dynamic));\n    }\n    else {\n        tasks.push(...convertPatternGroupsToTasks(insideCurrentDirectoryGroup, negative, dynamic));\n    }\n    return tasks;\n}\nexports.convertPatternsToTasks = convertPatternsToTasks;\nfunction getPositivePatterns(patterns) {\n    return utils.pattern.getPositivePatterns(patterns);\n}\nexports.getPositivePatterns = getPositivePatterns;\nfunction getNegativePatternsAsPositive(patterns, ignore) {\n    const negative = utils.pattern.getNegativePatterns(patterns).concat(ignore);\n    const positive = negative.map(utils.pattern.convertToPositivePattern);\n    return positive;\n}\nexports.getNegativePatternsAsPositive = getNegativePatternsAsPositive;\nfunction groupPatternsByBaseDirectory(patterns) {\n    const group = {};\n    return patterns.reduce((collection, pattern) => {\n        const base = utils.pattern.getBaseDirectory(pattern);\n        if (base in collection) {\n            collection[base].push(pattern);\n        }\n        else {\n            collection[base] = [pattern];\n        }\n        return collection;\n    }, group);\n}\nexports.groupPatternsByBaseDirectory = groupPatternsByBaseDirectory;\nfunction convertPatternGroupsToTasks(positive, negative, dynamic) {\n    return Object.keys(positive).map((base) => {\n        return convertPatternGroupToTask(base, positive[base], negative, dynamic);\n    });\n}\nexports.convertPatternGroupsToTasks = convertPatternGroupsToTasks;\nfunction convertPatternGroupToTask(base, positive, negative, dynamic) {\n    return {\n        dynamic,\n        positive,\n        negative,\n        base,\n        patterns: [].concat(positive, negative.map(utils.pattern.convertToNegativePattern))\n    };\n}\nexports.convertPatternGroupToTask = convertPatternGroupToTask;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst stream_1 = require(\"../readers/stream\");\nconst provider_1 = require(\"./provider\");\nclass ProviderAsync extends provider_1.default {\n    constructor() {\n        super(...arguments);\n        this._reader = new stream_1.default(this._settings);\n    }\n    read(task) {\n        const root = this._getRootDirectory(task);\n        const options = this._getReaderOptions(task);\n        const entries = [];\n        return new Promise((resolve, reject) => {\n            const stream = this.api(root, task, options);\n            stream.once('error', reject);\n            stream.on('data', (entry) => entries.push(options.transform(entry)));\n            stream.once('end', () => resolve(entries));\n        });\n    }\n    api(root, task, options) {\n        if (task.dynamic) {\n            return this._reader.dynamic(root, options);\n        }\n        return this._reader.static(task.patterns, options);\n    }\n}\nexports.default = ProviderAsync;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils = require(\"../../utils\");\nconst partial_1 = require(\"../matchers/partial\");\nclass DeepFilter {\n    constructor(_settings, _micromatchOptions) {\n        this._settings = _settings;\n        this._micromatchOptions = _micromatchOptions;\n    }\n    getFilter(basePath, positive, negative) {\n        const matcher = this._getMatcher(positive);\n        const negativeRe = this._getNegativePatternsRe(negative);\n        return (entry) => this._filter(basePath, entry, matcher, negativeRe);\n    }\n    _getMatcher(patterns) {\n        return new partial_1.default(patterns, this._settings, this._micromatchOptions);\n    }\n    _getNegativePatternsRe(patterns) {\n        const affectDepthOfReadingPatterns = patterns.filter(utils.pattern.isAffectDepthOfReadingPattern);\n        return utils.pattern.convertPatternsToRe(affectDepthOfReadingPatterns, this._micromatchOptions);\n    }\n    _filter(basePath, entry, matcher, negativeRe) {\n        if (this._isSkippedByDeep(basePath, entry.path)) {\n            return false;\n        }\n        if (this._isSkippedSymbolicLink(entry)) {\n            return false;\n        }\n        const filepath = utils.path.removeLeadingDotSegment(entry.path);\n        if (this._isSkippedByPositivePatterns(filepath, matcher)) {\n            return false;\n        }\n        return this._isSkippedByNegativePatterns(filepath, negativeRe);\n    }\n    _isSkippedByDeep(basePath, entryPath) {\n        /**\n         * Avoid unnecessary depth calculations when it doesn't matter.\n         */\n        if (this._settings.deep === Infinity) {\n            return false;\n        }\n        return this._getEntryLevel(basePath, entryPath) >= this._settings.deep;\n    }\n    _getEntryLevel(basePath, entryPath) {\n        const entryPathDepth = entryPath.split('/').length;\n        if (basePath === '') {\n            return entryPathDepth;\n        }\n        const basePathDepth = basePath.split('/').length;\n        return entryPathDepth - basePathDepth;\n    }\n    _isSkippedSymbolicLink(entry) {\n        return !this._settings.followSymbolicLinks && entry.dirent.isSymbolicLink();\n    }\n    _isSkippedByPositivePatterns(entryPath, matcher) {\n        return !this._settings.baseNameMatch && !matcher.match(entryPath);\n    }\n    _isSkippedByNegativePatterns(entryPath, patternsRe) {\n        return !utils.pattern.matchAny(entryPath, patternsRe);\n    }\n}\nexports.default = DeepFilter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils = require(\"../../utils\");\nclass EntryFilter {\n    constructor(_settings, _micromatchOptions) {\n        this._settings = _settings;\n        this._micromatchOptions = _micromatchOptions;\n        this.index = new Map();\n    }\n    getFilter(positive, negative) {\n        const positiveRe = utils.pattern.convertPatternsToRe(positive, this._micromatchOptions);\n        const negativeRe = utils.pattern.convertPatternsToRe(negative, this._micromatchOptions);\n        return (entry) => this._filter(entry, positiveRe, negativeRe);\n    }\n    _filter(entry, positiveRe, negativeRe) {\n        if (this._settings.unique && this._isDuplicateEntry(entry)) {\n            return false;\n        }\n        if (this._onlyFileFilter(entry) || this._onlyDirectoryFilter(entry)) {\n            return false;\n        }\n        if (this._isSkippedByAbsoluteNegativePatterns(entry.path, negativeRe)) {\n            return false;\n        }\n        const filepath = this._settings.baseNameMatch ? entry.name : entry.path;\n        const isMatched = this._isMatchToPatterns(filepath, positiveRe) && !this._isMatchToPatterns(entry.path, negativeRe);\n        if (this._settings.unique && isMatched) {\n            this._createIndexRecord(entry);\n        }\n        return isMatched;\n    }\n    _isDuplicateEntry(entry) {\n        return this.index.has(entry.path);\n    }\n    _createIndexRecord(entry) {\n        this.index.set(entry.path, undefined);\n    }\n    _onlyFileFilter(entry) {\n        return this._settings.onlyFiles && !entry.dirent.isFile();\n    }\n    _onlyDirectoryFilter(entry) {\n        return this._settings.onlyDirectories && !entry.dirent.isDirectory();\n    }\n    _isSkippedByAbsoluteNegativePatterns(entryPath, patternsRe) {\n        if (!this._settings.absolute) {\n            return false;\n        }\n        const fullpath = utils.path.makeAbsolute(this._settings.cwd, entryPath);\n        return utils.pattern.matchAny(fullpath, patternsRe);\n    }\n    /**\n     * First, just trying to apply patterns to the path.\n     * Second, trying to apply patterns to the path with final slash.\n     */\n    _isMatchToPatterns(entryPath, patternsRe) {\n        const filepath = utils.path.removeLeadingDotSegment(entryPath);\n        return utils.pattern.matchAny(filepath, patternsRe) || utils.pattern.matchAny(filepath + '/', patternsRe);\n    }\n}\nexports.default = EntryFilter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils = require(\"../../utils\");\nclass ErrorFilter {\n    constructor(_settings) {\n        this._settings = _settings;\n    }\n    getFilter() {\n        return (error) => this._isNonFatalError(error);\n    }\n    _isNonFatalError(error) {\n        return utils.errno.isEnoentCodeError(error) || this._settings.suppressErrors;\n    }\n}\nexports.default = ErrorFilter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils = require(\"../../utils\");\nclass Matcher {\n    constructor(_patterns, _settings, _micromatchOptions) {\n        this._patterns = _patterns;\n        this._settings = _settings;\n        this._micromatchOptions = _micromatchOptions;\n        this._storage = [];\n        this._fillStorage();\n    }\n    _fillStorage() {\n        /**\n         * The original pattern may include `{,*,**,a/*}`, which will lead to problems with matching (unresolved level).\n         * So, before expand patterns with brace expansion into separated patterns.\n         */\n        const patterns = utils.pattern.expandPatternsWithBraceExpansion(this._patterns);\n        for (const pattern of patterns) {\n            const segments = this._getPatternSegments(pattern);\n            const sections = this._splitSegmentsIntoSections(segments);\n            this._storage.push({\n                complete: sections.length <= 1,\n                pattern,\n                segments,\n                sections\n            });\n        }\n    }\n    _getPatternSegments(pattern) {\n        const parts = utils.pattern.getPatternParts(pattern, this._micromatchOptions);\n        return parts.map((part) => {\n            const dynamic = utils.pattern.isDynamicPattern(part, this._settings);\n            if (!dynamic) {\n                return {\n                    dynamic: false,\n                    pattern: part\n                };\n            }\n            return {\n                dynamic: true,\n                pattern: part,\n                patternRe: utils.pattern.makeRe(part, this._micromatchOptions)\n            };\n        });\n    }\n    _splitSegmentsIntoSections(segments) {\n        return utils.array.splitWhen(segments, (segment) => segment.dynamic && utils.pattern.hasGlobStar(segment.pattern));\n    }\n}\nexports.default = Matcher;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst matcher_1 = require(\"./matcher\");\nclass PartialMatcher extends matcher_1.default {\n    match(filepath) {\n        const parts = filepath.split('/');\n        const levels = parts.length;\n        const patterns = this._storage.filter((info) => !info.complete || info.segments.length > levels);\n        for (const pattern of patterns) {\n            const section = pattern.sections[0];\n            /**\n             * In this case, the pattern has a globstar and we must read all directories unconditionally,\n             * but only if the level has reached the end of the first group.\n             *\n             * fixtures/{a,b}/**\n             *  ^ true/false  ^ always true\n            */\n            if (!pattern.complete && levels > section.length) {\n                return true;\n            }\n            const match = parts.every((part, index) => {\n                const segment = pattern.segments[index];\n                if (segment.dynamic && segment.patternRe.test(part)) {\n                    return true;\n                }\n                if (!segment.dynamic && segment.pattern === part) {\n                    return true;\n                }\n                return false;\n            });\n            if (match) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\nexports.default = PartialMatcher;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst path = require(\"path\");\nconst deep_1 = require(\"./filters/deep\");\nconst entry_1 = require(\"./filters/entry\");\nconst error_1 = require(\"./filters/error\");\nconst entry_2 = require(\"./transformers/entry\");\nclass Provider {\n    constructor(_settings) {\n        this._settings = _settings;\n        this.errorFilter = new error_1.default(this._settings);\n        this.entryFilter = new entry_1.default(this._settings, this._getMicromatchOptions());\n        this.deepFilter = new deep_1.default(this._settings, this._getMicromatchOptions());\n        this.entryTransformer = new entry_2.default(this._settings);\n    }\n    _getRootDirectory(task) {\n        return path.resolve(this._settings.cwd, task.base);\n    }\n    _getReaderOptions(task) {\n        const basePath = task.base === '.' ? '' : task.base;\n        return {\n            basePath,\n            pathSegmentSeparator: '/',\n            concurrency: this._settings.concurrency,\n            deepFilter: this.deepFilter.getFilter(basePath, task.positive, task.negative),\n            entryFilter: this.entryFilter.getFilter(task.positive, task.negative),\n            errorFilter: this.errorFilter.getFilter(),\n            followSymbolicLinks: this._settings.followSymbolicLinks,\n            fs: this._settings.fs,\n            stats: this._settings.stats,\n            throwErrorOnBrokenSymbolicLink: this._settings.throwErrorOnBrokenSymbolicLink,\n            transform: this.entryTransformer.getTransformer()\n        };\n    }\n    _getMicromatchOptions() {\n        return {\n            dot: this._settings.dot,\n            matchBase: this._settings.baseNameMatch,\n            nobrace: !this._settings.braceExpansion,\n            nocase: !this._settings.caseSensitiveMatch,\n            noext: !this._settings.extglob,\n            noglobstar: !this._settings.globstar,\n            posix: true,\n            strictSlashes: false\n        };\n    }\n}\nexports.default = Provider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst stream_1 = require(\"stream\");\nconst stream_2 = require(\"../readers/stream\");\nconst provider_1 = require(\"./provider\");\nclass ProviderStream extends provider_1.default {\n    constructor() {\n        super(...arguments);\n        this._reader = new stream_2.default(this._settings);\n    }\n    read(task) {\n        const root = this._getRootDirectory(task);\n        const options = this._getReaderOptions(task);\n        const source = this.api(root, task, options);\n        const destination = new stream_1.Readable({ objectMode: true, read: () => { } });\n        source\n            .once('error', (error) => destination.emit('error', error))\n            .on('data', (entry) => destination.emit('data', options.transform(entry)))\n            .once('end', () => destination.emit('end'));\n        destination\n            .once('close', () => source.destroy());\n        return destination;\n    }\n    api(root, task, options) {\n        if (task.dynamic) {\n            return this._reader.dynamic(root, options);\n        }\n        return this._reader.static(task.patterns, options);\n    }\n}\nexports.default = ProviderStream;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sync_1 = require(\"../readers/sync\");\nconst provider_1 = require(\"./provider\");\nclass ProviderSync extends provider_1.default {\n    constructor() {\n        super(...arguments);\n        this._reader = new sync_1.default(this._settings);\n    }\n    read(task) {\n        const root = this._getRootDirectory(task);\n        const options = this._getReaderOptions(task);\n        const entries = this.api(root, task, options);\n        return entries.map(options.transform);\n    }\n    api(root, task, options) {\n        if (task.dynamic) {\n            return this._reader.dynamic(root, options);\n        }\n        return this._reader.static(task.patterns, options);\n    }\n}\nexports.default = ProviderSync;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils = require(\"../../utils\");\nclass EntryTransformer {\n    constructor(_settings) {\n        this._settings = _settings;\n    }\n    getTransformer() {\n        return (entry) => this._transform(entry);\n    }\n    _transform(entry) {\n        let filepath = entry.path;\n        if (this._settings.absolute) {\n            filepath = utils.path.makeAbsolute(this._settings.cwd, filepath);\n            filepath = utils.path.unixify(filepath);\n        }\n        if (this._settings.markDirectories && entry.dirent.isDirectory()) {\n            filepath += '/';\n        }\n        if (!this._settings.objectMode) {\n            return filepath;\n        }\n        return Object.assign(Object.assign({}, entry), { path: filepath });\n    }\n}\nexports.default = EntryTransformer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst path = require(\"path\");\nconst fsStat = require(\"@nodelib/fs.stat\");\nconst utils = require(\"../utils\");\nclass Reader {\n    constructor(_settings) {\n        this._settings = _settings;\n        this._fsStatSettings = new fsStat.Settings({\n            followSymbolicLink: this._settings.followSymbolicLinks,\n            fs: this._settings.fs,\n            throwErrorOnBrokenSymbolicLink: this._settings.followSymbolicLinks\n        });\n    }\n    _getFullEntryPath(filepath) {\n        return path.resolve(this._settings.cwd, filepath);\n    }\n    _makeEntry(stats, pattern) {\n        const entry = {\n            name: pattern,\n            path: pattern,\n            dirent: utils.fs.createDirentFromStats(pattern, stats)\n        };\n        if (this._settings.stats) {\n            entry.stats = stats;\n        }\n        return entry;\n    }\n    _isFatalError(error) {\n        return !utils.errno.isEnoentCodeError(error) && !this._settings.suppressErrors;\n    }\n}\nexports.default = Reader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst stream_1 = require(\"stream\");\nconst fsStat = require(\"@nodelib/fs.stat\");\nconst fsWalk = require(\"@nodelib/fs.walk\");\nconst reader_1 = require(\"./reader\");\nclass ReaderStream extends reader_1.default {\n    constructor() {\n        super(...arguments);\n        this._walkStream = fsWalk.walkStream;\n        this._stat = fsStat.stat;\n    }\n    dynamic(root, options) {\n        return this._walkStream(root, options);\n    }\n    static(patterns, options) {\n        const filepaths = patterns.map(this._getFullEntryPath, this);\n        const stream = new stream_1.PassThrough({ objectMode: true });\n        stream._write = (index, _enc, done) => {\n            return this._getEntry(filepaths[index], patterns[index], options)\n                .then((entry) => {\n                if (entry !== null && options.entryFilter(entry)) {\n                    stream.push(entry);\n                }\n                if (index === filepaths.length - 1) {\n                    stream.end();\n                }\n                done();\n            })\n                .catch(done);\n        };\n        for (let i = 0; i < filepaths.length; i++) {\n            stream.write(i);\n        }\n        return stream;\n    }\n    _getEntry(filepath, pattern, options) {\n        return this._getStat(filepath)\n            .then((stats) => this._makeEntry(stats, pattern))\n            .catch((error) => {\n            if (options.errorFilter(error)) {\n                return null;\n            }\n            throw error;\n        });\n    }\n    _getStat(filepath) {\n        return new Promise((resolve, reject) => {\n            this._stat(filepath, this._fsStatSettings, (error, stats) => {\n                return error === null ? resolve(stats) : reject(error);\n            });\n        });\n    }\n}\nexports.default = ReaderStream;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fsStat = require(\"@nodelib/fs.stat\");\nconst fsWalk = require(\"@nodelib/fs.walk\");\nconst reader_1 = require(\"./reader\");\nclass ReaderSync extends reader_1.default {\n    constructor() {\n        super(...arguments);\n        this._walkSync = fsWalk.walkSync;\n        this._statSync = fsStat.statSync;\n    }\n    dynamic(root, options) {\n        return this._walkSync(root, options);\n    }\n    static(patterns, options) {\n        const entries = [];\n        for (const pattern of patterns) {\n            const filepath = this._getFullEntryPath(pattern);\n            const entry = this._getEntry(filepath, pattern, options);\n            if (entry === null || !options.entryFilter(entry)) {\n                continue;\n            }\n            entries.push(entry);\n        }\n        return entries;\n    }\n    _getEntry(filepath, pattern, options) {\n        try {\n            const stats = this._getStat(filepath);\n            return this._makeEntry(stats, pattern);\n        }\n        catch (error) {\n            if (options.errorFilter(error)) {\n                return null;\n            }\n            throw error;\n        }\n    }\n    _getStat(filepath) {\n        return this._statSync(filepath, this._fsStatSettings);\n    }\n}\nexports.default = ReaderSync;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_FILE_SYSTEM_ADAPTER = void 0;\nconst fs = require(\"fs\");\nconst os = require(\"os\");\n/**\n * The `os.cpus` method can return zero. We expect the number of cores to be greater than zero.\n * https://github.com/nodejs/node/blob/7faeddf23a98c53896f8b574a6e66589e8fb1eb8/lib/os.js#L106-L107\n */\nconst CPU_COUNT = Math.max(os.cpus().length, 1);\nexports.DEFAULT_FILE_SYSTEM_ADAPTER = {\n    lstat: fs.lstat,\n    lstatSync: fs.lstatSync,\n    stat: fs.stat,\n    statSync: fs.statSync,\n    readdir: fs.readdir,\n    readdirSync: fs.readdirSync\n};\nclass Settings {\n    constructor(_options = {}) {\n        this._options = _options;\n        this.absolute = this._getValue(this._options.absolute, false);\n        this.baseNameMatch = this._getValue(this._options.baseNameMatch, false);\n        this.braceExpansion = this._getValue(this._options.braceExpansion, true);\n        this.caseSensitiveMatch = this._getValue(this._options.caseSensitiveMatch, true);\n        this.concurrency = this._getValue(this._options.concurrency, CPU_COUNT);\n        this.cwd = this._getValue(this._options.cwd, process.cwd());\n        this.deep = this._getValue(this._options.deep, Infinity);\n        this.dot = this._getValue(this._options.dot, false);\n        this.extglob = this._getValue(this._options.extglob, true);\n        this.followSymbolicLinks = this._getValue(this._options.followSymbolicLinks, true);\n        this.fs = this._getFileSystemMethods(this._options.fs);\n        this.globstar = this._getValue(this._options.globstar, true);\n        this.ignore = this._getValue(this._options.ignore, []);\n        this.markDirectories = this._getValue(this._options.markDirectories, false);\n        this.objectMode = this._getValue(this._options.objectMode, false);\n        this.onlyDirectories = this._getValue(this._options.onlyDirectories, false);\n        this.onlyFiles = this._getValue(this._options.onlyFiles, true);\n        this.stats = this._getValue(this._options.stats, false);\n        this.suppressErrors = this._getValue(this._options.suppressErrors, false);\n        this.throwErrorOnBrokenSymbolicLink = this._getValue(this._options.throwErrorOnBrokenSymbolicLink, false);\n        this.unique = this._getValue(this._options.unique, true);\n        if (this.onlyDirectories) {\n            this.onlyFiles = false;\n        }\n        if (this.stats) {\n            this.objectMode = true;\n        }\n    }\n    _getValue(option, value) {\n        return option === undefined ? value : option;\n    }\n    _getFileSystemMethods(methods = {}) {\n        return Object.assign(Object.assign({}, exports.DEFAULT_FILE_SYSTEM_ADAPTER), methods);\n    }\n}\nexports.default = Settings;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.splitWhen = exports.flatten = void 0;\nfunction flatten(items) {\n    return items.reduce((collection, item) => [].concat(collection, item), []);\n}\nexports.flatten = flatten;\nfunction splitWhen(items, predicate) {\n    const result = [[]];\n    let groupIndex = 0;\n    for (const item of items) {\n        if (predicate(item)) {\n            groupIndex++;\n            result[groupIndex] = [];\n        }\n        else {\n            result[groupIndex].push(item);\n        }\n    }\n    return result;\n}\nexports.splitWhen = splitWhen;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isEnoentCodeError = void 0;\nfunction isEnoentCodeError(error) {\n    return error.code === 'ENOENT';\n}\nexports.isEnoentCodeError = isEnoentCodeError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createDirentFromStats = void 0;\nclass DirentFromStats {\n    constructor(name, stats) {\n        this.name = name;\n        this.isBlockDevice = stats.isBlockDevice.bind(stats);\n        this.isCharacterDevice = stats.isCharacterDevice.bind(stats);\n        this.isDirectory = stats.isDirectory.bind(stats);\n        this.isFIFO = stats.isFIFO.bind(stats);\n        this.isFile = stats.isFile.bind(stats);\n        this.isSocket = stats.isSocket.bind(stats);\n        this.isSymbolicLink = stats.isSymbolicLink.bind(stats);\n    }\n}\nfunction createDirentFromStats(name, stats) {\n    return new DirentFromStats(name, stats);\n}\nexports.createDirentFromStats = createDirentFromStats;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.string = exports.stream = exports.pattern = exports.path = exports.fs = exports.errno = exports.array = void 0;\nconst array = require(\"./array\");\nexports.array = array;\nconst errno = require(\"./errno\");\nexports.errno = errno;\nconst fs = require(\"./fs\");\nexports.fs = fs;\nconst path = require(\"./path\");\nexports.path = path;\nconst pattern = require(\"./pattern\");\nexports.pattern = pattern;\nconst stream = require(\"./stream\");\nexports.stream = stream;\nconst string = require(\"./string\");\nexports.string = string;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeLeadingDotSegment = exports.escape = exports.makeAbsolute = exports.unixify = void 0;\nconst path = require(\"path\");\nconst LEADING_DOT_SEGMENT_CHARACTERS_COUNT = 2; // ./ or .\\\\\nconst UNESCAPED_GLOB_SYMBOLS_RE = /(\\\\?)([()*?[\\]{|}]|^!|[!+@](?=\\())/g;\n/**\n * Designed to work only with simple paths: `dir\\\\file`.\n */\nfunction unixify(filepath) {\n    return filepath.replace(/\\\\/g, '/');\n}\nexports.unixify = unixify;\nfunction makeAbsolute(cwd, filepath) {\n    return path.resolve(cwd, filepath);\n}\nexports.makeAbsolute = makeAbsolute;\nfunction escape(pattern) {\n    return pattern.replace(UNESCAPED_GLOB_SYMBOLS_RE, '\\\\$2');\n}\nexports.escape = escape;\nfunction removeLeadingDotSegment(entry) {\n    // We do not use `startsWith` because this is 10x slower than current implementation for some cases.\n    // eslint-disable-next-line @typescript-eslint/prefer-string-starts-ends-with\n    if (entry.charAt(0) === '.') {\n        const secondCharactery = entry.charAt(1);\n        if (secondCharactery === '/' || secondCharactery === '\\\\') {\n            return entry.slice(LEADING_DOT_SEGMENT_CHARACTERS_COUNT);\n        }\n    }\n    return entry;\n}\nexports.removeLeadingDotSegment = removeLeadingDotSegment;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.matchAny = exports.convertPatternsToRe = exports.makeRe = exports.getPatternParts = exports.expandBraceExpansion = exports.expandPatternsWithBraceExpansion = exports.isAffectDepthOfReadingPattern = exports.endsWithSlashGlobStar = exports.hasGlobStar = exports.getBaseDirectory = exports.isPatternRelatedToParentDirectory = exports.getPatternsOutsideCurrentDirectory = exports.getPatternsInsideCurrentDirectory = exports.getPositivePatterns = exports.getNegativePatterns = exports.isPositivePattern = exports.isNegativePattern = exports.convertToNegativePattern = exports.convertToPositivePattern = exports.isDynamicPattern = exports.isStaticPattern = void 0;\nconst path = require(\"path\");\nconst globParent = require(\"glob-parent\");\nconst micromatch = require(\"micromatch\");\nconst GLOBSTAR = '**';\nconst ESCAPE_SYMBOL = '\\\\';\nconst COMMON_GLOB_SYMBOLS_RE = /[*?]|^!/;\nconst REGEX_CHARACTER_CLASS_SYMBOLS_RE = /\\[[^[]*]/;\nconst REGEX_GROUP_SYMBOLS_RE = /(?:^|[^!*+?@])\\([^(]*\\|[^|]*\\)/;\nconst GLOB_EXTENSION_SYMBOLS_RE = /[!*+?@]\\([^(]*\\)/;\nconst BRACE_EXPANSION_SEPARATORS_RE = /,|\\.\\./;\nfunction isStaticPattern(pattern, options = {}) {\n    return !isDynamicPattern(pattern, options);\n}\nexports.isStaticPattern = isStaticPattern;\nfunction isDynamicPattern(pattern, options = {}) {\n    /**\n     * A special case with an empty string is necessary for matching patterns that start with a forward slash.\n     * An empty string cannot be a dynamic pattern.\n     * For example, the pattern `/lib/*` will be spread into parts: '', 'lib', '*'.\n     */\n    if (pattern === '') {\n        return false;\n    }\n    /**\n     * When the `caseSensitiveMatch` option is disabled, all patterns must be marked as dynamic, because we cannot check\n     * filepath directly (without read directory).\n     */\n    if (options.caseSensitiveMatch === false || pattern.includes(ESCAPE_SYMBOL)) {\n        return true;\n    }\n    if (COMMON_GLOB_SYMBOLS_RE.test(pattern) || REGEX_CHARACTER_CLASS_SYMBOLS_RE.test(pattern) || REGEX_GROUP_SYMBOLS_RE.test(pattern)) {\n        return true;\n    }\n    if (options.extglob !== false && GLOB_EXTENSION_SYMBOLS_RE.test(pattern)) {\n        return true;\n    }\n    if (options.braceExpansion !== false && hasBraceExpansion(pattern)) {\n        return true;\n    }\n    return false;\n}\nexports.isDynamicPattern = isDynamicPattern;\nfunction hasBraceExpansion(pattern) {\n    const openingBraceIndex = pattern.indexOf('{');\n    if (openingBraceIndex === -1) {\n        return false;\n    }\n    const closingBraceIndex = pattern.indexOf('}', openingBraceIndex + 1);\n    if (closingBraceIndex === -1) {\n        return false;\n    }\n    const braceContent = pattern.slice(openingBraceIndex, closingBraceIndex);\n    return BRACE_EXPANSION_SEPARATORS_RE.test(braceContent);\n}\nfunction convertToPositivePattern(pattern) {\n    return isNegativePattern(pattern) ? pattern.slice(1) : pattern;\n}\nexports.convertToPositivePattern = convertToPositivePattern;\nfunction convertToNegativePattern(pattern) {\n    return '!' + pattern;\n}\nexports.convertToNegativePattern = convertToNegativePattern;\nfunction isNegativePattern(pattern) {\n    return pattern.startsWith('!') && pattern[1] !== '(';\n}\nexports.isNegativePattern = isNegativePattern;\nfunction isPositivePattern(pattern) {\n    return !isNegativePattern(pattern);\n}\nexports.isPositivePattern = isPositivePattern;\nfunction getNegativePatterns(patterns) {\n    return patterns.filter(isNegativePattern);\n}\nexports.getNegativePatterns = getNegativePatterns;\nfunction getPositivePatterns(patterns) {\n    return patterns.filter(isPositivePattern);\n}\nexports.getPositivePatterns = getPositivePatterns;\n/**\n * Returns patterns that can be applied inside the current directory.\n *\n * @example\n * // ['./*', '*', 'a/*']\n * getPatternsInsideCurrentDirectory(['./*', '*', 'a/*', '../*', './../*'])\n */\nfunction getPatternsInsideCurrentDirectory(patterns) {\n    return patterns.filter((pattern) => !isPatternRelatedToParentDirectory(pattern));\n}\nexports.getPatternsInsideCurrentDirectory = getPatternsInsideCurrentDirectory;\n/**\n * Returns patterns to be expanded relative to (outside) the current directory.\n *\n * @example\n * // ['../*', './../*']\n * getPatternsInsideCurrentDirectory(['./*', '*', 'a/*', '../*', './../*'])\n */\nfunction getPatternsOutsideCurrentDirectory(patterns) {\n    return patterns.filter(isPatternRelatedToParentDirectory);\n}\nexports.getPatternsOutsideCurrentDirectory = getPatternsOutsideCurrentDirectory;\nfunction isPatternRelatedToParentDirectory(pattern) {\n    return pattern.startsWith('..') || pattern.startsWith('./..');\n}\nexports.isPatternRelatedToParentDirectory = isPatternRelatedToParentDirectory;\nfunction getBaseDirectory(pattern) {\n    return globParent(pattern, { flipBackslashes: false });\n}\nexports.getBaseDirectory = getBaseDirectory;\nfunction hasGlobStar(pattern) {\n    return pattern.includes(GLOBSTAR);\n}\nexports.hasGlobStar = hasGlobStar;\nfunction endsWithSlashGlobStar(pattern) {\n    return pattern.endsWith('/' + GLOBSTAR);\n}\nexports.endsWithSlashGlobStar = endsWithSlashGlobStar;\nfunction isAffectDepthOfReadingPattern(pattern) {\n    const basename = path.basename(pattern);\n    return endsWithSlashGlobStar(pattern) || isStaticPattern(basename);\n}\nexports.isAffectDepthOfReadingPattern = isAffectDepthOfReadingPattern;\nfunction expandPatternsWithBraceExpansion(patterns) {\n    return patterns.reduce((collection, pattern) => {\n        return collection.concat(expandBraceExpansion(pattern));\n    }, []);\n}\nexports.expandPatternsWithBraceExpansion = expandPatternsWithBraceExpansion;\nfunction expandBraceExpansion(pattern) {\n    return micromatch.braces(pattern, {\n        expand: true,\n        nodupes: true\n    });\n}\nexports.expandBraceExpansion = expandBraceExpansion;\nfunction getPatternParts(pattern, options) {\n    let { parts } = micromatch.scan(pattern, Object.assign(Object.assign({}, options), { parts: true }));\n    /**\n     * The scan method returns an empty array in some cases.\n     * See micromatch/picomatch#58 for more details.\n     */\n    if (parts.length === 0) {\n        parts = [pattern];\n    }\n    /**\n     * The scan method does not return an empty part for the pattern with a forward slash.\n     * This is another part of micromatch/picomatch#58.\n     */\n    if (parts[0].startsWith('/')) {\n        parts[0] = parts[0].slice(1);\n        parts.unshift('');\n    }\n    return parts;\n}\nexports.getPatternParts = getPatternParts;\nfunction makeRe(pattern, options) {\n    return micromatch.makeRe(pattern, options);\n}\nexports.makeRe = makeRe;\nfunction convertPatternsToRe(patterns, options) {\n    return patterns.map((pattern) => makeRe(pattern, options));\n}\nexports.convertPatternsToRe = convertPatternsToRe;\nfunction matchAny(entry, patternsRe) {\n    return patternsRe.some((patternRe) => patternRe.test(entry));\n}\nexports.matchAny = matchAny;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.merge = void 0;\nconst merge2 = require(\"merge2\");\nfunction merge(streams) {\n    const mergedStream = merge2(streams);\n    streams.forEach((stream) => {\n        stream.once('error', (error) => mergedStream.emit('error', error));\n    });\n    mergedStream.once('close', () => propagateCloseEventToSources(streams));\n    mergedStream.once('end', () => propagateCloseEventToSources(streams));\n    return mergedStream;\n}\nexports.merge = merge;\nfunction propagateCloseEventToSources(streams) {\n    streams.forEach((stream) => stream.emit('close'));\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isEmpty = exports.isString = void 0;\nfunction isString(input) {\n    return typeof input === 'string';\n}\nexports.isString = isString;\nfunction isEmpty(input) {\n    return input === '';\n}\nexports.isEmpty = isEmpty;\n","'use strict'\n\n/* eslint-disable no-var */\n\nvar reusify = require('reusify')\n\nfunction fastqueue (context, worker, concurrency) {\n  if (typeof context === 'function') {\n    concurrency = worker\n    worker = context\n    context = null\n  }\n\n  if (concurrency < 1) {\n    throw new Error('fastqueue concurrency must be greater than 1')\n  }\n\n  var cache = reusify(Task)\n  var queueHead = null\n  var queueTail = null\n  var _running = 0\n  var errorHandler = null\n\n  var self = {\n    push: push,\n    drain: noop,\n    saturated: noop,\n    pause: pause,\n    paused: false,\n    concurrency: concurrency,\n    running: running,\n    resume: resume,\n    idle: idle,\n    length: length,\n    getQueue: getQueue,\n    unshift: unshift,\n    empty: noop,\n    kill: kill,\n    killAndDrain: killAndDrain,\n    error: error\n  }\n\n  return self\n\n  function running () {\n    return _running\n  }\n\n  function pause () {\n    self.paused = true\n  }\n\n  function length () {\n    var current = queueHead\n    var counter = 0\n\n    while (current) {\n      current = current.next\n      counter++\n    }\n\n    return counter\n  }\n\n  function getQueue () {\n    var current = queueHead\n    var tasks = []\n\n    while (current) {\n      tasks.push(current.value)\n      current = current.next\n    }\n\n    return tasks\n  }\n\n  function resume () {\n    if (!self.paused) return\n    self.paused = false\n    for (var i = 0; i < self.concurrency; i++) {\n      _running++\n      release()\n    }\n  }\n\n  function idle () {\n    return _running === 0 && self.length() === 0\n  }\n\n  function push (value, done) {\n    var current = cache.get()\n\n    current.context = context\n    current.release = release\n    current.value = value\n    current.callback = done || noop\n    current.errorHandler = errorHandler\n\n    if (_running === self.concurrency || self.paused) {\n      if (queueTail) {\n        queueTail.next = current\n        queueTail = current\n      } else {\n        queueHead = current\n        queueTail = current\n        self.saturated()\n      }\n    } else {\n      _running++\n      worker.call(context, current.value, current.worked)\n    }\n  }\n\n  function unshift (value, done) {\n    var current = cache.get()\n\n    current.context = context\n    current.release = release\n    current.value = value\n    current.callback = done || noop\n\n    if (_running === self.concurrency || self.paused) {\n      if (queueHead) {\n        current.next = queueHead\n        queueHead = current\n      } else {\n        queueHead = current\n        queueTail = current\n        self.saturated()\n      }\n    } else {\n      _running++\n      worker.call(context, current.value, current.worked)\n    }\n  }\n\n  function release (holder) {\n    if (holder) {\n      cache.release(holder)\n    }\n    var next = queueHead\n    if (next) {\n      if (!self.paused) {\n        if (queueTail === queueHead) {\n          queueTail = null\n        }\n        queueHead = next.next\n        next.next = null\n        worker.call(context, next.value, next.worked)\n        if (queueTail === null) {\n          self.empty()\n        }\n      } else {\n        _running--\n      }\n    } else if (--_running === 0) {\n      self.drain()\n    }\n  }\n\n  function kill () {\n    queueHead = null\n    queueTail = null\n    self.drain = noop\n  }\n\n  function killAndDrain () {\n    queueHead = null\n    queueTail = null\n    self.drain()\n    self.drain = noop\n  }\n\n  function error (handler) {\n    errorHandler = handler\n  }\n}\n\nfunction noop () {}\n\nfunction Task () {\n  this.value = null\n  this.callback = noop\n  this.next = null\n  this.release = noop\n  this.context = null\n  this.errorHandler = null\n\n  var self = this\n\n  this.worked = function worked (err, result) {\n    var callback = self.callback\n    var errorHandler = self.errorHandler\n    var val = self.value\n    self.value = null\n    self.callback = noop\n    if (self.errorHandler) {\n      errorHandler(err, val)\n    }\n    callback.call(self.context, err, result)\n    self.release(self)\n  }\n}\n\nfunction queueAsPromised (context, worker, concurrency) {\n  if (typeof context === 'function') {\n    concurrency = worker\n    worker = context\n    context = null\n  }\n\n  function asyncWrapper (arg, cb) {\n    worker.call(this, arg)\n      .then(function (res) {\n        cb(null, res)\n      }, cb)\n  }\n\n  var queue = fastqueue(context, asyncWrapper, concurrency)\n\n  var pushCb = queue.push\n  var unshiftCb = queue.unshift\n\n  queue.push = push\n  queue.unshift = unshift\n  queue.drained = drained\n\n  return queue\n\n  function push (value) {\n    var p = new Promise(function (resolve, reject) {\n      pushCb(value, function (err, result) {\n        if (err) {\n          reject(err)\n          return\n        }\n        resolve(result)\n      })\n    })\n\n    // Let's fork the promise chain to\n    // make the error bubble up to the user but\n    // not lead to a unhandledRejection\n    p.catch(noop)\n\n    return p\n  }\n\n  function unshift (value) {\n    var p = new Promise(function (resolve, reject) {\n      unshiftCb(value, function (err, result) {\n        if (err) {\n          reject(err)\n          return\n        }\n        resolve(result)\n      })\n    })\n\n    // Let's fork the promise chain to\n    // make the error bubble up to the user but\n    // not lead to a unhandledRejection\n    p.catch(noop)\n\n    return p\n  }\n\n  function drained () {\n    var previousDrain = queue.drain\n\n    var p = new Promise(function (resolve) {\n      queue.drain = function () {\n        previousDrain()\n        resolve()\n      }\n    })\n\n    return p\n  }\n}\n\nmodule.exports = fastqueue\nmodule.exports.promise = queueAsPromised\n","/*!\n * fill-range <https://github.com/jonschlinkert/fill-range>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nconst util = require('util');\nconst toRegexRange = require('to-regex-range');\n\nconst isObject = val => val !== null && typeof val === 'object' && !Array.isArray(val);\n\nconst transform = toNumber => {\n  return value => toNumber === true ? Number(value) : String(value);\n};\n\nconst isValidValue = value => {\n  return typeof value === 'number' || (typeof value === 'string' && value !== '');\n};\n\nconst isNumber = num => Number.isInteger(+num);\n\nconst zeros = input => {\n  let value = `${input}`;\n  let index = -1;\n  if (value[0] === '-') value = value.slice(1);\n  if (value === '0') return false;\n  while (value[++index] === '0');\n  return index > 0;\n};\n\nconst stringify = (start, end, options) => {\n  if (typeof start === 'string' || typeof end === 'string') {\n    return true;\n  }\n  return options.stringify === true;\n};\n\nconst pad = (input, maxLength, toNumber) => {\n  if (maxLength > 0) {\n    let dash = input[0] === '-' ? '-' : '';\n    if (dash) input = input.slice(1);\n    input = (dash + input.padStart(dash ? maxLength - 1 : maxLength, '0'));\n  }\n  if (toNumber === false) {\n    return String(input);\n  }\n  return input;\n};\n\nconst toMaxLen = (input, maxLength) => {\n  let negative = input[0] === '-' ? '-' : '';\n  if (negative) {\n    input = input.slice(1);\n    maxLength--;\n  }\n  while (input.length < maxLength) input = '0' + input;\n  return negative ? ('-' + input) : input;\n};\n\nconst toSequence = (parts, options) => {\n  parts.negatives.sort((a, b) => a < b ? -1 : a > b ? 1 : 0);\n  parts.positives.sort((a, b) => a < b ? -1 : a > b ? 1 : 0);\n\n  let prefix = options.capture ? '' : '?:';\n  let positives = '';\n  let negatives = '';\n  let result;\n\n  if (parts.positives.length) {\n    positives = parts.positives.join('|');\n  }\n\n  if (parts.negatives.length) {\n    negatives = `-(${prefix}${parts.negatives.join('|')})`;\n  }\n\n  if (positives && negatives) {\n    result = `${positives}|${negatives}`;\n  } else {\n    result = positives || negatives;\n  }\n\n  if (options.wrap) {\n    return `(${prefix}${result})`;\n  }\n\n  return result;\n};\n\nconst toRange = (a, b, isNumbers, options) => {\n  if (isNumbers) {\n    return toRegexRange(a, b, { wrap: false, ...options });\n  }\n\n  let start = String.fromCharCode(a);\n  if (a === b) return start;\n\n  let stop = String.fromCharCode(b);\n  return `[${start}-${stop}]`;\n};\n\nconst toRegex = (start, end, options) => {\n  if (Array.isArray(start)) {\n    let wrap = options.wrap === true;\n    let prefix = options.capture ? '' : '?:';\n    return wrap ? `(${prefix}${start.join('|')})` : start.join('|');\n  }\n  return toRegexRange(start, end, options);\n};\n\nconst rangeError = (...args) => {\n  return new RangeError('Invalid range arguments: ' + util.inspect(...args));\n};\n\nconst invalidRange = (start, end, options) => {\n  if (options.strictRanges === true) throw rangeError([start, end]);\n  return [];\n};\n\nconst invalidStep = (step, options) => {\n  if (options.strictRanges === true) {\n    throw new TypeError(`Expected step \"${step}\" to be a number`);\n  }\n  return [];\n};\n\nconst fillNumbers = (start, end, step = 1, options = {}) => {\n  let a = Number(start);\n  let b = Number(end);\n\n  if (!Number.isInteger(a) || !Number.isInteger(b)) {\n    if (options.strictRanges === true) throw rangeError([start, end]);\n    return [];\n  }\n\n  // fix negative zero\n  if (a === 0) a = 0;\n  if (b === 0) b = 0;\n\n  let descending = a > b;\n  let startString = String(start);\n  let endString = String(end);\n  let stepString = String(step);\n  step = Math.max(Math.abs(step), 1);\n\n  let padded = zeros(startString) || zeros(endString) || zeros(stepString);\n  let maxLen = padded ? Math.max(startString.length, endString.length, stepString.length) : 0;\n  let toNumber = padded === false && stringify(start, end, options) === false;\n  let format = options.transform || transform(toNumber);\n\n  if (options.toRegex && step === 1) {\n    return toRange(toMaxLen(start, maxLen), toMaxLen(end, maxLen), true, options);\n  }\n\n  let parts = { negatives: [], positives: [] };\n  let push = num => parts[num < 0 ? 'negatives' : 'positives'].push(Math.abs(num));\n  let range = [];\n  let index = 0;\n\n  while (descending ? a >= b : a <= b) {\n    if (options.toRegex === true && step > 1) {\n      push(a);\n    } else {\n      range.push(pad(format(a, index), maxLen, toNumber));\n    }\n    a = descending ? a - step : a + step;\n    index++;\n  }\n\n  if (options.toRegex === true) {\n    return step > 1\n      ? toSequence(parts, options)\n      : toRegex(range, null, { wrap: false, ...options });\n  }\n\n  return range;\n};\n\nconst fillLetters = (start, end, step = 1, options = {}) => {\n  if ((!isNumber(start) && start.length > 1) || (!isNumber(end) && end.length > 1)) {\n    return invalidRange(start, end, options);\n  }\n\n\n  let format = options.transform || (val => String.fromCharCode(val));\n  let a = `${start}`.charCodeAt(0);\n  let b = `${end}`.charCodeAt(0);\n\n  let descending = a > b;\n  let min = Math.min(a, b);\n  let max = Math.max(a, b);\n\n  if (options.toRegex && step === 1) {\n    return toRange(min, max, false, options);\n  }\n\n  let range = [];\n  let index = 0;\n\n  while (descending ? a >= b : a <= b) {\n    range.push(format(a, index));\n    a = descending ? a - step : a + step;\n    index++;\n  }\n\n  if (options.toRegex === true) {\n    return toRegex(range, null, { wrap: false, options });\n  }\n\n  return range;\n};\n\nconst fill = (start, end, step, options = {}) => {\n  if (end == null && isValidValue(start)) {\n    return [start];\n  }\n\n  if (!isValidValue(start) || !isValidValue(end)) {\n    return invalidRange(start, end, options);\n  }\n\n  if (typeof step === 'function') {\n    return fill(start, end, 1, { transform: step });\n  }\n\n  if (isObject(step)) {\n    return fill(start, end, 0, step);\n  }\n\n  let opts = { ...options };\n  if (opts.capture === true) opts.wrap = true;\n  step = step || opts.step || 1;\n\n  if (!isNumber(step)) {\n    if (step != null && !isObject(step)) return invalidStep(step, opts);\n    return fill(start, end, 1, step);\n  }\n\n  if (isNumber(start) && isNumber(end)) {\n    return fillNumbers(start, end, step, opts);\n  }\n\n  return fillLetters(start, end, Math.max(Math.abs(step), 1), opts);\n};\n\nmodule.exports = fill;\n","'use strict';\n\nvar isGlob = require('is-glob');\nvar pathPosixDirname = require('path').posix.dirname;\nvar isWin32 = require('os').platform() === 'win32';\n\nvar slash = '/';\nvar backslash = /\\\\/g;\nvar enclosure = /[\\{\\[].*[\\}\\]]$/;\nvar globby = /(^|[^\\\\])([\\{\\[]|\\([^\\)]+$)/;\nvar escaped = /\\\\([\\!\\*\\?\\|\\[\\]\\(\\)\\{\\}])/g;\n\n/**\n * @param {string} str\n * @param {Object} opts\n * @param {boolean} [opts.flipBackslashes=true]\n * @returns {string}\n */\nmodule.exports = function globParent(str, opts) {\n  var options = Object.assign({ flipBackslashes: true }, opts);\n\n  // flip windows path separators\n  if (options.flipBackslashes && isWin32 && str.indexOf(slash) < 0) {\n    str = str.replace(backslash, slash);\n  }\n\n  // special case for strings ending in enclosure containing path separator\n  if (enclosure.test(str)) {\n    str += slash;\n  }\n\n  // preserves full path in case of trailing path separator\n  str += 'a';\n\n  // remove path parts that are globby\n  do {\n    str = pathPosixDirname(str);\n  } while (isGlob(str) || globby.test(str));\n\n  // remove escape chars and return result\n  return str.replace(escaped, '$1');\n};\n","/*!\n * is-extglob <https://github.com/jonschlinkert/is-extglob>\n *\n * Copyright (c) 2014-2016, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\nmodule.exports = function isExtglob(str) {\n  if (typeof str !== 'string' || str === '') {\n    return false;\n  }\n\n  var match;\n  while ((match = /(\\\\).|([@?!+*]\\(.*\\))/g.exec(str))) {\n    if (match[2]) return true;\n    str = str.slice(match.index + match[0].length);\n  }\n\n  return false;\n};\n","/*!\n * is-glob <https://github.com/jonschlinkert/is-glob>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nvar isExtglob = require('is-extglob');\nvar chars = { '{': '}', '(': ')', '[': ']'};\nvar strictCheck = function(str) {\n  if (str[0] === '!') {\n    return true;\n  }\n  var index = 0;\n  var pipeIndex = -2;\n  var closeSquareIndex = -2;\n  var closeCurlyIndex = -2;\n  var closeParenIndex = -2;\n  var backSlashIndex = -2;\n  while (index < str.length) {\n    if (str[index] === '*') {\n      return true;\n    }\n\n    if (str[index + 1] === '?' && /[\\].+)]/.test(str[index])) {\n      return true;\n    }\n\n    if (closeSquareIndex !== -1 && str[index] === '[' && str[index + 1] !== ']') {\n      if (closeSquareIndex < index) {\n        closeSquareIndex = str.indexOf(']', index);\n      }\n      if (closeSquareIndex > index) {\n        if (backSlashIndex === -1 || backSlashIndex > closeSquareIndex) {\n          return true;\n        }\n        backSlashIndex = str.indexOf('\\\\', index);\n        if (backSlashIndex === -1 || backSlashIndex > closeSquareIndex) {\n          return true;\n        }\n      }\n    }\n\n    if (closeCurlyIndex !== -1 && str[index] === '{' && str[index + 1] !== '}') {\n      closeCurlyIndex = str.indexOf('}', index);\n      if (closeCurlyIndex > index) {\n        backSlashIndex = str.indexOf('\\\\', index);\n        if (backSlashIndex === -1 || backSlashIndex > closeCurlyIndex) {\n          return true;\n        }\n      }\n    }\n\n    if (closeParenIndex !== -1 && str[index] === '(' && str[index + 1] === '?' && /[:!=]/.test(str[index + 2]) && str[index + 3] !== ')') {\n      closeParenIndex = str.indexOf(')', index);\n      if (closeParenIndex > index) {\n        backSlashIndex = str.indexOf('\\\\', index);\n        if (backSlashIndex === -1 || backSlashIndex > closeParenIndex) {\n          return true;\n        }\n      }\n    }\n\n    if (pipeIndex !== -1 && str[index] === '(' && str[index + 1] !== '|') {\n      if (pipeIndex < index) {\n        pipeIndex = str.indexOf('|', index);\n      }\n      if (pipeIndex !== -1 && str[pipeIndex + 1] !== ')') {\n        closeParenIndex = str.indexOf(')', pipeIndex);\n        if (closeParenIndex > pipeIndex) {\n          backSlashIndex = str.indexOf('\\\\', pipeIndex);\n          if (backSlashIndex === -1 || backSlashIndex > closeParenIndex) {\n            return true;\n          }\n        }\n      }\n    }\n\n    if (str[index] === '\\\\') {\n      var open = str[index + 1];\n      index += 2;\n      var close = chars[open];\n\n      if (close) {\n        var n = str.indexOf(close, index);\n        if (n !== -1) {\n          index = n + 1;\n        }\n      }\n\n      if (str[index] === '!') {\n        return true;\n      }\n    } else {\n      index++;\n    }\n  }\n  return false;\n};\n\nvar relaxedCheck = function(str) {\n  if (str[0] === '!') {\n    return true;\n  }\n  var index = 0;\n  while (index < str.length) {\n    if (/[*?{}()[\\]]/.test(str[index])) {\n      return true;\n    }\n\n    if (str[index] === '\\\\') {\n      var open = str[index + 1];\n      index += 2;\n      var close = chars[open];\n\n      if (close) {\n        var n = str.indexOf(close, index);\n        if (n !== -1) {\n          index = n + 1;\n        }\n      }\n\n      if (str[index] === '!') {\n        return true;\n      }\n    } else {\n      index++;\n    }\n  }\n  return false;\n};\n\nmodule.exports = function isGlob(str, options) {\n  if (typeof str !== 'string' || str === '') {\n    return false;\n  }\n\n  if (isExtglob(str)) {\n    return true;\n  }\n\n  var check = strictCheck;\n\n  // optionally relax check\n  if (options && options.strict === false) {\n    check = relaxedCheck;\n  }\n\n  return check(str);\n};\n","/*!\n * is-number <https://github.com/jonschlinkert/is-number>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function(num) {\n  if (typeof num === 'number') {\n    return num - num === 0;\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isFinite ? Number.isFinite(+num) : isFinite(+num);\n  }\n  return false;\n};\n","'use strict'\n/*\n * merge2\n * https://github.com/teambition/merge2\n *\n * Copyright (c) 2014-2020 Teambition\n * Licensed under the MIT license.\n */\nconst Stream = require('stream')\nconst PassThrough = Stream.PassThrough\nconst slice = Array.prototype.slice\n\nmodule.exports = merge2\n\nfunction merge2 () {\n  const streamsQueue = []\n  const args = slice.call(arguments)\n  let merging = false\n  let options = args[args.length - 1]\n\n  if (options && !Array.isArray(options) && options.pipe == null) {\n    args.pop()\n  } else {\n    options = {}\n  }\n\n  const doEnd = options.end !== false\n  const doPipeError = options.pipeError === true\n  if (options.objectMode == null) {\n    options.objectMode = true\n  }\n  if (options.highWaterMark == null) {\n    options.highWaterMark = 64 * 1024\n  }\n  const mergedStream = PassThrough(options)\n\n  function addStream () {\n    for (let i = 0, len = arguments.length; i < len; i++) {\n      streamsQueue.push(pauseStreams(arguments[i], options))\n    }\n    mergeStream()\n    return this\n  }\n\n  function mergeStream () {\n    if (merging) {\n      return\n    }\n    merging = true\n\n    let streams = streamsQueue.shift()\n    if (!streams) {\n      process.nextTick(endStream)\n      return\n    }\n    if (!Array.isArray(streams)) {\n      streams = [streams]\n    }\n\n    let pipesCount = streams.length + 1\n\n    function next () {\n      if (--pipesCount > 0) {\n        return\n      }\n      merging = false\n      mergeStream()\n    }\n\n    function pipe (stream) {\n      function onend () {\n        stream.removeListener('merge2UnpipeEnd', onend)\n        stream.removeListener('end', onend)\n        if (doPipeError) {\n          stream.removeListener('error', onerror)\n        }\n        next()\n      }\n      function onerror (err) {\n        mergedStream.emit('error', err)\n      }\n      // skip ended stream\n      if (stream._readableState.endEmitted) {\n        return next()\n      }\n\n      stream.on('merge2UnpipeEnd', onend)\n      stream.on('end', onend)\n\n      if (doPipeError) {\n        stream.on('error', onerror)\n      }\n\n      stream.pipe(mergedStream, { end: false })\n      // compatible for old stream\n      stream.resume()\n    }\n\n    for (let i = 0; i < streams.length; i++) {\n      pipe(streams[i])\n    }\n\n    next()\n  }\n\n  function endStream () {\n    merging = false\n    // emit 'queueDrain' when all streams merged.\n    mergedStream.emit('queueDrain')\n    if (doEnd) {\n      mergedStream.end()\n    }\n  }\n\n  mergedStream.setMaxListeners(0)\n  mergedStream.add = addStream\n  mergedStream.on('unpipe', function (stream) {\n    stream.emit('merge2UnpipeEnd')\n  })\n\n  if (args.length) {\n    addStream.apply(null, args)\n  }\n  return mergedStream\n}\n\n// check and pause streams for pipe.\nfunction pauseStreams (streams, options) {\n  if (!Array.isArray(streams)) {\n    // Backwards-compat with old-style streams\n    if (!streams._readableState && streams.pipe) {\n      streams = streams.pipe(PassThrough(options))\n    }\n    if (!streams._readableState || !streams.pause || !streams.pipe) {\n      throw new Error('Only readable stream can be merged.')\n    }\n    streams.pause()\n  } else {\n    for (let i = 0, len = streams.length; i < len; i++) {\n      streams[i] = pauseStreams(streams[i], options)\n    }\n  }\n  return streams\n}\n","'use strict';\n\nconst util = require('util');\nconst braces = require('braces');\nconst picomatch = require('picomatch');\nconst utils = require('picomatch/lib/utils');\nconst isEmptyString = val => val === '' || val === './';\n\n/**\n * Returns an array of strings that match one or more glob patterns.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm(list, patterns[, options]);\n *\n * console.log(mm(['a.js', 'a.txt'], ['*.js']));\n * //=> [ 'a.js' ]\n * ```\n * @param {String|Array<string>} `list` List of strings to match.\n * @param {String|Array<string>} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `options` See available [options](#options)\n * @return {Array} Returns an array of matches\n * @summary false\n * @api public\n */\n\nconst micromatch = (list, patterns, options) => {\n  patterns = [].concat(patterns);\n  list = [].concat(list);\n\n  let omit = new Set();\n  let keep = new Set();\n  let items = new Set();\n  let negatives = 0;\n\n  let onResult = state => {\n    items.add(state.output);\n    if (options && options.onResult) {\n      options.onResult(state);\n    }\n  };\n\n  for (let i = 0; i < patterns.length; i++) {\n    let isMatch = picomatch(String(patterns[i]), { ...options, onResult }, true);\n    let negated = isMatch.state.negated || isMatch.state.negatedExtglob;\n    if (negated) negatives++;\n\n    for (let item of list) {\n      let matched = isMatch(item, true);\n\n      let match = negated ? !matched.isMatch : matched.isMatch;\n      if (!match) continue;\n\n      if (negated) {\n        omit.add(matched.output);\n      } else {\n        omit.delete(matched.output);\n        keep.add(matched.output);\n      }\n    }\n  }\n\n  let result = negatives === patterns.length ? [...items] : [...keep];\n  let matches = result.filter(item => !omit.has(item));\n\n  if (options && matches.length === 0) {\n    if (options.failglob === true) {\n      throw new Error(`No matches found for \"${patterns.join(', ')}\"`);\n    }\n\n    if (options.nonull === true || options.nullglob === true) {\n      return options.unescape ? patterns.map(p => p.replace(/\\\\/g, '')) : patterns;\n    }\n  }\n\n  return matches;\n};\n\n/**\n * Backwards compatibility\n */\n\nmicromatch.match = micromatch;\n\n/**\n * Returns a matcher function from the given glob `pattern` and `options`.\n * The returned function takes a string to match as its only argument and returns\n * true if the string is a match.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.matcher(pattern[, options]);\n *\n * const isMatch = mm.matcher('*.!(*a)');\n * console.log(isMatch('a.a')); //=> false\n * console.log(isMatch('a.b')); //=> true\n * ```\n * @param {String} `pattern` Glob pattern\n * @param {Object} `options`\n * @return {Function} Returns a matcher function.\n * @api public\n */\n\nmicromatch.matcher = (pattern, options) => picomatch(pattern, options);\n\n/**\n * Returns true if **any** of the given glob `patterns` match the specified `string`.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.isMatch(string, patterns[, options]);\n *\n * console.log(mm.isMatch('a.a', ['b.*', '*.a'])); //=> true\n * console.log(mm.isMatch('a.a', 'b.*')); //=> false\n * ```\n * @param {String} `str` The string to test.\n * @param {String|Array} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `[options]` See available [options](#options).\n * @return {Boolean} Returns true if any patterns match `str`\n * @api public\n */\n\nmicromatch.isMatch = (str, patterns, options) => picomatch(patterns, options)(str);\n\n/**\n * Backwards compatibility\n */\n\nmicromatch.any = micromatch.isMatch;\n\n/**\n * Returns a list of strings that _**do not match any**_ of the given `patterns`.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.not(list, patterns[, options]);\n *\n * console.log(mm.not(['a.a', 'b.b', 'c.c'], '*.a'));\n * //=> ['b.b', 'c.c']\n * ```\n * @param {Array} `list` Array of strings to match.\n * @param {String|Array} `patterns` One or more glob pattern to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Array} Returns an array of strings that **do not match** the given patterns.\n * @api public\n */\n\nmicromatch.not = (list, patterns, options = {}) => {\n  patterns = [].concat(patterns).map(String);\n  let result = new Set();\n  let items = [];\n\n  let onResult = state => {\n    if (options.onResult) options.onResult(state);\n    items.push(state.output);\n  };\n\n  let matches = micromatch(list, patterns, { ...options, onResult });\n\n  for (let item of items) {\n    if (!matches.includes(item)) {\n      result.add(item);\n    }\n  }\n  return [...result];\n};\n\n/**\n * Returns true if the given `string` contains the given pattern. Similar\n * to [.isMatch](#isMatch) but the pattern can match any part of the string.\n *\n * ```js\n * var mm = require('micromatch');\n * // mm.contains(string, pattern[, options]);\n *\n * console.log(mm.contains('aa/bb/cc', '*b'));\n * //=> true\n * console.log(mm.contains('aa/bb/cc', '*d'));\n * //=> false\n * ```\n * @param {String} `str` The string to match.\n * @param {String|Array} `patterns` Glob pattern to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Boolean} Returns true if any of the patterns matches any part of `str`.\n * @api public\n */\n\nmicromatch.contains = (str, pattern, options) => {\n  if (typeof str !== 'string') {\n    throw new TypeError(`Expected a string: \"${util.inspect(str)}\"`);\n  }\n\n  if (Array.isArray(pattern)) {\n    return pattern.some(p => micromatch.contains(str, p, options));\n  }\n\n  if (typeof pattern === 'string') {\n    if (isEmptyString(str) || isEmptyString(pattern)) {\n      return false;\n    }\n\n    if (str.includes(pattern) || (str.startsWith('./') && str.slice(2).includes(pattern))) {\n      return true;\n    }\n  }\n\n  return micromatch.isMatch(str, pattern, { ...options, contains: true });\n};\n\n/**\n * Filter the keys of the given object with the given `glob` pattern\n * and `options`. Does not attempt to match nested keys. If you need this feature,\n * use [glob-object][] instead.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.matchKeys(object, patterns[, options]);\n *\n * const obj = { aa: 'a', ab: 'b', ac: 'c' };\n * console.log(mm.matchKeys(obj, '*b'));\n * //=> { ab: 'b' }\n * ```\n * @param {Object} `object` The object with keys to filter.\n * @param {String|Array} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Object} Returns an object with only keys that match the given patterns.\n * @api public\n */\n\nmicromatch.matchKeys = (obj, patterns, options) => {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('Expected the first argument to be an object');\n  }\n  let keys = micromatch(Object.keys(obj), patterns, options);\n  let res = {};\n  for (let key of keys) res[key] = obj[key];\n  return res;\n};\n\n/**\n * Returns true if some of the strings in the given `list` match any of the given glob `patterns`.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.some(list, patterns[, options]);\n *\n * console.log(mm.some(['foo.js', 'bar.js'], ['*.js', '!foo.js']));\n * // true\n * console.log(mm.some(['foo.js'], ['*.js', '!foo.js']));\n * // false\n * ```\n * @param {String|Array} `list` The string or array of strings to test. Returns as soon as the first match is found.\n * @param {String|Array} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Boolean} Returns true if any `patterns` matches any of the strings in `list`\n * @api public\n */\n\nmicromatch.some = (list, patterns, options) => {\n  let items = [].concat(list);\n\n  for (let pattern of [].concat(patterns)) {\n    let isMatch = picomatch(String(pattern), options);\n    if (items.some(item => isMatch(item))) {\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Returns true if every string in the given `list` matches\n * any of the given glob `patterns`.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.every(list, patterns[, options]);\n *\n * console.log(mm.every('foo.js', ['foo.js']));\n * // true\n * console.log(mm.every(['foo.js', 'bar.js'], ['*.js']));\n * // true\n * console.log(mm.every(['foo.js', 'bar.js'], ['*.js', '!foo.js']));\n * // false\n * console.log(mm.every(['foo.js'], ['*.js', '!foo.js']));\n * // false\n * ```\n * @param {String|Array} `list` The string or array of strings to test.\n * @param {String|Array} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Boolean} Returns true if all `patterns` matches all of the strings in `list`\n * @api public\n */\n\nmicromatch.every = (list, patterns, options) => {\n  let items = [].concat(list);\n\n  for (let pattern of [].concat(patterns)) {\n    let isMatch = picomatch(String(pattern), options);\n    if (!items.every(item => isMatch(item))) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Returns true if **all** of the given `patterns` match\n * the specified string.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.all(string, patterns[, options]);\n *\n * console.log(mm.all('foo.js', ['foo.js']));\n * // true\n *\n * console.log(mm.all('foo.js', ['*.js', '!foo.js']));\n * // false\n *\n * console.log(mm.all('foo.js', ['*.js', 'foo.js']));\n * // true\n *\n * console.log(mm.all('foo.js', ['*.js', 'f*', '*o*', '*o.js']));\n * // true\n * ```\n * @param {String|Array} `str` The string to test.\n * @param {String|Array} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Boolean} Returns true if any patterns match `str`\n * @api public\n */\n\nmicromatch.all = (str, patterns, options) => {\n  if (typeof str !== 'string') {\n    throw new TypeError(`Expected a string: \"${util.inspect(str)}\"`);\n  }\n\n  return [].concat(patterns).every(p => picomatch(p, options)(str));\n};\n\n/**\n * Returns an array of matches captured by `pattern` in `string, or `null` if the pattern did not match.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.capture(pattern, string[, options]);\n *\n * console.log(mm.capture('test/*.js', 'test/foo.js'));\n * //=> ['foo']\n * console.log(mm.capture('test/*.js', 'foo/bar.css'));\n * //=> null\n * ```\n * @param {String} `glob` Glob pattern to use for matching.\n * @param {String} `input` String to match\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Array|null} Returns an array of captures if the input matches the glob pattern, otherwise `null`.\n * @api public\n */\n\nmicromatch.capture = (glob, input, options) => {\n  let posix = utils.isWindows(options);\n  let regex = picomatch.makeRe(String(glob), { ...options, capture: true });\n  let match = regex.exec(posix ? utils.toPosixSlashes(input) : input);\n\n  if (match) {\n    return match.slice(1).map(v => v === void 0 ? '' : v);\n  }\n};\n\n/**\n * Create a regular expression from the given glob `pattern`.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.makeRe(pattern[, options]);\n *\n * console.log(mm.makeRe('*.js'));\n * //=> /^(?:(\\.[\\\\\\/])?(?!\\.)(?=.)[^\\/]*?\\.js)$/\n * ```\n * @param {String} `pattern` A glob pattern to convert to regex.\n * @param {Object} `options`\n * @return {RegExp} Returns a regex created from the given pattern.\n * @api public\n */\n\nmicromatch.makeRe = (...args) => picomatch.makeRe(...args);\n\n/**\n * Scan a glob pattern to separate the pattern into segments. Used\n * by the [split](#split) method.\n *\n * ```js\n * const mm = require('micromatch');\n * const state = mm.scan(pattern[, options]);\n * ```\n * @param {String} `pattern`\n * @param {Object} `options`\n * @return {Object} Returns an object with\n * @api public\n */\n\nmicromatch.scan = (...args) => picomatch.scan(...args);\n\n/**\n * Parse a glob pattern to create the source string for a regular\n * expression.\n *\n * ```js\n * const mm = require('micromatch');\n * const state = mm(pattern[, options]);\n * ```\n * @param {String} `glob`\n * @param {Object} `options`\n * @return {Object} Returns an object with useful properties and output to be used as regex source string.\n * @api public\n */\n\nmicromatch.parse = (patterns, options) => {\n  let res = [];\n  for (let pattern of [].concat(patterns || [])) {\n    for (let str of braces(String(pattern), options)) {\n      res.push(picomatch.parse(str, options));\n    }\n  }\n  return res;\n};\n\n/**\n * Process the given brace `pattern`.\n *\n * ```js\n * const { braces } = require('micromatch');\n * console.log(braces('foo/{a,b,c}/bar'));\n * //=> [ 'foo/(a|b|c)/bar' ]\n *\n * console.log(braces('foo/{a,b,c}/bar', { expand: true }));\n * //=> [ 'foo/a/bar', 'foo/b/bar', 'foo/c/bar' ]\n * ```\n * @param {String} `pattern` String with brace pattern to process.\n * @param {Object} `options` Any [options](#options) to change how expansion is performed. See the [braces][] library for all available options.\n * @return {Array}\n * @api public\n */\n\nmicromatch.braces = (pattern, options) => {\n  if (typeof pattern !== 'string') throw new TypeError('Expected a string');\n  if ((options && options.nobrace === true) || !/\\{.*\\}/.test(pattern)) {\n    return [pattern];\n  }\n  return braces(pattern, options);\n};\n\n/**\n * Expand braces\n */\n\nmicromatch.braceExpand = (pattern, options) => {\n  if (typeof pattern !== 'string') throw new TypeError('Expected a string');\n  return micromatch.braces(pattern, { ...options, expand: true });\n};\n\n/**\n * Expose micromatch\n */\n\nmodule.exports = micromatch;\n","'use strict';\n\nmodule.exports = require('./lib/picomatch');\n","'use strict';\n\nconst path = require('path');\nconst WIN_SLASH = '\\\\\\\\/';\nconst WIN_NO_SLASH = `[^${WIN_SLASH}]`;\n\n/**\n * Posix glob regex\n */\n\nconst DOT_LITERAL = '\\\\.';\nconst PLUS_LITERAL = '\\\\+';\nconst QMARK_LITERAL = '\\\\?';\nconst SLASH_LITERAL = '\\\\/';\nconst ONE_CHAR = '(?=.)';\nconst QMARK = '[^/]';\nconst END_ANCHOR = `(?:${SLASH_LITERAL}|$)`;\nconst START_ANCHOR = `(?:^|${SLASH_LITERAL})`;\nconst DOTS_SLASH = `${DOT_LITERAL}{1,2}${END_ANCHOR}`;\nconst NO_DOT = `(?!${DOT_LITERAL})`;\nconst NO_DOTS = `(?!${START_ANCHOR}${DOTS_SLASH})`;\nconst NO_DOT_SLASH = `(?!${DOT_LITERAL}{0,1}${END_ANCHOR})`;\nconst NO_DOTS_SLASH = `(?!${DOTS_SLASH})`;\nconst QMARK_NO_DOT = `[^.${SLASH_LITERAL}]`;\nconst STAR = `${QMARK}*?`;\n\nconst POSIX_CHARS = {\n  DOT_LITERAL,\n  PLUS_LITERAL,\n  QMARK_LITERAL,\n  SLASH_LITERAL,\n  ONE_CHAR,\n  QMARK,\n  END_ANCHOR,\n  DOTS_SLASH,\n  NO_DOT,\n  NO_DOTS,\n  NO_DOT_SLASH,\n  NO_DOTS_SLASH,\n  QMARK_NO_DOT,\n  STAR,\n  START_ANCHOR\n};\n\n/**\n * Windows glob regex\n */\n\nconst WINDOWS_CHARS = {\n  ...POSIX_CHARS,\n\n  SLASH_LITERAL: `[${WIN_SLASH}]`,\n  QMARK: WIN_NO_SLASH,\n  STAR: `${WIN_NO_SLASH}*?`,\n  DOTS_SLASH: `${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$)`,\n  NO_DOT: `(?!${DOT_LITERAL})`,\n  NO_DOTS: `(?!(?:^|[${WIN_SLASH}])${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$))`,\n  NO_DOT_SLASH: `(?!${DOT_LITERAL}{0,1}(?:[${WIN_SLASH}]|$))`,\n  NO_DOTS_SLASH: `(?!${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$))`,\n  QMARK_NO_DOT: `[^.${WIN_SLASH}]`,\n  START_ANCHOR: `(?:^|[${WIN_SLASH}])`,\n  END_ANCHOR: `(?:[${WIN_SLASH}]|$)`\n};\n\n/**\n * POSIX Bracket Regex\n */\n\nconst POSIX_REGEX_SOURCE = {\n  alnum: 'a-zA-Z0-9',\n  alpha: 'a-zA-Z',\n  ascii: '\\\\x00-\\\\x7F',\n  blank: ' \\\\t',\n  cntrl: '\\\\x00-\\\\x1F\\\\x7F',\n  digit: '0-9',\n  graph: '\\\\x21-\\\\x7E',\n  lower: 'a-z',\n  print: '\\\\x20-\\\\x7E ',\n  punct: '\\\\-!\"#$%&\\'()\\\\*+,./:;<=>?@[\\\\]^_`{|}~',\n  space: ' \\\\t\\\\r\\\\n\\\\v\\\\f',\n  upper: 'A-Z',\n  word: 'A-Za-z0-9_',\n  xdigit: 'A-Fa-f0-9'\n};\n\nmodule.exports = {\n  MAX_LENGTH: 1024 * 64,\n  POSIX_REGEX_SOURCE,\n\n  // regular expressions\n  REGEX_BACKSLASH: /\\\\(?![*+?^${}(|)[\\]])/g,\n  REGEX_NON_SPECIAL_CHARS: /^[^@![\\].,$*+?^{}()|\\\\/]+/,\n  REGEX_SPECIAL_CHARS: /[-*+?.^${}(|)[\\]]/,\n  REGEX_SPECIAL_CHARS_BACKREF: /(\\\\?)((\\W)(\\3*))/g,\n  REGEX_SPECIAL_CHARS_GLOBAL: /([-*+?.^${}(|)[\\]])/g,\n  REGEX_REMOVE_BACKSLASH: /(?:\\[.*?[^\\\\]\\]|\\\\(?=.))/g,\n\n  // Replace globs with equivalent patterns to reduce parsing time.\n  REPLACEMENTS: {\n    '***': '*',\n    '**/**': '**',\n    '**/**/**': '**'\n  },\n\n  // Digits\n  CHAR_0: 48, /* 0 */\n  CHAR_9: 57, /* 9 */\n\n  // Alphabet chars.\n  CHAR_UPPERCASE_A: 65, /* A */\n  CHAR_LOWERCASE_A: 97, /* a */\n  CHAR_UPPERCASE_Z: 90, /* Z */\n  CHAR_LOWERCASE_Z: 122, /* z */\n\n  CHAR_LEFT_PARENTHESES: 40, /* ( */\n  CHAR_RIGHT_PARENTHESES: 41, /* ) */\n\n  CHAR_ASTERISK: 42, /* * */\n\n  // Non-alphabetic chars.\n  CHAR_AMPERSAND: 38, /* & */\n  CHAR_AT: 64, /* @ */\n  CHAR_BACKWARD_SLASH: 92, /* \\ */\n  CHAR_CARRIAGE_RETURN: 13, /* \\r */\n  CHAR_CIRCUMFLEX_ACCENT: 94, /* ^ */\n  CHAR_COLON: 58, /* : */\n  CHAR_COMMA: 44, /* , */\n  CHAR_DOT: 46, /* . */\n  CHAR_DOUBLE_QUOTE: 34, /* \" */\n  CHAR_EQUAL: 61, /* = */\n  CHAR_EXCLAMATION_MARK: 33, /* ! */\n  CHAR_FORM_FEED: 12, /* \\f */\n  CHAR_FORWARD_SLASH: 47, /* / */\n  CHAR_GRAVE_ACCENT: 96, /* ` */\n  CHAR_HASH: 35, /* # */\n  CHAR_HYPHEN_MINUS: 45, /* - */\n  CHAR_LEFT_ANGLE_BRACKET: 60, /* < */\n  CHAR_LEFT_CURLY_BRACE: 123, /* { */\n  CHAR_LEFT_SQUARE_BRACKET: 91, /* [ */\n  CHAR_LINE_FEED: 10, /* \\n */\n  CHAR_NO_BREAK_SPACE: 160, /* \\u00A0 */\n  CHAR_PERCENT: 37, /* % */\n  CHAR_PLUS: 43, /* + */\n  CHAR_QUESTION_MARK: 63, /* ? */\n  CHAR_RIGHT_ANGLE_BRACKET: 62, /* > */\n  CHAR_RIGHT_CURLY_BRACE: 125, /* } */\n  CHAR_RIGHT_SQUARE_BRACKET: 93, /* ] */\n  CHAR_SEMICOLON: 59, /* ; */\n  CHAR_SINGLE_QUOTE: 39, /* ' */\n  CHAR_SPACE: 32, /*   */\n  CHAR_TAB: 9, /* \\t */\n  CHAR_UNDERSCORE: 95, /* _ */\n  CHAR_VERTICAL_LINE: 124, /* | */\n  CHAR_ZERO_WIDTH_NOBREAK_SPACE: 65279, /* \\uFEFF */\n\n  SEP: path.sep,\n\n  /**\n   * Create EXTGLOB_CHARS\n   */\n\n  extglobChars(chars) {\n    return {\n      '!': { type: 'negate', open: '(?:(?!(?:', close: `))${chars.STAR})` },\n      '?': { type: 'qmark', open: '(?:', close: ')?' },\n      '+': { type: 'plus', open: '(?:', close: ')+' },\n      '*': { type: 'star', open: '(?:', close: ')*' },\n      '@': { type: 'at', open: '(?:', close: ')' }\n    };\n  },\n\n  /**\n   * Create GLOB_CHARS\n   */\n\n  globChars(win32) {\n    return win32 === true ? WINDOWS_CHARS : POSIX_CHARS;\n  }\n};\n","'use strict';\n\nconst constants = require('./constants');\nconst utils = require('./utils');\n\n/**\n * Constants\n */\n\nconst {\n  MAX_LENGTH,\n  POSIX_REGEX_SOURCE,\n  REGEX_NON_SPECIAL_CHARS,\n  REGEX_SPECIAL_CHARS_BACKREF,\n  REPLACEMENTS\n} = constants;\n\n/**\n * Helpers\n */\n\nconst expandRange = (args, options) => {\n  if (typeof options.expandRange === 'function') {\n    return options.expandRange(...args, options);\n  }\n\n  args.sort();\n  const value = `[${args.join('-')}]`;\n\n  try {\n    /* eslint-disable-next-line no-new */\n    new RegExp(value);\n  } catch (ex) {\n    return args.map(v => utils.escapeRegex(v)).join('..');\n  }\n\n  return value;\n};\n\n/**\n * Create the message for a syntax error\n */\n\nconst syntaxError = (type, char) => {\n  return `Missing ${type}: \"${char}\" - use \"\\\\\\\\${char}\" to match literal characters`;\n};\n\n/**\n * Parse the given input string.\n * @param {String} input\n * @param {Object} options\n * @return {Object}\n */\n\nconst parse = (input, options) => {\n  if (typeof input !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  input = REPLACEMENTS[input] || input;\n\n  const opts = { ...options };\n  const max = typeof opts.maxLength === 'number' ? Math.min(MAX_LENGTH, opts.maxLength) : MAX_LENGTH;\n\n  let len = input.length;\n  if (len > max) {\n    throw new SyntaxError(`Input length: ${len}, exceeds maximum allowed length: ${max}`);\n  }\n\n  const bos = { type: 'bos', value: '', output: opts.prepend || '' };\n  const tokens = [bos];\n\n  const capture = opts.capture ? '' : '?:';\n  const win32 = utils.isWindows(options);\n\n  // create constants based on platform, for windows or posix\n  const PLATFORM_CHARS = constants.globChars(win32);\n  const EXTGLOB_CHARS = constants.extglobChars(PLATFORM_CHARS);\n\n  const {\n    DOT_LITERAL,\n    PLUS_LITERAL,\n    SLASH_LITERAL,\n    ONE_CHAR,\n    DOTS_SLASH,\n    NO_DOT,\n    NO_DOT_SLASH,\n    NO_DOTS_SLASH,\n    QMARK,\n    QMARK_NO_DOT,\n    STAR,\n    START_ANCHOR\n  } = PLATFORM_CHARS;\n\n  const globstar = opts => {\n    return `(${capture}(?:(?!${START_ANCHOR}${opts.dot ? DOTS_SLASH : DOT_LITERAL}).)*?)`;\n  };\n\n  const nodot = opts.dot ? '' : NO_DOT;\n  const qmarkNoDot = opts.dot ? QMARK : QMARK_NO_DOT;\n  let star = opts.bash === true ? globstar(opts) : STAR;\n\n  if (opts.capture) {\n    star = `(${star})`;\n  }\n\n  // minimatch options support\n  if (typeof opts.noext === 'boolean') {\n    opts.noextglob = opts.noext;\n  }\n\n  const state = {\n    input,\n    index: -1,\n    start: 0,\n    dot: opts.dot === true,\n    consumed: '',\n    output: '',\n    prefix: '',\n    backtrack: false,\n    negated: false,\n    brackets: 0,\n    braces: 0,\n    parens: 0,\n    quotes: 0,\n    globstar: false,\n    tokens\n  };\n\n  input = utils.removePrefix(input, state);\n  len = input.length;\n\n  const extglobs = [];\n  const braces = [];\n  const stack = [];\n  let prev = bos;\n  let value;\n\n  /**\n   * Tokenizing helpers\n   */\n\n  const eos = () => state.index === len - 1;\n  const peek = state.peek = (n = 1) => input[state.index + n];\n  const advance = state.advance = () => input[++state.index] || '';\n  const remaining = () => input.slice(state.index + 1);\n  const consume = (value = '', num = 0) => {\n    state.consumed += value;\n    state.index += num;\n  };\n\n  const append = token => {\n    state.output += token.output != null ? token.output : token.value;\n    consume(token.value);\n  };\n\n  const negate = () => {\n    let count = 1;\n\n    while (peek() === '!' && (peek(2) !== '(' || peek(3) === '?')) {\n      advance();\n      state.start++;\n      count++;\n    }\n\n    if (count % 2 === 0) {\n      return false;\n    }\n\n    state.negated = true;\n    state.start++;\n    return true;\n  };\n\n  const increment = type => {\n    state[type]++;\n    stack.push(type);\n  };\n\n  const decrement = type => {\n    state[type]--;\n    stack.pop();\n  };\n\n  /**\n   * Push tokens onto the tokens array. This helper speeds up\n   * tokenizing by 1) helping us avoid backtracking as much as possible,\n   * and 2) helping us avoid creating extra tokens when consecutive\n   * characters are plain text. This improves performance and simplifies\n   * lookbehinds.\n   */\n\n  const push = tok => {\n    if (prev.type === 'globstar') {\n      const isBrace = state.braces > 0 && (tok.type === 'comma' || tok.type === 'brace');\n      const isExtglob = tok.extglob === true || (extglobs.length && (tok.type === 'pipe' || tok.type === 'paren'));\n\n      if (tok.type !== 'slash' && tok.type !== 'paren' && !isBrace && !isExtglob) {\n        state.output = state.output.slice(0, -prev.output.length);\n        prev.type = 'star';\n        prev.value = '*';\n        prev.output = star;\n        state.output += prev.output;\n      }\n    }\n\n    if (extglobs.length && tok.type !== 'paren') {\n      extglobs[extglobs.length - 1].inner += tok.value;\n    }\n\n    if (tok.value || tok.output) append(tok);\n    if (prev && prev.type === 'text' && tok.type === 'text') {\n      prev.value += tok.value;\n      prev.output = (prev.output || '') + tok.value;\n      return;\n    }\n\n    tok.prev = prev;\n    tokens.push(tok);\n    prev = tok;\n  };\n\n  const extglobOpen = (type, value) => {\n    const token = { ...EXTGLOB_CHARS[value], conditions: 1, inner: '' };\n\n    token.prev = prev;\n    token.parens = state.parens;\n    token.output = state.output;\n    const output = (opts.capture ? '(' : '') + token.open;\n\n    increment('parens');\n    push({ type, value, output: state.output ? '' : ONE_CHAR });\n    push({ type: 'paren', extglob: true, value: advance(), output });\n    extglobs.push(token);\n  };\n\n  const extglobClose = token => {\n    let output = token.close + (opts.capture ? ')' : '');\n    let rest;\n\n    if (token.type === 'negate') {\n      let extglobStar = star;\n\n      if (token.inner && token.inner.length > 1 && token.inner.includes('/')) {\n        extglobStar = globstar(opts);\n      }\n\n      if (extglobStar !== star || eos() || /^\\)+$/.test(remaining())) {\n        output = token.close = `)$))${extglobStar}`;\n      }\n\n      if (token.inner.includes('*') && (rest = remaining()) && /^\\.[^\\\\/.]+$/.test(rest)) {\n        // Any non-magical string (`.ts`) or even nested expression (`.{ts,tsx}`) can follow after the closing parenthesis.\n        // In this case, we need to parse the string and use it in the output of the original pattern.\n        // Suitable patterns: `/!(*.d).ts`, `/!(*.d).{ts,tsx}`, `**/!(*-dbg).@(js)`.\n        //\n        // Disabling the `fastpaths` option due to a problem with parsing strings as `.ts` in the pattern like `**/!(*.d).ts`.\n        const expression = parse(rest, { ...options, fastpaths: false }).output;\n\n        output = token.close = `)${expression})${extglobStar})`;\n      }\n\n      if (token.prev.type === 'bos') {\n        state.negatedExtglob = true;\n      }\n    }\n\n    push({ type: 'paren', extglob: true, value, output });\n    decrement('parens');\n  };\n\n  /**\n   * Fast paths\n   */\n\n  if (opts.fastpaths !== false && !/(^[*!]|[/()[\\]{}\"])/.test(input)) {\n    let backslashes = false;\n\n    let output = input.replace(REGEX_SPECIAL_CHARS_BACKREF, (m, esc, chars, first, rest, index) => {\n      if (first === '\\\\') {\n        backslashes = true;\n        return m;\n      }\n\n      if (first === '?') {\n        if (esc) {\n          return esc + first + (rest ? QMARK.repeat(rest.length) : '');\n        }\n        if (index === 0) {\n          return qmarkNoDot + (rest ? QMARK.repeat(rest.length) : '');\n        }\n        return QMARK.repeat(chars.length);\n      }\n\n      if (first === '.') {\n        return DOT_LITERAL.repeat(chars.length);\n      }\n\n      if (first === '*') {\n        if (esc) {\n          return esc + first + (rest ? star : '');\n        }\n        return star;\n      }\n      return esc ? m : `\\\\${m}`;\n    });\n\n    if (backslashes === true) {\n      if (opts.unescape === true) {\n        output = output.replace(/\\\\/g, '');\n      } else {\n        output = output.replace(/\\\\+/g, m => {\n          return m.length % 2 === 0 ? '\\\\\\\\' : (m ? '\\\\' : '');\n        });\n      }\n    }\n\n    if (output === input && opts.contains === true) {\n      state.output = input;\n      return state;\n    }\n\n    state.output = utils.wrapOutput(output, state, options);\n    return state;\n  }\n\n  /**\n   * Tokenize input until we reach end-of-string\n   */\n\n  while (!eos()) {\n    value = advance();\n\n    if (value === '\\u0000') {\n      continue;\n    }\n\n    /**\n     * Escaped characters\n     */\n\n    if (value === '\\\\') {\n      const next = peek();\n\n      if (next === '/' && opts.bash !== true) {\n        continue;\n      }\n\n      if (next === '.' || next === ';') {\n        continue;\n      }\n\n      if (!next) {\n        value += '\\\\';\n        push({ type: 'text', value });\n        continue;\n      }\n\n      // collapse slashes to reduce potential for exploits\n      const match = /^\\\\+/.exec(remaining());\n      let slashes = 0;\n\n      if (match && match[0].length > 2) {\n        slashes = match[0].length;\n        state.index += slashes;\n        if (slashes % 2 !== 0) {\n          value += '\\\\';\n        }\n      }\n\n      if (opts.unescape === true) {\n        value = advance();\n      } else {\n        value += advance();\n      }\n\n      if (state.brackets === 0) {\n        push({ type: 'text', value });\n        continue;\n      }\n    }\n\n    /**\n     * If we're inside a regex character class, continue\n     * until we reach the closing bracket.\n     */\n\n    if (state.brackets > 0 && (value !== ']' || prev.value === '[' || prev.value === '[^')) {\n      if (opts.posix !== false && value === ':') {\n        const inner = prev.value.slice(1);\n        if (inner.includes('[')) {\n          prev.posix = true;\n\n          if (inner.includes(':')) {\n            const idx = prev.value.lastIndexOf('[');\n            const pre = prev.value.slice(0, idx);\n            const rest = prev.value.slice(idx + 2);\n            const posix = POSIX_REGEX_SOURCE[rest];\n            if (posix) {\n              prev.value = pre + posix;\n              state.backtrack = true;\n              advance();\n\n              if (!bos.output && tokens.indexOf(prev) === 1) {\n                bos.output = ONE_CHAR;\n              }\n              continue;\n            }\n          }\n        }\n      }\n\n      if ((value === '[' && peek() !== ':') || (value === '-' && peek() === ']')) {\n        value = `\\\\${value}`;\n      }\n\n      if (value === ']' && (prev.value === '[' || prev.value === '[^')) {\n        value = `\\\\${value}`;\n      }\n\n      if (opts.posix === true && value === '!' && prev.value === '[') {\n        value = '^';\n      }\n\n      prev.value += value;\n      append({ value });\n      continue;\n    }\n\n    /**\n     * If we're inside a quoted string, continue\n     * until we reach the closing double quote.\n     */\n\n    if (state.quotes === 1 && value !== '\"') {\n      value = utils.escapeRegex(value);\n      prev.value += value;\n      append({ value });\n      continue;\n    }\n\n    /**\n     * Double quotes\n     */\n\n    if (value === '\"') {\n      state.quotes = state.quotes === 1 ? 0 : 1;\n      if (opts.keepQuotes === true) {\n        push({ type: 'text', value });\n      }\n      continue;\n    }\n\n    /**\n     * Parentheses\n     */\n\n    if (value === '(') {\n      increment('parens');\n      push({ type: 'paren', value });\n      continue;\n    }\n\n    if (value === ')') {\n      if (state.parens === 0 && opts.strictBrackets === true) {\n        throw new SyntaxError(syntaxError('opening', '('));\n      }\n\n      const extglob = extglobs[extglobs.length - 1];\n      if (extglob && state.parens === extglob.parens + 1) {\n        extglobClose(extglobs.pop());\n        continue;\n      }\n\n      push({ type: 'paren', value, output: state.parens ? ')' : '\\\\)' });\n      decrement('parens');\n      continue;\n    }\n\n    /**\n     * Square brackets\n     */\n\n    if (value === '[') {\n      if (opts.nobracket === true || !remaining().includes(']')) {\n        if (opts.nobracket !== true && opts.strictBrackets === true) {\n          throw new SyntaxError(syntaxError('closing', ']'));\n        }\n\n        value = `\\\\${value}`;\n      } else {\n        increment('brackets');\n      }\n\n      push({ type: 'bracket', value });\n      continue;\n    }\n\n    if (value === ']') {\n      if (opts.nobracket === true || (prev && prev.type === 'bracket' && prev.value.length === 1)) {\n        push({ type: 'text', value, output: `\\\\${value}` });\n        continue;\n      }\n\n      if (state.brackets === 0) {\n        if (opts.strictBrackets === true) {\n          throw new SyntaxError(syntaxError('opening', '['));\n        }\n\n        push({ type: 'text', value, output: `\\\\${value}` });\n        continue;\n      }\n\n      decrement('brackets');\n\n      const prevValue = prev.value.slice(1);\n      if (prev.posix !== true && prevValue[0] === '^' && !prevValue.includes('/')) {\n        value = `/${value}`;\n      }\n\n      prev.value += value;\n      append({ value });\n\n      // when literal brackets are explicitly disabled\n      // assume we should match with a regex character class\n      if (opts.literalBrackets === false || utils.hasRegexChars(prevValue)) {\n        continue;\n      }\n\n      const escaped = utils.escapeRegex(prev.value);\n      state.output = state.output.slice(0, -prev.value.length);\n\n      // when literal brackets are explicitly enabled\n      // assume we should escape the brackets to match literal characters\n      if (opts.literalBrackets === true) {\n        state.output += escaped;\n        prev.value = escaped;\n        continue;\n      }\n\n      // when the user specifies nothing, try to match both\n      prev.value = `(${capture}${escaped}|${prev.value})`;\n      state.output += prev.value;\n      continue;\n    }\n\n    /**\n     * Braces\n     */\n\n    if (value === '{' && opts.nobrace !== true) {\n      increment('braces');\n\n      const open = {\n        type: 'brace',\n        value,\n        output: '(',\n        outputIndex: state.output.length,\n        tokensIndex: state.tokens.length\n      };\n\n      braces.push(open);\n      push(open);\n      continue;\n    }\n\n    if (value === '}') {\n      const brace = braces[braces.length - 1];\n\n      if (opts.nobrace === true || !brace) {\n        push({ type: 'text', value, output: value });\n        continue;\n      }\n\n      let output = ')';\n\n      if (brace.dots === true) {\n        const arr = tokens.slice();\n        const range = [];\n\n        for (let i = arr.length - 1; i >= 0; i--) {\n          tokens.pop();\n          if (arr[i].type === 'brace') {\n            break;\n          }\n          if (arr[i].type !== 'dots') {\n            range.unshift(arr[i].value);\n          }\n        }\n\n        output = expandRange(range, opts);\n        state.backtrack = true;\n      }\n\n      if (brace.comma !== true && brace.dots !== true) {\n        const out = state.output.slice(0, brace.outputIndex);\n        const toks = state.tokens.slice(brace.tokensIndex);\n        brace.value = brace.output = '\\\\{';\n        value = output = '\\\\}';\n        state.output = out;\n        for (const t of toks) {\n          state.output += (t.output || t.value);\n        }\n      }\n\n      push({ type: 'brace', value, output });\n      decrement('braces');\n      braces.pop();\n      continue;\n    }\n\n    /**\n     * Pipes\n     */\n\n    if (value === '|') {\n      if (extglobs.length > 0) {\n        extglobs[extglobs.length - 1].conditions++;\n      }\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Commas\n     */\n\n    if (value === ',') {\n      let output = value;\n\n      const brace = braces[braces.length - 1];\n      if (brace && stack[stack.length - 1] === 'braces') {\n        brace.comma = true;\n        output = '|';\n      }\n\n      push({ type: 'comma', value, output });\n      continue;\n    }\n\n    /**\n     * Slashes\n     */\n\n    if (value === '/') {\n      // if the beginning of the glob is \"./\", advance the start\n      // to the current index, and don't add the \"./\" characters\n      // to the state. This greatly simplifies lookbehinds when\n      // checking for BOS characters like \"!\" and \".\" (not \"./\")\n      if (prev.type === 'dot' && state.index === state.start + 1) {\n        state.start = state.index + 1;\n        state.consumed = '';\n        state.output = '';\n        tokens.pop();\n        prev = bos; // reset \"prev\" to the first token\n        continue;\n      }\n\n      push({ type: 'slash', value, output: SLASH_LITERAL });\n      continue;\n    }\n\n    /**\n     * Dots\n     */\n\n    if (value === '.') {\n      if (state.braces > 0 && prev.type === 'dot') {\n        if (prev.value === '.') prev.output = DOT_LITERAL;\n        const brace = braces[braces.length - 1];\n        prev.type = 'dots';\n        prev.output += value;\n        prev.value += value;\n        brace.dots = true;\n        continue;\n      }\n\n      if ((state.braces + state.parens) === 0 && prev.type !== 'bos' && prev.type !== 'slash') {\n        push({ type: 'text', value, output: DOT_LITERAL });\n        continue;\n      }\n\n      push({ type: 'dot', value, output: DOT_LITERAL });\n      continue;\n    }\n\n    /**\n     * Question marks\n     */\n\n    if (value === '?') {\n      const isGroup = prev && prev.value === '(';\n      if (!isGroup && opts.noextglob !== true && peek() === '(' && peek(2) !== '?') {\n        extglobOpen('qmark', value);\n        continue;\n      }\n\n      if (prev && prev.type === 'paren') {\n        const next = peek();\n        let output = value;\n\n        if (next === '<' && !utils.supportsLookbehinds()) {\n          throw new Error('Node.js v10 or higher is required for regex lookbehinds');\n        }\n\n        if ((prev.value === '(' && !/[!=<:]/.test(next)) || (next === '<' && !/<([!=]|\\w+>)/.test(remaining()))) {\n          output = `\\\\${value}`;\n        }\n\n        push({ type: 'text', value, output });\n        continue;\n      }\n\n      if (opts.dot !== true && (prev.type === 'slash' || prev.type === 'bos')) {\n        push({ type: 'qmark', value, output: QMARK_NO_DOT });\n        continue;\n      }\n\n      push({ type: 'qmark', value, output: QMARK });\n      continue;\n    }\n\n    /**\n     * Exclamation\n     */\n\n    if (value === '!') {\n      if (opts.noextglob !== true && peek() === '(') {\n        if (peek(2) !== '?' || !/[!=<:]/.test(peek(3))) {\n          extglobOpen('negate', value);\n          continue;\n        }\n      }\n\n      if (opts.nonegate !== true && state.index === 0) {\n        negate();\n        continue;\n      }\n    }\n\n    /**\n     * Plus\n     */\n\n    if (value === '+') {\n      if (opts.noextglob !== true && peek() === '(' && peek(2) !== '?') {\n        extglobOpen('plus', value);\n        continue;\n      }\n\n      if ((prev && prev.value === '(') || opts.regex === false) {\n        push({ type: 'plus', value, output: PLUS_LITERAL });\n        continue;\n      }\n\n      if ((prev && (prev.type === 'bracket' || prev.type === 'paren' || prev.type === 'brace')) || state.parens > 0) {\n        push({ type: 'plus', value });\n        continue;\n      }\n\n      push({ type: 'plus', value: PLUS_LITERAL });\n      continue;\n    }\n\n    /**\n     * Plain text\n     */\n\n    if (value === '@') {\n      if (opts.noextglob !== true && peek() === '(' && peek(2) !== '?') {\n        push({ type: 'at', extglob: true, value, output: '' });\n        continue;\n      }\n\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Plain text\n     */\n\n    if (value !== '*') {\n      if (value === '$' || value === '^') {\n        value = `\\\\${value}`;\n      }\n\n      const match = REGEX_NON_SPECIAL_CHARS.exec(remaining());\n      if (match) {\n        value += match[0];\n        state.index += match[0].length;\n      }\n\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Stars\n     */\n\n    if (prev && (prev.type === 'globstar' || prev.star === true)) {\n      prev.type = 'star';\n      prev.star = true;\n      prev.value += value;\n      prev.output = star;\n      state.backtrack = true;\n      state.globstar = true;\n      consume(value);\n      continue;\n    }\n\n    let rest = remaining();\n    if (opts.noextglob !== true && /^\\([^?]/.test(rest)) {\n      extglobOpen('star', value);\n      continue;\n    }\n\n    if (prev.type === 'star') {\n      if (opts.noglobstar === true) {\n        consume(value);\n        continue;\n      }\n\n      const prior = prev.prev;\n      const before = prior.prev;\n      const isStart = prior.type === 'slash' || prior.type === 'bos';\n      const afterStar = before && (before.type === 'star' || before.type === 'globstar');\n\n      if (opts.bash === true && (!isStart || (rest[0] && rest[0] !== '/'))) {\n        push({ type: 'star', value, output: '' });\n        continue;\n      }\n\n      const isBrace = state.braces > 0 && (prior.type === 'comma' || prior.type === 'brace');\n      const isExtglob = extglobs.length && (prior.type === 'pipe' || prior.type === 'paren');\n      if (!isStart && prior.type !== 'paren' && !isBrace && !isExtglob) {\n        push({ type: 'star', value, output: '' });\n        continue;\n      }\n\n      // strip consecutive `/**/`\n      while (rest.slice(0, 3) === '/**') {\n        const after = input[state.index + 4];\n        if (after && after !== '/') {\n          break;\n        }\n        rest = rest.slice(3);\n        consume('/**', 3);\n      }\n\n      if (prior.type === 'bos' && eos()) {\n        prev.type = 'globstar';\n        prev.value += value;\n        prev.output = globstar(opts);\n        state.output = prev.output;\n        state.globstar = true;\n        consume(value);\n        continue;\n      }\n\n      if (prior.type === 'slash' && prior.prev.type !== 'bos' && !afterStar && eos()) {\n        state.output = state.output.slice(0, -(prior.output + prev.output).length);\n        prior.output = `(?:${prior.output}`;\n\n        prev.type = 'globstar';\n        prev.output = globstar(opts) + (opts.strictSlashes ? ')' : '|$)');\n        prev.value += value;\n        state.globstar = true;\n        state.output += prior.output + prev.output;\n        consume(value);\n        continue;\n      }\n\n      if (prior.type === 'slash' && prior.prev.type !== 'bos' && rest[0] === '/') {\n        const end = rest[1] !== void 0 ? '|$' : '';\n\n        state.output = state.output.slice(0, -(prior.output + prev.output).length);\n        prior.output = `(?:${prior.output}`;\n\n        prev.type = 'globstar';\n        prev.output = `${globstar(opts)}${SLASH_LITERAL}|${SLASH_LITERAL}${end})`;\n        prev.value += value;\n\n        state.output += prior.output + prev.output;\n        state.globstar = true;\n\n        consume(value + advance());\n\n        push({ type: 'slash', value: '/', output: '' });\n        continue;\n      }\n\n      if (prior.type === 'bos' && rest[0] === '/') {\n        prev.type = 'globstar';\n        prev.value += value;\n        prev.output = `(?:^|${SLASH_LITERAL}|${globstar(opts)}${SLASH_LITERAL})`;\n        state.output = prev.output;\n        state.globstar = true;\n        consume(value + advance());\n        push({ type: 'slash', value: '/', output: '' });\n        continue;\n      }\n\n      // remove single star from output\n      state.output = state.output.slice(0, -prev.output.length);\n\n      // reset previous token to globstar\n      prev.type = 'globstar';\n      prev.output = globstar(opts);\n      prev.value += value;\n\n      // reset output with globstar\n      state.output += prev.output;\n      state.globstar = true;\n      consume(value);\n      continue;\n    }\n\n    const token = { type: 'star', value, output: star };\n\n    if (opts.bash === true) {\n      token.output = '.*?';\n      if (prev.type === 'bos' || prev.type === 'slash') {\n        token.output = nodot + token.output;\n      }\n      push(token);\n      continue;\n    }\n\n    if (prev && (prev.type === 'bracket' || prev.type === 'paren') && opts.regex === true) {\n      token.output = value;\n      push(token);\n      continue;\n    }\n\n    if (state.index === state.start || prev.type === 'slash' || prev.type === 'dot') {\n      if (prev.type === 'dot') {\n        state.output += NO_DOT_SLASH;\n        prev.output += NO_DOT_SLASH;\n\n      } else if (opts.dot === true) {\n        state.output += NO_DOTS_SLASH;\n        prev.output += NO_DOTS_SLASH;\n\n      } else {\n        state.output += nodot;\n        prev.output += nodot;\n      }\n\n      if (peek() !== '*') {\n        state.output += ONE_CHAR;\n        prev.output += ONE_CHAR;\n      }\n    }\n\n    push(token);\n  }\n\n  while (state.brackets > 0) {\n    if (opts.strictBrackets === true) throw new SyntaxError(syntaxError('closing', ']'));\n    state.output = utils.escapeLast(state.output, '[');\n    decrement('brackets');\n  }\n\n  while (state.parens > 0) {\n    if (opts.strictBrackets === true) throw new SyntaxError(syntaxError('closing', ')'));\n    state.output = utils.escapeLast(state.output, '(');\n    decrement('parens');\n  }\n\n  while (state.braces > 0) {\n    if (opts.strictBrackets === true) throw new SyntaxError(syntaxError('closing', '}'));\n    state.output = utils.escapeLast(state.output, '{');\n    decrement('braces');\n  }\n\n  if (opts.strictSlashes !== true && (prev.type === 'star' || prev.type === 'bracket')) {\n    push({ type: 'maybe_slash', value: '', output: `${SLASH_LITERAL}?` });\n  }\n\n  // rebuild the output if we had to backtrack at any point\n  if (state.backtrack === true) {\n    state.output = '';\n\n    for (const token of state.tokens) {\n      state.output += token.output != null ? token.output : token.value;\n\n      if (token.suffix) {\n        state.output += token.suffix;\n      }\n    }\n  }\n\n  return state;\n};\n\n/**\n * Fast paths for creating regular expressions for common glob patterns.\n * This can significantly speed up processing and has very little downside\n * impact when none of the fast paths match.\n */\n\nparse.fastpaths = (input, options) => {\n  const opts = { ...options };\n  const max = typeof opts.maxLength === 'number' ? Math.min(MAX_LENGTH, opts.maxLength) : MAX_LENGTH;\n  const len = input.length;\n  if (len > max) {\n    throw new SyntaxError(`Input length: ${len}, exceeds maximum allowed length: ${max}`);\n  }\n\n  input = REPLACEMENTS[input] || input;\n  const win32 = utils.isWindows(options);\n\n  // create constants based on platform, for windows or posix\n  const {\n    DOT_LITERAL,\n    SLASH_LITERAL,\n    ONE_CHAR,\n    DOTS_SLASH,\n    NO_DOT,\n    NO_DOTS,\n    NO_DOTS_SLASH,\n    STAR,\n    START_ANCHOR\n  } = constants.globChars(win32);\n\n  const nodot = opts.dot ? NO_DOTS : NO_DOT;\n  const slashDot = opts.dot ? NO_DOTS_SLASH : NO_DOT;\n  const capture = opts.capture ? '' : '?:';\n  const state = { negated: false, prefix: '' };\n  let star = opts.bash === true ? '.*?' : STAR;\n\n  if (opts.capture) {\n    star = `(${star})`;\n  }\n\n  const globstar = opts => {\n    if (opts.noglobstar === true) return star;\n    return `(${capture}(?:(?!${START_ANCHOR}${opts.dot ? DOTS_SLASH : DOT_LITERAL}).)*?)`;\n  };\n\n  const create = str => {\n    switch (str) {\n      case '*':\n        return `${nodot}${ONE_CHAR}${star}`;\n\n      case '.*':\n        return `${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      case '*.*':\n        return `${nodot}${star}${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      case '*/*':\n        return `${nodot}${star}${SLASH_LITERAL}${ONE_CHAR}${slashDot}${star}`;\n\n      case '**':\n        return nodot + globstar(opts);\n\n      case '**/*':\n        return `(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${slashDot}${ONE_CHAR}${star}`;\n\n      case '**/*.*':\n        return `(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${slashDot}${star}${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      case '**/.*':\n        return `(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      default: {\n        const match = /^(.*?)\\.(\\w+)$/.exec(str);\n        if (!match) return;\n\n        const source = create(match[1]);\n        if (!source) return;\n\n        return source + DOT_LITERAL + match[2];\n      }\n    }\n  };\n\n  const output = utils.removePrefix(input, state);\n  let source = create(output);\n\n  if (source && opts.strictSlashes !== true) {\n    source += `${SLASH_LITERAL}?`;\n  }\n\n  return source;\n};\n\nmodule.exports = parse;\n","'use strict';\n\nconst path = require('path');\nconst scan = require('./scan');\nconst parse = require('./parse');\nconst utils = require('./utils');\nconst constants = require('./constants');\nconst isObject = val => val && typeof val === 'object' && !Array.isArray(val);\n\n/**\n * Creates a matcher function from one or more glob patterns. The\n * returned function takes a string to match as its first argument,\n * and returns true if the string is a match. The returned matcher\n * function also takes a boolean as the second argument that, when true,\n * returns an object with additional information.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch(glob[, options]);\n *\n * const isMatch = picomatch('*.!(*a)');\n * console.log(isMatch('a.a')); //=> false\n * console.log(isMatch('a.b')); //=> true\n * ```\n * @name picomatch\n * @param {String|Array} `globs` One or more glob patterns.\n * @param {Object=} `options`\n * @return {Function=} Returns a matcher function.\n * @api public\n */\n\nconst picomatch = (glob, options, returnState = false) => {\n  if (Array.isArray(glob)) {\n    const fns = glob.map(input => picomatch(input, options, returnState));\n    const arrayMatcher = str => {\n      for (const isMatch of fns) {\n        const state = isMatch(str);\n        if (state) return state;\n      }\n      return false;\n    };\n    return arrayMatcher;\n  }\n\n  const isState = isObject(glob) && glob.tokens && glob.input;\n\n  if (glob === '' || (typeof glob !== 'string' && !isState)) {\n    throw new TypeError('Expected pattern to be a non-empty string');\n  }\n\n  const opts = options || {};\n  const posix = utils.isWindows(options);\n  const regex = isState\n    ? picomatch.compileRe(glob, options)\n    : picomatch.makeRe(glob, options, false, true);\n\n  const state = regex.state;\n  delete regex.state;\n\n  let isIgnored = () => false;\n  if (opts.ignore) {\n    const ignoreOpts = { ...options, ignore: null, onMatch: null, onResult: null };\n    isIgnored = picomatch(opts.ignore, ignoreOpts, returnState);\n  }\n\n  const matcher = (input, returnObject = false) => {\n    const { isMatch, match, output } = picomatch.test(input, regex, options, { glob, posix });\n    const result = { glob, state, regex, posix, input, output, match, isMatch };\n\n    if (typeof opts.onResult === 'function') {\n      opts.onResult(result);\n    }\n\n    if (isMatch === false) {\n      result.isMatch = false;\n      return returnObject ? result : false;\n    }\n\n    if (isIgnored(input)) {\n      if (typeof opts.onIgnore === 'function') {\n        opts.onIgnore(result);\n      }\n      result.isMatch = false;\n      return returnObject ? result : false;\n    }\n\n    if (typeof opts.onMatch === 'function') {\n      opts.onMatch(result);\n    }\n    return returnObject ? result : true;\n  };\n\n  if (returnState) {\n    matcher.state = state;\n  }\n\n  return matcher;\n};\n\n/**\n * Test `input` with the given `regex`. This is used by the main\n * `picomatch()` function to test the input string.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.test(input, regex[, options]);\n *\n * console.log(picomatch.test('foo/bar', /^(?:([^/]*?)\\/([^/]*?))$/));\n * // { isMatch: true, match: [ 'foo/', 'foo', 'bar' ], output: 'foo/bar' }\n * ```\n * @param {String} `input` String to test.\n * @param {RegExp} `regex`\n * @return {Object} Returns an object with matching info.\n * @api public\n */\n\npicomatch.test = (input, regex, options, { glob, posix } = {}) => {\n  if (typeof input !== 'string') {\n    throw new TypeError('Expected input to be a string');\n  }\n\n  if (input === '') {\n    return { isMatch: false, output: '' };\n  }\n\n  const opts = options || {};\n  const format = opts.format || (posix ? utils.toPosixSlashes : null);\n  let match = input === glob;\n  let output = (match && format) ? format(input) : input;\n\n  if (match === false) {\n    output = format ? format(input) : input;\n    match = output === glob;\n  }\n\n  if (match === false || opts.capture === true) {\n    if (opts.matchBase === true || opts.basename === true) {\n      match = picomatch.matchBase(input, regex, options, posix);\n    } else {\n      match = regex.exec(output);\n    }\n  }\n\n  return { isMatch: Boolean(match), match, output };\n};\n\n/**\n * Match the basename of a filepath.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.matchBase(input, glob[, options]);\n * console.log(picomatch.matchBase('foo/bar.js', '*.js'); // true\n * ```\n * @param {String} `input` String to test.\n * @param {RegExp|String} `glob` Glob pattern or regex created by [.makeRe](#makeRe).\n * @return {Boolean}\n * @api public\n */\n\npicomatch.matchBase = (input, glob, options, posix = utils.isWindows(options)) => {\n  const regex = glob instanceof RegExp ? glob : picomatch.makeRe(glob, options);\n  return regex.test(path.basename(input));\n};\n\n/**\n * Returns true if **any** of the given glob `patterns` match the specified `string`.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.isMatch(string, patterns[, options]);\n *\n * console.log(picomatch.isMatch('a.a', ['b.*', '*.a'])); //=> true\n * console.log(picomatch.isMatch('a.a', 'b.*')); //=> false\n * ```\n * @param {String|Array} str The string to test.\n * @param {String|Array} patterns One or more glob patterns to use for matching.\n * @param {Object} [options] See available [options](#options).\n * @return {Boolean} Returns true if any patterns match `str`\n * @api public\n */\n\npicomatch.isMatch = (str, patterns, options) => picomatch(patterns, options)(str);\n\n/**\n * Parse a glob pattern to create the source string for a regular\n * expression.\n *\n * ```js\n * const picomatch = require('picomatch');\n * const result = picomatch.parse(pattern[, options]);\n * ```\n * @param {String} `pattern`\n * @param {Object} `options`\n * @return {Object} Returns an object with useful properties and output to be used as a regex source string.\n * @api public\n */\n\npicomatch.parse = (pattern, options) => {\n  if (Array.isArray(pattern)) return pattern.map(p => picomatch.parse(p, options));\n  return parse(pattern, { ...options, fastpaths: false });\n};\n\n/**\n * Scan a glob pattern to separate the pattern into segments.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.scan(input[, options]);\n *\n * const result = picomatch.scan('!./foo/*.js');\n * console.log(result);\n * { prefix: '!./',\n *   input: '!./foo/*.js',\n *   start: 3,\n *   base: 'foo',\n *   glob: '*.js',\n *   isBrace: false,\n *   isBracket: false,\n *   isGlob: true,\n *   isExtglob: false,\n *   isGlobstar: false,\n *   negated: true }\n * ```\n * @param {String} `input` Glob pattern to scan.\n * @param {Object} `options`\n * @return {Object} Returns an object with\n * @api public\n */\n\npicomatch.scan = (input, options) => scan(input, options);\n\n/**\n * Compile a regular expression from the `state` object returned by the\n * [parse()](#parse) method.\n *\n * @param {Object} `state`\n * @param {Object} `options`\n * @param {Boolean} `returnOutput` Intended for implementors, this argument allows you to return the raw output from the parser.\n * @param {Boolean} `returnState` Adds the state to a `state` property on the returned regex. Useful for implementors and debugging.\n * @return {RegExp}\n * @api public\n */\n\npicomatch.compileRe = (state, options, returnOutput = false, returnState = false) => {\n  if (returnOutput === true) {\n    return state.output;\n  }\n\n  const opts = options || {};\n  const prepend = opts.contains ? '' : '^';\n  const append = opts.contains ? '' : '$';\n\n  let source = `${prepend}(?:${state.output})${append}`;\n  if (state && state.negated === true) {\n    source = `^(?!${source}).*$`;\n  }\n\n  const regex = picomatch.toRegex(source, options);\n  if (returnState === true) {\n    regex.state = state;\n  }\n\n  return regex;\n};\n\n/**\n * Create a regular expression from a parsed glob pattern.\n *\n * ```js\n * const picomatch = require('picomatch');\n * const state = picomatch.parse('*.js');\n * // picomatch.compileRe(state[, options]);\n *\n * console.log(picomatch.compileRe(state));\n * //=> /^(?:(?!\\.)(?=.)[^/]*?\\.js)$/\n * ```\n * @param {String} `state` The object returned from the `.parse` method.\n * @param {Object} `options`\n * @param {Boolean} `returnOutput` Implementors may use this argument to return the compiled output, instead of a regular expression. This is not exposed on the options to prevent end-users from mutating the result.\n * @param {Boolean} `returnState` Implementors may use this argument to return the state from the parsed glob with the returned regular expression.\n * @return {RegExp} Returns a regex created from the given pattern.\n * @api public\n */\n\npicomatch.makeRe = (input, options = {}, returnOutput = false, returnState = false) => {\n  if (!input || typeof input !== 'string') {\n    throw new TypeError('Expected a non-empty string');\n  }\n\n  let parsed = { negated: false, fastpaths: true };\n\n  if (options.fastpaths !== false && (input[0] === '.' || input[0] === '*')) {\n    parsed.output = parse.fastpaths(input, options);\n  }\n\n  if (!parsed.output) {\n    parsed = parse(input, options);\n  }\n\n  return picomatch.compileRe(parsed, options, returnOutput, returnState);\n};\n\n/**\n * Create a regular expression from the given regex source string.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.toRegex(source[, options]);\n *\n * const { output } = picomatch.parse('*.js');\n * console.log(picomatch.toRegex(output));\n * //=> /^(?:(?!\\.)(?=.)[^/]*?\\.js)$/\n * ```\n * @param {String} `source` Regular expression source string.\n * @param {Object} `options`\n * @return {RegExp}\n * @api public\n */\n\npicomatch.toRegex = (source, options) => {\n  try {\n    const opts = options || {};\n    return new RegExp(source, opts.flags || (opts.nocase ? 'i' : ''));\n  } catch (err) {\n    if (options && options.debug === true) throw err;\n    return /$^/;\n  }\n};\n\n/**\n * Picomatch constants.\n * @return {Object}\n */\n\npicomatch.constants = constants;\n\n/**\n * Expose \"picomatch\"\n */\n\nmodule.exports = picomatch;\n","'use strict';\n\nconst utils = require('./utils');\nconst {\n  CHAR_ASTERISK,             /* * */\n  CHAR_AT,                   /* @ */\n  CHAR_BACKWARD_SLASH,       /* \\ */\n  CHAR_COMMA,                /* , */\n  CHAR_DOT,                  /* . */\n  CHAR_EXCLAMATION_MARK,     /* ! */\n  CHAR_FORWARD_SLASH,        /* / */\n  CHAR_LEFT_CURLY_BRACE,     /* { */\n  CHAR_LEFT_PARENTHESES,     /* ( */\n  CHAR_LEFT_SQUARE_BRACKET,  /* [ */\n  CHAR_PLUS,                 /* + */\n  CHAR_QUESTION_MARK,        /* ? */\n  CHAR_RIGHT_CURLY_BRACE,    /* } */\n  CHAR_RIGHT_PARENTHESES,    /* ) */\n  CHAR_RIGHT_SQUARE_BRACKET  /* ] */\n} = require('./constants');\n\nconst isPathSeparator = code => {\n  return code === CHAR_FORWARD_SLASH || code === CHAR_BACKWARD_SLASH;\n};\n\nconst depth = token => {\n  if (token.isPrefix !== true) {\n    token.depth = token.isGlobstar ? Infinity : 1;\n  }\n};\n\n/**\n * Quickly scans a glob pattern and returns an object with a handful of\n * useful properties, like `isGlob`, `path` (the leading non-glob, if it exists),\n * `glob` (the actual pattern), `negated` (true if the path starts with `!` but not\n * with `!(`) and `negatedExtglob` (true if the path starts with `!(`).\n *\n * ```js\n * const pm = require('picomatch');\n * console.log(pm.scan('foo/bar/*.js'));\n * { isGlob: true, input: 'foo/bar/*.js', base: 'foo/bar', glob: '*.js' }\n * ```\n * @param {String} `str`\n * @param {Object} `options`\n * @return {Object} Returns an object with tokens and regex source string.\n * @api public\n */\n\nconst scan = (input, options) => {\n  const opts = options || {};\n\n  const length = input.length - 1;\n  const scanToEnd = opts.parts === true || opts.scanToEnd === true;\n  const slashes = [];\n  const tokens = [];\n  const parts = [];\n\n  let str = input;\n  let index = -1;\n  let start = 0;\n  let lastIndex = 0;\n  let isBrace = false;\n  let isBracket = false;\n  let isGlob = false;\n  let isExtglob = false;\n  let isGlobstar = false;\n  let braceEscaped = false;\n  let backslashes = false;\n  let negated = false;\n  let negatedExtglob = false;\n  let finished = false;\n  let braces = 0;\n  let prev;\n  let code;\n  let token = { value: '', depth: 0, isGlob: false };\n\n  const eos = () => index >= length;\n  const peek = () => str.charCodeAt(index + 1);\n  const advance = () => {\n    prev = code;\n    return str.charCodeAt(++index);\n  };\n\n  while (index < length) {\n    code = advance();\n    let next;\n\n    if (code === CHAR_BACKWARD_SLASH) {\n      backslashes = token.backslashes = true;\n      code = advance();\n\n      if (code === CHAR_LEFT_CURLY_BRACE) {\n        braceEscaped = true;\n      }\n      continue;\n    }\n\n    if (braceEscaped === true || code === CHAR_LEFT_CURLY_BRACE) {\n      braces++;\n\n      while (eos() !== true && (code = advance())) {\n        if (code === CHAR_BACKWARD_SLASH) {\n          backslashes = token.backslashes = true;\n          advance();\n          continue;\n        }\n\n        if (code === CHAR_LEFT_CURLY_BRACE) {\n          braces++;\n          continue;\n        }\n\n        if (braceEscaped !== true && code === CHAR_DOT && (code = advance()) === CHAR_DOT) {\n          isBrace = token.isBrace = true;\n          isGlob = token.isGlob = true;\n          finished = true;\n\n          if (scanToEnd === true) {\n            continue;\n          }\n\n          break;\n        }\n\n        if (braceEscaped !== true && code === CHAR_COMMA) {\n          isBrace = token.isBrace = true;\n          isGlob = token.isGlob = true;\n          finished = true;\n\n          if (scanToEnd === true) {\n            continue;\n          }\n\n          break;\n        }\n\n        if (code === CHAR_RIGHT_CURLY_BRACE) {\n          braces--;\n\n          if (braces === 0) {\n            braceEscaped = false;\n            isBrace = token.isBrace = true;\n            finished = true;\n            break;\n          }\n        }\n      }\n\n      if (scanToEnd === true) {\n        continue;\n      }\n\n      break;\n    }\n\n    if (code === CHAR_FORWARD_SLASH) {\n      slashes.push(index);\n      tokens.push(token);\n      token = { value: '', depth: 0, isGlob: false };\n\n      if (finished === true) continue;\n      if (prev === CHAR_DOT && index === (start + 1)) {\n        start += 2;\n        continue;\n      }\n\n      lastIndex = index + 1;\n      continue;\n    }\n\n    if (opts.noext !== true) {\n      const isExtglobChar = code === CHAR_PLUS\n        || code === CHAR_AT\n        || code === CHAR_ASTERISK\n        || code === CHAR_QUESTION_MARK\n        || code === CHAR_EXCLAMATION_MARK;\n\n      if (isExtglobChar === true && peek() === CHAR_LEFT_PARENTHESES) {\n        isGlob = token.isGlob = true;\n        isExtglob = token.isExtglob = true;\n        finished = true;\n        if (code === CHAR_EXCLAMATION_MARK && index === start) {\n          negatedExtglob = true;\n        }\n\n        if (scanToEnd === true) {\n          while (eos() !== true && (code = advance())) {\n            if (code === CHAR_BACKWARD_SLASH) {\n              backslashes = token.backslashes = true;\n              code = advance();\n              continue;\n            }\n\n            if (code === CHAR_RIGHT_PARENTHESES) {\n              isGlob = token.isGlob = true;\n              finished = true;\n              break;\n            }\n          }\n          continue;\n        }\n        break;\n      }\n    }\n\n    if (code === CHAR_ASTERISK) {\n      if (prev === CHAR_ASTERISK) isGlobstar = token.isGlobstar = true;\n      isGlob = token.isGlob = true;\n      finished = true;\n\n      if (scanToEnd === true) {\n        continue;\n      }\n      break;\n    }\n\n    if (code === CHAR_QUESTION_MARK) {\n      isGlob = token.isGlob = true;\n      finished = true;\n\n      if (scanToEnd === true) {\n        continue;\n      }\n      break;\n    }\n\n    if (code === CHAR_LEFT_SQUARE_BRACKET) {\n      while (eos() !== true && (next = advance())) {\n        if (next === CHAR_BACKWARD_SLASH) {\n          backslashes = token.backslashes = true;\n          advance();\n          continue;\n        }\n\n        if (next === CHAR_RIGHT_SQUARE_BRACKET) {\n          isBracket = token.isBracket = true;\n          isGlob = token.isGlob = true;\n          finished = true;\n          break;\n        }\n      }\n\n      if (scanToEnd === true) {\n        continue;\n      }\n\n      break;\n    }\n\n    if (opts.nonegate !== true && code === CHAR_EXCLAMATION_MARK && index === start) {\n      negated = token.negated = true;\n      start++;\n      continue;\n    }\n\n    if (opts.noparen !== true && code === CHAR_LEFT_PARENTHESES) {\n      isGlob = token.isGlob = true;\n\n      if (scanToEnd === true) {\n        while (eos() !== true && (code = advance())) {\n          if (code === CHAR_LEFT_PARENTHESES) {\n            backslashes = token.backslashes = true;\n            code = advance();\n            continue;\n          }\n\n          if (code === CHAR_RIGHT_PARENTHESES) {\n            finished = true;\n            break;\n          }\n        }\n        continue;\n      }\n      break;\n    }\n\n    if (isGlob === true) {\n      finished = true;\n\n      if (scanToEnd === true) {\n        continue;\n      }\n\n      break;\n    }\n  }\n\n  if (opts.noext === true) {\n    isExtglob = false;\n    isGlob = false;\n  }\n\n  let base = str;\n  let prefix = '';\n  let glob = '';\n\n  if (start > 0) {\n    prefix = str.slice(0, start);\n    str = str.slice(start);\n    lastIndex -= start;\n  }\n\n  if (base && isGlob === true && lastIndex > 0) {\n    base = str.slice(0, lastIndex);\n    glob = str.slice(lastIndex);\n  } else if (isGlob === true) {\n    base = '';\n    glob = str;\n  } else {\n    base = str;\n  }\n\n  if (base && base !== '' && base !== '/' && base !== str) {\n    if (isPathSeparator(base.charCodeAt(base.length - 1))) {\n      base = base.slice(0, -1);\n    }\n  }\n\n  if (opts.unescape === true) {\n    if (glob) glob = utils.removeBackslashes(glob);\n\n    if (base && backslashes === true) {\n      base = utils.removeBackslashes(base);\n    }\n  }\n\n  const state = {\n    prefix,\n    input,\n    start,\n    base,\n    glob,\n    isBrace,\n    isBracket,\n    isGlob,\n    isExtglob,\n    isGlobstar,\n    negated,\n    negatedExtglob\n  };\n\n  if (opts.tokens === true) {\n    state.maxDepth = 0;\n    if (!isPathSeparator(code)) {\n      tokens.push(token);\n    }\n    state.tokens = tokens;\n  }\n\n  if (opts.parts === true || opts.tokens === true) {\n    let prevIndex;\n\n    for (let idx = 0; idx < slashes.length; idx++) {\n      const n = prevIndex ? prevIndex + 1 : start;\n      const i = slashes[idx];\n      const value = input.slice(n, i);\n      if (opts.tokens) {\n        if (idx === 0 && start !== 0) {\n          tokens[idx].isPrefix = true;\n          tokens[idx].value = prefix;\n        } else {\n          tokens[idx].value = value;\n        }\n        depth(tokens[idx]);\n        state.maxDepth += tokens[idx].depth;\n      }\n      if (idx !== 0 || value !== '') {\n        parts.push(value);\n      }\n      prevIndex = i;\n    }\n\n    if (prevIndex && prevIndex + 1 < input.length) {\n      const value = input.slice(prevIndex + 1);\n      parts.push(value);\n\n      if (opts.tokens) {\n        tokens[tokens.length - 1].value = value;\n        depth(tokens[tokens.length - 1]);\n        state.maxDepth += tokens[tokens.length - 1].depth;\n      }\n    }\n\n    state.slashes = slashes;\n    state.parts = parts;\n  }\n\n  return state;\n};\n\nmodule.exports = scan;\n","'use strict';\n\nconst path = require('path');\nconst win32 = process.platform === 'win32';\nconst {\n  REGEX_BACKSLASH,\n  REGEX_REMOVE_BACKSLASH,\n  REGEX_SPECIAL_CHARS,\n  REGEX_SPECIAL_CHARS_GLOBAL\n} = require('./constants');\n\nexports.isObject = val => val !== null && typeof val === 'object' && !Array.isArray(val);\nexports.hasRegexChars = str => REGEX_SPECIAL_CHARS.test(str);\nexports.isRegexChar = str => str.length === 1 && exports.hasRegexChars(str);\nexports.escapeRegex = str => str.replace(REGEX_SPECIAL_CHARS_GLOBAL, '\\\\$1');\nexports.toPosixSlashes = str => str.replace(REGEX_BACKSLASH, '/');\n\nexports.removeBackslashes = str => {\n  return str.replace(REGEX_REMOVE_BACKSLASH, match => {\n    return match === '\\\\' ? '' : match;\n  });\n};\n\nexports.supportsLookbehinds = () => {\n  const segs = process.version.slice(1).split('.').map(Number);\n  if (segs.length === 3 && segs[0] >= 9 || (segs[0] === 8 && segs[1] >= 10)) {\n    return true;\n  }\n  return false;\n};\n\nexports.isWindows = options => {\n  if (options && typeof options.windows === 'boolean') {\n    return options.windows;\n  }\n  return win32 === true || path.sep === '\\\\';\n};\n\nexports.escapeLast = (input, char, lastIdx) => {\n  const idx = input.lastIndexOf(char, lastIdx);\n  if (idx === -1) return input;\n  if (input[idx - 1] === '\\\\') return exports.escapeLast(input, char, idx - 1);\n  return `${input.slice(0, idx)}\\\\${input.slice(idx)}`;\n};\n\nexports.removePrefix = (input, state = {}) => {\n  let output = input;\n  if (output.startsWith('./')) {\n    output = output.slice(2);\n    state.prefix = './';\n  }\n  return output;\n};\n\nexports.wrapOutput = (input, state = {}, options = {}) => {\n  const prepend = options.contains ? '' : '^';\n  const append = options.contains ? '' : '$';\n\n  let output = `${prepend}(?:${input})${append}`;\n  if (state.negated === true) {\n    output = `(?:^(?!${output}).*$)`;\n  }\n  return output;\n};\n","/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nlet promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask.bind(typeof window !== 'undefined' ? window : global)\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n","'use strict'\n\nfunction reusify (Constructor) {\n  var head = new Constructor()\n  var tail = head\n\n  function get () {\n    var current = head\n\n    if (current.next) {\n      head = current.next\n    } else {\n      head = new Constructor()\n      tail = head\n    }\n\n    current.next = null\n\n    return current\n  }\n\n  function release (obj) {\n    tail.next = obj\n    tail = obj\n  }\n\n  return {\n    get: get,\n    release: release\n  }\n}\n\nmodule.exports = reusify\n","/*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nmodule.exports = runParallel\n\nconst queueMicrotask = require('queue-microtask')\n\nfunction runParallel (tasks, cb) {\n  let results, pending, keys\n  let isSync = true\n\n  if (Array.isArray(tasks)) {\n    results = []\n    pending = tasks.length\n  } else {\n    keys = Object.keys(tasks)\n    results = {}\n    pending = keys.length\n  }\n\n  function done (err) {\n    function end () {\n      if (cb) cb(err, results)\n      cb = null\n    }\n    if (isSync) queueMicrotask(end)\n    else end()\n  }\n\n  function each (i, err, result) {\n    results[i] = result\n    if (--pending === 0 || err) {\n      done(err)\n    }\n  }\n\n  if (!pending) {\n    // empty\n    done(null)\n  } else if (keys) {\n    // object\n    keys.forEach(function (key) {\n      tasks[key](function (err, result) { each(key, err, result) })\n    })\n  } else {\n    // array\n    tasks.forEach(function (task, i) {\n      task(function (err, result) { each(i, err, result) })\n    })\n  }\n\n  isSync = false\n}\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","'use strict'\n\nfunction isFunction (funktion) {\n  return typeof funktion === 'function'\n}\n\n// Default to complaining loudly when things don't go according to plan.\nvar logger = console.error.bind(console)\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty (obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name)\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  })\n}\n\n// Keep initialization idempotent.\nfunction shimmer (options) {\n  if (options && options.logger) {\n    if (!isFunction(options.logger)) logger(\"new logger isn't a function, not replacing\")\n    else logger = options.logger\n  }\n}\n\nfunction wrap (nodule, name, wrapper) {\n  if (!nodule || !nodule[name]) {\n    logger('no original function ' + name + ' to wrap')\n    return\n  }\n\n  if (!wrapper) {\n    logger('no wrapper function')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!isFunction(nodule[name]) || !isFunction(wrapper)) {\n    logger('original object and wrapper must be functions')\n    return\n  }\n\n  var original = nodule[name]\n  var wrapped = wrapper(original, name)\n\n  defineProperty(wrapped, '__original', original)\n  defineProperty(wrapped, '__unwrap', function () {\n    if (nodule[name] === wrapped) defineProperty(nodule, name, original)\n  })\n  defineProperty(wrapped, '__wrapped', true)\n\n  defineProperty(nodule, name, wrapped)\n  return wrapped\n}\n\nfunction massWrap (nodules, names, wrapper) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to wrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      wrap(nodule, name, wrapper)\n    })\n  })\n}\n\nfunction unwrap (nodule, name) {\n  if (!nodule || !nodule[name]) {\n    logger('no function to unwrap.')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!nodule[name].__unwrap) {\n    logger('no original to unwrap to -- has ' + name + ' already been unwrapped?')\n  } else {\n    return nodule[name].__unwrap()\n  }\n}\n\nfunction massUnwrap (nodules, names) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to unwrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      unwrap(nodule, name)\n    })\n  })\n}\n\nshimmer.wrap = wrap\nshimmer.massWrap = massWrap\nshimmer.unwrap = unwrap\nshimmer.massUnwrap = massUnwrap\n\nmodule.exports = shimmer\n","// Copyright 2012 the V8 project authors. All rights reserved.\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n//       notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n//       copyright notice, this list of conditions and the following\n//       disclaimer in the documentation and/or other materials provided\n//       with the distribution.\n//     * Neither the name of Google Inc. nor the names of its\n//       contributors may be used to endorse or promote products derived\n//       from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nfunction FormatErrorString(error) {\n  try {\n    return Error.prototype.toString.call(error);\n  } catch (e) {\n    try {\n      return \"<error: \" + e + \">\";\n    } catch (ee) {\n      return \"<error>\";\n    }\n  }\n}\n\nmodule.exports = function FormatStackTrace(error, frames) {\n  var lines = [];\n  lines.push(FormatErrorString(error));\n  for (var i = 0; i < frames.length; i++) {\n    var frame = frames[i];\n    var line;\n    try {\n      line = frame.toString();\n    } catch (e) {\n      try {\n        line = \"<error: \" + e + \">\";\n      } catch (ee) {\n        // Any code that reaches this point is seriously nasty!\n        line = \"<error>\";\n      }\n    }\n    lines.push(\"    at \" + line);\n  }\n  return lines.join(\"\\n\");\n};\n","// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._stackChain) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._stackChain.version === require('./package.json').version) {\n    module.exports = global._stackChain;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of stack-chain found');\n  }\n}\n// Yay, no other stack-chain copy exists, yet :/\nelse {\n  module.exports = global._stackChain = require('./stack-chain');\n}\n","\n// use a already existing formater or fallback to the default v8 formater\nvar defaultFormater = require('./format.js');\n\n// public define API\nfunction stackChain() {\n  this.extend = new TraceModifier();\n  this.filter = new TraceModifier();\n  this.format = new StackFormater();\n  this.version = require('./package.json').version;\n}\n\n\nvar SHORTCIRCUIT_CALLSITE = false;\nstackChain.prototype.callSite = function collectCallSites(options) {\n  if (!options) options = {};\n\n  // Get CallSites\n  SHORTCIRCUIT_CALLSITE = true;\n  var obj = {};\n  Error.captureStackTrace(obj, collectCallSites);\n  var callSites = obj.stack;\n  SHORTCIRCUIT_CALLSITE = false;\n\n  // Slice\n  callSites = callSites.slice(options.slice || 0);\n\n  // Modify CallSites\n  if (options.extend) callSites = this.extend._modify(obj, callSites);\n  if (options.filter) callSites = this.filter._modify(obj, callSites);\n\n  // Done\n  return callSites;\n};\n\nvar chain = new stackChain();\n\nfunction TraceModifier() {\n  this._modifiers = [];\n}\n\nTraceModifier.prototype._modify = function (error, frames) {\n  for (var i = 0, l = this._modifiers.length; i < l; i++) {\n    frames = this._modifiers[i](error, frames);\n  }\n\n  return frames;\n};\n\nTraceModifier.prototype.attach = function (modifier) {\n  this._modifiers.push(modifier);\n};\n\nTraceModifier.prototype.deattach = function (modifier) {\n  var index = this._modifiers.indexOf(modifier);\n\n  if (index === -1) return false;\n\n  this._modifiers.splice(index, 1);\n  return true;\n};\n\nfunction StackFormater() {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n}\n\nStackFormater.prototype.replace = function (formater) {\n  if (formater) {\n    this._formater = formater;\n  } else {\n    this.restore();\n  }\n};\n\nStackFormater.prototype.restore  = function () {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n};\n\nStackFormater.prototype._backup = function () {\n  this._previous = this._formater;\n};\n\nStackFormater.prototype._roolback = function () {\n  if (this._previous === defaultFormater) {\n    this.replace(undefined);\n  } else {\n    this.replace(this._previous);\n  }\n\n  this._previous = undefined;\n};\n\n\n//\n// Set Error.prepareStackTrace thus allowing stack-chain\n// to take control of the Error().stack formating.\n//\n\n// If there already is a custom stack formater, then set\n// that as the stack-chain formater.\nif (Error.prepareStackTrace) {\n    chain.format.replace(Error.prepareStackTrace);\n}\n\nvar SHORTCIRCUIT_FORMATER = false;\nfunction prepareStackTrace(error, originalFrames) {\n  if (SHORTCIRCUIT_CALLSITE) return originalFrames;\n  if (SHORTCIRCUIT_FORMATER) return defaultFormater(error, originalFrames);\n\n  // Make a loss copy of originalFrames\n  var frames = originalFrames.concat();\n\n  // extend frames\n  frames = chain.extend._modify(error, frames);\n\n  // filter frames\n  frames = chain.filter._modify(error, frames);\n\n  // reduce frames to match Error.stackTraceLimit\n  frames = frames.slice(0, Error.stackTraceLimit);\n\n  // Set the callSite property\n  // But only if it hasn't been explicitly set, otherwise\n  // error.stack would have unintended side effects. Check also for\n  // non-extensible/sealed objects, such as those from Google's Closure Library\n  if (Object.isExtensible(error) &&\n      (Object.getOwnPropertyDescriptor(error, \"callSite\") === undefined)) {\n    error.callSite = {\n      original: originalFrames,\n      mutated: frames\n    };\n  }\n\n  // format frames\n  SHORTCIRCUIT_FORMATER = true;\n  var format = chain.format._formater(error, frames);\n  SHORTCIRCUIT_FORMATER = false;\n\n  return format;\n}\n\n// Replace the v8 stack trace creator\nObject.defineProperty(Error, 'prepareStackTrace', {\n  'get': function () {\n    return prepareStackTrace;\n  },\n\n  'set': function (formater) {\n    // If formater is prepareStackTrace it means that someone ran\n    // var old = Error.prepareStackTrace;\n    // Error.prepareStackTrace = custom\n    // new Error().stack\n    // Error.prepareStackTrace = old;\n    // The effect of this, should be that the old behaviour is restored.\n    if (formater === prepareStackTrace) {\n      chain.format._roolback();\n    }\n    // Error.prepareStackTrace was set, this means that someone is\n    // trying to take control of the Error().stack format. Make\n    // them belive they succeeded by setting them up as the stack-chain\n    // formater.\n    else {\n      chain.format._backup();\n      chain.format.replace(formater);\n    }\n  }\n});\n\n//\n// Manage call site storeage\n//\nfunction callSiteGetter() {\n  // calculate call site object\n  this.stack;\n\n  // return call site object\n  return this.callSite;\n}\n\nObject.defineProperty(Error.prototype, 'callSite', {\n  'get': callSiteGetter,\n\n  'set': function (frames) {\n    // In case callSite was set before [[getter]], just set\n    // the value\n    Object.defineProperty(this, 'callSite', {\n        value: frames,\n        writable: true,\n        configurable: true\n    });\n  },\n\n  configurable: true\n});\n\nmodule.exports = chain;\n","/*!\n * to-regex-range <https://github.com/micromatch/to-regex-range>\n *\n * Copyright (c) 2015-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nconst isNumber = require('is-number');\n\nconst toRegexRange = (min, max, options) => {\n  if (isNumber(min) === false) {\n    throw new TypeError('toRegexRange: expected the first argument to be a number');\n  }\n\n  if (max === void 0 || min === max) {\n    return String(min);\n  }\n\n  if (isNumber(max) === false) {\n    throw new TypeError('toRegexRange: expected the second argument to be a number.');\n  }\n\n  let opts = { relaxZeros: true, ...options };\n  if (typeof opts.strictZeros === 'boolean') {\n    opts.relaxZeros = opts.strictZeros === false;\n  }\n\n  let relax = String(opts.relaxZeros);\n  let shorthand = String(opts.shorthand);\n  let capture = String(opts.capture);\n  let wrap = String(opts.wrap);\n  let cacheKey = min + ':' + max + '=' + relax + shorthand + capture + wrap;\n\n  if (toRegexRange.cache.hasOwnProperty(cacheKey)) {\n    return toRegexRange.cache[cacheKey].result;\n  }\n\n  let a = Math.min(min, max);\n  let b = Math.max(min, max);\n\n  if (Math.abs(a - b) === 1) {\n    let result = min + '|' + max;\n    if (opts.capture) {\n      return `(${result})`;\n    }\n    if (opts.wrap === false) {\n      return result;\n    }\n    return `(?:${result})`;\n  }\n\n  let isPadded = hasPadding(min) || hasPadding(max);\n  let state = { min, max, a, b };\n  let positives = [];\n  let negatives = [];\n\n  if (isPadded) {\n    state.isPadded = isPadded;\n    state.maxLen = String(state.max).length;\n  }\n\n  if (a < 0) {\n    let newMin = b < 0 ? Math.abs(b) : 1;\n    negatives = splitToPatterns(newMin, Math.abs(a), state, opts);\n    a = state.a = 0;\n  }\n\n  if (b >= 0) {\n    positives = splitToPatterns(a, b, state, opts);\n  }\n\n  state.negatives = negatives;\n  state.positives = positives;\n  state.result = collatePatterns(negatives, positives, opts);\n\n  if (opts.capture === true) {\n    state.result = `(${state.result})`;\n  } else if (opts.wrap !== false && (positives.length + negatives.length) > 1) {\n    state.result = `(?:${state.result})`;\n  }\n\n  toRegexRange.cache[cacheKey] = state;\n  return state.result;\n};\n\nfunction collatePatterns(neg, pos, options) {\n  let onlyNegative = filterPatterns(neg, pos, '-', false, options) || [];\n  let onlyPositive = filterPatterns(pos, neg, '', false, options) || [];\n  let intersected = filterPatterns(neg, pos, '-?', true, options) || [];\n  let subpatterns = onlyNegative.concat(intersected).concat(onlyPositive);\n  return subpatterns.join('|');\n}\n\nfunction splitToRanges(min, max) {\n  let nines = 1;\n  let zeros = 1;\n\n  let stop = countNines(min, nines);\n  let stops = new Set([max]);\n\n  while (min <= stop && stop <= max) {\n    stops.add(stop);\n    nines += 1;\n    stop = countNines(min, nines);\n  }\n\n  stop = countZeros(max + 1, zeros) - 1;\n\n  while (min < stop && stop <= max) {\n    stops.add(stop);\n    zeros += 1;\n    stop = countZeros(max + 1, zeros) - 1;\n  }\n\n  stops = [...stops];\n  stops.sort(compare);\n  return stops;\n}\n\n/**\n * Convert a range to a regex pattern\n * @param {Number} `start`\n * @param {Number} `stop`\n * @return {String}\n */\n\nfunction rangeToPattern(start, stop, options) {\n  if (start === stop) {\n    return { pattern: start, count: [], digits: 0 };\n  }\n\n  let zipped = zip(start, stop);\n  let digits = zipped.length;\n  let pattern = '';\n  let count = 0;\n\n  for (let i = 0; i < digits; i++) {\n    let [startDigit, stopDigit] = zipped[i];\n\n    if (startDigit === stopDigit) {\n      pattern += startDigit;\n\n    } else if (startDigit !== '0' || stopDigit !== '9') {\n      pattern += toCharacterClass(startDigit, stopDigit, options);\n\n    } else {\n      count++;\n    }\n  }\n\n  if (count) {\n    pattern += options.shorthand === true ? '\\\\d' : '[0-9]';\n  }\n\n  return { pattern, count: [count], digits };\n}\n\nfunction splitToPatterns(min, max, tok, options) {\n  let ranges = splitToRanges(min, max);\n  let tokens = [];\n  let start = min;\n  let prev;\n\n  for (let i = 0; i < ranges.length; i++) {\n    let max = ranges[i];\n    let obj = rangeToPattern(String(start), String(max), options);\n    let zeros = '';\n\n    if (!tok.isPadded && prev && prev.pattern === obj.pattern) {\n      if (prev.count.length > 1) {\n        prev.count.pop();\n      }\n\n      prev.count.push(obj.count[0]);\n      prev.string = prev.pattern + toQuantifier(prev.count);\n      start = max + 1;\n      continue;\n    }\n\n    if (tok.isPadded) {\n      zeros = padZeros(max, tok, options);\n    }\n\n    obj.string = zeros + obj.pattern + toQuantifier(obj.count);\n    tokens.push(obj);\n    start = max + 1;\n    prev = obj;\n  }\n\n  return tokens;\n}\n\nfunction filterPatterns(arr, comparison, prefix, intersection, options) {\n  let result = [];\n\n  for (let ele of arr) {\n    let { string } = ele;\n\n    // only push if _both_ are negative...\n    if (!intersection && !contains(comparison, 'string', string)) {\n      result.push(prefix + string);\n    }\n\n    // or _both_ are positive\n    if (intersection && contains(comparison, 'string', string)) {\n      result.push(prefix + string);\n    }\n  }\n  return result;\n}\n\n/**\n * Zip strings\n */\n\nfunction zip(a, b) {\n  let arr = [];\n  for (let i = 0; i < a.length; i++) arr.push([a[i], b[i]]);\n  return arr;\n}\n\nfunction compare(a, b) {\n  return a > b ? 1 : b > a ? -1 : 0;\n}\n\nfunction contains(arr, key, val) {\n  return arr.some(ele => ele[key] === val);\n}\n\nfunction countNines(min, len) {\n  return Number(String(min).slice(0, -len) + '9'.repeat(len));\n}\n\nfunction countZeros(integer, zeros) {\n  return integer - (integer % Math.pow(10, zeros));\n}\n\nfunction toQuantifier(digits) {\n  let [start = 0, stop = ''] = digits;\n  if (stop || start > 1) {\n    return `{${start + (stop ? ',' + stop : '')}}`;\n  }\n  return '';\n}\n\nfunction toCharacterClass(a, b, options) {\n  return `[${a}${(b - a === 1) ? '' : '-'}${b}]`;\n}\n\nfunction hasPadding(str) {\n  return /^-?(0+)\\d/.test(str);\n}\n\nfunction padZeros(value, tok, options) {\n  if (!tok.isPadded) {\n    return value;\n  }\n\n  let diff = Math.abs(tok.maxLen - String(value).length);\n  let relax = options.relaxZeros !== false;\n\n  switch (diff) {\n    case 0:\n      return '';\n    case 1:\n      return relax ? '0?' : '0';\n    case 2:\n      return relax ? '0{0,2}' : '00';\n    default: {\n      return relax ? `0{0,${diff}}` : `0{${diff}}`;\n    }\n  }\n}\n\n/**\n * Cache\n */\n\ntoRegexRange.cache = {};\ntoRegexRange.clearCache = () => (toRegexRange.cache = {});\n\n/**\n * Expose `toRegexRange`\n */\n\nmodule.exports = toRegexRange;\n","import crypto from 'crypto';\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\n\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto.randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  const uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nlet _nodeId;\n\nlet _clockseq; // Previous uuid creation time\n\n\nlet _lastMSecs = 0;\nlet _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  let i = buf && offset || 0;\n  const b = buf || new Array(16);\n  options = options || {};\n  let node = options.node || _nodeId;\n  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import crypto from 'crypto';\n\nfunction md5(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return crypto.createHash('md5').update(bytes).digest();\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nconst v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nconst v5 = v35('v5', 0x50, sha1);\nexport default v5;","import crypto from 'crypto';\n\nfunction sha1(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return crypto.createHash('sha1').update(bytes).digest();\n}\n\nexport default sha1;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","/*---------------------------------------------------------\r\n * Copyright (C) Microsoft Corporation. All rights reserved.\r\n *--------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nprocess.env['APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL'] = true;\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar vscode = require(\"vscode\");\r\nvar appInsights = require(\"applicationinsights\");\r\nvar TelemetryReporter = /** @class */ (function () {\r\n    // tslint:disable-next-line\r\n    function TelemetryReporter(extensionId, extensionVersion, key, firstParty) {\r\n        var _this = this;\r\n        this.extensionId = extensionId;\r\n        this.extensionVersion = extensionVersion;\r\n        this.firstParty = false;\r\n        this.userOptIn = false;\r\n        this.firstParty = !!firstParty;\r\n        var logFilePath = process.env['VSCODE_LOGS'] || '';\r\n        if (logFilePath && extensionId && process.env['VSCODE_LOG_LEVEL'] === 'trace') {\r\n            logFilePath = path.join(logFilePath, extensionId + \".txt\");\r\n            this.logStream = fs.createWriteStream(logFilePath, { flags: 'a', encoding: 'utf8', autoClose: true });\r\n        }\r\n        this.updateUserOptIn(key);\r\n        if (vscode.env.onDidChangeTelemetryEnabled !== undefined) {\r\n            this.optOutListener = vscode.env.onDidChangeTelemetryEnabled(function () { return _this.updateUserOptIn(key); });\r\n        }\r\n        else {\r\n            this.optOutListener = vscode.workspace.onDidChangeConfiguration(function () { return _this.updateUserOptIn(key); });\r\n        }\r\n    }\r\n    TelemetryReporter.prototype.updateUserOptIn = function (key) {\r\n        // Newer versions of vscode api have telemetry enablement exposed, but fallback to setting for older versions\r\n        var config = vscode.workspace.getConfiguration(TelemetryReporter.TELEMETRY_CONFIG_ID);\r\n        var newOptInValue = vscode.env.isTelemetryEnabled === undefined ?\r\n            config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true) :\r\n            vscode.env.isTelemetryEnabled;\r\n        if (this.userOptIn !== newOptInValue) {\r\n            this.userOptIn = newOptInValue;\r\n            if (this.userOptIn) {\r\n                this.createAppInsightsClient(key);\r\n            }\r\n            else {\r\n                this.dispose();\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.createAppInsightsClient = function (key) {\r\n        //check if another instance is already initialized\r\n        if (appInsights.defaultClient) {\r\n            this.appInsightsClient = new appInsights.TelemetryClient(key);\r\n            // no other way to enable offline mode\r\n            this.appInsightsClient.channel.setUseDiskRetryCaching(true);\r\n        }\r\n        else {\r\n            appInsights.setup(key)\r\n                .setAutoCollectRequests(false)\r\n                .setAutoCollectPerformance(false)\r\n                .setAutoCollectExceptions(false)\r\n                .setAutoCollectDependencies(false)\r\n                .setAutoDependencyCorrelation(false)\r\n                .setAutoCollectConsole(false)\r\n                .setUseDiskRetryCaching(true)\r\n                .start();\r\n            this.appInsightsClient = appInsights.defaultClient;\r\n        }\r\n        this.appInsightsClient.commonProperties = this.getCommonProperties();\r\n        if (vscode && vscode.env) {\r\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId] = vscode.env.machineId;\r\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId] = vscode.env.sessionId;\r\n        }\r\n        //check if it's an Asimov key to change the endpoint\r\n        if (key && key.indexOf('AIF-') === 0) {\r\n            this.appInsightsClient.config.endpointUrl = \"https://vortex.data.microsoft.com/collect/v1\";\r\n            this.firstParty = true;\r\n        }\r\n    };\r\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.uikind\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.remotename\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.isnewappinstall\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    TelemetryReporter.prototype.getCommonProperties = function () {\r\n        var commonProperties = Object.create(null);\r\n        commonProperties['common.os'] = os.platform();\r\n        commonProperties['common.platformversion'] = (os.release() || '').replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, '$1$2$3');\r\n        commonProperties['common.extname'] = this.extensionId;\r\n        commonProperties['common.extversion'] = this.extensionVersion;\r\n        if (vscode && vscode.env) {\r\n            commonProperties['common.vscodemachineid'] = vscode.env.machineId;\r\n            commonProperties['common.vscodesessionid'] = vscode.env.sessionId;\r\n            commonProperties['common.vscodeversion'] = vscode.version;\r\n            commonProperties['common.isnewappinstall'] = vscode.env.isNewAppInstall;\r\n            switch (vscode.env.uiKind) {\r\n                case vscode.UIKind.Web:\r\n                    commonProperties['common.uikind'] = 'web';\r\n                    break;\r\n                case vscode.UIKind.Desktop:\r\n                    commonProperties['common.uikind'] = 'desktop';\r\n                    break;\r\n                default:\r\n                    commonProperties['common.uikind'] = 'unknown';\r\n            }\r\n            commonProperties['common.remotename'] = this.cleanRemoteName(vscode.env.remoteName);\r\n        }\r\n        return commonProperties;\r\n    };\r\n    TelemetryReporter.prototype.cleanRemoteName = function (remoteName) {\r\n        if (!remoteName) {\r\n            return 'none';\r\n        }\r\n        var ret = 'other';\r\n        // Allowed remote authorities\r\n        ['ssh-remote', 'dev-container', 'attached-container', 'wsl'].forEach(function (res) {\r\n            if (remoteName.indexOf(res + \"+\") === 0) {\r\n                ret = res;\r\n            }\r\n        });\r\n        return ret;\r\n    };\r\n    TelemetryReporter.prototype.shouldSendErrorTelemetry = function () {\r\n        if (this.firstParty) {\r\n            if (this.cleanRemoteName(vscode.env.remoteName) !== 'other') {\r\n                return true;\r\n            }\r\n            if (this.extension === undefined || this.extension.extensionKind === vscode.ExtensionKind.Workspace) {\r\n                return false;\r\n            }\r\n            if (vscode.env.uiKind === vscode.UIKind.Web) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        return true;\r\n    };\r\n    Object.defineProperty(TelemetryReporter.prototype, \"extension\", {\r\n        get: function () {\r\n            if (this._extension === undefined) {\r\n                this._extension = vscode.extensions.getExtension(this.extensionId);\r\n            }\r\n            return this._extension;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TelemetryReporter.prototype.cloneAndChange = function (obj, change) {\r\n        if (obj === null || typeof obj !== 'object')\r\n            return obj;\r\n        if (typeof change !== 'function')\r\n            return obj;\r\n        var ret = {};\r\n        for (var key in obj) {\r\n            ret[key] = change(key, obj[key]);\r\n        }\r\n        return ret;\r\n    };\r\n    TelemetryReporter.prototype.anonymizeFilePaths = function (stack, anonymizeFilePaths) {\r\n        if (stack === undefined || stack === null) {\r\n            return '';\r\n        }\r\n        var cleanupPatterns = [new RegExp(vscode.env.appRoot.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi')];\r\n        if (this.extension) {\r\n            cleanupPatterns.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi'));\r\n        }\r\n        var updatedStack = stack;\r\n        if (anonymizeFilePaths) {\r\n            var cleanUpIndexes = [];\r\n            for (var _i = 0, cleanupPatterns_1 = cleanupPatterns; _i < cleanupPatterns_1.length; _i++) {\r\n                var regexp = cleanupPatterns_1[_i];\r\n                while (true) {\r\n                    var result = regexp.exec(stack);\r\n                    if (!result) {\r\n                        break;\r\n                    }\r\n                    cleanUpIndexes.push([result.index, regexp.lastIndex]);\r\n                }\r\n            }\r\n            var nodeModulesRegex = /^[\\\\\\/]?(node_modules|node_modules\\.asar)[\\\\\\/]/;\r\n            var fileRegex = /(file:\\/\\/)?([a-zA-Z]:(\\\\\\\\|\\\\|\\/)|(\\\\\\\\|\\\\|\\/))?([\\w-\\._]+(\\\\\\\\|\\\\|\\/))+[\\w-\\._]*/g;\r\n            var lastIndex = 0;\r\n            updatedStack = '';\r\n            var _loop_1 = function () {\r\n                var result = fileRegex.exec(stack);\r\n                if (!result) {\r\n                    return \"break\";\r\n                }\r\n                // Anoynimize user file paths that do not need to be retained or cleaned up.\r\n                if (!nodeModulesRegex.test(result[0]) && cleanUpIndexes.every(function (_a) {\r\n                    var x = _a[0], y = _a[1];\r\n                    return result.index < x || result.index >= y;\r\n                })) {\r\n                    updatedStack += stack.substring(lastIndex, result.index) + '<REDACTED: user-file-path>';\r\n                    lastIndex = fileRegex.lastIndex;\r\n                }\r\n            };\r\n            while (true) {\r\n                var state_1 = _loop_1();\r\n                if (state_1 === \"break\")\r\n                    break;\r\n            }\r\n            if (lastIndex < stack.length) {\r\n                updatedStack += stack.substr(lastIndex);\r\n            }\r\n        }\r\n        // sanitize with configured cleanup patterns\r\n        for (var _a = 0, cleanupPatterns_2 = cleanupPatterns; _a < cleanupPatterns_2.length; _a++) {\r\n            var regexp = cleanupPatterns_2[_a];\r\n            updatedStack = updatedStack.replace(regexp, '');\r\n        }\r\n        return updatedStack;\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryEvent = function (eventName, properties, measurements) {\r\n        var _this = this;\r\n        if (this.userOptIn && eventName && this.appInsightsClient) {\r\n            var cleanProperties = this.cloneAndChange(properties, function (_key, prop) { return _this.anonymizeFilePaths(prop, _this.firstParty); });\r\n            this.appInsightsClient.trackEvent({\r\n                name: this.extensionId + \"/\" + eventName,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryErrorEvent = function (eventName, properties, measurements, errorProps) {\r\n        var _this = this;\r\n        if (this.userOptIn && eventName && this.appInsightsClient) {\r\n            // always clean the properties if first party\r\n            // do not send any error properties if we shouldn't send error telemetry\r\n            // if we have no errorProps, assume all are error props\r\n            var cleanProperties = this.cloneAndChange(properties, function (key, prop) {\r\n                if (_this.shouldSendErrorTelemetry()) {\r\n                    return _this.anonymizeFilePaths(prop, _this.firstParty);\r\n                }\r\n                if (errorProps === undefined || errorProps.indexOf(key) !== -1) {\r\n                    return 'REDACTED';\r\n                }\r\n                return _this.anonymizeFilePaths(prop, _this.firstParty);\r\n            });\r\n            this.appInsightsClient.trackEvent({\r\n                name: this.extensionId + \"/\" + eventName,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryException = function (error, properties, measurements) {\r\n        var _this = this;\r\n        if (this.shouldSendErrorTelemetry() && this.userOptIn && error && this.appInsightsClient) {\r\n            var cleanProperties = this.cloneAndChange(properties, function (_key, prop) { return _this.anonymizeFilePaths(prop, _this.firstParty); });\r\n            this.appInsightsClient.trackException({\r\n                exception: error,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + error.name + \" \" + error.message + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.dispose = function () {\r\n        var _this = this;\r\n        this.optOutListener.dispose();\r\n        var flushEventsToLogger = new Promise(function (resolve) {\r\n            if (!_this.logStream) {\r\n                return resolve(void 0);\r\n            }\r\n            _this.logStream.on('finish', resolve);\r\n            _this.logStream.end();\r\n        });\r\n        var flushEventsToAI = new Promise(function (resolve) {\r\n            if (_this.appInsightsClient) {\r\n                _this.appInsightsClient.flush({\r\n                    callback: function () {\r\n                        // all data flushed\r\n                        _this.appInsightsClient = undefined;\r\n                        resolve(void 0);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                resolve(void 0);\r\n            }\r\n        });\r\n        return Promise.all([flushEventsToAI, flushEventsToLogger]);\r\n    };\r\n    TelemetryReporter.TELEMETRY_CONFIG_ID = 'telemetry';\r\n    TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID = 'enableTelemetry';\r\n    return TelemetryReporter;\r\n}());\r\nexports.default = TelemetryReporter;\r\n//# sourceMappingURL=telemetryReporter.js.map","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this._emitter = undefined;\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        this.cancel();\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nEmitter._noop = function () { };\r\nexports.Emitter = Emitter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    ;\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            console.log(\"inspect\");\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader recevied error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't recevied the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer recevied error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) != 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) != 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.completionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.completionProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        let client = this._client;\r\n        let provideCompletionItems = (document, position, context, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCompletionItem = (item, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                return Promise.resolve(item);\r\n            });\r\n        };\r\n        let middleware = this._client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCompletionItemProvider(options.documentSelector, {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.hoverProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideHover = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerHoverProvider(options.documentSelector, {\r\n            provideHover: (document, position, token) => {\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.signatureHelpProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.signatureHelpProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerSignatureHelp = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        return vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, {\r\n            provideSignatureHelp: (document, position, token) => {\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, token);\r\n            }\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.definitionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDefinitionProvider(options.documentSelector, {\r\n            provideDefinition: (document, position, token) => {\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.referencesProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerReferences = (document, position, options, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerReferenceProvider(options.documentSelector, {\r\n            provideReferences: (document, position, options, token) => {\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, providerReferences)\r\n                    : providerReferences(document, position, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentHighlightProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentHighlights = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, provideDocumentHighlights)\r\n                    : provideDocumentHighlights(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentSymbolProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentSymbols = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                if (data === null) {\r\n                    return undefined;\r\n                }\r\n                if (data.length === 0) {\r\n                    return [];\r\n                }\r\n                else {\r\n                    let element = data[0];\r\n                    if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                        return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                    }\r\n                    else {\r\n                        return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                    }\r\n                }\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, {\r\n            provideDocumentSymbols: (document, token) => {\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, provideDocumentSymbols)\r\n                    : provideDocumentSymbols(document, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: undefined\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        let client = this._client;\r\n        let provideWorkspaceSymbols = (query, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerWorkspaceSymbolProvider({\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    '',\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.codeActionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        let codeActionKinds = undefined;\r\n        if (!Is.boolean(capabilities.codeActionProvider)) {\r\n            codeActionKinds = capabilities.codeActionProvider.codeActionKinds;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: { documentSelector: documentSelector, codeActionKinds }\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeActions = (document, range, context, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                if (values === null) {\r\n                    return undefined;\r\n                }\r\n                let result = [];\r\n                for (let item of values) {\r\n                    if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                        result.push(client.protocol2CodeConverter.asCommand(item));\r\n                    }\r\n                    else {\r\n                        result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                    }\r\n                    ;\r\n                }\r\n                return result;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeActionsProvider(options.documentSelector, {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, provideCodeActions)\r\n                    : provideCodeActions(document, range, context, token);\r\n            }\r\n        }, options.codeActionKinds\r\n            ? { providedCodeActionKinds: client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n            : undefined);\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.codeLensProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.codeLensProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeLenses = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCodeLens = (codeLens, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                return codeLens;\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeLensProvider(options.documentSelector, {\r\n            provideCodeLenses: (document, token) => {\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentFormattingEdits = (document, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentRangeFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentOnTypeFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentOnTypeFormattingProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        let provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                ch: ch,\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        }, options.firstTriggerCharacter, ...moreTriggerCharacter);\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.renameProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        let options = Object.assign({}, { documentSelector: documentSelector });\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        else {\r\n            options.prepareProvider = capabilities.renameProvider.prepareProvider;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideRenameEdits = (document, position, newName, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                newName: newName\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let prepareRename = (document, position, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                    return client.protocol2CodeConverter.asRange(result);\r\n                }\r\n                else if (result && result.range) {\r\n                    return {\r\n                        range: client.protocol2CodeConverter.asRange(result.range),\r\n                        placeholder: result.placeholder\r\n                    };\r\n                }\r\n                return null;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerRenameProvider(options.documentSelector, {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentLink').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentLinkProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentLinkProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentLinks = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let resolveDocumentLink = (link, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, {\r\n            provideDocumentLinks: (document, token) => {\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        let client = this._client;\r\n        if (data.registerOptions.commands) {\r\n            let disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    let params = {\r\n                        command,\r\n                        arguments: args\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n                    });\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    warn(message, data) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    error(message, data) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    logTrace(message, data) {\r\n        this.outputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.outputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.outputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.outputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: \"retry\" }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp();\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel && this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        this._fileEvents.push(event);\r\n        this._fileEventDelayer.trigger(() => {\r\n            this.onReady().then(() => {\r\n                this.resolveConnection().then(connection => {\r\n                    if (this.isConnectionActive()) {\r\n                        connection.didChangeWatchedFiles({ changes: this._fileEvents });\r\n                    }\r\n                    this._fileEvents = [];\r\n                });\r\n            }, (error) => {\r\n                this.error(`Notify file events failed.`, error);\r\n            });\r\n        });\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware.handleDiagnostics;\r\n        if (middleware) {\r\n            middleware(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        ensure(ensure(result, 'textDocument'), 'publishDiagnostics').relatedInformation = true;\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            ;\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; });\r\n    }\r\n    ;\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === void 0) {\r\n            return undefined;\r\n        }\r\n        else if (value === null) {\r\n            return null;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asRange(value) {\r\n        if (value === void 0 || value === null) {\r\n            return value;\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === void 0 || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== void 0) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== void 0) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text && range) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === void 0 || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === void 0 || context === null) {\r\n            return context;\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), Is.string(context.only) ? [context.only] : undefined);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n            ;\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.colorProvider) {\r\n            return;\r\n        }\r\n        const implCapabilities = capabilities.colorProvider;\r\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n        const selector = implCapabilities.documentSelector || documentSelector;\r\n        if (selector) {\r\n            this.register(this.messages, {\r\n                id,\r\n                registerOptions: Object.assign({}, { documentSelector: selector })\r\n            });\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideColorPresentations = (color, context, token) => {\r\n            const requestParams = {\r\n                color,\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                range: client.code2ProtocolConverter.asRange(context.range)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let provideDocumentColors = (document, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerColorProvider(options.documentSelector, {\r\n            provideColorPresentations: (color, context, token) => {\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        });\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index));\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.declarationProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.declarationProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const declCapabilities = capabilities.declarationProvider;\r\n            const id = Is.string(declCapabilities.id) && declCapabilities.id.length > 0 ? declCapabilities.id : UUID.generateUuid();\r\n            const selector = declCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDeclaration = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDeclarationProvider(options.documentSelector, {\r\n            provideDeclaration: (document, position, token) => {\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.foldingRangeProvider) {\r\n            return;\r\n        }\r\n        const implCapabilities = capabilities.foldingRangeProvider;\r\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n        const selector = implCapabilities.documentSelector || documentSelector;\r\n        if (selector) {\r\n            this.register(this.messages, {\r\n                id,\r\n                registerOptions: Object.assign({}, { documentSelector: selector })\r\n            });\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideFoldingRanges = (document, _, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, {\r\n            provideFoldingRanges(document, context, token) {\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        });\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.implementationProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.implementationProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const implCapabilities = capabilities.implementationProvider;\r\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n            const selector = implCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideImplementation = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerImplementationProvider(options.documentSelector, {\r\n            provideImplementation: (document, position, token) => {\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst fs = require(\"fs\");\r\nconst SemVer = require(\"semver\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst colorProvider_1 = require(\"./colorProvider\");\r\nconst configuration_1 = require(\"./configuration\");\r\nconst implementation_1 = require(\"./implementation\");\r\nconst typeDefinition_1 = require(\"./typeDefinition\");\r\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\r\nconst foldingRange_1 = require(\"./foldingRange\");\r\nconst declaration_1 = require(\"./declaration\");\r\nconst Is = require(\"./utils/is\");\r\nconst processes_1 = require(\"./utils/processes\");\r\n__export(require(\"./client\"));\r\nconst REQUIRED_VSCODE_VERSION = '^1.30'; // do not change format, updated by `updateVSCode` script\r\nvar Executable;\r\n(function (Executable) {\r\n    function is(value) {\r\n        return Is.string(value.command);\r\n    }\r\n    Executable.is = is;\r\n})(Executable || (Executable = {}));\r\nvar TransportKind;\r\n(function (TransportKind) {\r\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\r\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\r\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\r\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\r\n})(TransportKind = exports.TransportKind || (exports.TransportKind = {}));\r\nvar Transport;\r\n(function (Transport) {\r\n    function isSocket(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\r\n    }\r\n    Transport.isSocket = isSocket;\r\n})(Transport || (Transport = {}));\r\nvar NodeModule;\r\n(function (NodeModule) {\r\n    function is(value) {\r\n        return Is.string(value.module);\r\n    }\r\n    NodeModule.is = is;\r\n})(NodeModule || (NodeModule = {}));\r\nvar StreamInfo;\r\n(function (StreamInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.writer !== void 0 && candidate.reader !== void 0;\r\n    }\r\n    StreamInfo.is = is;\r\n})(StreamInfo || (StreamInfo = {}));\r\nvar ChildProcessInfo;\r\n(function (ChildProcessInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.process !== void 0 && typeof candidate.detached === 'boolean';\r\n    }\r\n    ChildProcessInfo.is = is;\r\n})(ChildProcessInfo || (ChildProcessInfo = {}));\r\nclass LanguageClient extends client_1.BaseLanguageClient {\r\n    constructor(arg1, arg2, arg3, arg4, arg5) {\r\n        let id;\r\n        let name;\r\n        let serverOptions;\r\n        let clientOptions;\r\n        let forceDebug;\r\n        if (Is.string(arg2)) {\r\n            id = arg1;\r\n            name = arg2;\r\n            serverOptions = arg3;\r\n            clientOptions = arg4;\r\n            forceDebug = !!arg5;\r\n        }\r\n        else {\r\n            id = arg1.toLowerCase();\r\n            name = arg1;\r\n            serverOptions = arg2;\r\n            clientOptions = arg3;\r\n            forceDebug = arg4;\r\n        }\r\n        if (forceDebug === void 0) {\r\n            forceDebug = false;\r\n        }\r\n        super(id, name, clientOptions);\r\n        this._serverOptions = serverOptions;\r\n        this._forceDebug = forceDebug;\r\n        try {\r\n            this.checkVersion();\r\n        }\r\n        catch (error) {\r\n            if (Is.string(error.message)) {\r\n                this.outputChannel.appendLine(error.message);\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n    checkVersion() {\r\n        let codeVersion = SemVer.parse(vscode_1.version);\r\n        if (!codeVersion) {\r\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\r\n        }\r\n        // Remove the insider pre-release since we stay API compatible.\r\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\r\n            codeVersion.prerelease = [];\r\n        }\r\n        if (!SemVer.satisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\r\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\r\n        }\r\n    }\r\n    stop() {\r\n        return super.stop().then(() => {\r\n            if (this._serverProcess) {\r\n                let toCheck = this._serverProcess;\r\n                this._serverProcess = undefined;\r\n                if (this._isDetached === void 0 || !this._isDetached) {\r\n                    this.checkProcessDied(toCheck);\r\n                }\r\n                this._isDetached = undefined;\r\n            }\r\n        });\r\n    }\r\n    checkProcessDied(childProcess) {\r\n        if (!childProcess) {\r\n            return;\r\n        }\r\n        setTimeout(() => {\r\n            // Test if the process is still alive. Throws an exception if not\r\n            try {\r\n                process.kill(childProcess.pid, 0);\r\n                processes_1.terminate(childProcess);\r\n            }\r\n            catch (error) {\r\n                // All is fine.\r\n            }\r\n        }, 2000);\r\n    }\r\n    handleConnectionClosed() {\r\n        this._serverProcess = undefined;\r\n        super.handleConnectionClosed();\r\n    }\r\n    createMessageTransports(encoding) {\r\n        function getEnvironment(env) {\r\n            if (!env) {\r\n                return process.env;\r\n            }\r\n            let result = Object.create(null);\r\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\r\n            Object.keys(env).forEach(key => result[key] = env[key]);\r\n            return result;\r\n        }\r\n        function startedInDebugMode() {\r\n            let args = process.execArgv;\r\n            if (args) {\r\n                return args.some((arg) => /^--debug=?/.test(arg) || /^--debug-brk=?/.test(arg) || /^--inspect=?/.test(arg) || /^--inspect-brk=?/.test(arg));\r\n            }\r\n            ;\r\n            return false;\r\n        }\r\n        let server = this._serverOptions;\r\n        // We got a function.\r\n        if (Is.func(server)) {\r\n            return server().then((result) => {\r\n                if (client_1.MessageTransports.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return result;\r\n                }\r\n                else if (StreamInfo.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(result.reader), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer) };\r\n                }\r\n                else {\r\n                    let cp;\r\n                    if (ChildProcessInfo.is(result)) {\r\n                        cp = result.process;\r\n                        this._isDetached = result.detached;\r\n                    }\r\n                    else {\r\n                        cp = result;\r\n                        this._isDetached = false;\r\n                    }\r\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin) };\r\n                }\r\n            });\r\n        }\r\n        let json;\r\n        let runDebug = server;\r\n        if (runDebug.run || runDebug.debug) {\r\n            // We are under debugging. So use debug as well.\r\n            if (typeof v8debug === 'object' || this._forceDebug || startedInDebugMode()) {\r\n                json = runDebug.debug;\r\n            }\r\n            else {\r\n                json = runDebug.run;\r\n            }\r\n        }\r\n        else {\r\n            json = server;\r\n        }\r\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\r\n            if (NodeModule.is(json) && json.module) {\r\n                let node = json;\r\n                let transport = node.transport || TransportKind.stdio;\r\n                if (node.runtime) {\r\n                    let args = [];\r\n                    let options = node.options || Object.create(null);\r\n                    if (options.execArgv) {\r\n                        options.execArgv.forEach(element => args.push(element));\r\n                    }\r\n                    args.push(node.module);\r\n                    if (node.args) {\r\n                        node.args.forEach(element => args.push(element));\r\n                    }\r\n                    let execOptions = Object.create(null);\r\n                    execOptions.cwd = serverWorkingDir;\r\n                    execOptions.env = getEnvironment(options.env);\r\n                    let pipeName = undefined;\r\n                    if (transport === TransportKind.ipc) {\r\n                        // exec options not correctly typed in lib\r\n                        execOptions.stdio = [null, null, null, 'ipc'];\r\n                        args.push('--node-ipc');\r\n                    }\r\n                    else if (transport === TransportKind.stdio) {\r\n                        args.push('--stdio');\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                        args.push(`--pipe=${pipeName}`);\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        args.push(`--socket=${transport.port}`);\r\n                    }\r\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                        let serverProcess = cp.spawn(node.runtime, args, execOptions);\r\n                        if (!serverProcess || !serverProcess.pid) {\r\n                            return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                        }\r\n                        this._serverProcess = serverProcess;\r\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                        if (transport === TransportKind.ipc) {\r\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess) });\r\n                        }\r\n                        else {\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n                        }\r\n                    }\r\n                    else if (transport == TransportKind.pipe) {\r\n                        return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    let pipeName = undefined;\r\n                    return new Promise((resolve, _reject) => {\r\n                        let args = node.args && node.args.slice() || [];\r\n                        if (transport === TransportKind.ipc) {\r\n                            args.push('--node-ipc');\r\n                        }\r\n                        else if (transport === TransportKind.stdio) {\r\n                            args.push('--stdio');\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                            args.push(`--pipe=${pipeName}`);\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            args.push(`--socket=${transport.port}`);\r\n                        }\r\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                        let options = node.options || Object.create(null);\r\n                        options.execArgv = options.execArgv || [];\r\n                        options.cwd = serverWorkingDir;\r\n                        options.silent = true;\r\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                            let sp = cp.fork(node.module, args || [], options);\r\n                            this._serverProcess = sp;\r\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            if (transport === TransportKind.ipc) {\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess) });\r\n                            }\r\n                            else {\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin) });\r\n                            }\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (Executable.is(json) && json.command) {\r\n                let command = json;\r\n                let args = command.args || [];\r\n                let options = Object.assign({}, command.options);\r\n                options.cwd = options.cwd || serverWorkingDir;\r\n                let serverProcess = cp.spawn(command.command, args, options);\r\n                if (!serverProcess || !serverProcess.pid) {\r\n                    return Promise.reject(`Launching server using command ${command.command} failed.`);\r\n                }\r\n                serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                this._serverProcess = serverProcess;\r\n                this._isDetached = !!options.detached;\r\n                return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n            }\r\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\r\n        });\r\n    }\r\n    registerProposedFeatures() {\r\n        this.registerFeatures(ProposedFeatures.createAll(this));\r\n    }\r\n    registerBuiltinFeatures() {\r\n        super.registerBuiltinFeatures();\r\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\r\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\r\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\r\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\r\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\r\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\r\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\r\n    }\r\n    _mainGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    _getServerWorkingDir(options) {\r\n        let cwd = options && options.cwd;\r\n        if (!cwd) {\r\n            cwd = this.clientOptions.workspaceFolder\r\n                ? this.clientOptions.workspaceFolder.uri.fsPath\r\n                : this._mainGetRootPath();\r\n        }\r\n        if (cwd) {\r\n            // make sure the folder exists otherwise creating the process will fail\r\n            return new Promise(s => {\r\n                fs.lstat(cwd, (err, stats) => {\r\n                    s(!err && stats.isDirectory() ? cwd : undefined);\r\n                });\r\n            });\r\n        }\r\n        return Promise.resolve(undefined);\r\n    }\r\n}\r\nexports.LanguageClient = LanguageClient;\r\nclass SettingMonitor {\r\n    constructor(_client, _setting) {\r\n        this._client = _client;\r\n        this._setting = _setting;\r\n        this._listeners = [];\r\n    }\r\n    start() {\r\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\r\n        this.onDidChangeConfiguration();\r\n        return new vscode_1.Disposable(() => {\r\n            if (this._client.needsStop()) {\r\n                this._client.stop();\r\n            }\r\n        });\r\n    }\r\n    onDidChangeConfiguration() {\r\n        let index = this._setting.indexOf('.');\r\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\r\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\r\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\r\n        if (enabled && this._client.needsStart()) {\r\n            this._client.start();\r\n        }\r\n        else if (!enabled && this._client.needsStop()) {\r\n            this._client.stop();\r\n        }\r\n    }\r\n}\r\nexports.SettingMonitor = SettingMonitor;\r\n// Exporting proposed protocol.\r\nvar ProposedFeatures;\r\n(function (ProposedFeatures) {\r\n    function createAll(_client) {\r\n        let result = [];\r\n        return result;\r\n    }\r\n    ProposedFeatures.createAll = createAll;\r\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === void 0 || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        ;\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        ;\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== void 0) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        ;\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === void 0 || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== void 0 && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set('', code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === void 0 || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== void 0) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return void 0;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.typeDefinitionProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.typeDefinitionProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const implCapabilities = capabilities.typeDefinitionProvider;\r\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n            const selector = implCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideTypeDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst path_1 = require(\"path\");\r\nconst isWindows = (process.platform === 'win32');\r\nconst isMacintosh = (process.platform === 'darwin');\r\nconst isLinux = (process.platform === 'linux');\r\nfunction terminate(process, cwd) {\r\n    if (isWindows) {\r\n        try {\r\n            // This we run in Atom execFileSync is available.\r\n            // Ignore stderr since this is otherwise piped to parent.stderr\r\n            // which might be already closed.\r\n            let options = {\r\n                stdio: ['pipe', 'pipe', 'ignore']\r\n            };\r\n            if (cwd) {\r\n                options.cwd = cwd;\r\n            }\r\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else if (isLinux || isMacintosh) {\r\n        try {\r\n            var cmd = path_1.join(__dirname, 'terminateProcess.sh');\r\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\r\n            return result.error ? false : true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else {\r\n        process.kill('SIGKILL');\r\n        return true;\r\n    }\r\n}\r\nexports.terminate = terminate;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                let params = {\r\n                    event: {\r\n                        added: event.added.map(folder => this.asProtocol(folder)),\r\n                        removed: event.removed.map(folder => this.asProtocol(folder))\r\n                    }\r\n                };\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentColor');\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new vscode_jsonrpc_1.RequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/declaration');\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/foldingRange');\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/implementation');\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guaruntee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new vscode_jsonrpc_1.RequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new vscode_jsonrpc_1.NotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new vscode_jsonrpc_1.RequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new vscode_jsonrpc_1.NotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n//---- Configuration notification ----\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new vscode_jsonrpc_1.RequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new vscode_jsonrpc_1.NotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didOpen');\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didChange');\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didClose');\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didSave');\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/willSave');\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/willSaveWaitUntil');\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n//---- File eventing ----\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n//---- Diagnostic notification ----\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/completion');\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.type = new vscode_jsonrpc_1.RequestType('completionItem/resolve');\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n//---- Hover Support -------------------------------\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/hover');\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/signatureHelp');\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n//---- Goto Definition -------------------------------------\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/definition');\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/references');\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n//---- Document Highlight ----------------------------------\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentHighlight');\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n//---- Document Symbol Provider ---------------------------\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentSymbol');\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n//---- Workspace Symbol Provider ---------------------------\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.type = new vscode_jsonrpc_1.RequestType('workspace/symbol');\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeAction');\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeLens');\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new vscode_jsonrpc_1.RequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/formatting');\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rangeFormatting');\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/onTypeFormatting');\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rename');\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/prepareRename');\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentLink');\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new vscode_jsonrpc_1.RequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new vscode_jsonrpc_1.RequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new vscode_jsonrpc_1.RequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/typeDefinition');\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new vscode_jsonrpc_1.RequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n    ;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\n/**\r\n * Represents programming constructs like variables, classes, interfaces etc.\r\n * that appear in a document. Document symbols can be hierarchical and they\r\n * have two ranges: one that encloses its definition and one that points to\r\n * its most interesting range, e.g. the range of an identifier.\r\n */\r\nvar DocumentSymbol = /** @class */ (function () {\r\n    function DocumentSymbol() {\r\n    }\r\n    return DocumentSymbol;\r\n}());\r\nexport { DocumentSymbol };\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void null) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data))\r\n            result.data = data;\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * A document link is a range in a text document that links to an internal or external resource, like another\r\n * text document or a web site.\r\n */\r\nvar DocumentLink = /** @class */ (function () {\r\n    function DocumentLink() {\r\n    }\r\n    return DocumentLink;\r\n}());\r\nexport { DocumentLink };\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nexport var TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason || (TextDocumentSaveReason = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = null;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = null;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === null) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar fs = require(\"fs\");\r\nvar toString = Object.prototype.toString;\r\nfunction isDefined(value) {\r\n    return typeof value !== 'undefined';\r\n}\r\nfunction isNumber(value) {\r\n    return toString.call(value) === '[object Number]';\r\n}\r\nfunction isString(value) {\r\n    return toString.call(value) === '[object String]';\r\n}\r\nfunction isBoolean(value) {\r\n    return value === true || value === false;\r\n}\r\nfunction readJsonFileSync(filename) {\r\n    return JSON.parse(fs.readFileSync(filename, 'utf8'));\r\n}\r\nvar MessageFormat;\r\n(function (MessageFormat) {\r\n    MessageFormat[\"file\"] = \"file\";\r\n    MessageFormat[\"bundle\"] = \"bundle\";\r\n    MessageFormat[\"both\"] = \"both\";\r\n})(MessageFormat = exports.MessageFormat || (exports.MessageFormat = {}));\r\nvar BundleFormat;\r\n(function (BundleFormat) {\r\n    // the nls.bundle format\r\n    BundleFormat[\"standalone\"] = \"standalone\";\r\n    BundleFormat[\"languagePack\"] = \"languagePack\";\r\n})(BundleFormat = exports.BundleFormat || (exports.BundleFormat = {}));\r\nvar LocalizeInfo;\r\n(function (LocalizeInfo) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && isDefined(candidate.key) && isDefined(candidate.comment);\r\n    }\r\n    LocalizeInfo.is = is;\r\n})(LocalizeInfo || (LocalizeInfo = {}));\r\nvar resolvedLanguage;\r\nvar resolvedBundles;\r\nvar options;\r\nvar isPseudo;\r\nfunction initializeSettings() {\r\n    options = { locale: undefined, language: undefined, languagePackSupport: false, cacheLanguageResolution: true, messageFormat: MessageFormat.bundle };\r\n    if (isString(process.env.VSCODE_NLS_CONFIG)) {\r\n        try {\r\n            var vscodeOptions_1 = JSON.parse(process.env.VSCODE_NLS_CONFIG);\r\n            var language = void 0;\r\n            var locale = void 0;\r\n            if (vscodeOptions_1.availableLanguages) {\r\n                var value = vscodeOptions_1.availableLanguages['*'];\r\n                if (isString(value)) {\r\n                    language = value;\r\n                }\r\n            }\r\n            if (isString(vscodeOptions_1.locale)) {\r\n                options.locale = vscodeOptions_1.locale.toLowerCase();\r\n            }\r\n            if (language === undefined) {\r\n                options.language = options.locale;\r\n            }\r\n            else if (language !== 'en') {\r\n                options.language = language;\r\n            }\r\n            if (isBoolean(vscodeOptions_1._languagePackSupport)) {\r\n                options.languagePackSupport = vscodeOptions_1._languagePackSupport;\r\n            }\r\n            if (isString(vscodeOptions_1._cacheRoot)) {\r\n                options.cacheRoot = vscodeOptions_1._cacheRoot;\r\n            }\r\n            if (isString(vscodeOptions_1._languagePackId)) {\r\n                options.languagePackId = vscodeOptions_1._languagePackId;\r\n            }\r\n            if (isString(vscodeOptions_1._translationsConfigFile)) {\r\n                options.translationsConfigFile = vscodeOptions_1._translationsConfigFile;\r\n                try {\r\n                    options.translationsConfig = readJsonFileSync(options.translationsConfigFile);\r\n                }\r\n                catch (error) {\r\n                    // We can't read the translation config file. Mark the cache as corrupted.\r\n                    if (vscodeOptions_1._corruptedFile) {\r\n                        var dirname = path.dirname(vscodeOptions_1._corruptedFile);\r\n                        fs.exists(dirname, function (exists) {\r\n                            if (exists) {\r\n                                fs.writeFile(vscodeOptions_1._corruptedFile, 'corrupted', 'utf8', function (err) {\r\n                                    console.error(err);\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (_a) {\r\n            // Do nothing.\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    resolvedLanguage = undefined;\r\n    resolvedBundles = Object.create(null);\r\n}\r\ninitializeSettings();\r\nfunction supportsLanguagePack() {\r\n    return options.languagePackSupport === true && options.cacheRoot !== undefined && options.languagePackId !== undefined && options.translationsConfigFile !== undefined\r\n        && options.translationsConfig !== undefined;\r\n}\r\nfunction format(message, args) {\r\n    var result;\r\n    if (isPseudo) {\r\n        // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\r\n        message = '\\uFF3B' + message.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\r\n    }\r\n    if (args.length === 0) {\r\n        result = message;\r\n    }\r\n    else {\r\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\r\n            var index = rest[0];\r\n            var arg = args[index];\r\n            var replacement = match;\r\n            if (typeof arg === 'string') {\r\n                replacement = arg;\r\n            }\r\n            else if (typeof arg === 'number' || typeof arg === 'boolean' || arg === void 0 || arg === null) {\r\n                replacement = String(arg);\r\n            }\r\n            return replacement;\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction createScopedLocalizeFunction(messages) {\r\n    return function (key, message) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (isNumber(key)) {\r\n            if (key >= messages.length) {\r\n                console.error(\"Broken localize call found. Index out of bounds. Stacktrace is\\n: \" + new Error('').stack);\r\n                return;\r\n            }\r\n            return format(messages[key], args);\r\n        }\r\n        else {\r\n            if (isString(message)) {\r\n                console.warn(\"Message \" + message + \" didn't get externalized correctly.\");\r\n                return format(message, args);\r\n            }\r\n            else {\r\n                console.error(\"Broken localize call found. Stacktrace is\\n: \" + new Error('').stack);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction localize(key, message) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return format(message, args);\r\n}\r\nfunction resolveLanguage(file) {\r\n    var resolvedLanguage;\r\n    if (options.cacheLanguageResolution && resolvedLanguage) {\r\n        resolvedLanguage = resolvedLanguage;\r\n    }\r\n    else {\r\n        if (isPseudo || !options.language) {\r\n            resolvedLanguage = '.nls.json';\r\n        }\r\n        else {\r\n            var locale = options.language;\r\n            while (locale) {\r\n                var candidate = '.nls.' + locale + '.json';\r\n                if (fs.existsSync(file + candidate)) {\r\n                    resolvedLanguage = candidate;\r\n                    break;\r\n                }\r\n                else {\r\n                    var index = locale.lastIndexOf('-');\r\n                    if (index > 0) {\r\n                        locale = locale.substring(0, index);\r\n                    }\r\n                    else {\r\n                        resolvedLanguage = '.nls.json';\r\n                        locale = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (options.cacheLanguageResolution) {\r\n            resolvedLanguage = resolvedLanguage;\r\n        }\r\n    }\r\n    return file + resolvedLanguage;\r\n}\r\nfunction findInTheBoxBundle(root) {\r\n    var language = options.language;\r\n    while (language) {\r\n        var candidate = path.join(root, \"nls.bundle.\" + language + \".json\");\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n        else {\r\n            var index = language.lastIndexOf('-');\r\n            if (index > 0) {\r\n                language = language.substring(0, index);\r\n            }\r\n            else {\r\n                language = undefined;\r\n            }\r\n        }\r\n    }\r\n    // Test if we can reslove the default bundle.\r\n    if (language === undefined) {\r\n        var candidate = path.join(root, 'nls.bundle.json');\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nfunction mkdir(directory) {\r\n    try {\r\n        fs.mkdirSync(directory);\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'EEXIST') {\r\n            return;\r\n        }\r\n        else if (err.code === 'ENOENT') {\r\n            var parent = path.dirname(directory);\r\n            if (parent !== directory) {\r\n                mkdir(parent);\r\n                fs.mkdirSync(directory);\r\n            }\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nfunction createDefaultNlsBundle(folder) {\r\n    var metaData = readJsonFileSync(path.join(folder, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_1 in metaData) {\r\n        var entry = metaData[module_1];\r\n        result[module_1] = entry.messages;\r\n    }\r\n    return result;\r\n}\r\nfunction createNLSBundle(header, metaDataPath) {\r\n    var languagePackLocation = options.translationsConfig[header.id];\r\n    if (!languagePackLocation) {\r\n        return undefined;\r\n    }\r\n    var languagePack = readJsonFileSync(languagePackLocation).contents;\r\n    var metaData = readJsonFileSync(path.join(metaDataPath, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_2 in metaData) {\r\n        var entry = metaData[module_2];\r\n        var translations = languagePack[header.outDir + \"/\" + module_2];\r\n        if (translations) {\r\n            var resultMessages = [];\r\n            for (var i = 0; i < entry.keys.length; i++) {\r\n                var messageKey = entry.keys[i];\r\n                var key = isString(messageKey) ? messageKey : messageKey.key;\r\n                var translatedMessage = translations[key];\r\n                if (translatedMessage === undefined) {\r\n                    translatedMessage = entry.messages[i];\r\n                }\r\n                resultMessages.push(translatedMessage);\r\n            }\r\n            result[module_2] = resultMessages;\r\n        }\r\n        else {\r\n            result[module_2] = entry.messages;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction touch(file) {\r\n    var d = new Date();\r\n    fs.utimes(file, d, d, function () {\r\n        // Do nothing. Ignore\r\n    });\r\n}\r\nfunction cacheBundle(key, bundle) {\r\n    resolvedBundles[key] = bundle;\r\n    return bundle;\r\n}\r\nfunction loadNlsBundleOrCreateFromI18n(header, bundlePath) {\r\n    var result;\r\n    var bundle = path.join(options.cacheRoot, header.id + \"-\" + header.hash + \".json\");\r\n    var useMemoryOnly = false;\r\n    var writeBundle = false;\r\n    try {\r\n        result = JSON.parse(fs.readFileSync(bundle, { encoding: 'utf8', flag: 'r' }));\r\n        touch(bundle);\r\n        return result;\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'ENOENT') {\r\n            writeBundle = true;\r\n        }\r\n        else if (err instanceof SyntaxError) {\r\n            // We have a syntax error. So no valid JSON. Use\r\n            console.log(\"Syntax error parsing message bundle: \" + err.message + \".\");\r\n            fs.unlink(bundle, function (err) {\r\n                if (err) {\r\n                    console.error(\"Deleting corrupted bundle \" + bundle + \" failed.\");\r\n                }\r\n            });\r\n            useMemoryOnly = true;\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    result = createNLSBundle(header, bundlePath);\r\n    if (!result || useMemoryOnly) {\r\n        return result;\r\n    }\r\n    if (writeBundle) {\r\n        try {\r\n            fs.writeFileSync(bundle, JSON.stringify(result), { encoding: 'utf8', flag: 'wx' });\r\n        }\r\n        catch (err) {\r\n            if (err.code === 'EEXIST') {\r\n                return result;\r\n            }\r\n            throw err;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadDefaultNlsBundle(bundlePath) {\r\n    try {\r\n        return createDefaultNlsBundle(bundlePath);\r\n    }\r\n    catch (err) {\r\n        console.log(\"Generating default bundle from meta data failed.\", err);\r\n        return undefined;\r\n    }\r\n}\r\nfunction loadNlsBundle(header, bundlePath) {\r\n    var result;\r\n    // Core decided to use a language pack. Do the same in the extension\r\n    if (supportsLanguagePack()) {\r\n        try {\r\n            result = loadNlsBundleOrCreateFromI18n(header, bundlePath);\r\n        }\r\n        catch (err) {\r\n            console.log(\"Load or create bundle failed \", err);\r\n        }\r\n    }\r\n    if (!result) {\r\n        // No language pack found, but core is running in language pack mode\r\n        // Don't try to use old in the box bundles since the might be stale\r\n        // Fall right back to the default bundle.\r\n        if (options.languagePackSupport) {\r\n            return loadDefaultNlsBundle(bundlePath);\r\n        }\r\n        var candidate = findInTheBoxBundle(bundlePath);\r\n        if (candidate) {\r\n            try {\r\n                return readJsonFileSync(candidate);\r\n            }\r\n            catch (err) {\r\n                console.log(\"Loading in the box message bundle failed.\", err);\r\n            }\r\n        }\r\n        result = loadDefaultNlsBundle(bundlePath);\r\n    }\r\n    return result;\r\n}\r\nfunction tryFindMetaDataHeaderFile(file) {\r\n    var result;\r\n    var dirname = path.dirname(file);\r\n    while (true) {\r\n        result = path.join(dirname, 'nls.metadata.header.json');\r\n        if (fs.existsSync(result)) {\r\n            break;\r\n        }\r\n        var parent = path.dirname(dirname);\r\n        if (parent === dirname) {\r\n            result = undefined;\r\n            break;\r\n        }\r\n        else {\r\n            dirname = parent;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadMessageBundle(file) {\r\n    if (!file) {\r\n        // No file. We are in dev mode. Return the default\r\n        // localize function.\r\n        return localize;\r\n    }\r\n    // Remove extension since we load json files.\r\n    var ext = path.extname(file);\r\n    if (ext) {\r\n        file = file.substr(0, file.length - ext.length);\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.bundle) {\r\n        var headerFile = tryFindMetaDataHeaderFile(file);\r\n        if (headerFile) {\r\n            var bundlePath = path.dirname(headerFile);\r\n            var bundle = resolvedBundles[bundlePath];\r\n            if (bundle === undefined) {\r\n                try {\r\n                    var header = JSON.parse(fs.readFileSync(headerFile, 'utf8'));\r\n                    try {\r\n                        var nlsBundle = loadNlsBundle(header, bundlePath);\r\n                        bundle = cacheBundle(bundlePath, nlsBundle ? { header: header, nlsBundle: nlsBundle } : null);\r\n                    }\r\n                    catch (err) {\r\n                        console.error('Failed to load nls bundle', err);\r\n                        bundle = cacheBundle(bundlePath, null);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error('Failed to read header file', err);\r\n                    bundle = cacheBundle(bundlePath, null);\r\n                }\r\n            }\r\n            if (bundle) {\r\n                var module_3 = file.substr(bundlePath.length + 1).replace(/\\\\/g, '/');\r\n                var messages = bundle.nlsBundle[module_3];\r\n                if (messages === undefined) {\r\n                    console.error(\"Messages for file \" + file + \" not found. See console for details.\");\r\n                    return function () {\r\n                        return 'Messages not found.';\r\n                    };\r\n                }\r\n                return createScopedLocalizeFunction(messages);\r\n            }\r\n        }\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.file) {\r\n        // Try to load a single file bundle\r\n        try {\r\n            var json = readJsonFileSync(resolveLanguage(file));\r\n            if (Array.isArray(json)) {\r\n                return createScopedLocalizeFunction(json);\r\n            }\r\n            else {\r\n                if (isDefined(json.messages) && isDefined(json.keys)) {\r\n                    return createScopedLocalizeFunction(json.messages);\r\n                }\r\n                else {\r\n                    console.error(\"String bundle '\" + file + \"' uses an unsupported format.\");\r\n                    return function () {\r\n                        return 'File bundle has unsupported format. See console for details';\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            if (err.code !== 'ENOENT') {\r\n                console.error('Failed to load single file bundle', err);\r\n            }\r\n        }\r\n    }\r\n    console.error(\"Failed to load message bundle for file \" + file);\r\n    return function () {\r\n        return 'Failed to load message bundle. See console for details.';\r\n    };\r\n}\r\nexports.loadMessageBundle = loadMessageBundle;\r\nfunction config(opts) {\r\n    if (opts) {\r\n        if (isString(opts.locale)) {\r\n            options.locale = opts.locale.toLowerCase();\r\n            options.language = options.locale;\r\n            resolvedLanguage = undefined;\r\n            resolvedBundles = Object.create(null);\r\n        }\r\n        if (opts.messageFormat !== undefined) {\r\n            options.messageFormat = opts.messageFormat;\r\n        }\r\n        if (opts.bundleFormat === BundleFormat.standalone && options.languagePackSupport === true) {\r\n            options.languagePackSupport = false;\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    return loadMessageBundle;\r\n}\r\nexports.config = config;\r\n//# sourceMappingURL=main.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as fs from 'fs';\nimport * as vscode from 'vscode';\nimport * as path from 'path';\nimport * as utils from './utils';\nimport * as constants from './constants';\nimport * as azureFunctionsContracts from '../contracts/azureFunctions/azureFunctionsContracts';\nimport { BindingType, IConnectionStringInfo } from 'sql-bindings';\nimport { ConnectionDetails, IConnectionInfo } from 'vscode-mssql';\n// https://github.com/microsoft/vscode-azurefunctions/blob/main/src/vscode-azurefunctions.api.d.ts\nimport { AzureFunctionsExtensionApi } from '../../../types/vscode-azurefunctions.api';\n// https://github.com/microsoft/vscode-azuretools/blob/main/ui/api.d.ts\nimport { AzureExtensionApiProvider } from '../../../types/vscode-azuretools.api';\n/**\n * Represents the settings in an Azure function project's locawl.settings.json file\n */\nexport interface ILocalSettingsJson {\n\tIsEncrypted?: boolean;\n\tValues?: { [key: string]: string };\n\tHost?: { [key: string]: string };\n\tConnectionStrings?: { [key: string]: string };\n}\n\nexport interface IFileFunctionObject {\n\tfilePromise: Promise<string>;\n\twatcherDisposable: vscode.Disposable;\n}\n\n/**\n * copied and modified from vscode-azurefunctions extension\n * https://github.com/microsoft/vscode-azurefunctions/blob/main/src/funcConfig/local.settings.ts\n * @param localSettingsPath full path to local.settings.json\n * @returns settings in local.settings.json. If no settings are found, returns default \"empty\" settings\n */\nexport async function getLocalSettingsJson(localSettingsPath: string): Promise<ILocalSettingsJson> {\n\tif (fs.existsSync(localSettingsPath)) {\n\t\tconst data: string = (fs.readFileSync(localSettingsPath)).toString();\n\t\ttry {\n\t\t\treturn JSON.parse(data);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\tthrow new Error(constants.failedToParse(constants.azureFunctionLocalSettingsFileName, error));\n\t\t}\n\t}\n\treturn {\n\t\tIsEncrypted: false // Include this by default otherwise the func cli assumes settings are encrypted and fails to run\n\t};\n}\n\n/**\n * Adds a new setting to a project's local.settings.json file\n * modified from setLocalAppSetting code from vscode-azurefunctions extension\n * @param projectFolder full path to project folder\n * @param key Key of the new setting\n * @param value Value of the new setting\n * @returns true if successful adding the new setting, false if unsuccessful\n */\nexport async function setLocalAppSetting(projectFolder: string, key: string, value: string): Promise<boolean> {\n\tconst localSettingsPath: string = path.join(projectFolder, constants.azureFunctionLocalSettingsFileName);\n\tconst settings: ILocalSettingsJson = await getLocalSettingsJson(localSettingsPath);\n\n\tsettings.Values = settings.Values || {};\n\tif (settings.Values[key] === value) {\n\t\t// don't do anything if it's the same as the existing value\n\t\treturn true;\n\t} else if (settings.Values[key]) {\n\t\tconst result = await vscode.window.showWarningMessage(constants.settingAlreadyExists(key), { modal: true }, constants.yesString);\n\t\tif (result !== constants.yesString) {\n\t\t\t// key already exists and user doesn't want to overwrite it\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tsettings.Values[key] = value;\n\tawait fs.promises.writeFile(localSettingsPath, JSON.stringify(settings, undefined, 2));\n\treturn true;\n}\n\n/**\n * Gets the Azure Functions extension API if it is installed\n * if it is not installed, prompt the user to install directly, learn more, or do not install\n * @returns the Azure Functions extension API if it is installed, prompt if it is not installed\n */\nexport async function getAzureFunctionsExtensionApi(): Promise<AzureFunctionsExtensionApi | undefined> {\n\tlet apiProvider = await vscode.extensions.getExtension(constants.azureFunctionsExtensionName)?.activate() as AzureExtensionApiProvider;\n\tif (!apiProvider) {\n\t\tconst response = await vscode.window.showInformationMessage(constants.azureFunctionsExtensionNotFound,\n\t\t\tconstants.install, constants.learnMore, constants.doNotInstall);\n\t\tif (response === constants.install) {\n\t\t\tconst extensionInstalled = new Promise<void>((resolve, reject) => {\n\t\t\t\tconst timeout = setTimeout(async () => {\n\t\t\t\t\treject(new Error(constants.timeoutExtensionError));\n\t\t\t\t\textensionChange.dispose();\n\t\t\t\t}, 10000);\n\t\t\t\tlet extensionChange = vscode.extensions.onDidChange(async () => {\n\t\t\t\t\tif (vscode.extensions.getExtension(constants.azureFunctionsExtensionName)) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\textensionChange.dispose();\n\t\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tawait vscode.window.withProgress(\n\t\t\t\t{\n\t\t\t\t\tlocation: vscode.ProgressLocation.Notification,\n\t\t\t\t\ttitle: constants.azureFunctionsExtensionName,\n\t\t\t\t\tcancellable: false\n\t\t\t\t}, async (_progress, _token) => {\n\t\t\t\t\tawait vscode.commands.executeCommand('workbench.extensions.installExtension', constants.azureFunctionsExtensionName);\n\t\t\t\t}\n\t\t\t);\n\t\t\t// the extension has not been notified that the azure function extension is installed so wait till it is to then activate it\n\t\t\tawait extensionInstalled;\n\t\t\tapiProvider = await vscode.extensions.getExtension(constants.azureFunctionsExtensionName)?.activate() as AzureExtensionApiProvider;\n\t\t} else if (response === constants.learnMore) {\n\t\t\tawait vscode.env.openExternal(vscode.Uri.parse(constants.linkToAzureFunctionExtension));\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\tconst azureFunctionApi = apiProvider.getApi<AzureFunctionsExtensionApi>('^1.8.0');\n\tif (azureFunctionApi) {\n\t\treturn azureFunctionApi;\n\t} else {\n\t\tvoid vscode.window.showErrorMessage(constants.azureFunctionsExtensionNotInstalled);\n\t\treturn undefined;\n\t}\n}\n\n/**\n * Gets the azure function project for the user to choose from a list of projects files\n * If only one project is found that project is used to add the binding to\n * if no project is found, user is informed there needs to be a C# Azure Functions project\n * @returns the selected project file path\n */\nexport async function getAzureFunctionProject(): Promise<string | undefined> {\n\tlet selectedProjectFile: string | undefined = '';\n\tif (vscode.workspace.workspaceFolders === undefined || vscode.workspace.workspaceFolders.length === 0) {\n\t\treturn selectedProjectFile;\n\t} else {\n\t\tconst projectFiles = await getAzureFunctionProjectFiles();\n\t\tif (projectFiles !== undefined) {\n\t\t\tif (projectFiles.length > 1) {\n\t\t\t\t// select project to add azure function to\n\t\t\t\tselectedProjectFile = (await vscode.window.showQuickPick(projectFiles, {\n\t\t\t\t\tcanPickMany: false,\n\t\t\t\t\ttitle: constants.selectProject,\n\t\t\t\t\tignoreFocusOut: true\n\t\t\t\t}));\n\t\t\t\treturn selectedProjectFile;\n\t\t\t} else if (projectFiles.length === 1) {\n\t\t\t\t// only one azure function project found\n\t\t\t\treturn projectFiles[0];\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\n/**\n * Gets the azure function project files based on the host file found in the same folder\n * @returns the azure function project files paths\n */\nexport async function getAzureFunctionProjectFiles(): Promise<string[] | undefined> {\n\tlet projFiles: string[] = [];\n\tconst hostFiles = await getHostFiles();\n\tif (!hostFiles) {\n\t\treturn undefined;\n\t}\n\tfor (let host of hostFiles) {\n\t\tlet projectFile = await vscode.workspace.findFiles(new vscode.RelativePattern(path.dirname(host), '*.csproj'));\n\t\tprojectFile.filter(file => path.dirname(file.fsPath) === path.dirname(host) ? projFiles.push(file?.fsPath) : projFiles);\n\t}\n\treturn projFiles.length > 0 ? projFiles : undefined;\n}\n\n/**\n * Gets the host files from the workspace\n * @returns the host file paths\n */\nexport async function getHostFiles(): Promise<string[] | undefined> {\n\tconst hostUris = await vscode.workspace.findFiles('**/host.json');\n\tconst hostFiles = hostUris.map(uri => uri.fsPath);\n\treturn hostFiles.length > 0 ? hostFiles : undefined;\n}\n\n/**\n * Gets the local.settings.json file path\n * @param projectFolder The path to the project the setting should be added to\n * @returns the local.settings.json file path\n */\nexport async function getSettingsFile(projectFolder: string): Promise<string | undefined> {\n\treturn path.join(projectFolder, 'local.settings.json');\n}\n\n/**\n * New azure function file watcher and watcher disposable to be used to watch for changes to the azure function project\n * @param projectFolder is the parent directory to the project file\n * @returns the function file path once created and the watcher disposable\n */\nexport function waitForNewFunctionFile(projectFolder: string): IFileFunctionObject {\n\tconst watcher = vscode.workspace.createFileSystemWatcher((\n\t\tnew vscode.RelativePattern(projectFolder, '**/*.cs')), false, true, true);\n\tconst filePromise = new Promise<string>((resolve, _) => {\n\t\twatcher.onDidCreate((e) => {\n\t\t\tresolve(e.fsPath);\n\t\t});\n\t});\n\treturn {\n\t\tfilePromise,\n\t\twatcherDisposable: watcher\n\t};\n}\n\n/**\n * Retrieves the new host project file once it has created and the watcher disposable\n * @returns the host file path once created and the watcher disposable\n */\nexport function waitForNewHostFile(): IFileFunctionObject {\n\tconst watcher = vscode.workspace.createFileSystemWatcher('**/host.json', false, true, true);\n\tconst filePromise = new Promise<string>((resolve, _) => {\n\t\twatcher.onDidCreate((e) => {\n\t\t\tresolve(e.fsPath);\n\t\t});\n\t});\n\treturn {\n\t\tfilePromise,\n\t\twatcherDisposable: watcher\n\t};\n}\n\n/**\n * Adds the required nuget package to the project\n * @param selectedProjectFile is the users selected project file path\n */\nexport async function addNugetReferenceToProjectFile(selectedProjectFile: string): Promise<void> {\n\tawait utils.executeCommand(`dotnet add \"${selectedProjectFile}\" package ${constants.sqlExtensionPackageName} --prerelease`);\n}\n\n/**\n * Adds the Sql Connection String to the local.settings.json\n * @param connectionString of the SQL Server connection that was chosen by the user\n * @param projectFolder The path to the project the setting should be added to\n * @param settingName The name of the setting to add to the local.settings.json\n */\nexport async function addConnectionStringToConfig(connectionString: string, projectFolder: string, settingName: string = constants.sqlConnectionStringSetting): Promise<void> {\n\tconst settingsFile = await getSettingsFile(projectFolder);\n\tif (settingsFile) {\n\t\tawait setLocalAppSetting(path.dirname(settingsFile), settingName, connectionString);\n\t}\n}\n\n/**\n * Gets the Azure Functions project that contains the given file if the project is open in one of the workspace folders\n * @param fileUri file that the containing project needs to be found for\n * @returns uri of project or undefined if project couldn't be found\n */\nexport async function getAFProjectContainingFile(fileUri: vscode.Uri): Promise<vscode.Uri | undefined> {\n\t// get functions csprojs in the workspace\n\tconst projectPromises = vscode.workspace.workspaceFolders?.map(f => utils.getAllProjectsInFolder(f.uri, '.csproj')) ?? [];\n\tconst functionsProjects = (await Promise.all(projectPromises)).reduce((prev, curr) => prev.concat(curr), []).filter(p => isFunctionProject(path.dirname(p.fsPath)));\n\n\t// look for project folder containing file if there's more than one\n\tif (functionsProjects.length > 1) {\n\t\t// TODO: figure out which project contains the file\n\t\t// the new style csproj doesn't list all the files in the project anymore, unless the file isn't in the same folder\n\t\t// so we can't rely on using that to check\n\t\tconsole.error('need to find which project contains the file ' + fileUri.fsPath);\n\t\treturn undefined;\n\t} else if (functionsProjects.length === 0) {\n\t\tthrow new Error(constants.noAzureFunctionsProjectsInWorkspace);\n\t} else {\n\t\treturn functionsProjects[0];\n\t}\n}\n\n// Use 'host.json' as an indicator that this is a functions project\n// copied from verifyIsproject.ts in vscode-azurefunctions extension\nexport async function isFunctionProject(folderPath: string): Promise<boolean> {\n\treturn fs.existsSync(path.join(folderPath, constants.hostFileName));\n}\n\n/**\n * Prompts the user to select type of binding and returns result\n * @param funcName (Optional) Name of the function to which we are adding the SQL Binding\n */\nexport async function promptForBindingType(funcName?: string): Promise<BindingType | undefined> {\n\tconst inputOutputItems: (vscode.QuickPickItem & { type: BindingType })[] = [\n\t\t{\n\t\t\tlabel: constants.input,\n\t\t\tdescription: constants.inputDescription,\n\t\t\ttype: BindingType.input\n\t\t},\n\t\t{\n\t\t\tlabel: constants.output,\n\t\t\tdescription: constants.outputDescription,\n\t\t\ttype: BindingType.output\n\t\t}\n\t];\n\n\tconst selectedBinding = (await vscode.window.showQuickPick(inputOutputItems, {\n\t\tcanPickMany: false,\n\t\ttitle: constants.selectBindingType(funcName),\n\t\tignoreFocusOut: true\n\t}));\n\n\treturn selectedBinding?.type;\n}\n\n/**\n * Prompts the user to enter object name for the SQL query\n * @param bindingType Type of SQL Binding\n * @param connectionInfo (optional) connection info from the selected connection profile\n * if left undefined we prompt to manually enter the object name\n * @returns the object name from user's input or menu choice\n */\nexport async function promptForObjectName(bindingType: BindingType, connectionInfo?: IConnectionInfo): Promise<string | undefined> {\n\t// show the connection string methods (user input and connection profile options)\n\tlet connectionURI: string | undefined;\n\tlet selectedDatabase: string | undefined;\n\n\tif (!connectionInfo) {\n\t\t// prompt is shown when user selects an existing connection string setting\n\t\t// or manually enters a connection string\n\t\treturn promptToManuallyEnterObjectName(bindingType);\n\t}\n\n\t// TODO create path to solve for selectView (first need to support views as well)\n\t// Prompt user to select a table based on connection profile and selected database}\n\t// get connectionURI and selectedDatabase to be used for listing tables query request\n\tconnectionURI = await getConnectionURI(connectionInfo);\n\tif (!connectionURI) {\n\t\t// mssql connection error\n\t\treturn undefined;\n\t}\n\tselectedDatabase = await promptSelectDatabase(connectionURI);\n\tif (!selectedDatabase) {\n\t\t// User cancelled\n\t\treturn undefined;\n\t}\n\n\tconnectionInfo.database = selectedDatabase;\n\n\tlet selectedObjectName = await promptSelectTable(connectionURI, bindingType, selectedDatabase);\n\n\treturn selectedObjectName;\n}\n\n/**\n * Prompts the user to enter connection setting and updates it from AF project\n * @param projectUri Azure Function project uri\n * @param connectionInfo (optional) connection info from the user to update the connection string,\n * if left undefined we prompt the user for the connection info\n * @returns connection string setting name to be used for the createFunction API\n */\nexport async function promptAndUpdateConnectionStringSetting(projectUri: vscode.Uri | undefined, connectionInfo?: IConnectionInfo): Promise<IConnectionStringInfo | undefined> {\n\tlet connectionStringSettingName: string | undefined;\n\tconst vscodeMssqlApi = await utils.getVscodeMssqlApi();\n\n\t// show the settings from project's local.settings.json if there's an AF functions project\n\tif (projectUri) {\n\t\tlet settings;\n\t\ttry {\n\t\t\tsettings = await getLocalSettingsJson(path.join(path.dirname(projectUri.fsPath!), constants.azureFunctionLocalSettingsFileName));\n\t\t} catch (e) {\n\t\t\tvoid vscode.window.showErrorMessage(utils.getErrorMessage(e));\n\t\t\treturn;\n\t\t}\n\n\t\t// Known Azure settings reference for Azure Functions\n\t\t// https://docs.microsoft.com/en-us/azure/azure-functions/functions-app-settings\n\t\tconst knownSettings: string[] = [\n\t\t\t'APPINSIGHTS_INSTRUMENTATIONKEY',\n\t\t\t'APPLICATIONINSIGHTS_CONNECTION_STRING',\n\t\t\t'AZURE_FUNCTION_PROXY_DISABLE_LOCAL_CALL',\n\t\t\t'AZURE_FUNCTION_PROXY_BACKEND_URL_DECODE_SLASHES',\n\t\t\t'AZURE_FUNCTIONS_ENVIRONMENT',\n\t\t\t'AzureWebJobsDashboard',\n\t\t\t'AzureWebJobsDisableHomepage',\n\t\t\t'AzureWebJobsDotNetReleaseCompilation',\n\t\t\t'AzureWebJobsFeatureFlags',\n\t\t\t'AzureWebJobsKubernetesSecretName',\n\t\t\t'AzureWebJobsSecretStorageKeyVaultClientId',\n\t\t\t'AzureWebJobsSecretStorageKeyVaultClientSecret',\n\t\t\t'AzureWebJobsSecretStorageKeyVaultName',\n\t\t\t'AzureWebJobsSecretStorageKeyVaultTenantId',\n\t\t\t'AzureWebJobsSecretStorageKeyVaultUri',\n\t\t\t'AzureWebJobsSecretStorageSas',\n\t\t\t'AzureWebJobsSecretStorageType',\n\t\t\t'AzureWebJobsStorage',\n\t\t\t'AzureWebJobs_TypeScriptPath',\n\t\t\t'DOCKER_SHM_SIZE',\n\t\t\t'FUNCTION_APP_EDIT_MODE',\n\t\t\t'FUNCTIONS_EXTENSION_VERSION',\n\t\t\t'FUNCTIONS_V2_COMPATIBILITY_MODE',\n\t\t\t'FUNCTIONS_WORKER_PROCESS_COUNT',\n\t\t\t'FUNCTIONS_WORKER_RUNTIME',\n\t\t\t'FUNCTIONS_WORKER_SHARED_MEMORY_DATA_TRANSFER_ENABLED',\n\t\t\t'MDMaxBackgroundUpgradePeriod',\n\t\t\t'MDNewSnapshotCheckPeriod',\n\t\t\t'MDMinBackgroundUpgradePeriod',\n\t\t\t'PIP_EXTRA_INDEX_URL',\n\t\t\t'PYTHON_ISOLATE_WORKER_DEPENDENCIES (Preview)',\n\t\t\t'PYTHON_ENABLE_DEBUG_LOGGING',\n\t\t\t'PYTHON_ENABLE_WORKER_EXTENSIONS',\n\t\t\t'PYTHON_THREADPOOL_THREAD_COUNT',\n\t\t\t'SCALE_CONTROLLER_LOGGING_ENABLED',\n\t\t\t'SCM_LOGSTREAM_TIMEOUT',\n\t\t\t'WEBSITE_CONTENTAZUREFILECONNECTIONSTRING',\n\t\t\t'WEBSITE_CONTENTOVERVNET',\n\t\t\t'WEBSITE_CONTENTSHARE',\n\t\t\t'WEBSITE_SKIP_CONTENTSHARE_VALIDATION',\n\t\t\t'WEBSITE_DNS_SERVER',\n\t\t\t'WEBSITE_ENABLE_BROTLI_ENCODING',\n\t\t\t'WEBSITE_MAX_DYNAMIC_APPLICATION_SCALE_OUT',\n\t\t\t'WEBSITE_NODE_DEFAULT_VERSION',\n\t\t\t'WEBSITE_RUN_FROM_PACKAGE',\n\t\t\t'WEBSITE_TIME_ZONE',\n\t\t\t'WEBSITE_VNET_ROUTE_ALL'\n\t\t];\n\n\t\t// setup connetion string setting quickpick\n\t\tlet connectionStringSettings: (vscode.QuickPickItem)[] = [];\n\t\tif (settings?.Values) {\n\t\t\tconnectionStringSettings = Object.keys(settings.Values).filter(setting => !knownSettings.includes(setting)).map(setting => { return { label: setting }; });\n\t\t}\n\n\t\tconnectionStringSettings.unshift({ label: constants.createNewLocalAppSettingWithIcon });\n\t\tlet sqlConnectionStringSettingExists = connectionStringSettings.find(s => s.label === constants.sqlConnectionStringSetting);\n\n\t\twhile (!connectionStringSettingName) {\n\t\t\tconst selectedSetting = await vscode.window.showQuickPick(connectionStringSettings, {\n\t\t\t\tcanPickMany: false,\n\t\t\t\ttitle: constants.selectSetting,\n\t\t\t\tignoreFocusOut: true\n\t\t\t});\n\t\t\tif (!selectedSetting) {\n\t\t\t\t// User cancelled\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (selectedSetting.label === constants.createNewLocalAppSettingWithIcon) {\n\t\t\t\tconst newConnectionStringSettingName = await vscode.window.showInputBox(\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: constants.enterConnectionStringSettingName,\n\t\t\t\t\t\tignoreFocusOut: true,\n\t\t\t\t\t\tvalue: sqlConnectionStringSettingExists ? '' : constants.sqlConnectionStringSetting,\n\t\t\t\t\t\tvalidateInput: input => input ? undefined : constants.nameMustNotBeEmpty\n\t\t\t\t\t}\n\t\t\t\t) ?? '';\n\n\t\t\t\tif (!newConnectionStringSettingName) {\n\t\t\t\t\t// go back to select setting quickpick if user escapes from inputting the setting name in case they changed their mind\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet selectedConnectionStringMethod: string | undefined;\n\t\t\t\tlet connectionString: string | undefined = '';\n\t\t\t\twhile (true) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst projectFolder: string = path.dirname(projectUri.fsPath);\n\t\t\t\t\t\tconst localSettingsPath: string = path.join(projectFolder, constants.azureFunctionLocalSettingsFileName);\n\n\t\t\t\t\t\tif (!connectionInfo) {\n\t\t\t\t\t\t\tconst listOfConnectionStringMethods = [constants.connectionProfile, constants.userConnectionString];\n\t\t\t\t\t\t\t// show the connection string methods (user input and connection profile options)\n\t\t\t\t\t\t\tselectedConnectionStringMethod = await vscode.window.showQuickPick(listOfConnectionStringMethods, {\n\t\t\t\t\t\t\t\tcanPickMany: false,\n\t\t\t\t\t\t\t\ttitle: constants.selectConnectionString,\n\t\t\t\t\t\t\t\tignoreFocusOut: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (!selectedConnectionStringMethod) {\n\t\t\t\t\t\t\t\t// User cancelled\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (selectedConnectionStringMethod === constants.userConnectionString) {\n\t\t\t\t\t\t\t\t// User chooses to enter connection string manually\n\t\t\t\t\t\t\t\tconnectionString = await vscode.window.showInputBox(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: constants.enterConnectionString,\n\t\t\t\t\t\t\t\t\t\tignoreFocusOut: true,\n\t\t\t\t\t\t\t\t\t\tvalue: 'Server=localhost;Initial Catalog={db_name};User ID=sa;Password={your_password};Persist Security Info=False',\n\t\t\t\t\t\t\t\t\t\tvalidateInput: input => input ? undefined : constants.valueMustNotBeEmpty\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t) ?? '';\n\t\t\t\t\t\t\t\tif (!connectionString) {\n\t\t\t\t\t\t\t\t\t// User cancelled\n\t\t\t\t\t\t\t\t\t// we can prompt for connection string methods again\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Let user choose from existing connections to create connection string from\n\t\t\t\t\t\t\t\tconnectionInfo = await vscodeMssqlApi.promptForConnection(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (selectedConnectionStringMethod !== constants.userConnectionString) {\n\t\t\t\t\t\t\tif (!connectionInfo) {\n\t\t\t\t\t\t\t\t// User cancelled return to selectedConnectionStringMethod prompt\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// get the connection string including prompts for password if needed\n\t\t\t\t\t\t\tconnectionString = await promptConnectionStringPasswordAndUpdateConnectionString(connectionInfo, localSettingsPath);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!connectionString) {\n\t\t\t\t\t\t\t// user cancelled the prompts\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst success = await setLocalAppSetting(projectFolder, newConnectionStringSettingName, connectionString);\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\t// exit both loops and insert binding\n\t\t\t\t\t\t\tconnectionStringSettingName = newConnectionStringSettingName;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvoid vscode.window.showErrorMessage(constants.selectConnectionError());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// display error message and show select setting quickpick again\n\t\t\t\t\t\tvoid vscode.window.showErrorMessage(constants.selectConnectionError(e));\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// If user cancels out of this or doesn't want to overwrite an existing setting\n\t\t\t\t// just return them to the select setting quickpick in case they changed their mind\n\t\t\t\tconnectionStringSettingName = selectedSetting.label;\n\t\t\t}\n\t\t}\n\t\t// Add sql extension package reference to project. If the reference is already there, it doesn't get added again\n\t\tawait addNugetReferenceToProjectFile(projectUri.fsPath);\n\t} else {\n\t\t// if no AF project was found or there's more than one AF functions project in the workspace,\n\t\t// ask for the user to input the setting name\n\t\tconnectionStringSettingName = await vscode.window.showInputBox({\n\t\t\tprompt: constants.connectionStringSetting,\n\t\t\tplaceHolder: constants.connectionStringSettingPlaceholder,\n\t\t\tignoreFocusOut: true\n\t\t});\n\t}\n\treturn { connectionStringSettingName: connectionStringSettingName!, connectionInfo: connectionInfo };\n}\n\n/**\n * Prompts the user to include password in the connection string and updates the connection string based on user input\n * @param connectionInfo connection info from the connection profile user selected\n * @param localSettingsPath path to the local.settings.json file\n * @returns the updated connection string based on password prompts\n */\nexport async function promptConnectionStringPasswordAndUpdateConnectionString(connectionInfo: IConnectionInfo, localSettingsPath: string): Promise<string | undefined> {\n\tlet includePassword: string | undefined;\n\tlet connectionString: string = '';\n\tlet connectionDetails: ConnectionDetails;\n\tlet userPassword: string | undefined;\n\tconst vscodeMssqlApi = await utils.getVscodeMssqlApi();\n\tconnectionDetails = { options: connectionInfo };\n\n\ttry {\n\t\tif (connectionInfo.authenticationType === 'SqlLogin' && connectionInfo.password) {\n\t\t\t// Prompt to include password in connection string if authentication type is SqlLogin and connection has password saved\n\t\t\tincludePassword = await vscode.window.showQuickPick([constants.yesString, constants.noString], {\n\t\t\t\ttitle: constants.includePassword,\n\t\t\t\tcanPickMany: false,\n\t\t\t\tignoreFocusOut: true\n\t\t\t});\n\t\t\tif (includePassword === constants.yesString) {\n\t\t\t\t// get connection string to include password\n\t\t\t\tconnectionString = await vscodeMssqlApi.getConnectionString(connectionDetails, true, false);\n\t\t\t}\n\t\t}\n\n\t\tif (includePassword !== constants.yesString || !connectionInfo.password || connectionInfo.authenticationType !== 'SqlLogin') {\n\t\t\t// get connection string to not include the password if connection info does not include password,\n\t\t\t// or user chooses to not include password (or if user cancels out of include password prompt), or authentication type is not SQL login\n\t\t\tconnectionString = await vscodeMssqlApi.getConnectionString(connectionDetails, false, false);\n\n\t\t\tif (connectionInfo.authenticationType !== 'SqlLogin') {\n\t\t\t\t// temporarily fix until STS is fix to not include the placeholder: https://github.com/microsoft/sqltoolsservice/issues/1508\n\t\t\t\t// if authentication type is not SQL login, remove password in connection string\n\t\t\t\tconnectionString = connectionString.replace(`Password=${constants.passwordPlaceholder};`, '');\n\t\t\t}\n\n\t\t\tif (!connectionInfo.password && connectionInfo.authenticationType === 'SqlLogin') {\n\t\t\t\t// if a connection exists but does not have password saved we ask user if they would like to enter it and save it in local.settings.json\n\t\t\t\tuserPassword = await vscode.window.showInputBox({\n\t\t\t\t\tprompt: constants.enterPasswordPrompt,\n\t\t\t\t\tignoreFocusOut: true,\n\t\t\t\t\tpassword: true,\n\t\t\t\t\tvalidateInput: input => input ? undefined : constants.valueMustNotBeEmpty\n\t\t\t\t});\n\t\t\t\tif (userPassword) {\n\t\t\t\t\t// if user enters password replace password placeholder with user entered password\n\t\t\t\t\tconnectionString = connectionString.replace(constants.passwordPlaceholder, userPassword);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!userPassword && connectionInfo.authenticationType === 'SqlLogin') {\n\t\t\t\t// show warning message that user will have to enter password manually later in local.settings.json\n\t\t\t\t// if they choose to not to include password, if connection info does not include password\n\t\t\t\tvoid vscode.window.showWarningMessage(constants.userPasswordLater, constants.openFile, constants.closeButton).then(async (result) => {\n\t\t\t\t\tif (result === constants.openFile) {\n\t\t\t\t\t\t// open local.settings.json file (if it exists)\n\t\t\t\t\t\tvoid vscode.commands.executeCommand(constants.vscodeOpenCommand, vscode.Uri.file(localSettingsPath));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn connectionString;\n\t} catch (e) {\n\t\t// failed to get connection string for selected connection and will go back to prompt for connection string methods\n\t\tconsole.warn(e);\n\t\tvoid vscode.window.showErrorMessage(constants.failedToGetConnectionString);\n\t\treturn undefined;\n\t}\n}\n\nexport async function promptSelectDatabase(connectionURI: string): Promise<string | undefined> {\n\tconst vscodeMssqlApi = await utils.getVscodeMssqlApi();\n\n\tlet listDatabases = await vscodeMssqlApi.listDatabases(connectionURI);\n\tconst selectedDatabase = (await vscode.window.showQuickPick(listDatabases, {\n\t\tcanPickMany: false,\n\t\ttitle: constants.selectDatabase,\n\t\tignoreFocusOut: true\n\t}));\n\n\tif (!selectedDatabase) {\n\t\t// User cancelled\n\t\treturn undefined;\n\t}\n\treturn selectedDatabase;\n}\n\nexport async function getConnectionURI(connectionInfo: IConnectionInfo): Promise<string | undefined> {\n\tconst vscodeMssqlApi = await utils.getVscodeMssqlApi();\n\n\tlet connectionURI: string = '';\n\ttry {\n\t\tawait vscode.window.withProgress(\n\t\t\t{\n\t\t\t\tlocation: vscode.ProgressLocation.Notification,\n\t\t\t\ttitle: constants.connectionProgressTitle,\n\t\t\t\tcancellable: false\n\t\t\t}, async (_progress, _token) => {\n\t\t\t\t// show progress bar while connecting to the users selected connection profile\n\t\t\t\tconnectionURI = await vscodeMssqlApi.connect(connectionInfo!);\n\t\t\t}\n\t\t);\n\t} catch (e) {\n\t\t// mssql connection error will be shown to the user\n\t\treturn undefined;\n\t}\n\n\treturn connectionURI;\n}\n\nexport async function promptSelectTable(connectionURI: string, bindingType: BindingType, selectedDatabase: string): Promise<string | undefined> {\n\tconst vscodeMssqlApi = await utils.getVscodeMssqlApi();\n\tconst userObjectName = bindingType === BindingType.input ? constants.enterObjectName : constants.enterObjectNameToUpsert;\n\n\t// Create query to get list of tables from database selected\n\tlet tableQuery = tablesQuery(selectedDatabase);\n\tconst params = { ownerUri: connectionURI, queryString: tableQuery };\n\tlet queryResult: azureFunctionsContracts.SimpleExecuteResult | undefined;\n\t// send SimpleExecuteRequest query to STS to get list of schema and tables based on the connection profile and database of the user\n\tawait vscode.window.withProgress(\n\t\t{\n\t\t\tlocation: vscode.ProgressLocation.Notification,\n\t\t\ttitle: constants.tableListProgressTitle,\n\t\t\tcancellable: false\n\t\t}, async (_progress, _token) => {\n\t\t\tqueryResult = await vscodeMssqlApi.sendRequest(azureFunctionsContracts.SimpleExecuteRequest.type, params);\n\t\t}\n\t);\n\n\t// Get schema and table names from query result rows\n\tconst tableNames = queryResult!.rows.map(r => r[0].displayValue);\n\t// add manual entry option to table names list for user to choose from as well (with pencil icon)\n\tlet manuallyEnterObjectName = '$(pencil) ' + userObjectName;\n\ttableNames.unshift(manuallyEnterObjectName);\n\t// prompt user to select table from list of tables options\n\twhile (true) {\n\t\tlet selectedObject = await vscode.window.showQuickPick(tableNames, {\n\t\t\tcanPickMany: false,\n\t\t\ttitle: constants.selectTable,\n\t\t\tignoreFocusOut: true\n\t\t});\n\n\t\tif (selectedObject === manuallyEnterObjectName) {\n\t\t\tselectedObject = await promptToManuallyEnterObjectName(bindingType);\n\t\t\tif (!selectedObject) {\n\t\t\t\t// user cancelled so we will show the tables prompt again\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\treturn selectedObject;\n\t}\n}\n\nexport function tablesQuery(selectedDatabase: string): string {\n\tlet quotedDatabase = '[' + utils.escapeClosingBrackets(selectedDatabase) + ']';\n\treturn `SELECT CONCAT(QUOTENAME(table_schema),'.',QUOTENAME(table_name)) from ${quotedDatabase}.INFORMATION_SCHEMA.TABLES where TABLE_TYPE = 'BASE TABLE'`;\n}\n\nexport async function promptToManuallyEnterObjectName(bindingType: BindingType): Promise<string | undefined> {\n\t// user manually enters table or view to query or upsert into\n\tlet selectedObject = await vscode.window.showInputBox({\n\t\tprompt: bindingType === BindingType.input ? constants.sqlTableOrViewToQuery : constants.sqlTableToUpsert,\n\t\tplaceHolder: constants.placeHolderObject,\n\t\tvalidateInput: input => input ? undefined : constants.nameMustNotBeEmpty,\n\t\tignoreFocusOut: true\n\t});\n\treturn selectedObject;\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport AdsTelemetryReporter from '@microsoft/ads-extension-telemetry';\nimport { getPackageInfo } from './utils';\n\nconst packageInfo = getPackageInfo()!;\n\nexport const TelemetryReporter = new AdsTelemetryReporter(packageInfo.name, packageInfo.version, packageInfo.aiKey);\n\nexport enum TelemetryViews {\n\tSqlBindingsQuickPick = 'SqlBindingsQuickPick',\n\tCreateAzureFunctionWithSqlBinding = 'CreateAzureFunctionWithSqlBinding'\n}\n\nexport enum TelemetryActions {\n\t// Create Azure Function with Sql Binding from Table\n\tstartCreateAzureFunctionWithSqlBinding = 'startCreateAzureFunctionWithSqlBinding',\n\tfinishCreateAzureFunctionWithSqlBinding = 'finishCreateAzureFunctionWithSqlBinding',\n\texitCreateAzureFunctionQuickpick = 'exitCreateAzureFunctionQuickpick',\n\n\t// Add SQL Binding to Azure Function\n\tstartAddSqlBinding = 'startAddSqlBinding',\n\tgetAzureFunctionProject = 'getAzureFunctionProject',\n\tgetBindingType = 'getBindingType',\n\tgetObjectName = 'getObjectName',\n\tupdateConnectionString = 'updateConnectionString',\n\tfinishAddSqlBinding = 'finishAddSqlBinding',\n\texitSqlBindingsQuickpick = 'exitSqlBindingsQuickpick',\n}\n\nexport enum CreateAzureFunctionStep {\n\tgetAzureFunctionProject = 'getAzureFunctionProject',\n\tlearnMore = 'learnMore',\n\thelpCreateAzureFunctionProject = 'helpCreateAzureFunctionProject',\n\tgetSelectedFolder = 'getSelectedFolder',\n\tgetBindingType = 'getBindingType',\n\tlaunchFromCommandPalette = 'launchFromCommandPalette',\n\tlaunchFromTable = 'launchFromTable',\n\tgetConnectionProfile = 'getConnectionProfile',\n\tgetDatabase = 'getDatabase',\n\tgetObjectName = 'getObjectName',\n\tgetConnectionString = 'getConnectionString',\n\tgetAzureFunctionName = 'getAzureFunctionName',\n\tgetTemplateId = 'getTemplateId',\n\tgetConnectionStringSettingName = 'getConnectionStringSettingName',\n\tpromptForIncludePassword = 'promptForIncludePassword',\n}\n\nexport enum ExitReason {\n\tcancelled = 'cancelled',\n\tfinishCreate = 'finishCreate',\n\ttimeout = 'timeout',\n\terror = 'error',\n\texit = 'exit'\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as vscodeMssql from 'vscode-mssql';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as glob from 'fast-glob';\nimport * as cp from 'child_process';\nimport * as constants from '../common/constants';\n\nexport interface ValidationResult {\n\terrorMessage: string;\n\tvalidated: boolean\n}\n\nexport interface IPackageInfo {\n\tname: string;\n\tfullName: string;\n\tversion: string;\n\taiKey: string;\n}\n\nexport class TimeoutError extends Error { }\n\n/**\n * Consolidates on the error message string\n * @param error The error object to get the message from\n */\nexport function getErrorMessage(error: any): string {\n\treturn (error instanceof Error)\n\t\t? (typeof error.message === 'string' ? error.message : '')\n\t\t: typeof error === 'string' ? error : `${JSON.stringify(error, undefined, '\\t')}`;\n}\n\nexport async function getVscodeMssqlApi(): Promise<vscodeMssql.IExtension> {\n\tconst ext = vscode.extensions.getExtension(vscodeMssql.extension.name) as vscode.Extension<vscodeMssql.IExtension>;\n\treturn ext.activate();\n}\n\nexport async function executeCommand(command: string, cwd?: string): Promise<string> {\n\treturn new Promise<string>((resolve, reject) => {\n\t\tcp.exec(command, { maxBuffer: 500 * 1024, cwd: cwd }, (error: Error | null, stdout: string, stderr: string) => {\n\t\t\tif (error) {\n\t\t\t\treject(error);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (stderr && stderr.length > 0) {\n\t\t\t\treject(new Error(stderr));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresolve(stdout);\n\t\t});\n\t});\n}\n\n/**\n * Gets all the projects of the specified extension in the folder\n * @param folder\n * @param projectExtension project extension to filter on\n * @returns array of project uris\n */\nexport async function getAllProjectsInFolder(folder: vscode.Uri, projectExtension: string): Promise<vscode.Uri[]> {\n\t// path needs to use forward slashes for glob to work\n\tconst escapedPath = glob.escapePath(folder.fsPath.replace(/\\\\/g, '/'));\n\n\t// filter for projects with the specified project extension\n\tconst projFilter = path.posix.join(escapedPath, '**', `*${projectExtension}`);\n\n\t// glob will return an array of file paths with forward slashes, so they need to be converted back if on windows\n\treturn (await glob(projFilter)).map(p => vscode.Uri.file(path.resolve(p)));\n}\n\n/**\n * Generates a quoted full name for the object\n * @param schema of the object\n * @param objectName object chosen by the user\n * @returns the quoted and escaped full name of the specified schema and object\n */\nexport function generateQuotedFullName(schema: string, objectName: string): string {\n\treturn `[${escapeClosingBrackets(schema)}].[${escapeClosingBrackets(objectName)}]`;\n}\n\n/**\n * Returns a promise that will reject after the specified timeout\n * @param errorMessage error message to be returned in the rejection\n * @param ms timeout in milliseconds. Default is 10 seconds\n * @returns a promise that rejects after the specified timeout\n */\nexport function timeoutPromise(errorMessage: string, ms: number = 10000): Promise<string> {\n\treturn new Promise((_, reject) => {\n\t\tsetTimeout(() => {\n\t\t\treject(new TimeoutError(errorMessage));\n\t\t}, ms);\n\t});\n}\n\n/**\n * Gets a unique file name\n * Increment the file name by adding 1 to function name if the file already exists\n * Undefined if the filename suffix count becomes greater than 1024\n * @param fileName base filename to use\n * @param folderPath selected project folder path\n * @returns a promise with the unique file name, or undefined\n */\nexport async function getUniqueFileName(fileName: string, folderPath?: string): Promise<string | undefined> {\n\tif (!folderPath) {\n\t\t// user is creating a brand new azure function project\n\t\treturn undefined;\n\t}\n\n\tlet count: number = 0;\n\tconst maxCount: number = 1024;\n\tlet uniqueFileName = fileName;\n\n\twhile (count < maxCount) {\n\t\tif (!fs.existsSync(path.join(folderPath, uniqueFileName + '.cs'))) {\n\t\t\treturn uniqueFileName;\n\t\t}\n\t\tcount += 1;\n\t\tuniqueFileName = fileName + count.toString();\n\t}\n\treturn undefined;\n}\n\nexport function escapeClosingBrackets(str: string): string {\n\treturn str.replace(']', ']]');\n}\n\n/**\n * Removes all special characters from object name\n * @param objectName can include brackets/periods and user entered special characters\n * @returns the object name without any special characters\n */\nexport function santizeObjectName(objectName: string): string {\n\treturn objectName.replace(/[^a-zA-Z0-9 ]/g, '');\n}\n\n/**\n * Check to see if the input from user entered is valid\n * @param input from user input\n * @returns returns error if the input is empty or has special characters, undefined if the input is valid\n */\nexport function validateFunctionName(input: string): string | undefined {\n\tconst specialChars = /[`!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?~]/;\n\tif (!input) {\n\t\treturn constants.nameMustNotBeEmpty;\n\t} else if (specialChars.test(input)) {\n\t\treturn constants.hasSpecialCharacters;\n\t}\n\treturn undefined;\n}\n\n/**\n * Gets the package info for the extension based on where the extension is installed\n * @returns the package info object\n */\nexport function getPackageInfo(): IPackageInfo {\n\tconst packageJson = require('../../package.json');\n\treturn {\n\t\tname: packageJson.name,\n\t\tfullName: `${packageJson.publisher}.${packageJson.name}`,\n\t\tversion: packageJson.version,\n\t\taiKey: packageJson.aiKey\n\t};\n}\nexport function getErrorType(error: any): string | undefined {\n\tif (error instanceof TimeoutError) {\n\t\treturn 'TimeoutError';\n\t} else {\n\t\treturn 'UnknownError';\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { AddSqlBindingParams, GetAzureFunctionsParams, GetAzureFunctionsResult, ResultStatus } from 'sql-bindings';\nimport { RequestType } from 'vscode-languageclient';\n\n/**\n * Adds a SQL Binding to a specified Azure function in a file\n */\nexport namespace AddSqlBindingRequest {\n\texport const type = new RequestType<AddSqlBindingParams, ResultStatus, void, void>('azureFunctions/sqlBinding');\n}\n\n/**\n * Gets the names of the Azure functions in a file\n */\nexport namespace GetAzureFunctionsRequest {\n\texport const type = new RequestType<GetAzureFunctionsParams, GetAzureFunctionsResult, void, void>('azureFunctions/getAzureFunctions');\n}\n\n// ------------------------------- < Execute String > ------------------------------------\n\n// source: https://github.com/microsoft/azuredatastudio/blob/main/src/sql/azdata.d.ts#L1021\nexport interface SimpleExecuteParams {\n\tqueryString: string;\n\townerUri: string;\n}\n\n/**\n * Simple Query Execute Result will return rowCount, columnInfo, and rows from STS request\n * source: https://github.com/microsoft/azuredatastudio/blob/main/src/sql/azdata.d.ts#L1026\n * rowCount is the number of rows returned with resultset\n * columnInfo is the details about the columns that are povided as solutions\n * rows is a 2D array of the cell values from the resultset\n */\nexport interface SimpleExecuteResult {\n\trowCount: number;\n\tcolumnInfo: IDbColumn[];\n\trows: DbCellValue[][];\n}\n\n// source: https://github.com/microsoft/sqlops-dataprotocolclient/blob/main/src/protocol.ts#L437\nexport namespace SimpleExecuteRequest {\n\texport const type = new RequestType<SimpleExecuteParams, SimpleExecuteResult, void, void>('query/simpleexecute');\n}\n\n// source: https://github.com/microsoft/azuredatastudio/blob/main/src/sql/azdata.d.ts#L907\nexport interface IDbColumn {\n\tallowDBNull?: boolean | undefined;\n\tbaseCatalogName: string;\n\tbaseColumnName: string;\n\tbaseSchemaName: string;\n\tbaseServerName: string;\n\tbaseTableName: string;\n\tcolumnName: string;\n\tcolumnOrdinal?: number | undefined;\n\tcolumnSize?: number | undefined;\n\tisAliased?: boolean | undefined;\n\tisAutoIncrement?: boolean | undefined;\n\tisExpression?: boolean | undefined;\n\tisHidden?: boolean | undefined;\n\tisIdentity?: boolean | undefined;\n\tisKey?: boolean | undefined;\n\tisBytes?: boolean | undefined;\n\tisChars?: boolean | undefined;\n\tisSqlVariant?: boolean | undefined;\n\tisUdt?: boolean | undefined;\n\tdataType: string;\n\tisXml?: boolean | undefined;\n\tisJson?: boolean | undefined;\n\tisLong?: boolean | undefined;\n\tisReadOnly?: boolean | undefined;\n\tisUnique?: boolean | undefined;\n\tnumericPrecision?: number | undefined;\n\tnumericScale?: number | undefined;\n\tudtAssemblyQualifiedName: string;\n\tdataTypeName: string;\n}\n\n// source: https://github.com/microsoft/azuredatastudio/blob/main/src/sql/azdata.d.ts#L1066\nexport interface DbCellValue {\n\tdisplayValue: string;\n\tisNull: boolean;\n\tinvariantCultureDisplayValue: string;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { AzureWizardExecuteStep, IActionContext } from '@microsoft/vscode-azext-utils';\nimport { IConnectionInfo } from 'vscode-mssql';\nimport * as azureFunctionsUtils from '../common/azureFunctionsUtils';\n\n/**\n * This execute step is used to add a connection string to the local.settings.json file when creating a new Azure Functions project\n * and is needed due to vscode restarting the extension host after the user chooses to open project in new window or current window\n * through the createFunction API call for vscode-azurefunctions\n * @param projectFolder The folder containing the Azure Functions project\n * @param connectionInfo The connection info to use when creating the connection string\n * @param connectionStringSettingName the name of the connection string setting\n * @returns AzureWizardExecuteStep to be used in the createFunction API call\n */\nexport function createAddConnectionStringStep(projectFolder: string, connectionInfo: IConnectionInfo, connectionStringSettingName?: string): AzureWizardExecuteStep<IActionContext> {\n\treturn new class AzureWizardExecuteStep {\n\t\t// priority number is set to be lower than OpenFolderStep in vscode-azurefunctions\n\t\t// https://github.com/microsoft/vscode-azurefunctions/blob/main/src/commands/createNewProject/OpenFolderStep.ts#L11\n\t\tpublic priority: number = 240;\n\n\t\tpublic async execute(): Promise<void> {\n\t\t\tlet settingsFile = await azureFunctionsUtils.getSettingsFile(projectFolder);\n\t\t\tif (!settingsFile) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet connectionString = await azureFunctionsUtils.promptConnectionStringPasswordAndUpdateConnectionString(connectionInfo, settingsFile);\n\t\t\tif (!connectionString) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvoid azureFunctionsUtils.addConnectionStringToConfig(connectionString, projectFolder, connectionStringSettingName);\n\t\t}\n\n\t\tpublic shouldExecute(): boolean {\n\t\t\treturn true;\n\t\t}\n\t};\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as uuid from 'uuid';\nimport * as constants from '../common/constants';\nimport * as utils from '../common/utils';\nimport * as azureFunctionsUtils from '../common/azureFunctionsUtils';\nimport { TelemetryActions, TelemetryReporter, TelemetryViews } from '../common/telemetry';\nimport { addSqlBinding, getAzureFunctions } from '../services/azureFunctionsService';\n\nexport async function launchAddSqlBindingQuickpick(uri: vscode.Uri | undefined): Promise<void> {\n\tlet sessionId: string = uuid.v4();\n\tlet quickPickStep: string = '';\n\tlet exitReason: string = 'cancelled';\n\tlet propertyBag: { [key: string]: string } = { sessionId: sessionId };\n\n\tTelemetryReporter.sendActionEvent(TelemetryViews.SqlBindingsQuickPick, TelemetryActions.startAddSqlBinding);\n\tif (!uri) {\n\t\t// this command only shows in the command palette when the active editor is a .cs file, so we can safely assume that's the scenario\n\t\t// when this is called without a uri\n\t\turi = vscode.window.activeTextEditor!.document.uri;\n\n\t\tif (vscode.window.activeTextEditor!.document.isDirty) {\n\t\t\tconst result = await vscode.window.showWarningMessage(constants.saveChangesInFile, { modal: true }, constants.save);\n\n\t\t\tif (result !== constants.save) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait vscode.window.activeTextEditor!.document.save();\n\t\t}\n\t}\n\n\t// get azure functions from STS request\n\tlet getAzureFunctionsResult;\n\ttry {\n\t\tgetAzureFunctionsResult = await getAzureFunctions(uri.fsPath);\n\t} catch (e) {\n\t\tvoid vscode.window.showErrorMessage(utils.getErrorMessage(e));\n\t\treturn;\n\t}\n\n\t// get all the Azure functions in the file\n\tconst azureFunctions = getAzureFunctionsResult.azureFunctions.map(af => typeof (af) === 'string' ? af : af.name);\n\n\tif (azureFunctions.length === 0) {\n\t\tvoid vscode.window.showErrorMessage(constants.noAzureFunctionsInFile);\n\t\treturn;\n\t}\n\n\ttry {\n\t\t// 1. select Azure function from the current file\n\t\tquickPickStep = 'getAzureFunctionProject';\n\t\tconst azureFunctionName = (await vscode.window.showQuickPick(azureFunctions, {\n\t\t\tcanPickMany: false,\n\t\t\ttitle: constants.selectAzureFunction,\n\t\t\tignoreFocusOut: true\n\t\t}));\n\n\t\tif (!azureFunctionName) {\n\t\t\treturn;\n\t\t}\n\t\tTelemetryReporter.createActionEvent(TelemetryViews.SqlBindingsQuickPick, TelemetryActions.getAzureFunctionProject)\n\t\t\t.withAdditionalProperties(propertyBag).send();\n\n\t\t// 2. select input or output binding\n\t\tquickPickStep = 'getBindingType';\n\t\tconst selectedBinding = await azureFunctionsUtils.promptForBindingType();\n\n\t\tif (!selectedBinding) {\n\t\t\treturn;\n\t\t}\n\t\tpropertyBag.bindingType = selectedBinding;\n\t\tTelemetryReporter.createActionEvent(TelemetryViews.SqlBindingsQuickPick, TelemetryActions.getBindingType)\n\t\t\t.withAdditionalProperties(propertyBag).send();\n\n\t\t// 3. ask for connection string setting name\n\t\tlet projectUri: vscode.Uri | undefined;\n\t\ttry {\n\t\t\tprojectUri = await azureFunctionsUtils.getAFProjectContainingFile(uri);\n\t\t} catch (e) {\n\t\t\t// continue even if there's no AF project found. The binding should still be able to be added as long as there was an azure function found in the file earlier\n\t\t}\n\n\t\tquickPickStep = 'updateConnectionString';\n\t\tlet connectionStringInfo = await azureFunctionsUtils.promptAndUpdateConnectionStringSetting(projectUri);\n\t\tif (!connectionStringInfo) {\n\t\t\treturn;\n\t\t}\n\t\tTelemetryReporter.createActionEvent(TelemetryViews.SqlBindingsQuickPick, TelemetryActions.updateConnectionString)\n\t\t\t.withAdditionalProperties(propertyBag).send();\n\n\t\t// 4. ask for object name for the binding\n\t\tquickPickStep = 'getObjectName';\n\t\tconst objectName = await azureFunctionsUtils.promptForObjectName(selectedBinding, connectionStringInfo.connectionInfo);\n\t\tif (!objectName) {\n\t\t\treturn;\n\t\t}\n\t\tTelemetryReporter.createActionEvent(TelemetryViews.SqlBindingsQuickPick, TelemetryActions.getObjectName)\n\t\t\t.withAdditionalProperties(propertyBag).send();\n\n\t\t// 5. insert binding\n\t\ttry {\n\t\t\tquickPickStep = 'insertBinding';\n\t\t\tconst result = await addSqlBinding(selectedBinding, uri.fsPath, azureFunctionName, objectName, connectionStringInfo.connectionStringSettingName!);\n\n\t\t\tif (!result.success) {\n\t\t\t\tvoid vscode.window.showErrorMessage(result.errorMessage);\n\t\t\t\tTelemetryReporter.createErrorEvent(TelemetryViews.SqlBindingsQuickPick, TelemetryActions.finishAddSqlBinding)\n\t\t\t\t\t.withAdditionalProperties(propertyBag).send();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\texitReason = 'done';\n\t\t\tTelemetryReporter.createActionEvent(TelemetryViews.SqlBindingsQuickPick, TelemetryActions.finishAddSqlBinding)\n\t\t\t\t.withAdditionalProperties(propertyBag).send();\n\t\t} catch (e) {\n\t\t\tvoid vscode.window.showErrorMessage(utils.getErrorMessage(e));\n\t\t\tTelemetryReporter.createErrorEvent(TelemetryViews.SqlBindingsQuickPick, TelemetryActions.finishAddSqlBinding, undefined, utils.getErrorType(e))\n\t\t\t\t.withAdditionalProperties(propertyBag).send();\n\t\t\treturn;\n\t\t}\n\t} catch (e) {\n\t\tpropertyBag.quickPickStep = quickPickStep;\n\t\texitReason = 'error';\n\t\tvoid vscode.window.showErrorMessage(utils.getErrorMessage(e));\n\n\t\tTelemetryReporter.createErrorEvent(TelemetryViews.SqlBindingsQuickPick, TelemetryActions.exitSqlBindingsQuickpick, undefined, utils.getErrorType(e))\n\t\t\t.withAdditionalProperties(propertyBag).send();\n\t} finally {\n\t\tpropertyBag.quickPickStep = quickPickStep;\n\t\tpropertyBag.exitReason = exitReason;\n\t\tTelemetryReporter.createActionEvent(TelemetryViews.SqlBindingsQuickPick, TelemetryActions.exitSqlBindingsQuickpick)\n\t\t\t.withAdditionalProperties(propertyBag).send();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as path from 'path';\nimport * as uuid from 'uuid';\nimport * as utils from '../common/utils';\nimport * as azureFunctionsUtils from '../common/azureFunctionsUtils';\nimport * as constants from '../common/constants';\nimport * as azureFunctionsContracts from '../contracts/azureFunctions/azureFunctionsContracts';\nimport { CreateAzureFunctionStep, TelemetryActions, TelemetryReporter, TelemetryViews, ExitReason } from '../common/telemetry';\nimport { AddSqlBindingParams, BindingType, GetAzureFunctionsParams, GetAzureFunctionsResult, IConnectionStringInfo, ResultStatus } from 'sql-bindings';\nimport { IConnectionInfo, ITreeNodeInfo } from 'vscode-mssql';\nimport { createAddConnectionStringStep } from '../createNewProject/addConnectionStringStep';\n\nexport const hostFileName: string = 'host.json';\n\nexport async function createAzureFunction(node?: ITreeNodeInfo): Promise<void> {\n\t// telemetry properties for create azure function\n\tlet sessionId: string = uuid.v4();\n\tlet propertyBag: { [key: string]: string } = { sessionId: sessionId };\n\tlet telemetryStep: string = '';\n\tlet exitReason: string = ExitReason.cancelled;\n\tTelemetryReporter.sendActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, TelemetryActions.startCreateAzureFunctionWithSqlBinding);\n\tlet connectionInfo: IConnectionInfo | undefined;\n\tlet isCreateNewProject: boolean = false;\n\tlet newFunctionFileObject: azureFunctionsUtils.IFileFunctionObject | undefined;\n\n\ttry {\n\t\tconst azureFunctionApi = await azureFunctionsUtils.getAzureFunctionsExtensionApi();\n\t\tif (!azureFunctionApi) {\n\t\t\texitReason = ExitReason.error;\n\t\t\tpropertyBag.exitReason = exitReason;\n\t\t\tTelemetryReporter.createErrorEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, TelemetryActions.exitCreateAzureFunctionQuickpick)\n\t\t\t\t.withAdditionalProperties(propertyBag).send();\n\t\t\treturn;\n\t\t}\n\t\t/**\n\t\t * Prompts user for azure function project path to use\n\t\t * If multiple found in workspace we prompt user to pick one\n\t\t * If one found in workspace we use that\n\t\t * If none found in workspace we show error message but continue with createFunction message\n\t\t */\n\t\tlet projectFile = await azureFunctionsUtils.getAzureFunctionProject();\n\t\tlet projectFolder: string;\n\t\ttelemetryStep = CreateAzureFunctionStep.getAzureFunctionProject;\n\t\tif (!projectFile) {\n\t\t\twhile (true) {\n\t\t\t\t// show warning message that user needs an azure function project to create a function\n\t\t\t\tlet projectCreate = await vscode.window.showErrorMessage(constants.azureFunctionsProjectMustBeOpened,\n\t\t\t\t\tconstants.createProject, constants.learnMore);\n\t\t\t\tif (projectCreate === constants.learnMore) {\n\t\t\t\t\ttelemetryStep = CreateAzureFunctionStep.learnMore;\n\t\t\t\t\texitReason = ExitReason.exit;\n\t\t\t\t\tvoid vscode.commands.executeCommand('vscode.open', vscode.Uri.parse(constants.sqlBindingsDoc));\n\t\t\t\t\treturn;\n\t\t\t\t} else if (projectCreate === constants.createProject) {\n\t\t\t\t\ttelemetryStep = CreateAzureFunctionStep.helpCreateAzureFunctionProject;\n\t\t\t\t\tTelemetryReporter.createActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, telemetryStep)\n\t\t\t\t\t\t.withAdditionalProperties(propertyBag).send();\n\n\t\t\t\t\tisCreateNewProject = true;\n\t\t\t\t\ttelemetryStep = CreateAzureFunctionStep.getSelectedFolder;\n\t\t\t\t\t// user either has no folder open or an empty workspace\n\t\t\t\t\t// prompt user to choose a folder to create the project in\n\t\t\t\t\tconst browseProjectLocation = await vscode.window.showQuickPick(\n\t\t\t\t\t\t[constants.browseEllipsisWithIcon],\n\t\t\t\t\t\t{ title: constants.selectAzureFunctionProjFolder, ignoreFocusOut: true });\n\t\t\t\t\tif (!browseProjectLocation) {\n\t\t\t\t\t\t// User cancelled\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst projectFolders = (await vscode.window.showOpenDialog({\n\t\t\t\t\t\tcanSelectFiles: false,\n\t\t\t\t\t\tcanSelectFolders: true,\n\t\t\t\t\t\tcanSelectMany: false,\n\t\t\t\t\t\topenLabel: constants.selectButton\n\t\t\t\t\t}));\n\t\t\t\t\tif (!projectFolders) {\n\t\t\t\t\t\t// User cancelled\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tprojectFolder = projectFolders[0].fsPath;\n\n\t\t\t\t\tTelemetryReporter.createActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, telemetryStep)\n\t\t\t\t\t\t.withAdditionalProperties(propertyBag).send();\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t// user cancelled\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// user has an azure function project open\n\t\t\tprojectFolder = path.dirname(projectFile);\n\t\t}\n\t\t// create a system file watcher for the project folder\n\t\tnewFunctionFileObject = azureFunctionsUtils.waitForNewFunctionFile(projectFolder);\n\n\t\t// Prompt user for binding type\n\t\ttelemetryStep = CreateAzureFunctionStep.getBindingType;\n\t\tlet selectedBindingType: BindingType | undefined;\n\t\tlet selectedBinding = await azureFunctionsUtils.promptForBindingType();\n\t\tif (!selectedBinding) {\n\t\t\treturn;\n\t\t}\n\t\tselectedBindingType = selectedBinding;\n\t\tpropertyBag.bindingType = selectedBindingType;\n\t\tTelemetryReporter.createActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, telemetryStep)\n\t\t\t.withAdditionalProperties(propertyBag).send();\n\n\t\t// Get connection string parameters and construct object name from prompt or connectionInfo given\n\t\tlet objectName: string | undefined;\n\t\tconst vscodeMssqlApi = await utils.getVscodeMssqlApi();\n\t\tif (!node) {\n\t\t\t// if user selects command in command palette we prompt user for information\n\t\t\ttelemetryStep = CreateAzureFunctionStep.launchFromCommandPalette;\n\t\t\t// prompt user for connection profile to get connection info\n\t\t\twhile (true) {\n\t\t\t\ttry {\n\t\t\t\t\tconnectionInfo = await vscodeMssqlApi.promptForConnection(true);\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// user cancelled while creating connection profile\n\t\t\t\t\t// show the connection profile selection prompt again\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (!connectionInfo) {\n\t\t\t\t\t// User cancelled\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tTelemetryReporter.createActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, telemetryStep)\n\t\t\t\t\t.withAdditionalProperties(propertyBag).withConnectionInfo(connectionInfo).send();\n\t\t\t\ttelemetryStep = CreateAzureFunctionStep.getObjectName;\n\n\t\t\t\t// prompt user for object name to create function from\n\t\t\t\tobjectName = await azureFunctionsUtils.promptForObjectName(selectedBinding, connectionInfo);\n\t\t\t\tif (!objectName) {\n\t\t\t\t\t// user cancelled\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\t// if user selects table in tree view we use connection info from Object Explorer node\n\t\t\ttelemetryStep = CreateAzureFunctionStep.launchFromTable;\n\t\t\tconnectionInfo = node.connectionInfo;\n\t\t\tTelemetryReporter.createActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, telemetryStep)\n\t\t\t\t.withAdditionalProperties(propertyBag).withConnectionInfo(connectionInfo).send();\n\t\t\t// set the database containing the selected table so it can be used\n\t\t\t// for the initial catalog property of the connection string\n\t\t\tlet newNode: ITreeNodeInfo = node;\n\t\t\twhile (newNode) {\n\t\t\t\tif (newNode.nodeType === 'Database') {\n\t\t\t\t\tconnectionInfo.database = newNode.metadata.name;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tnewNode = newNode.parentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t\tobjectName = utils.generateQuotedFullName(node.metadata.schema, node.metadata.name);\n\t\t\tTelemetryReporter.createActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, telemetryStep)\n\t\t\t\t.withAdditionalProperties(propertyBag).withConnectionInfo(connectionInfo).send();\n\t\t}\n\n\t\t// get function name from user\n\t\ttelemetryStep = CreateAzureFunctionStep.getAzureFunctionName;\n\t\tlet functionName: string;\n\t\t// remove special characters from function name\n\t\tlet uniqueObjectName = utils.santizeObjectName(objectName);\n\t\tlet uniqueFunctionName = await utils.getUniqueFileName(uniqueObjectName, projectFolder);\n\t\tfunctionName = await vscode.window.showInputBox({\n\t\t\ttitle: constants.functionNameTitle,\n\t\t\tvalue: uniqueFunctionName,\n\t\t\tignoreFocusOut: true,\n\t\t\tvalidateInput: input => utils.validateFunctionName(input)\n\t\t}) as string;\n\t\tif (!functionName) {\n\t\t\treturn;\n\t\t}\n\t\tTelemetryReporter.createActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, telemetryStep)\n\t\t\t.withAdditionalProperties(propertyBag)\n\t\t\t.withConnectionInfo(connectionInfo).send();\n\n\t\t// set the templateId based on the selected binding type\n\t\ttelemetryStep = CreateAzureFunctionStep.getTemplateId;\n\t\tlet templateId: string = selectedBindingType === BindingType.input ? constants.inputTemplateID : constants.outputTemplateID;\n\n\t\t// prompt for Connection String Setting Name\n\t\tlet connectionStringInfo: IConnectionStringInfo | undefined = { connectionStringSettingName: constants.sqlConnectionStringSetting, connectionInfo: connectionInfo };\n\t\tif (!isCreateNewProject && projectFile) {\n\t\t\t// if it is not a new project, we can prompt user for connection string setting name and connection string password prompts\n\t\t\ttelemetryStep = CreateAzureFunctionStep.getConnectionStringSettingName;\n\t\t\tconnectionStringInfo = await azureFunctionsUtils.promptAndUpdateConnectionStringSetting(vscode.Uri.parse(projectFile), connectionInfo);\n\t\t\tif (!connectionStringInfo) {\n\t\t\t\t// User cancelled connection string setting name prompt or connection string method prompt\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tTelemetryReporter.createActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, telemetryStep)\n\t\t\t\t.withAdditionalProperties(propertyBag)\n\t\t\t\t.withConnectionInfo(connectionInfo).send();\n\t\t}\n\t\t// additional execution step that will be used by vscode-azurefunctions to execute only when creating a new azure function project\n\t\tlet connectionStringExecuteStep = createAddConnectionStringStep(projectFolder, connectionInfo, connectionStringInfo.connectionStringSettingName);\n\n\t\t// create C# Azure Function with SQL Binding\n\t\ttelemetryStep = 'createFunctionAPI';\n\t\tawait azureFunctionApi.createFunction({\n\t\t\tlanguage: 'C#',\n\t\t\ttargetFramework: 'netcoreapp3.1',\n\t\t\tversion: '~3',\n\t\t\ttemplateId: templateId,\n\t\t\tfunctionName: functionName,\n\t\t\tfunctionSettings: {\n\t\t\t\tconnectionStringSetting: connectionStringInfo.connectionStringSettingName,\n\t\t\t\t...(selectedBindingType === BindingType.input && { object: objectName }),\n\t\t\t\t...(selectedBindingType === BindingType.output && { table: objectName })\n\t\t\t},\n\t\t\tfolderPath: projectFolder,\n\t\t\tsuppressCreateProjectPrompt: true,\n\t\t\t...(isCreateNewProject && { executeStep: connectionStringExecuteStep })\n\t\t});\n\t\tTelemetryReporter.createActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, telemetryStep)\n\t\t\t.withAdditionalProperties(propertyBag)\n\t\t\t.withConnectionInfo(connectionInfo).send();\n\n\t\t// check for the new function file to be created and dispose of the file system watcher\n\t\tconst timeoutForFunctionFile = utils.timeoutPromise(constants.timeoutAzureFunctionFileError);\n\t\tawait Promise.race([newFunctionFileObject.filePromise, timeoutForFunctionFile]);\n\t\ttelemetryStep = 'finishCreateFunction';\n\t\tpropertyBag.telemetryStep = telemetryStep;\n\t\texitReason = ExitReason.finishCreate;\n\t\tTelemetryReporter.createActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, TelemetryActions.finishCreateAzureFunctionWithSqlBinding)\n\t\t\t.withAdditionalProperties(propertyBag)\n\t\t\t.withConnectionInfo(connectionInfo).send();\n\t} catch (error) {\n\t\tlet errorType = utils.getErrorType(error);\n\t\tpropertyBag.telemetryStep = telemetryStep;\n\t\tif (errorType === 'TimeoutError') {\n\t\t\t// this error can be cause by many different scenarios including timeout or error occurred during createFunction\n\t\t\texitReason = ExitReason.timeout;\n\t\t\tconsole.log('Timed out waiting for Azure Function project to be created. This may not necessarily be an error, for example if the user canceled out of the create flow.');\n\t\t} else {\n\t\t\t// else an error would occur during the createFunction\n\t\t\texitReason = ExitReason.error;\n\t\t\tvoid vscode.window.showErrorMessage(constants.errorNewAzureFunction(error));\n\t\t}\n\t\tTelemetryReporter.createErrorEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, TelemetryActions.exitCreateAzureFunctionQuickpick, undefined, errorType)\n\t\t\t.withAdditionalProperties(propertyBag).send();\n\t\treturn;\n\t} finally {\n\t\tpropertyBag.telemetryStep = telemetryStep;\n\t\tpropertyBag.exitReason = exitReason;\n\t\tTelemetryReporter.createActionEvent(TelemetryViews.CreateAzureFunctionWithSqlBinding, TelemetryActions.exitCreateAzureFunctionQuickpick)\n\t\t\t.withAdditionalProperties(propertyBag).send();\n\t\tnewFunctionFileObject?.watcherDisposable.dispose();\n\t}\n}\n\n/**\n * Adds a SQL Binding to a specified Azure function in a file\n * @param bindingType Type of SQL Binding\n * @param filePath Path of the file where the Azure Functions are\n * @param functionName Name of the function where the SQL Binding is to be added\n * @param objectName Name of Object for the SQL Query\n * @param connectionStringSetting Setting for the connection string\n * @returns Azure Function SQL binding\n */\nexport async function addSqlBinding(\n\tbindingType: BindingType,\n\tfilePath: string,\n\tfunctionName: string,\n\tobjectName: string,\n\tconnectionStringSetting: string\n): Promise<ResultStatus> {\n\tconst params: AddSqlBindingParams = {\n\t\tbindingType: bindingType,\n\t\tfilePath: filePath,\n\t\tfunctionName: functionName,\n\t\tobjectName: objectName,\n\t\tconnectionStringSetting: connectionStringSetting\n\t};\n\n\tconst vscodeMssqlApi = await utils.getVscodeMssqlApi();\n\n\treturn await vscode.window.withProgress(\n\t\t{\n\t\t\tlocation: vscode.ProgressLocation.Notification,\n\t\t\ttitle: constants.addSqlBinding(functionName),\n\t\t\tcancellable: false\n\t\t}, async (_progress, _token) => {\n\t\t\treturn vscodeMssqlApi.sendRequest(azureFunctionsContracts.AddSqlBindingRequest.type, params);\n\t\t}\n\t);\n}\n\n/**\n * Gets the names of the Azure functions in the file\n * @param filePath Path of the file to get the Azure functions\n * @returns array of names of Azure functions in the file\n */\nexport async function getAzureFunctions(filePath: string): Promise<GetAzureFunctionsResult> {\n\tconst params: GetAzureFunctionsParams = {\n\t\tfilePath: filePath\n\t};\n\tconst vscodeMssqlApi = await utils.getVscodeMssqlApi();\n\n\treturn vscodeMssqlApi.sendRequest(azureFunctionsContracts.GetAzureFunctionsRequest.type, params);\n}\n","module.exports = require(\"@opentelemetry/tracing\");","module.exports = require(\"applicationinsights-native-metrics\");","module.exports = require(\"assert\");","module.exports = require(\"async_hooks\");","module.exports = require(\"azdata\");","module.exports = require(\"child_process\");","module.exports = require(\"console\");","module.exports = require(\"constants\");","module.exports = require(\"crypto\");","module.exports = require(\"dns\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"module\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"stream\");","module.exports = require(\"timers\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"vscode\");","module.exports = require(\"zlib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as vscode from 'vscode';\nimport { IConnectionInfo, ITreeNodeInfo } from 'vscode-mssql';\nimport { IExtension, BindingType, GetAzureFunctionsResult, ResultStatus, IConnectionStringInfo } from 'sql-bindings';\nimport { addSqlBinding, createAzureFunction, getAzureFunctions } from './services/azureFunctionsService';\nimport { launchAddSqlBindingQuickpick } from './dialogs/addSqlBindingQuickpick';\nimport { promptForBindingType, promptAndUpdateConnectionStringSetting, promptForObjectName } from './common/azureFunctionsUtils';\n\nexport async function activate(context: vscode.ExtensionContext): Promise<IExtension> {\n\t// register the add sql binding command\n\tcontext.subscriptions.push(vscode.commands.registerCommand('sqlBindings.addSqlBinding', async (uri: vscode.Uri | undefined) => { return launchAddSqlBindingQuickpick(uri); }));\n\t// Generate Azure Function command\n\tcontext.subscriptions.push(vscode.commands.registerCommand('sqlBindings.createAzureFunction', async (node?: ITreeNodeInfo) => {\n\t\treturn await createAzureFunction(node);\n\t}));\n\treturn {\n\t\taddSqlBinding: async (bindingType: BindingType, filePath: string, functionName: string, objectName: string, connectionStringSetting: string): Promise<ResultStatus> => {\n\t\t\treturn addSqlBinding(bindingType, filePath, functionName, objectName, connectionStringSetting);\n\t\t},\n\t\tcreateAzureFunction: async (): Promise<void> => {\n\t\t\treturn createAzureFunction();\n\t\t},\n\t\tpromptForBindingType: async (funcName?: string): Promise<BindingType | undefined> => {\n\t\t\treturn promptForBindingType(funcName);\n\t\t},\n\t\tpromptForObjectName: async (bindingType: BindingType, connectionInfo?: IConnectionInfo): Promise<string | undefined> => {\n\t\t\treturn promptForObjectName(bindingType, connectionInfo);\n\t\t},\n\t\tpromptAndUpdateConnectionStringSetting: async (projectUri: vscode.Uri | undefined, connectionInfo?: IConnectionInfo): Promise<IConnectionStringInfo | undefined> => {\n\t\t\treturn promptAndUpdateConnectionStringSetting(projectUri, connectionInfo);\n\t\t},\n\t\tgetAzureFunctions: async (filePath: string): Promise<GetAzureFunctionsResult> => {\n\t\t\treturn getAzureFunctions(filePath);\n\t\t}\n\t};\n}\n\nexport function deactivate(): void {\n}\n"],"sourceRoot":""}